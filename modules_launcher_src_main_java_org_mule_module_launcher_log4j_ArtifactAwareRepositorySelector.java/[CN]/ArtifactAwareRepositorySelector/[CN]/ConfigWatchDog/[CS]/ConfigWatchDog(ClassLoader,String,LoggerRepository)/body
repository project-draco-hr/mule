{
  if (classLoader instanceof ArtifactClassLoader) {
    ((ArtifactClassLoader)classLoader).addShutdownListener(new ShutdownListener(){
      @Override public void execute(){
        final ClassLoader ccl=Thread.currentThread().getContextClassLoader();
        ArtifactAwareRepositorySelector.this.cache.remove(ccl);
        ConfigWatchDog.this.interrupt();
      }
    }
);
  }
 else   if (!(classLoader instanceof MuleContainerSystemClassLoader)) {
    throw new MuleRuntimeException(CoreMessages.createStaticMessage("Can't create a ConfigWatchDog thread for " + "current class loader of type %s",classLoader.getClass().getName()));
  }
  this.filename=filename;
  this.file=new File(filename);
  this.lastModif=file.lastModified();
  setDaemon(true);
  this.repository=repository;
  this.delay=10000;
}
