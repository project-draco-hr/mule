{
  Map foundAttributesCount=new HashMap();
  NamedNodeMap attributes=element.getAttributes();
  for (int i=0; i < attributes.getLength(); i++) {
    String alias=CoreXMLUtils.attributeName((Attr)attributes.item(i));
    String name=null == config ? alias : config.translateName(alias);
    if (knownAttributes.containsKey(name)) {
      Integer index=(Integer)knownAttributes.get(name);
      if (!foundAttributesCount.containsKey(index)) {
        foundAttributesCount.put(index,new Integer(0));
      }
      foundAttributesCount.put(index,new Integer(1 + ((Integer)foundAttributesCount.get(index)).intValue()));
    }
  }
  boolean ok=false;
  Iterator indices=foundAttributesCount.keySet().iterator();
  while (indices.hasNext() && !ok) {
    Object index=indices.next();
    Object count=foundAttributesCount.get(index);
    ok=numberOfAttributes.get(index).equals(count);
  }
  if (!ok) {
    throw new CheckRequiredAttributesException(element,summary);
  }
}
