{
  ServerNotificationManager notificationManager=event.getMuleContext().getNotificationManager();
  boolean fireNotification=event.isNotificationsEnabled();
  if (fireNotification) {
    fireNotification(notificationManager,event.getFlowConstruct(),event,messageProcessor,null,MessageProcessorNotification.MESSAGE_PROCESSOR_PRE_INVOKE);
  }
  MuleEvent result=null;
  MessagingException exceptionThrown=null;
  try {
    if (next == null) {
      result=messageProcessor.process(event);
    }
 else {
      result=next.execute(messageProcessor,event);
    }
  }
 catch (  MessagingException e) {
    exceptionThrown=e;
    throw e;
  }
catch (  MuleException e) {
    exceptionThrown=new MessagingException(event,e,messageProcessor);
    throw exceptionThrown;
  }
 finally {
    if (fireNotification) {
      fireNotification(notificationManager,event.getFlowConstruct(),result != null ? result : event,messageProcessor,exceptionThrown,MessageProcessorNotification.MESSAGE_PROCESSOR_POST_INVOKE);
    }
  }
  return result;
}
