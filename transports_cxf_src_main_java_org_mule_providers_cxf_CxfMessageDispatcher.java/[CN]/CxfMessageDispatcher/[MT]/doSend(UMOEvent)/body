{
  ((ClientImpl)client).setSynchronousTimeout(event.getTimeout());
  String method=getMethod(event);
  Map<String,Object> exProps=new HashMap<String,Object>();
  exProps.put(MuleProperties.MULE_EVENT_PROPERTY,event);
  Object[] arr=event.getMessage().getPropertyNames().toArray();
  String head;
  for (int i=0; i < arr.length; i++) {
    head=(String)arr[i];
    if ((head != null) && (!head.startsWith("MULE"))) {
      exProps.put((String)arr[i],event.getMessage().getProperty((String)arr[i]));
    }
  }
  Endpoint ep=client.getEndpoint();
  QName q=new QName(ep.getService().getName().getNamespaceURI(),method);
  BindingOperationInfo bop=ep.getBinding().getBindingInfo().getOperation(q);
  if (bop == null) {
    throw new Exception("No such operation: " + method);
  }
  if (bop.isUnwrappedCapable()) {
    bop=bop.getUnwrappedOperation();
  }
  Object[] response=client.invoke(bop,getArgs(event),exProps);
  UMOMessage result=null;
  if (response != null && response.length <= 1) {
    if (response.length == 1) {
      result=new MuleMessage(response[0],event.getMessage());
    }
  }
 else {
    result=new MuleMessage(response,event.getMessage());
  }
  return result;
}
