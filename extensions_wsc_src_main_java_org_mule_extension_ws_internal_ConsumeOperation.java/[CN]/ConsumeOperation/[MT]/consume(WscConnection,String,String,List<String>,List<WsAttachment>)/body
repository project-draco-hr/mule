{
  Map<String,Object> ctx=getContext(headers,attachments,operation);
  Exchange exchange=new ExchangeImpl();
  XMLStreamReader request=stringToXmlStreamReader(body,connection,operation);
  Object[] response;
  try {
    response=connection.invoke(request,ctx,exchange);
    return asResult(processOutput(response),processAttributes(exchange));
  }
 catch (  SoapFault sf) {
    throw new SoapFaultException(sf.getFaultCode(),sf.getSubCode(),sf.getMessage(),sf.getDetail());
  }
catch (  Exception e) {
    throw new WscException(e);
  }
}
