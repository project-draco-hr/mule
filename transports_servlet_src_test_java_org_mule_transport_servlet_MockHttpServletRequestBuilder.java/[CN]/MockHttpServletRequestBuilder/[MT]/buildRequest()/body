{
  Mock mockRequest=new Mock(HttpServletRequest.class);
  mockRequest.expectAndReturn("getMethod",method);
  Enumeration<?> emptyEnumeration=new Hashtable<Object,Object>().elements();
  mockRequest.expectAndReturn("getParameterNames",emptyEnumeration);
  mockRequest.expectAndReturn("getRequestURI",requestUri);
  mockRequest.expectAndReturn("getQueryString",queryString);
  mockRequest.expectAndReturn("getInputStream",inputStream);
  mockRequest.expectAndReturn("getSession",C.ANY_ARGS,session);
  mockRequest.expectAndReturn("getCharacterEncoding",characterEncoding);
  mockRequest.expectAndReturn("getLocalPort",localPort);
  mockRequest.expectAndReturn("getContentType",contentType);
  mockRequest.expectAndReturn("getContentType",contentType);
  mockRequest.expectAndReturn("getRemoteAddr",host);
  addParameterExpectations(mockRequest);
  addAttributeExpectations(mockRequest);
  addHeaderExpectations(mockRequest);
  mockRequest.expectAndReturn("getHeader",C.eq(HttpConstants.HEADER_HOST),host);
  return (HttpServletRequest)mockRequest.proxy();
}
