{
  Enumeration<?> nameEnum=null;
  if (parameters != null) {
    Set<String> keys=parameters.keySet();
    nameEnum=new IteratorEnumeration(keys.iterator());
    for (    Map.Entry<String,String[]> entry : parameters.entrySet()) {
      String key=entry.getKey();
      String[] value=entry.getValue();
      when(mockRequest.getParameterValues(eq(key))).thenReturn(value);
      when(mockRequest.getParameter(eq(key))).thenReturn((value.length > 0) ? value[0] : null);
    }
  }
  when(mockRequest.getParameterNames()).thenReturn(nameEnum);
  when(mockRequest.getParameterMap()).thenReturn(parameters);
}
