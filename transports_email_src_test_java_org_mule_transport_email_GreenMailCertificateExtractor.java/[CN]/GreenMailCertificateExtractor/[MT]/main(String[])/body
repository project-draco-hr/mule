{
  DummyTrustManager trustManager=new DummyTrustManager();
  X509Certificate[] trustedCerts=trustManager.getAcceptedIssuers();
  X509Certificate[] checkCerts=(new DummyTrustManager()).getAcceptedIssuers();
  logger.info("Have " + trustedCerts.length + " certificates");
  assert(trustedCerts.length == checkCerts.length);
  for (int i=0; i < trustedCerts.length; ++i) {
    assert(trustedCerts[i].equals(checkCerts[i]));
  }
  KeyStore ks=KeyStore.getInstance(KeyStore.getDefaultType());
  char[] pass="changeit".toString().toCharArray();
  ks.load(new ByteArrayInputStream(hardCodedKeystore),pass);
  Enumeration aliases=ks.aliases();
  while (aliases.hasMoreElements()) {
    String alias=(String)aliases.nextElement();
    logger.info(alias);
    Certificate certificate=ks.getCertificate(alias);
    logger.info(certificate);
    assert(certificate instanceof X509Certificate);
    X509Certificate x509=(X509Certificate)certificate;
    (new FileOutputStream(FileUtils.newFile("/tmp/greenmail-" + alias))).write(x509.getEncoded());
  }
}
