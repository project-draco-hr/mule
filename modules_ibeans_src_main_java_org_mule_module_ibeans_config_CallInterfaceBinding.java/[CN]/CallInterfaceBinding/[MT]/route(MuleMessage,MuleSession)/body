{
  if (session == null) {
    session=new DefaultMuleSession(flow,message.getMuleContext());
  }
  MuleEvent result=process(new DefaultMuleEvent(message,endpoint.getExchangePattern(),session));
  if (result != null) {
    return result.getMessage();
  }
 else {
    return null;
  }
}
