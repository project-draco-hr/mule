{
  if (isReceiveMessagesInTransaction()) {
    MuleEvent message=getFirstMessage();
    if (message == null) {
      return null;
    }
    List<MuleMessage> messages=new ArrayList<MuleMessage>(1);
    ((DefaultMuleMessage)message.getMessage()).setMuleContext(endpoint.getMuleContext());
    messages.add(message.getMessage());
    return messages;
  }
 else {
    return getFirstMessages();
  }
}
