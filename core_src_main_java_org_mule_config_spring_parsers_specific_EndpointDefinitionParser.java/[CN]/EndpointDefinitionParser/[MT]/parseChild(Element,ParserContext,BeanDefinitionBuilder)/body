{
  Element parent=(Element)element.getParentNode();
  if (parent.getNodeName().equals("beans")) {
    builder.addPropertyValue("type",UMOImmutableEndpoint.ENDPOINT_TYPE_GLOBAL);
    if (null == element.getAttributeNode(ADDRESS_ATTRIBUTE)) {
      throw new IllegalStateException("A global endpoint requires an " + ADDRESS_ATTRIBUTE + " attribute.");
    }
    if (null != element.getAttributeNode(ENDPOINT_REF_ATTRIBUTE)) {
      throw new IllegalStateException("A global endpoint cannot contain a " + ENDPOINT_REF_ATTRIBUTE + " attribute.");
    }
  }
 else {
    if (null == element.getAttributeNode(ADDRESS_ATTRIBUTE)) {
      if (null == element.getAttributeNode(ENDPOINT_REF_ATTRIBUTE)) {
        throw new IllegalStateException("An endpoint requires either an " + ADDRESS_ATTRIBUTE + " or a "+ ENDPOINT_REF_ATTRIBUTE+ " attribute.");
      }
    }
 else {
      if (null != element.getAttributeNode(ENDPOINT_REF_ATTRIBUTE)) {
        throw new IllegalStateException("The " + ADDRESS_ATTRIBUTE + " and "+ ENDPOINT_REF_ATTRIBUTE+ " attributes are mutually exclusive.");
      }
    }
  }
  if (StringUtils.isNotBlank(element.getAttribute("connector"))) {
    builder.addDependsOn(element.getAttribute("connector"));
  }
  processTransformerDependencies(builder,element,"transformers");
  processTransformerDependencies(builder,element,"responseTransformers");
  super.parseChild(element,parserContext,builder);
}
