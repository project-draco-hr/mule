{
  MediaType mediaType=resolveMediaType(value,operationContext);
  if (value instanceof OperationResult) {
    OperationResult operationResult=(OperationResult)value;
    return MuleMessage.builder().payload(operationResult.getOutput()).mediaType(mediaType).attributes(resolveAttributes(operationResult,operationContext)).build();
  }
 else {
    return MuleMessage.builder().payload(value).mediaType(mediaType).attributes(operationContext.getEvent().getMessage().getAttributes()).build();
  }
}
