{
  muleContext=new DefaultMuleContextFactory().createMuleContext(new OsgiMuleContextBuilder(bc));
  muleContext.start();
  Dictionary headers=bc.getBundle().getHeaders();
  Hashtable osgiProps=new Hashtable();
  osgiProps.put(Constants.SERVICE_PID,headers.get(Constants.BUNDLE_SYMBOLICNAME) + "." + muleContext.getConfiguration().getId());
  osgiProps.put(Constants.SERVICE_DESCRIPTION,headers.get(Constants.BUNDLE_DESCRIPTION));
  osgiProps.put(Constants.SERVICE_VENDOR,headers.get(Constants.BUNDLE_VENDOR));
  muleContextRef=bc.registerService(MuleContext.class.getName(),muleContext,osgiProps);
}
