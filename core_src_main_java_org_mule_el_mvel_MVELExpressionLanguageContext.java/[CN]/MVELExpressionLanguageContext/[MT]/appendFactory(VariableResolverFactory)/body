{
  if (nextFactory instanceof InternalVariableResolverFactory) {
    setNextFactory(resolverFactory);
    resolverFactory.setNextFactory(localFactory);
  }
 else {
    VariableResolverFactory vrf=nextFactory;
    while (vrf.getNextFactory() != null && !(vrf.getNextFactory() instanceof InternalVariableResolverFactory)) {
      vrf=vrf.getNextFactory();
    }
    vrf.setNextFactory(resolverFactory);
    resolverFactory.setNextFactory(localFactory);
  }
}
