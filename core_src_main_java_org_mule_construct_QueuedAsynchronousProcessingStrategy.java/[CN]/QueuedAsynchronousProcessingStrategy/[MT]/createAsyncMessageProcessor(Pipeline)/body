{
  MuleContext muleContext=pipeline.getMuleContext();
  Integer timeout=queueTimeout != null ? queueTimeout : muleContext.getConfiguration().getDefaultQueueTimeout();
  initQueueStore(muleContext);
  String threadName=ThreadNameHelper.flow(pipeline.getMuleContext(),pipeline.getName());
  QueueProfile queueProfile=new QueueProfile(maxQueueSize,queueStore);
  ThreadingProfile threadingProfile=createThreadingProfile(muleContext);
  return new SedaStageInterceptingMessageProcessor(threadName,queueProfile,timeout,threadingProfile,queueStatistics,muleContext);
}
