{
  TestSubscriptionEventBean subscriptionBean=(TestSubscriptionEventBean)muleContext.getRegistry().lookupObject("testSubscribingEventBean1");
  assertNotNull(subscriptionBean);
  Latch whenFinished=new Latch();
  subscriptionBean.setEventCallback(new CountingEventCallback(eventCounter1,1,whenFinished));
  MuleClient client=new MuleClient(muleContext);
  client.send("vm://event.multicaster","Test Spring MuleEvent",null);
  whenFinished.await(DEFAULT_LATCH_TIMEOUT,TimeUnit.MILLISECONDS);
  assertEquals(1,eventCounter1.get());
}
