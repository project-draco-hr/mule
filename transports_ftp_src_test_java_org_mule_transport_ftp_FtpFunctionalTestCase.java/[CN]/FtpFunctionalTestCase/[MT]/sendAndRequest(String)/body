{
  CountDownLatch latch=new CountDownLatch(1);
  AtomicReference<String> message=new AtomicReference<String>();
  Object component=getComponent("testComponent");
  assertNotNull(component);
  assertTrue("FunctionalTestComponent expected",component instanceof FunctionalTestComponent);
  FunctionalTestComponent ftc=(FunctionalTestComponent)component;
  ftc.setEventCallback(new FunctionalEventCallback(latch,message));
  MuleClient client=muleContext.getClient();
  client.dispatch(getMuleFtpEndpoint(),inputMessage,null);
  latch.await(getTimeout(),TimeUnit.MILLISECONDS);
  assertEquals(inputMessage,message.get());
}
