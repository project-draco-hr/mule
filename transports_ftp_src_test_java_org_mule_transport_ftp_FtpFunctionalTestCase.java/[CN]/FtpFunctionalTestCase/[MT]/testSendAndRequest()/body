{
  CountDownLatch latch=new CountDownLatch(1);
  AtomicReference message=new AtomicReference();
  Object component=getComponent("testComponent");
  assertNotNull(component);
  assertTrue("FunctionalTestComponent expected",component instanceof FunctionalTestComponent);
  FunctionalTestComponent ftc=(FunctionalTestComponent)component;
  ftc.setEventCallback(new FunctionalEventCallback(latch,message));
  MuleClient client=new MuleClient();
  client.dispatch(getMuleFtpEndpoint(),TEST_MESSAGE,null);
  latch.await(getTimeout(),TimeUnit.MILLISECONDS);
  assertEquals(TEST_MESSAGE,message.get());
  Thread.sleep(500);
}
