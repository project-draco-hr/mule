{
  MuleClient muleClient=new MuleClient(muleContext);
  Runtime.getRuntime().exec(new String[]{"chmod","320",OUTBOUND_ENDPOINT_DIR});
  final CountDownLatch exceptionLatch=new CountDownLatch(1);
  muleContext.registerListener(new LatchDownExceptionListener(exceptionLatch));
  muleClient.dispatch("sftp://localhost:" + port.getNumber() + "/"+ INBOUND_ENDPOINT_NAME,TEST_MESSAGE,MESSAGE_PROPERTIES);
  assertTrue(exceptionLatch.await(EXCEPTION_TIMEOUT,TimeUnit.MILLISECONDS));
  assertTrue(Arrays.asList(sftpClient.listFiles()).contains(FILENAME));
}
