{
  String locationValue=locationEvaluator.resolveStringValue(message);
  if (locationValue == null) {
    throw new IllegalArgumentException("Location cannot be null");
  }
  String location=locationValue.toString();
  try {
    String template=IOUtils.getResourceAsString(location,this.getClass());
    return muleContext.getExpressionManager().parse(template,message);
  }
 catch (  IOException e) {
    throw new TransformerException(this,e);
  }
}
