{
  if (transportResponse == null) {
    return null;
  }
  if (VoidMuleEvent.getInstance().equals(transportResponse)) {
    return transportResponse;
  }
  Object payload;
  if (response == null || response.length == 0) {
    payload=null;
  }
 else   if (response.length == 1) {
    payload=response[0];
  }
 else {
    payload=response;
  }
  MuleMessage message=transportResponse.getMessage();
  Object httpStatusCode=message.getInboundProperty(HTTP_STATUS_PROPERTY);
  if (isProxy() && httpStatusCode != null) {
    message.setOutboundProperty(HTTP_STATUS_PROPERTY,httpStatusCode);
  }
  Class payloadClass=payload != null ? payload.getClass() : Object.class;
  message.setPayload(payload,DataTypeFactory.create(payloadClass,getMimeType()));
  return transportResponse;
}
