{
  Event event=testEvent();
  MuleContextAware targetMuleContextAwareAware=mock(MuleContextAware.class,INITIALIZABLE_MESSAGE_PROCESSOR);
  when(((Processor)targetMuleContextAwareAware).process(event)).thenReturn(result);
  FlowRefFactoryBean flowRefFactoryBean=createDynamicFlowRefFactoryBean((Processor)targetMuleContextAwareAware);
  assertSame(result,getFlowRefProcessor(flowRefFactoryBean).process(event));
  verify(targetMuleContextAwareAware).setMuleContext(mockMuleContext);
}
