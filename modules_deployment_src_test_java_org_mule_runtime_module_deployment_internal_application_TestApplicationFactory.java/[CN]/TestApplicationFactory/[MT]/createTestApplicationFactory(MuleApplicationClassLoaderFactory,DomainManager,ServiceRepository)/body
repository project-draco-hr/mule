{
  ArtifactClassLoaderFilterFactory classLoaderFilterFactory=new ArtifactClassLoaderFilterFactory();
  ArtifactPluginDescriptorFactory artifactPluginDescriptorFactory=new ArtifactPluginDescriptorFactory(classLoaderFilterFactory);
  ArtifactPluginDescriptorLoader artifactPluginDescriptorLoader=new ArtifactPluginDescriptorLoader(artifactPluginDescriptorFactory);
  TestEmptyApplicationPluginRepository applicationPluginRepository=new TestEmptyApplicationPluginRepository();
  ApplicationDescriptorFactory applicationDescriptorFactory=new ApplicationDescriptorFactory(artifactPluginDescriptorLoader,applicationPluginRepository);
  ApplicationClassLoaderBuilderFactory applicationClassLoaderBuilderFactory=new ApplicationClassLoaderBuilderFactory(applicationClassLoaderFactory,applicationPluginRepository,new ArtifactPluginClassLoaderFactory());
  return new TestApplicationFactory(applicationClassLoaderBuilderFactory,applicationDescriptorFactory,applicationPluginRepository,domainManager,serviceRepository);
}
