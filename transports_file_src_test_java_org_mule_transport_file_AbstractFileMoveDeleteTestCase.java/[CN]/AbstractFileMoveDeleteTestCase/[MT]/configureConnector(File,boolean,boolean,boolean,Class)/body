{
  FileConnector fc=new FileConnector();
  if (messageAdaptor != null) {
    Map overrides=new HashedMap();
    overrides.put("message.adapter",messageAdaptor.getName());
    fc.setServiceOverrides(overrides);
  }
  fc.setName("moveDeleteConnector");
  File moveToDir=new File(inFile.getParent() + "/moveto/");
  moveToDir.mkdir();
  muleContext.getRegistry().registerConnector(fc);
  if (move) {
    fc.setMoveToDirectory(moveToDir.getPath());
  }
  fc.setAutoDelete(delete);
  fc.setStreaming(stream);
  return moveToDir;
}
