{
  SAXParserFactory saxParserFactory=SAXParserFactory.newInstance();
  saxParserFactory.setNamespaceAware(namespaceAware);
  if (validationMode != XmlValidationModeDetector.VALIDATION_NONE) {
    saxParserFactory.setValidating(true);
    if (validationMode == XmlValidationModeDetector.VALIDATION_XSD) {
      saxParserFactory.setNamespaceAware(true);
    }
  }
  SAXParser saxParser=saxParserFactory.newSAXParser();
  if (validationMode == XmlValidationModeDetector.VALIDATION_XSD) {
    saxParser.setProperty(SCHEMA_LANGUAGE_ATTRIBUTE,XSD_SCHEMA_LANGUAGE);
  }
  return saxParser.getXMLReader();
}
