{
  TransformerFactory transformerFactory=TransformerFactory.newInstance();
  if (logger.isDebugEnabled()) {
    logger.debug("Using JAXP transformer provider [" + transformerFactory.getClass().getName() + "]");
  }
  if (validationMode != XmlValidationModeDetector.VALIDATION_NONE) {
    if ("net.sf.saxon.TransformerFactoryImpl".equals(transformerFactory.getClass().getName())) {
      transformerFactory.setFeature("http://saxon.sf.net/feature/validation",true);
    }
  }
  return transformerFactory.newTransformer();
}
