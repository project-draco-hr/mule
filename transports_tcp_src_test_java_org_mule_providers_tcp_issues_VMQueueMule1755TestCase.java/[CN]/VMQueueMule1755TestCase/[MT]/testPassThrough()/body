{
  MuleClient client=new MuleClient();
  Set polos=new HashSet(Arrays.asList(new String[]{"Marco","Niccolo","Maffeo"}));
  Iterator people=polos.iterator();
  while (people.hasNext()) {
    client.dispatch("tcp://localhost:65432",people.next(),null);
  }
  for (int i=0; i < 3; ++i) {
    UMOMessage response=client.receive("queue",1000);
    assertNotNull("Response is null",response);
    String person=(String)response.getPayload();
    StringTokenizer names=new StringTokenizer(person);
    assertTrue(person,polos.contains(names.nextToken()));
    polos.remove(person);
  }
}
