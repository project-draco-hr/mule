{
  if (!isPrereqsMet("org.mule.providers.gs.GSFunctionalTestCase.testReceivesWithTemplates()"))   return;
  MuleClient client=new MuleClient();
  Order order=new Order();
  order.setProcessed(Boolean.FALSE);
  client.send("gs:java://localhost/mule-space_container/mule-space?schema=cache",order,null);
  Thread.sleep(2000L);
  assertEquals(1,unprocessedCount);
  assertEquals(0,processedCount);
  client.send("gs:java://localhost/mule-space_container/mule-space?schema=cache",order,null);
  Thread.sleep(1000L);
  assertEquals(2,unprocessedCount);
  assertEquals(0,processedCount);
  order.setProcessed(Boolean.TRUE);
  client.send("gs:java://localhost/mule-space_container/mule-space?schema=cache",order,null);
  Thread.sleep(1000L);
  assertEquals(1,processedCount);
  assertEquals(2,unprocessedCount);
  client.send("gs:java://localhost/mule-space_container/mule-space?schema=cache",order,null);
  Thread.sleep(1000L);
  assertEquals(2,processedCount);
  assertEquals(2,unprocessedCount);
}
