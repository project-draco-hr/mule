{
  if (purgeQueuesOnTearDown) {
    purge(getInboundQueueName());
    purge(getOutboundQueueName());
    purgeTopics();
  }
  super.doTearDown();
  if (client != null) {
    client.dispose();
  }
  Transaction tx=TransactionCoordination.getInstance().getTransaction();
  if (tx != null) {
    TransactionCoordination.getInstance().unbindTransaction(tx);
    logger.warn("Transaction was active when this test ended");
  }
}
