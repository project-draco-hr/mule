{
  Object data=event.getTransformedMessage();
  UMOMessage message=new MuleMessage(data,event.getMessage());
  byte[] buf;
  if (data instanceof byte[]) {
    buf=(byte[])data;
  }
 else {
    buf=data.toString().getBytes(event.getEncoding());
  }
  FileOutputStream fos=(FileOutputStream)getOutputStream(event.getEndpoint(),message);
  try {
    fos.write(buf);
  }
  finally {
    fos.close();
  }
}
