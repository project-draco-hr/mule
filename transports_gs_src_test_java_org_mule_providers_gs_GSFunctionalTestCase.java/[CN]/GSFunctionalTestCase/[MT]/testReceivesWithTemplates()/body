{
  if (!isPrereqsMet("org.mule.providers.gs.GSFunctionalTestCase.testReceivesWithTemplates()")) {
    return;
  }
  MuleClient client=new MuleClient();
  Order order=new Order();
  order.setProcessed(Boolean.FALSE);
  client.send("gs:java://localhost/mule-space_container/mule-space?schema=cache",order,null);
  Thread.sleep(2000L);
  assertEquals(1,unprocessedCount.get());
  assertEquals(0,processedCount.get());
  client.send("gs:java://localhost/mule-space_container/mule-space?schema=cache",order,null);
  Thread.sleep(1000L);
  assertEquals(2,unprocessedCount.get());
  assertEquals(0,processedCount.get());
  order.setProcessed(Boolean.TRUE);
  client.send("gs:java://localhost/mule-space_container/mule-space?schema=cache",order,null);
  Thread.sleep(1000L);
  assertEquals(1,processedCount.get());
  assertEquals(2,unprocessedCount.get());
  client.send("gs:java://localhost/mule-space_container/mule-space?schema=cache",order,null);
  Thread.sleep(1000L);
  assertEquals(2,processedCount.get());
  assertEquals(2,unprocessedCount.get());
}
