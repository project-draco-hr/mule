{
  AbstractConnector connector=null;
  if (e instanceof InvocationTargetException || e instanceof MuleRuntimeException) {
    Throwable t=e.getCause();
    if (t != null) {
      e=t instanceof Exception ? (Exception)t : new Exception(t);
    }
  }
  if (enableNotifications) {
    if (e instanceof SecurityException) {
      fireNotification(new SecurityNotification((SecurityException)e,SecurityNotification.SECURITY_AUTHENTICATION_FAILED));
    }
 else {
      fireNotification(new ExceptionNotification(e));
    }
  }
  if (e instanceof ConnectException && ((AbstractConnector)((ConnectException)e).getFailed()).isReconnecting() == false) {
    logger.info("Exception caught is a ConnectException, attempting to reconnect...");
    connector=(AbstractConnector)((ConnectException)e).getFailed();
    connector.setReconnecting(true);
    try {
      logger.debug("Disconnecting " + connector.getName());
      connector.disconnect();
    }
 catch (    Exception e1) {
      logger.error(e1.getMessage());
    }
  }
  logException(e);
  handleTransaction(e);
  if (RequestContext.getEvent() != null) {
    RequestContext.setExceptionPayload(new DefaultExceptionPayload(e));
  }
  if (connector != null) {
    try {
      logger.debug("Reconnecting " + connector.getName());
      connector.connect();
      connector.setReconnecting(false);
    }
 catch (    Exception e2) {
      logger.error(e2.getMessage());
    }
  }
}
