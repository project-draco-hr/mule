{
  FTPClient client=createFtpClient();
  if (uri.getPort() > 0) {
    client.connect(uri.getHost(),uri.getPort());
  }
 else {
    client.connect(uri.getHost());
  }
  if (!FTPReply.isPositiveCompletion(client.getReplyCode())) {
    throw new IOException("Ftp connect failed: " + client.getReplyCode());
  }
  if (!client.login(uri.getUser(),uri.getPassword())) {
    throw new IOException("Ftp login failed: " + client.getReplyCode());
  }
  if (!client.setFileType(FTP.BINARY_FILE_TYPE)) {
    throw new IOException("Ftp error. Couldn't set BINARY transfer type: " + client.getReplyCode());
  }
  return client;
}
