{
  List<MuleMessage> list=new ArrayList<>();
  for (  MuleEvent event : nonNullResults) {
    list.add(event.getMessage());
  }
  final MuleMessage coll=MuleMessage.builder().collectionPayload(list,MuleMessage.class).rootId(previous.getMessage().getMessageRootId()).build();
  MuleEvent resultEvent=new DefaultMuleEvent(coll,previous,previous.getSession());
  for (  String name : previous.getFlowVariableNames()) {
    resultEvent.setFlowVariable(name,previous.getFlowVariable(name),previous.getFlowVariableDataType(name));
  }
  setCurrentEvent(resultEvent);
  return resultEvent;
}
