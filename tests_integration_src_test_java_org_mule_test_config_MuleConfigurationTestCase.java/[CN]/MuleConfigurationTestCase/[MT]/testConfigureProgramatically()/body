{
  DefaultMuleConfiguration config=new DefaultMuleConfiguration();
  config.setDefaultEncoding("UTF-16");
  config.setDefaultSynchronousEndpoints(true);
  config.setSystemModelType("direct");
  config.setDefaultResponseTimeout(30000);
  config.setDefaultTransactionTimeout(60000);
  config.setWorkingDirectory(workingDirectory);
  config.setClientMode(true);
  ThreadSafeAccess.AccessControl.setFailOnMessageScribbling(false);
  config.setId("MY_SERVER");
  config.setDomainId("MY_DOMAIN");
  config.setCacheMessageAsBytes(false);
  config.setEnableStreaming(false);
  ThreadSafeAccess.AccessControl.setAssertMessageAccess(false);
  config.setAutoWrapMessageAwareTransform(false);
  MuleContextBuilder contextBuilder=new DefaultMuleContextBuilder();
  contextBuilder.setMuleConfiguration(config);
  muleContext=new DefaultMuleContextFactory().createMuleContext(contextBuilder);
  muleContext.start();
  verifyConfiguration();
}
