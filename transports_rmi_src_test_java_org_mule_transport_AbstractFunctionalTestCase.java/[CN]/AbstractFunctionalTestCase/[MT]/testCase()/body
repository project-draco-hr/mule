{
  MuleClient client=new MuleClient();
  MuleMessage message=client.send("vm://testin",new Integer(12),null);
  assertNotNull(message);
  Integer payload=(Integer)message.getPayload();
  assertEquals(payload,new Integer(22));
  message=client.send("vm://testin","test matching component first time",null);
  assertNotNull(message);
  assertEquals((String)message.getPayload(),"emit tsrif tnenopmoc gnihctam tset");
  message=client.send("vm://testin","test mathching component second time",null);
  assertNotNull(message);
  assertEquals((String)message.getPayload(),"emit dnoces tnenopmoc gnihchtam tset");
  message=client.send("vm://testin",new Integer(15),null);
  assertNotNull(message);
  payload=(Integer)message.getPayload();
  assertEquals(payload,new Integer(25));
}
