{
  Flow flowConstruct=(Flow)muleContext.getRegistry().lookupFlowConstruct("updateBulk");
  List<MessageProcessor> messageProcessors=flowConstruct.getMessageProcessors();
  AbstractDbMessageProcessor queryMessageProcessor=(AbstractDbMessageProcessor)messageProcessors.get(0);
  List<String> planetNames=new ArrayList<>();
  planetNames.add(EARTH.getName());
  planetNames.add(MARS.getName());
  final MuleEvent muleEvent=getTestEvent(planetNames);
  final List<FieldDebugInfo<?>> debugInfo=queryMessageProcessor.getDebugInfo(muleEvent);
  assertThat(debugInfo,is(not(nullValue())));
  assertThat(debugInfo.size(),equalTo(2));
  List<Matcher<FieldDebugInfo<?>>> queryMatcher=new ArrayList<>();
  queryMatcher.add(fieldLike(SQL_TEXT_DEBUG_FIELD,String.class,"update PLANET set NAME='Mercury' where NAME=?"));
  queryMatcher.add(fieldLike(TYPE_DEBUG_FIELD,String.class,UPDATE.toString()));
  assertThat(debugInfo,hasItem(objectLike(QUERY_DEBUG_FIELD,Query.class,queryMatcher)));
  assertThat(debugInfo,hasItem(objectLike(INPUT_PARAMS_DEBUG_FIELD,List.class,createExpectedParamSetMatchers())));
}
