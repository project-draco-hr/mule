{
  UMOEndpointURI endpointUri=new MuleEndpointURI(action.getEndpoint());
  UMOEndpoint endpoint=MuleEndpoint.getOrCreateEndpointForUri(endpointUri,UMOEndpoint.ENDPOINT_TYPE_SENDER);
  UMOMessageDispatcher dispatcher=endpoint.getConnector().getDispatcher(action.getEndpoint());
  long timeout=PropertiesHelper.getLongProperty(action.getProperties(),"timeout",MuleManager.getConfiguration().getSynchronousEventTimeout());
  try {
    UMOEndpointURI ep=new MuleEndpointURI(action.getEndpoint());
    UMOMessage result=dispatcher.receive(ep,timeout);
    if (result != null) {
      UMOTransformer trans=((AbstractConnector)endpoint.getConnector()).getDefaultInboundTransformer();
      if (trans != null) {
        Object payload=trans.transform(result.getPayload());
        result=new MuleMessage(payload,result.getProperties());
      }
      return xstream.toXML(result);
    }
 else {
      return null;
    }
  }
 catch (  Exception e) {
    throw new ReceiveException(endpointUri,timeout,e);
  }
}
