{
  when(mockMuleContext.isPrimaryPollingInstance()).thenReturn(primaryNode);
  EventCorrelator eventCorrelator=createEventCorrelator();
  when(mockObjectStore.allKeys()).thenReturn(Collections.singletonList(TEST_GROUP_ID));
  when(mockEventCorrelatorCallback.createEventGroup(mockMuleEvent,TEST_GROUP_ID)).thenReturn(mockEventGroup);
  eventCorrelator.start();
  try {
    verify(mockObjectStore,timeout(250)).remove(TEST_GROUP_ID);
  }
  finally {
    eventCorrelator.stop();
  }
}
