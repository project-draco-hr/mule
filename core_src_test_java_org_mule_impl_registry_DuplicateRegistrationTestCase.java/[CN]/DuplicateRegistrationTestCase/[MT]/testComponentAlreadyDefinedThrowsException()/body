{
  Collection components=managementContext.getRegistry().lookupComponents();
  assertEquals(0,components.size());
  final String componentName="TEST_COMPONENT_1";
  getTestComponent(componentName,Object.class);
  components=managementContext.getRegistry().lookupComponents();
  assertEquals(1,components.size());
  try {
    getTestComponent(componentName,Object.class);
    fail("Trying to register a component with the same name must have thrown an exception.");
  }
 catch (  RegistrationException e) {
    assertTrue("Exception message should contain component name",StringUtils.contains(e.getMessage(),componentName));
  }
  components=managementContext.getRegistry().lookupComponents();
  assertEquals(1,components.size());
}
