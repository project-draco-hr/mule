{
  if (logger.isDebugEnabled()) {
    logger.debug("splitExpression is " + splitExpression);
  }
  if (message.getPayload() instanceof org.dom4j.Document) {
    dom4jDoc=(org.dom4j.Document)message.getPayload();
    XPath xpath=dom4jDoc.createXPath(splitExpression);
    if (namespaces != null)     xpath.setNamespaceURIs(namespaces);
    nodes=xpath.selectNodes(dom4jDoc);
  }
 else {
    logger.error("Message is not a dom4j.Document! It is: " + message.getPayload().getClass().toString());
  }
  properties=message.getProperties();
}
