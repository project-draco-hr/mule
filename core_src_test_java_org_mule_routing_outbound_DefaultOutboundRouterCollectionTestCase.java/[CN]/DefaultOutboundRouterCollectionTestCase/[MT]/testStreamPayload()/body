{
  getOutboundRouterCollection().setMatchAll(true);
  getOutboundRouterCollection().addRoute(new TestRequiresNewMessageOutboundRouter(false));
  getOutboundRouterCollection().addRoute(new TestRequiresNewMessageOutboundRouter(false));
  TestRequiresNewMessageOutboundRouter.latch=new CountDownLatch(2);
  testEvent.getMessage().setPayload(new OutputHandler(){
    @Override public void write(    MuleEvent event,    OutputStream out) throws IOException {
    }
  }
);
  try {
    testService.sendEvent(testEvent);
    fail("Exception was expected");
  }
 catch (  MessagingException e) {
  }
}
