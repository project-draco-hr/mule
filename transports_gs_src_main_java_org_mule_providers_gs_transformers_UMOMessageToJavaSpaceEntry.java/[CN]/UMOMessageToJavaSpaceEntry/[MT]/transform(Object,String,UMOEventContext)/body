{
  if (src instanceof Entry) {
    return src;
  }
 else {
    String destination=context.getEndpointURI().toString();
    UMOMessage muleMessage=context.getMessage();
    JiniMessage msg=new JiniMessage(destination,src);
    msg.setMessageId(muleMessage.getUniqueId());
    msg.setCorrelationId(muleMessage.getCorrelationId());
    msg.setCorrelationGroupSize(new Integer(muleMessage.getCorrelationGroupSize()));
    msg.setCorrelationSequence(new Integer(muleMessage.getCorrelationSequence()));
    msg.setReplyTo(muleMessage.getReplyTo());
    msg.setEncoding(muleMessage.getEncoding());
    msg.setExceptionPayload(muleMessage.getExceptionPayload());
    Map props=new HashMap();
    for (Iterator iterator=muleMessage.getPropertyNames().iterator(); iterator.hasNext(); ) {
      String key=(String)iterator.next();
      props.put(key,muleMessage.getProperty(key));
    }
    msg.setProperties(props);
    return msg;
  }
}
