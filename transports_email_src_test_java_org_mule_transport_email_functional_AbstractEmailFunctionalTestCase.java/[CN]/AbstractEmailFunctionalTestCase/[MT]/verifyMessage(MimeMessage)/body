{
  if (addAttachments) {
    assertTrue("Did not receive a multipart message",received.getContent() instanceof MimeMultipart);
    verifyMessage((MimeMultipart)received.getContent());
  }
 else {
    assertTrue("Did not receive a message with String contents",received.getContent() instanceof String);
    verifyMessage((String)received.getContent());
  }
  Address[] recipients=received.getRecipients(Message.RecipientType.TO);
  assertNotNull(recipients);
  assertEquals("number of recipients",1,recipients.length);
  assertEquals("recipient",email,recipients[0].toString());
}
