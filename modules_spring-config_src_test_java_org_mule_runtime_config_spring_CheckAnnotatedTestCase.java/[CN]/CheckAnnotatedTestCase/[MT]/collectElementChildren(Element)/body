{
  Set<Element> children=new HashSet<Element>();
  for (Node node=parent.getFirstChild(); node != null; node=node.getNextSibling()) {
    if (node instanceof Element) {
      Element elm=(Element)node;
      if ("element".equals(node.getLocalName())) {
        children.add(findElement(elm));
      }
 else       if ("sequence".equals(node.getLocalName()) || "choice".equals(node.getLocalName()) || "group".equals(node.getLocalName())) {
        Set<Element> elms=collectElementChildren(elm);
        for (        Element e : elms) {
          children.add(findElement(e));
        }
      }
    }
  }
  return children;
}
