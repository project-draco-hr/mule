{
  if (phase instanceof ReverseLifecyclePhase) {
    transitions.remove(phase.getOppositeLifecyclePhase());
    this.currentPhase=completedPhases.toArray(new String[]{})[completedPhases.size() - 2];
  }
 else {
    completedPhases.add(phase.getName());
    transitions.add(phase.getName());
    transitions.remove(phase.getOppositeLifecyclePhase());
    this.currentPhase=phase.getName();
  }
}
