{
  CopyPropertiesProcessor copyPropertiesTransformer=createCopyPropertiesTransformer(INBOUND_PROPERTY_KEY);
  muleMessage=MuleMessage.builder(muleMessage).addInboundProperty(INBOUND_PROPERTY_KEY,PROPERTY_VALUE,PROPERTY_DATA_TYPE).build();
  MuleEvent muleEvent=MuleEvent.builder(DefaultMessageContext.create(flow,TEST_CONNECTOR)).message(muleMessage).build();
  final MuleMessage transformed=copyPropertiesTransformer.process(muleEvent).getMessage();
  assertThat(transformed.getOutboundProperty(INBOUND_PROPERTY_KEY),is(PROPERTY_VALUE));
  assertThat(transformed.getInboundPropertyNames(),hasSize(1));
}
