{
  HttpResponseBuilder httpResponseBuilder=createHttpResponseBuilder();
  mockMuleMessage=InternalMessage.builder().payload(HTTP_BODY).build();
  httpResponseBuilder.setStatus(HEADER_STATUS);
  httpResponseBuilder.setContentType(HEADER_CONTENT_TYPE);
  when(mockExpressionLanguage.parse(HEADER_STATUS,mockEvent,null)).thenReturn(String.valueOf(HttpConstants.SC_INTERNAL_SERVER_ERROR));
  when(mockExpressionLanguage.parse(HEADER_CONTENT_TYPE,mockEvent,null)).thenReturn("text/html");
  HttpResponse httpResponse=(HttpResponse)httpResponseBuilder.process(mockEvent).getMessage().getPayload().getValue();
  assertEquals(HTTP_BODY,httpResponse.getBodyAsString());
  assertEquals(HttpConstants.HTTP11,httpResponse.getHttpVersion().toString());
  assertEquals(HttpConstants.SC_INTERNAL_SERVER_ERROR,httpResponse.getStatusCode());
  validateHeader(httpResponse.getHeaders(),HttpConstants.HEADER_CONTENT_TYPE,"text/html");
}
