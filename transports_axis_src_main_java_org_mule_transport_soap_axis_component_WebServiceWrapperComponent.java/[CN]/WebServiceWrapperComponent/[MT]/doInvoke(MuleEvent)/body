{
  String tempUrl;
  if (addressFromMessage) {
    tempUrl=event.getMessage().getInboundProperty(WS_SERVICE_URL);
    if (tempUrl == null) {
      throw new IllegalArgumentException(CoreMessages.propertyIsNotSetOnEvent(WS_SERVICE_URL).toString());
    }
  }
 else {
    tempUrl=address;
  }
  MuleMessage message=event.getMessage();
  if (properties != null && properties.get(AxisConnector.SOAP_METHODS) != null) {
    message.addProperties((Map)properties.get(AxisConnector.SOAP_METHODS));
  }
  EndpointBuilder endpointBuilder=new EndpointURIEndpointBuilder("axis:" + tempUrl,muleContext);
  if (use != null) {
    endpointBuilder.setProperty(AxisConnector.USE,use);
  }
  if (style != null) {
    endpointBuilder.setProperty(AxisConnector.STYLE,style);
  }
  endpointBuilder.setExchangePattern(MessageExchangePattern.REQUEST_RESPONSE);
  OutboundEndpoint endpoint=endpointBuilder.buildOutboundEndpoint();
  MuleEvent responseEvent=endpoint.process(event);
  if (responseEvent != null) {
    return responseEvent.getMessage();
  }
 else {
    return null;
  }
}
