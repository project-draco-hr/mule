{
  assumeThat(configResources,is(not(equalTo(EXCEPTION_STRATEGY_FLOW_CONF_HTTPN_XML))));
  MuleClient client=muleContext.getClient();
  latch=new CountDownLatch(1);
  muleContext.registerListener(new ExceptionNotificationListener(){
    @Override public void onNotification(    ServerNotification notification){
      latch.countDown();
    }
  }
);
  MuleMessage response=client.send("http://localhost:" + dynamicPort.getNumber() + "/proxyExceptionStrategy",new DefaultMuleMessage(requestPayload,muleContext),HTTP_REQUEST_OPTIONS);
  assertNotNull(response);
  assertTrue(response.getPayloadAsString().contains("<faultstring>"));
  assertTrue(response.getExceptionPayload() != null);
  assertEquals(String.valueOf(HttpConstants.SC_INTERNAL_SERVER_ERROR),response.getInboundProperty(HttpConnector.HTTP_STATUS_PROPERTY));
  assertTrue(latch.await(3000,TimeUnit.MILLISECONDS));
}
