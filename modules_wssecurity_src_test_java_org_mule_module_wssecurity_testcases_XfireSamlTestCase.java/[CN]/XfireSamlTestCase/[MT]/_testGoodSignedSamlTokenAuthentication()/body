{
  MuleClient client=new MuleClient();
  Properties props=new Properties();
  props.setProperty(WSHandlerConstants.ACTION,WSHandlerConstants.SAML_TOKEN_SIGNED);
  props.setProperty(WSHandlerConstants.SAML_PROP_FILE,"saml.properties");
  props.setProperty(WSHandlerConstants.PASSWORD_TYPE,WSConstants.PW_DIGEST);
  props.setProperty(WSHandlerConstants.USER,"mulealias");
  props.setProperty(WSHandlerConstants.PW_CALLBACK_CLASS,"org.mule.module.wssecurity.callbackhandlers.MuleWsSecurityCallbackHandler");
  props.setProperty(WSHandlerConstants.SIG_PROP_FILE,"out-signed-security.properties");
  props.setProperty(WSHandlerConstants.SIG_KEY_ID,"DirectReference");
  MuleMessage m=client.send("xfire:http://localhost:8282/MySecuredUMO?method=echo","Test",props);
  assertNotNull(m);
  assertTrue(m.getPayload() instanceof String);
  assertTrue(((String)m.getPayload()).equals("Test"));
}
