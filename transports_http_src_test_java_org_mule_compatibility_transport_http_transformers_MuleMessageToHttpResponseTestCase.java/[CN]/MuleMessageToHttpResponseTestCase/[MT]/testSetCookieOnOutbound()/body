{
  Cookie[] cookiesOutbound=new Cookie[2];
  cookiesOutbound[0]=new Cookie("domain","name-out-1","value-out-1");
  cookiesOutbound[1]=new Cookie("domain","name-out-2","value-out-2");
  MuleMessage msg=MuleMessage.builder(createMockMessage()).addOutboundProperty("Set-Cookie",cookiesOutbound).build();
  MuleMessageToHttpResponse transformer=getMuleMessageToHttpResponse();
  HttpResponse response=transformer.createResponse(null,UTF_8,msg,empty(),null,null);
  Header[] headers=response.getHeaders();
  int cookiesSet=0;
  for (  Header header : headers) {
    if ("Set-Cookie".equals(header.getName())) {
      cookiesSet++;
    }
  }
  assertThat(cookiesSet,equalTo(cookiesOutbound.length));
}
