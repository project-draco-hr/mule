{
  String eventComponentName=event.getService().getName();
  if (!assignedComponentName.equals(eventComponentName)) {
    IllegalArgumentException iex=new IllegalArgumentException("This receiver is assigned to service: " + assignedComponentName + " but has received an event for service: "+ eventComponentName+ ". Please check your config to make sure each service"+ "has its own instance of IdempotentReceiver.");
    throw new RoutingException(event.getMessage(),event.getEndpoint(),iex);
  }
  String id=this.getIdForEvent(event);
  try {
    if (store.storeObject(id,id)) {
      return new MuleEvent[]{event};
    }
 else {
      return null;
    }
  }
 catch (  Exception e) {
    throw new RoutingException(CoreMessages.failedToWriteMessageToStore(id,assignedComponentName),event.getMessage(),event.getEndpoint(),e);
  }
}
