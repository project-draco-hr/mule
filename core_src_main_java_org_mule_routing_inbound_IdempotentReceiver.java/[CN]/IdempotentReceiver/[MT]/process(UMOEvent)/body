{
  String eventComponentName=event.getComponent().getDescriptor().getName();
  if (!assignedComponentName.equals(eventComponentName)) {
    IllegalArgumentException iex=new IllegalArgumentException("This receiver is assigned to component: " + assignedComponentName + " but has received an event for component: "+ eventComponentName+ ". Please check your config to make sure each component"+ "has its own instance of IdempotentReceiver.");
    throw new RoutingException(event.getMessage(),event.getEndpoint(),iex);
  }
  Object id=this.getIdForEvent(event);
  try {
    if (idStore.storeId(id)) {
      return new UMOEvent[]{event};
    }
 else {
      return null;
    }
  }
 catch (  Exception e) {
    throw new RoutingException(CoreMessages.failedToWriteMessageToStore(id,assignedComponentName),event.getMessage(),event.getEndpoint(),e);
  }
}
