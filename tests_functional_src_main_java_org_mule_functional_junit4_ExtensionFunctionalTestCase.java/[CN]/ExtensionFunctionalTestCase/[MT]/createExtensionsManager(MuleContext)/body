{
  extensionManager=new DefaultExtensionManager();
  File generatedResourcesDirectory=getGenerationTargetDirectory();
  ((DefaultMuleContext)muleContext).setExtensionManager(extensionManager);
  initialiseIfNeeded(extensionManager,muleContext);
  ExtensionsTestInfrastructureDiscoverer extensionsTestInfrastructureDiscoverer=new ExtensionsTestInfrastructureDiscoverer(extensionManager,generatedResourcesDirectory);
  List<GeneratedResource> generatedResources=extensionsTestInfrastructureDiscoverer.discoverExtensions(getDescribers(),getAnnotatedExtensionClasses());
  generateResourcesAndAddToClasspath(generatedResourcesDirectory,generatedResources);
}
