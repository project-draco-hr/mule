{
  Describer[] describers=getDescribers();
  if (ArrayUtils.isEmpty(describers)) {
    Class<?>[] annotatedClasses=getAnnotatedExtensionClasses();
    if (!ArrayUtils.isEmpty(annotatedClasses)) {
      describers=new Describer[annotatedClasses.length];
      int i=0;
      for (      Class<?> annotatedClass : annotatedClasses) {
        describers[i++]=new AnnotationsBasedDescriber(annotatedClass,new StaticVersionResolver(getProductVersion()));
      }
    }
  }
  if (ArrayUtils.isEmpty(describers)) {
    throw new IllegalStateException("No extension referenced from test");
  }
 else {
    loadExtensionsFromDescribers(extensionManager,describers);
  }
  ResourcesGenerator generator=new ExtensionsTestInfrastructureResourcesGenerator(getResourceFactories(),generatedResourcesDirectory);
  for (  ExtensionModel extensionModel : extensionManager.getExtensions()) {
    generateResourcesAndAddToClasspath(generator.generateFor(extensionModel));
  }
}
