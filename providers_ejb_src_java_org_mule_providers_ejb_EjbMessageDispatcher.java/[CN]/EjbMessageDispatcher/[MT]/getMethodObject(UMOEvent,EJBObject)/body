{
  UMOEndpointURI endpointUri=event.getEndpoint().getEndpointURI();
  String methodName=PropertiesHelper.getStringProperty(endpointUri.getParams(),RmiConnector.PARAM_SERVICE_METHOD,null);
  if (null == methodName) {
    methodName=(String)event.getMessage().getProperty(RmiConnector.PARAM_SERVICE_METHOD);
    if (null == methodName) {
      throw new DispatchException(new org.mule.config.i18n.Message("ejb",RmiConnector.MSG_PARAM_SERVICE_METHOD_NOT_SET),event.getMessage(),event.getEndpoint());
    }
  }
  String arguments=(String)event.getMessage().getProperty(RmiConnector.PROPERTY_SERVICE_METHOD_PARAM_TYPES);
  List methodArgumentTypes=new ArrayList();
  if (null != arguments) {
    String[] split=arguments.split(",");
    for (int i=0; i < split.length; i++) {
      methodArgumentTypes.add(ClassHelper.loadClass(split[i].trim(),getClass()));
    }
  }
 else   if (event.getTransformedMessage().getClass().isArray()) {
    Object args[]=(Object[])event.getTransformedMessage();
    for (int i=0; i < args.length; i++) {
      methodArgumentTypes.add(args[i].getClass());
    }
  }
 else {
    methodArgumentTypes.add(event.getTransformedMessage().getClass());
  }
  Class types[]=new Class[methodArgumentTypes.size()];
  types=(Class[])methodArgumentTypes.toArray(types);
  return (remoteObject.getClass().getMethod(methodName,types));
}
