{
  Type resolvedType=type;
  if (type instanceof TypeVariable<?> && methodParam != null && methodParam.typeVariableMap != null) {
    Type mappedType=methodParam.typeVariableMap.get(type);
    if (mappedType != null) {
      resolvedType=mappedType;
    }
  }
  if (resolvedType instanceof ParameterizedType) {
    return extractTypeFromParameterizedType(methodParam,(ParameterizedType)resolvedType,source,typeIndex,nestingLevel,currentLevel);
  }
 else   if (resolvedType instanceof Class<?>) {
    Class<?> resolvedClass=(Class<?>)resolvedType;
    return extractTypeFromClass(methodParam,resolvedClass,source,typeIndex,nestingLevel,currentLevel);
  }
 else {
    return null;
  }
}
