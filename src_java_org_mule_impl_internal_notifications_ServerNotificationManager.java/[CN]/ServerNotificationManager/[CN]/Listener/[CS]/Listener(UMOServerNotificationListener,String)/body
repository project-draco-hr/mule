{
  this.listener=listener;
  this.subscription=(subscription == null ? NULL_SUBSCRIPTION : subscription);
  subscriptionFilter=new WildcardFilter(this.subscription);
  subscriptionFilter.setCaseSensitive(false);
  notificationClasses=new ArrayList();
  for (Iterator iterator=eventsMap.keySet().iterator(); iterator.hasNext(); ) {
    Class clazz=(Class)iterator.next();
    if (clazz.isAssignableFrom(listener.getClass())) {
      notificationClasses.add(eventsMap.get(clazz));
    }
  }
}
