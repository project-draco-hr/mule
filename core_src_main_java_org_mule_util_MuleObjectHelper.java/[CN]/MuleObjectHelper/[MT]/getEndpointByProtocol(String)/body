{
  UMOImmutableEndpoint iprovider;
  Collection endpoints=RegistryContext.getRegistry().getEndpoints();
  for (Iterator iterator=endpoints.iterator(); iterator.hasNext(); ) {
    iprovider=(UMOImmutableEndpoint)iterator.next();
    if (iprovider.getProtocol().equals(protocol)) {
      UMOManagementContext managementContext=MuleServer.getManagementContext();
      UMOEndpointBuilder builder=new EndpointURIEndpointBuilder(iprovider,managementContext);
      return managementContext.getRegistry().lookupEndpointFactory().getInboundEndpoint(builder);
    }
  }
  return null;
}
