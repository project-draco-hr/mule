{
  ObjectFilter filter;
  if (wildcardMatch) {
    filter=new WildcardFilter(endpointUri);
  }
 else {
    filter=new EqualsFilter(endpointUri);
  }
  UMOImmutableEndpoint iprovider;
  Collection endpoints=RegistryContext.getRegistry().getEndpoints();
  for (Iterator iterator=endpoints.iterator(); iterator.hasNext(); ) {
    iprovider=(UMOImmutableEndpoint)iterator.next();
    if (filter.accept(iprovider.getEndpointURI())) {
      MuleContext muleContext=MuleServer.getMuleContext();
      UMOEndpointBuilder builder=new EndpointURIEndpointBuilder(iprovider,muleContext);
      return muleContext.getRegistry().lookupEndpointFactory().getInboundEndpoint(builder);
    }
  }
  return null;
}
