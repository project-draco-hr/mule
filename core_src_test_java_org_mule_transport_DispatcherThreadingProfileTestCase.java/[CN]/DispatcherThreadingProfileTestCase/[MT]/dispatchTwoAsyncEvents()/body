{
  OutboundEndpoint endpoint=muleContext.getEndpointFactory().getOutboundEndpoint("test://test");
  final LaxAsyncInterceptingMessageProcessor laxAsyncInterceptingMessageProcessor=new LaxAsyncInterceptingMessageProcessor(new DispatcherWorkManagerSource((AbstractConnector)endpoint.getConnector()));
  final SimpleMessageProcessorChainBuilder simpleMessageProcessorChainBuilder=new SimpleMessageProcessorChainBuilder();
  simpleMessageProcessorChainBuilder.chain(laxAsyncInterceptingMessageProcessor,endpoint);
  final MessageProcessorChain messageProcessor=simpleMessageProcessorChainBuilder.build();
  messageProcessor.process(getTestEvent("data",getTestInboundEndpoint(MessageExchangePattern.ONE_WAY)));
  messageProcessor.process(getTestEvent("data",getTestInboundEndpoint(MessageExchangePattern.ONE_WAY)));
}
