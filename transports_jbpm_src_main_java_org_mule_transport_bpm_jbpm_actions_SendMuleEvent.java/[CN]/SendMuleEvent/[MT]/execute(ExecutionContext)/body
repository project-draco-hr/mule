{
  super.execute(executionContext);
  MuleMessageService mule=(MuleMessageService)executionContext.getJbpmContext().getServices().getMessageService();
  if (transformers != null) {
    endpoint+="?transformers=" + transformers;
  }
  if (payload == null) {
    if (payloadSource == null) {
      payloadObject=executionContext.getVariable(ProcessConnector.PROCESS_VARIABLE_DATA);
      if (payloadObject == null) {
        payloadObject=executionContext.getVariable(ProcessConnector.PROCESS_VARIABLE_INCOMING);
      }
    }
 else {
      String[] tokens=StringUtils.split(payloadSource,".",2);
      payloadObject=executionContext.getVariable(tokens[0]);
      if (tokens.length > 1) {
        JXPathContext context=JXPathContext.newContext(payloadObject);
        payloadObject=context.getValue(tokens[1].replaceAll("\\.","/"));
      }
    }
  }
 else {
    payloadObject=payload;
  }
  if (payloadObject == null) {
    throw new IllegalArgumentException("Payload for message is null.  Payload source is \"" + payloadSource + "\"");
  }
  Map props=new HashMap();
  props.put(ProcessConnector.PROPERTY_PROCESS_TYPE,executionContext.getProcessDefinition().getName());
  props.put(ProcessConnector.PROPERTY_PROCESS_ID,new Long(executionContext.getProcessInstance().getId()));
  props.put(MuleProperties.MULE_CORRELATION_ID_PROPERTY,new Long(executionContext.getProcessInstance().getId()).toString());
  props.put(ProcessConnector.PROPERTY_PROCESS_STARTED,executionContext.getProcessInstance().getStart());
  if (properties != null) {
    props.putAll(properties);
  }
  MuleMessage response=mule.generateMessage(endpoint,payloadObject,props,synchronous);
  if (synchronous) {
    if (response != null) {
      executionContext.setVariable(ProcessConnector.PROCESS_VARIABLE_INCOMING,response.getPayload());
    }
 else {
      logger.info("Synchronous message was sent to endpoint " + endpoint + ", but no response was returned.");
    }
  }
}
