{
  try {
    Session session=connector.getSessionFromTransaction();
    if (session != null) {
      return session;
    }
    if (delegateSession == null) {
      delegateSession=connector.getSession(false,false);
    }
    return delegateSession;
  }
 catch (  Exception e) {
    throw new MuleException(new org.mule.config.i18n.Message("jms",3),e);
  }
}
