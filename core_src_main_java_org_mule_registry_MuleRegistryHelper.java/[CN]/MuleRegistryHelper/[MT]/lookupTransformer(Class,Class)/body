{
  Transformer result=(Transformer)exactTransformerCache.get(inputType.getName() + outputType.getName());
  if (result != null) {
    return result;
  }
  List trans=lookupTransformers(inputType,outputType);
  result=getNearestTransformerMatch(trans,inputType,outputType);
  Transformer secondPass=null;
  if (result == null) {
    if (outputType.equals(String.class)) {
      secondPass=objectToString;
    }
 else     if (outputType.equals(byte[].class)) {
      secondPass=objectToByteArray;
    }
 else {
      throw new TransformerException(CoreMessages.noTransformerFoundForMessage(inputType,outputType));
    }
    trans=lookupTransformers(inputType,Object.class);
    result=getNearestTransformerMatch(trans,inputType,outputType);
    if (result != null) {
      result=new TransformerChain(new Transformer[]{result,secondPass});
    }
  }
  if (result != null) {
    exactTransformerCache.put(inputType.getName() + outputType.getName(),result);
  }
  return result;
}
