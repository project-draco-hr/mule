{
  String name="test-dynamic-1";
  DataSourceConfig dataSourceConfig=createTestDataSourceConfig();
  DataSource dataSource=mock(DataSource.class);
  DataSourceFactory dataSourceFactory=mock(DataSourceFactory.class);
  when(dataSourceFactory.create(dataSourceConfig)).thenReturn(dataSource);
  DbConfigFactory dbConfigFactory=mock(DbConfigFactory.class);
  when(dbConfigFactory.create(name,dataSource)).thenReturn(expectedDbConfig);
  return new DynamicDbConfigResolver("test",dbConfigFactory,dataSourceFactory,dataSourceConfig);
}
