{
  MuleMessage aggregate;
  if (results == null || results.size() == 0) {
    aggregate=null;
  }
 else   if (results.size() == 1) {
    MuleEvent event=results.get(0);
    aggregate=event == null ? null : event.getMessage();
  }
 else {
    MuleMessageCollection coll=new DefaultMessageCollection(muleContext);
    coll.propagateRootId(previous.getMessage());
    for (    MuleEvent event : results) {
      MuleMessage muleMessage=event == null ? null : event.getMessage();
      if (muleMessage != null) {
        coll.addMessage(muleMessage);
      }
    }
    aggregate=coll;
  }
  return aggregate == null ? null : RequestContext.setEvent(new DefaultMuleEvent(aggregate,previous,results.get(results.size() - 1).getSession()));
}
