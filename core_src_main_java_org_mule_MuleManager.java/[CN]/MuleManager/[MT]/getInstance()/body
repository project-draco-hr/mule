{
  if (instance == null) {
    logger.info("Creating new MuleManager instance");
    try {
      instance=new MuleManager();
    }
 catch (    Exception e) {
      throw new MuleRuntimeException(new Message(Messages.FAILED_TO_CREATE_MANAGER_INSTANCE_X,MuleManager.class.getName()),e);
    }
    logger.info("Creating new MuleRegistry instance");
    try {
      registry=(UMORegistry)ClassUtils.instanciateClass(MULE_REGISTRY_CLASS,new Object[]{});
    }
 catch (    Exception e) {
      throw new MuleRuntimeException(new Message(Messages.FAILED_TO_CREATE_REGISTRY_INSTANCE_X,MULE_REGISTRY_CLASS),e);
    }
  }
  return instance;
}
