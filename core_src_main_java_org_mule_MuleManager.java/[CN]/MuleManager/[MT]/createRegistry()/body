{
  try {
    Class clazz=Class.forName("org.mule.registry.impl.MuleRegistry");
    Object o=clazz.newInstance();
    registry=(Registry)o;
    registry.start();
    registerListener(new RegistryNotificationListener(registry));
  }
 catch (  Exception e) {
    logger.warn("Couldn't create MuleRegistry: " + e.toString());
    logger.warn("Creating dummy registry so that things will run");
    registry=new DummyRegistry();
  }
  try {
    register();
  }
 catch (  RegistrationException e) {
    logger.warn("Unable to register the manager: " + e.toString());
  }
}
