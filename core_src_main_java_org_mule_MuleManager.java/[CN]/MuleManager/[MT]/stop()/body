{
  started.set(false);
  stopping.set(true);
  fireSystemEvent(new ManagerNotification(id,null,null,ManagerNotification.MANAGER_STOPPING));
  stopConnectors();
  stopAgents();
  if (queueManager != null) {
    queueManager.stop();
  }
  logger.debug("Stopping model...");
  fireSystemEvent(new ManagerNotification(id,null,null,ManagerNotification.MANAGER_STOPPING_MODELS));
  for (Iterator i=models.values().iterator(); i.hasNext(); ) {
    UMOModel model=(UMOModel)i.next();
    model.stop();
  }
  fireSystemEvent(new ManagerNotification(id,null,null,ManagerNotification.MANAGER_STOPPED_MODELS));
  if (registry != null) {
    registry.stop();
  }
  stopping.set(false);
  fireSystemEvent(new ManagerNotification(id,null,null,ManagerNotification.MANAGER_STOPPED));
}
