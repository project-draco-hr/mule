{
  try {
    logger.debug("Transforming legacy (Mule 1.x) config to Spring beans");
    Document newDocument=transformDocument(document);
    return super.registerBeanDefinitions(newDocument,resource);
  }
 catch (  Exception e) {
    throw new FatalBeanException("Failed to read config resource: " + resource,e);
  }
 finally {
    incConfigCount();
    setValidationMode(VALIDATION_AUTO);
  }
}
