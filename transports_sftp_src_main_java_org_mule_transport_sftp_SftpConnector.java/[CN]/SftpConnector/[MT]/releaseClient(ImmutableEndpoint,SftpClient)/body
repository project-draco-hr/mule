{
  if (useConnectionPool()) {
    if (getDispatcherFactory().isCreateDispatcherPerRequest()) {
      destroyClient(endpoint,client);
    }
 else {
      if (client != null && client.isConnected()) {
        ObjectPool pool=getClientPool(endpoint);
        if (logger.isDebugEnabled()) {
          logger.debug("Releasing connection for endpoint " + endpoint.getEndpointURI());
        }
        pool.returnObject(client);
      }
    }
  }
 else {
    client.disconnect();
  }
}
