{
  fireNotification(ex);
  logException(ex);
  doHandleException(ex,event,rollbackMethod);
  ExceptionPayload exceptionPayload=new DefaultExceptionPayload(ex);
  if (RequestContext.getEvent() != null) {
    RequestContext.setExceptionPayload(exceptionPayload);
  }
  event.getMessage().setPayload(NullPayload.getInstance());
  event.getMessage().setExceptionPayload(exceptionPayload);
  return event;
}
