{
  try {
    muleContext.getNotificationManager().fireNotification(new ExceptionStrategyNotification(event,ExceptionStrategyNotification.PROCESS_START));
    fireNotification(ex);
    logException(ex);
    doHandleException(ex,event);
    ExceptionPayload exceptionPayload=new DefaultExceptionPayload(ex);
    if (RequestContext.getEvent() != null) {
      RequestContext.setExceptionPayload(exceptionPayload);
    }
    event.getMessage().setPayload(NullPayload.getInstance());
    event.getMessage().setExceptionPayload(exceptionPayload);
    return event;
  }
  finally {
    muleContext.getNotificationManager().fireNotification(new ExceptionStrategyNotification(event,ExceptionStrategyNotification.PROCESS_END));
  }
}
