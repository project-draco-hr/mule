{
  MuleEvent eventToUse=resolveSource(muleEvent);
  final List<FieldDebugInfo<?>> fields=new ArrayList<>();
  Query resolvedQuery;
  try {
    resolvedQuery=queryResolver.resolve(connection,eventToUse);
  }
 catch (  QueryResolutionException e) {
    fields.add(createFieldDebugInfo(SQL_TEXT_DEBUG_FIELD,String.class,e));
    return fields;
  }
  fields.add(createFieldDebugInfo(SQL_TEXT_DEBUG_FIELD,String.class,resolvedQuery.getQueryTemplate().getSqlText()));
  fields.add(createFieldDebugInfo(TYPE_DEBUG_FIELD,String.class,resolvedQuery.getQueryTemplate().getType().toString()));
  final List<FieldDebugInfo> paramFields=new ArrayList<>();
  int paramIndex=1;
  for (  QueryParamValue queryParamValue : resolvedQuery.getParamValues()) {
    final String name=queryParamValue.getName() == null ? PARAM_DEBUG_FIELD_PREFIX + paramIndex++ : queryParamValue.getName();
    paramFields.add(createFieldDebugInfo(name,String.class,queryParamValue.getValue()));
  }
  fields.add(createFieldDebugInfo(INPUT_PARAMS_DEBUG_FIELD,List.class,paramFields));
  return fields;
}
