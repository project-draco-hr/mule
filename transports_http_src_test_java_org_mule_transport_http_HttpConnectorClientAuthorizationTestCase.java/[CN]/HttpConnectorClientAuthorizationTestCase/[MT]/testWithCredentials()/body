{
  Credentials credentials=new MuleCredentials(CREDENTIALS_USER,CREDENTIALS_PASSWORD.toCharArray());
  when(mockMuleEvent.getCredentials()).thenReturn(credentials);
  when(mockMuleEvent.getMessageSourceURI()).thenReturn(uri);
  when(mockMuleEvent.getMessage()).thenReturn(message);
  connector.setupClientAuthorization(mockMuleEvent,mockHttpMethod,mockHttpClient,mockImmutableEndpoint);
  verify(mockHttpClient.getState(),atLeast(1)).setCredentials(isA(AuthScope.class),isA(org.apache.commons.httpclient.Credentials.class));
}
