{
  if (processor instanceof AbstractMessageProcessorChain) {
    processor=new EndpointAwareMessageProcessorChain((AbstractMessageProcessorChain)processor);
  }
 else   if (processor instanceof SecurityFilterMessageProcessor) {
    processor=new EndpointAwareSecurityFilterMessageProcessor((SecurityFilterMessageProcessor)processor);
  }
  if (processor instanceof EndpointAware) {
    ((EndpointAware)processor).setEndpoint(endpoint);
  }
  return super.initializeMessageProcessor(processor);
}
