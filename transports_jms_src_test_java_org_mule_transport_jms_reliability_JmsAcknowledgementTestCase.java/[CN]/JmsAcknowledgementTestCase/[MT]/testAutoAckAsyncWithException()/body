{
  acknowledgeMode=Session.AUTO_ACKNOWLEDGE;
  listenOnQueue("sanity",new MessageListener(){
    public void onMessage(    Message message){
      try {
        session.recover();
      }
 catch (      JMSException e) {
        e.printStackTrace();
      }
    }
  }
);
  putMessageOnQueue("sanity");
  closeConsumer();
  Message msg=readMessageFromQueue("sanity");
  assertNotNull(msg);
}
