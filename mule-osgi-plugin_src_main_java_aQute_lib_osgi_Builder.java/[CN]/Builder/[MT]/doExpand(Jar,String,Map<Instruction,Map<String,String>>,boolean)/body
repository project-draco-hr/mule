{
  Set<Instruction> superfluous=removeMarkedDuplicates(instructions.keySet());
  for (Iterator<Jar> c=getClasspath().iterator(); c.hasNext(); ) {
    Jar now=c.next();
    doExpand(jar,instructions,now,superfluous);
  }
  if (mandatory && superfluous.size() > 0) {
    StringBuffer sb=new StringBuffer();
    String del="Instructions in " + name + " that are never used: ";
    for (Iterator<Instruction> i=superfluous.iterator(); i.hasNext(); ) {
      Instruction p=i.next();
      sb.append(del);
      sb.append(p.getPattern());
      del=", ";
    }
    warning(sb.toString());
  }
}
