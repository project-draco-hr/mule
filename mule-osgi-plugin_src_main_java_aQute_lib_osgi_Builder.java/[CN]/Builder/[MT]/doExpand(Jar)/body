{
  if (getClasspath().size() == 0 && (getProperty(EXPORT_PACKAGE) != null || getProperty(PRIVATE_PACKAGE) != null))   warning("Classpath is empty. Private-Package and Export-Package can only expand from the classpath when there is one");
  Map<Instruction,Map<String,String>> all=newMap();
  all.putAll(replaceWitInstruction(getHeader(EXPORT_PACKAGE),EXPORT_PACKAGE));
  all.putAll(replaceWitInstruction(getHeader(PRIVATE_PACKAGE),PRIVATE_PACKAGE));
  if (isTrue(getProperty(Constants.UNDERTEST))) {
    all.putAll(replaceWitInstruction(parseHeader(getProperty(Constants.TESTPACKAGES,"test;presence:=optional")),TESTPACKAGES));
  }
  if (all.isEmpty() && !isResourceOnly()) {
    warning("Neither Export-Package, Private-Package, -testpackages is set, therefore no packages will be included");
  }
  doExpand(jar,"Export-Package, Private-Package, or -testpackages",all,true);
}
