{
  MetadataType metadataType=parameter.getMetadataType(typeLoader);
  if (ParameterResolver.class.isAssignableFrom(parameter.getType().getDeclaringClass())) {
    final Optional<MetadataType> expressionResolverType=getGenericTypeAt(metadataType,0,typeLoader);
    if (expressionResolverType.isPresent()) {
      metadataType=expressionResolverType.get();
    }
 else {
      throw new IllegalParameterModelDefinitionException(format("The parameter [%s] from the Operation [%s] doesn't specify the %s parameterized type",parameter.getName(),declarationContext.getName(),ParameterResolver.class.getSimpleName()));
    }
    declarer.ofType(metadataType);
    declarer.withModelProperty(new ParameterResolverTypeModelProperty());
  }
}
