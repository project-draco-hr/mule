{
  org.springframework.security.core.Authentication auth=null;
  if (authentication instanceof SpringAuthenticationAdapter) {
    auth=((SpringAuthenticationAdapter)authentication).getDelegate();
  }
 else {
    auth=this.getAuthenticationProvider().getAuthentication(authentication);
  }
  auth=delegate.authenticate(auth);
  return new SpringAuthenticationAdapter(auth,getSecurityProperties(),authentication.getEvent());
}
