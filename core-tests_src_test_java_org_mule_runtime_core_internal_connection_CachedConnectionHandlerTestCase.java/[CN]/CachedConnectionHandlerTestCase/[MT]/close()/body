{
  getConnection();
  managedConnection.close();
  verify(connectionProvider).disconnect(connection);
  reset(connectionProvider);
  Banana newConnection=new Banana();
  when(connectionProvider.validate(connection)).thenReturn(ConnectionValidationResult.success());
  when(connectionProvider.connect(config)).thenReturn(newConnection);
  getConnection();
  assertThat(managedConnection.getConnection(),is(sameInstance(newConnection)));
}
