{
  List<JavaComponent> components=new ArrayList<JavaComponent>();
  for (  MessageProcessor mp : messageProcessors) {
    if (mp instanceof JavaComponent) {
      components.add((JavaComponent)mp);
    }
 else {
      throw new IllegalStateException("Only JavaComponents are allowed as MessageProcessors. Type " + mp.getClass().getName() + " is not allowed.");
    }
  }
  setComponents(components);
}
