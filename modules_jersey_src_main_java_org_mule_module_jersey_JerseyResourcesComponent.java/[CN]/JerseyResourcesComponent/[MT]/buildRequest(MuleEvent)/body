{
  MuleMessage message=event.getMessage();
  String path=resolvePath(message);
  String contextPath=resolveContextPath(message);
  String query=null;
  int queryIdx=path.indexOf('?');
  if (queryIdx != -1) {
    query=path.substring(queryIdx + 1);
    path=path.substring(0,queryIdx);
  }
  String host=message.getInboundProperty("Host",event.getMessageSourceURI().getHost());
  String method=message.getInboundProperty(HttpConnector.HTTP_METHOD_PROPERTY);
  String scheme=resolveScheme(event);
  URI baseUri=getBaseUri(scheme,host,contextPath);
  URI completeUri=getCompleteUri(scheme,host,path,query);
  if (logger.isDebugEnabled()) {
    logger.debug("Base URI: " + baseUri);
    logger.debug("Complete URI: " + completeUri);
  }
  return new ContainerRequest(baseUri,completeUri,method,null,new MapPropertiesDelegate());
}
