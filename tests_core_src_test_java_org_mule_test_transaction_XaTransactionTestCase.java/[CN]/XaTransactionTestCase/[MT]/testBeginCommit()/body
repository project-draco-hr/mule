{
  Mock mockTx=new Mock(Transaction.class);
  mockTm.expect("begin");
  mockTm.expectAndReturn("getTransaction",mockTx.proxy());
  XaTransaction tx=new XaTransaction(managementContext.getTransactionManager());
  assertFalse(tx.isBegun());
  assertEquals(UMOTransaction.STATUS_NO_TRANSACTION,tx.getStatus());
  tx.begin();
  mockTx.expectAndReturn("getStatus",UMOTransaction.STATUS_ACTIVE);
  assertTrue(tx.isBegun());
  mockTx.expectAndReturn("getStatus",UMOTransaction.STATUS_ACTIVE);
  mockTx.expect("commit");
  tx.commit();
  mockTx.expectAndReturn("getStatus",UMOTransaction.STATUS_COMMITTED);
  assertTrue(tx.isCommitted());
}
