{
  MuleClient client=new MuleClient(muleContext);
  Map<String,Object> properties=populateProperties();
  DefaultMuleMessage muleMessage=new DefaultMuleMessage(HTTP_BODY,properties,muleContext);
  MuleMessage response=client.send("http://localhost:" + dynamicPort.getNumber() + "/resources/allExpressions",muleMessage,properties);
  assertEquals("Custom body",response.getPayloadAsString());
  assertEquals("" + HttpConstants.SC_NOT_FOUND,response.getInboundProperty("http.status"));
  assertEquals("GET",response.getInboundProperty("Allow"));
  assertEquals("max-age=3600",response.getInboundProperty("Cache-Control"));
  assertEquals("gzip",response.getInboundProperty("Content-Encoding"));
  assertEquals("Thu, 01 Dec 2014 16:00:00 GMT",response.getInboundProperty("Expires"));
  assertEquals("http://localhost:9090",response.getInboundProperty("Location"));
  assertEquals("chunked",response.getInboundProperty("Transfer-Encoding"));
  assertEquals("value1",response.getInboundProperty("header1"));
  Cookie[] cookies=(Cookie[])response.getInboundProperty("Set-Cookie");
  assertEquals(2,cookies.length);
  validateCookie(cookies[0]);
  validateCookie(cookies[1]);
}
