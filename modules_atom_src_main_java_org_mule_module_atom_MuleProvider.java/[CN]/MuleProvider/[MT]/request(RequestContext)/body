{
  MuleEventContext ctx=(MuleEventContext)request.getAttribute(Scope.REQUEST,AbderaServiceComponent.EVENT_CONTEXT);
  try {
    MuleMessage requestMessage=new DefaultMuleMessage(request,ctx.getMuleContext());
    MuleMessage res=((Flow)ctx.getFlowConstruct()).process(new DefaultMuleEvent(requestMessage,MessageExchangePattern.REQUEST_RESPONSE,ctx.getFlowConstruct())).getMessage();
    return (ResponseContext)res.getPayload();
  }
 catch (  MuleException e) {
    log.error(e);
    return new EmptyResponseContext(500);
  }
}
