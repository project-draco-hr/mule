{
  MessagePropertyFilter filter=new MessagePropertyFilter("foo=B*");
  InternalMessage message=InternalMessage.builder().payload("blah").build();
  message=InternalMessage.builder(message).addOutboundProperty("foo","bar").build();
  assertFalse(filter.accept(message,mock(Event.Builder.class)));
  filter.setCaseSensitive(false);
  assertTrue("Filter didn't accept the message",filter.accept(message,mock(Event.Builder.class)));
  filter.setPattern("foo=*a*");
  assertTrue("Filter didn't accept the message",filter.accept(message,mock(Event.Builder.class)));
}
