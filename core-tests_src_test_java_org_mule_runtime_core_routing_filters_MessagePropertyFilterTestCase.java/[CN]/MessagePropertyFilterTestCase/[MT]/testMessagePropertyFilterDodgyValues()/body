{
  MessagePropertyFilter filter=new MessagePropertyFilter();
  assertFalse(filter.accept((MuleMessage)null,mock(MuleEvent.Builder.class)));
  filter=new MessagePropertyFilter("foo = bar");
  MuleMessage message=MuleMessage.builder().payload("blah").build();
  message=MuleMessage.builder(message).addOutboundProperty("foo","bar").build();
  assertTrue("Filter didn't accept the message",filter.accept(message,mock(MuleEvent.Builder.class)));
  filter.setCaseSensitive(false);
  filter=new MessagePropertyFilter("foo2 =null");
  message=removeProperty(message,"foo2");
  assertTrue("Filter didn't accept the message",filter.accept(message,mock(MuleEvent.Builder.class)));
  filter=new MessagePropertyFilter("foo2 =");
  message=MuleMessage.builder(message).addOutboundProperty("foo2","").build();
  assertTrue("Filter didn't accept the message",filter.accept(message,mock(MuleEvent.Builder.class)));
  message=removeProperty(message,"foo2");
  assertFalse(filter.accept(message,mock(MuleEvent.Builder.class)));
}
