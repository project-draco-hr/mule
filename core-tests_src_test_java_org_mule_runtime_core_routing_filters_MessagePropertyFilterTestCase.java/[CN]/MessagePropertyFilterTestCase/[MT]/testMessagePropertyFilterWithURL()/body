{
  InternalMessage message=InternalMessage.builder().payload("blah").build();
  MessagePropertyFilter filter=new MessagePropertyFilter("inbound:foo=http://foo.com");
  assertEquals("inbound",filter.getScope());
  assertFalse(filter.accept(message,mock(Event.Builder.class)));
  Map inboundProps=new HashMap();
  inboundProps.put("foo","http://foo.com");
  message=InternalMessage.builder().payload("blah").inboundProperties(inboundProps).build();
  assertTrue("Filter didn't accept the message",filter.accept(message,mock(Event.Builder.class)));
  filter=new MessagePropertyFilter("bar=http://bar.com");
  assertEquals("outbound",filter.getScope());
  assertFalse(filter.accept(message,mock(Event.Builder.class)));
  message=InternalMessage.builder(message).addOutboundProperty("bar","http://bar.com").build();
  assertTrue("Filter didn't accept the message",filter.accept(message,mock(Event.Builder.class)));
}
