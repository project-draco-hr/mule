{
  final List<ServiceProvider> serviceProviders=new ArrayList<>();
  when(serviceProviderDiscoverer.discover()).thenReturn(serviceProviders);
  when(serviceResolver.resolveServices(serviceProviders)).thenThrow(new ServiceResolutionError("Error"));
  serviceDiscoverer.discoverServices();
}
