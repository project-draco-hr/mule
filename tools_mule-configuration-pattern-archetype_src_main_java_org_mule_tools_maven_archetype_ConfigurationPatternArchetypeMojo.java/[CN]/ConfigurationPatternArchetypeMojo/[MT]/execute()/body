{
  final String basedir=System.getProperty("user.dir");
  if (packageName == null) {
    getLog().info("Defaulting package to group ID: " + groupId);
    packageName=groupId;
  }
  final Map<Object,Object> map=new HashMap<Object,Object>();
  map.put("basedir",basedir);
  map.put("package",packageName);
  map.put("packageName",packageName);
  map.put("groupId",groupId);
  map.put("artifactId",artifactId);
  map.put("version",version);
  map.put("muleVersion",muleVersion);
  try {
    archetype.createArchetype(archetypeGroupId,archetypeArtifactId,archetypeVersion,localRepository,remoteRepositories,map);
  }
 catch (  final ArchetypeNotFoundException e) {
    throw new MojoExecutionException("Error creating from archetype",e);
  }
catch (  final ArchetypeDescriptorException e) {
    throw new MojoExecutionException("Error creating from archetype",e);
  }
catch (  final ArchetypeTemplateProcessingException e) {
    throw new MojoExecutionException("Error creating from archetype",e);
  }
}
