{
  UMOEndpointURI endpointUri=event.getEndpoint().getEndpointURI();
  String method=(String)endpointUri.getParams().remove("method");
  setContext(event);
  IProxy proxy=null;
  String bindService=endpointUri.getAddress();
  if (bindService.indexOf(".wsdl") == -1) {
    bindService=bindService.replaceAll("/" + method,".wsdl/" + method);
  }
  proxy=Registry.bind(bindService);
  Object payload=event.getTransformedMessage();
  Object[] args;
  if (payload instanceof Object[]) {
    args=(Object[])payload;
  }
 else {
    args=new Object[]{payload};
  }
  if (event.getMessage().getReplyTo() != null) {
    ThreadContext.setProperty(MuleProperties.MULE_REPLY_TO_PROPERTY,event.getMessage().getReplyTo());
  }
  if (event.getMessage().getCorrelationId() != null) {
    ThreadContext.setProperty(MuleProperties.MULE_CORRELATION_ID_PROPERTY,event.getMessage().getCorrelationId());
  }
  try {
    Object result=proxy.invoke(method,args);
    if (result == null) {
      return null;
    }
 else {
      return new MuleMessage(result,null);
    }
  }
 catch (  Throwable t) {
    throw new DispatchException("Failed ot make ws call: " + t.getMessage(),t);
  }
}
