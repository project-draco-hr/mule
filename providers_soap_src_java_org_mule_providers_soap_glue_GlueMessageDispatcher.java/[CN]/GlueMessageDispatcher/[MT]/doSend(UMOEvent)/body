{
  UMOEndpointURI endpointUri=event.getEndpoint().getEndpointURI();
  String method=(String)endpointUri.getParams().remove("method");
  setContext(event);
  IProxy proxy=null;
  String bindAddress=endpointUri.getAddress();
  if (bindAddress.indexOf(".wsdl") == -1) {
    bindAddress=bindAddress.replaceAll("/" + method,".wsdl/" + method);
  }
  int i=bindAddress.indexOf("?");
  if (i > -1) {
    bindAddress=bindAddress.substring(0,i);
  }
  proxy=Registry.bind(bindAddress);
  Object payload=event.getTransformedMessage();
  Object[] args;
  if (payload instanceof Object[]) {
    args=(Object[])payload;
  }
 else {
    args=new Object[]{payload};
  }
  if (event.getMessage().getReplyTo() != null) {
    ThreadContext.setProperty(MuleProperties.MULE_REPLY_TO_PROPERTY,event.getMessage().getReplyTo());
  }
  if (event.getMessage().getCorrelationId() != null) {
    ThreadContext.setProperty(MuleProperties.MULE_CORRELATION_ID_PROPERTY,event.getMessage().getCorrelationId());
  }
  try {
    Object result=proxy.invoke(method,args);
    if (result == null) {
      return null;
    }
 else {
      return new MuleMessage(result,null);
    }
  }
 catch (  Throwable t) {
    throw new DispatchException(event.getMessage(),event.getEndpoint(),t);
  }
}
