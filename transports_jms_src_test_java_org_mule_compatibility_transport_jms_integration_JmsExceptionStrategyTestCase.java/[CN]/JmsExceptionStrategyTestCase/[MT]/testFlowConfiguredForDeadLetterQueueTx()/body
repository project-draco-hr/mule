{
  muleClient=muleContext.getClient();
  muleClient.dispatch("jms://in6",MESSAGE,null);
  latch.await(LATCH_AWAIT_TIMEOUT,MILLISECONDS);
  Flow flow=muleContext.getRegistry().get("flowConfiguredForDeadLetterQueueTx");
  flow.stop();
  assertThat(muleClient.request("jms://in6",TIMEOUT).getRight().isPresent(),is(false));
  MuleMessage deadLetter=muleClient.request("jms://DLQ6",TIMEOUT).getRight().get();
  assertThat(deadLetter,IsNull.<Object>notNullValue());
  assertThat(deadLetter.getPayload(),IsNull.<Object>notNullValue());
  assertThat(muleClient.request("jms://out6",SHORT_TIMEOUT).getRight().isPresent(),is(false));
}
