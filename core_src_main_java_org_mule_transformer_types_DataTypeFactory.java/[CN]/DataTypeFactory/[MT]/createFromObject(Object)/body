{
  Class type=o.getClass();
  String mime=null;
  if (o instanceof MuleMessage) {
    MuleMessage mm=(MuleMessage)o;
    type=mm.getPayload().getClass();
    mime=mm.getStringProperty("Content-Type",null);
    if (mime != null) {
      int i=mime.indexOf(";");
      mime=(i > -1 ? mime.substring(0,i) : mime);
    }
  }
  if (mime == null) {
    mime=MimeTypes.ANY;
  }
  return create(type,mime);
}
