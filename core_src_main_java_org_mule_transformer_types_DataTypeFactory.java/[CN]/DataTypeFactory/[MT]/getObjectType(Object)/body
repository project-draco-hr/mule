{
  Class<?> type;
  if (value == null) {
    type=Object.class;
  }
 else {
    if (value instanceof MuleMessage) {
      MuleMessage mm=(MuleMessage)value;
      type=mm.getPayload().getClass();
    }
 else {
      type=value.getClass();
    }
  }
  return type;
}
