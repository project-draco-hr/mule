{
  MuleClient client=new MuleClient(muleContext);
  MuleMessage response=client.send("vm://exception","testExceptionInService",null);
  assertNotNull("Should have thrown an exception",response.getExceptionPayload());
  assertTrue(ExceptionUtils.getRootCause(response.getExceptionPayload().getException()) instanceof FunctionalTestException);
  assertNotNull(client.request("vm://queueC",1000));
  assertNull(client.request("vm://queueD",1000));
}
