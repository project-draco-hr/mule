{
  try {
    if (muleContext != null && !(muleContext.isDisposed() || muleContext.isDisposing())) {
      muleContext.dispose();
      if (RegistryContext.getRegistry() != null) {
        final String workingDir=muleContext.getConfiguration().getWorkingDirectory();
        FileUtils.deleteTree(FileUtils.newFile(workingDir),IGNORED_DOT_MULE_DIRS);
        RegistryContext.getRegistry().dispose();
      }
    }
    FileUtils.deleteTree(FileUtils.newFile("./ActiveMQ"));
  }
  finally {
    muleContext=null;
    MuleServer.setMuleContext(null);
  }
}
