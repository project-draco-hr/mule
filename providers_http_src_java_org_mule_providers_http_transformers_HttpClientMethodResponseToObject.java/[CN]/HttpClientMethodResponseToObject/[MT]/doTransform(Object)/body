{
  Object msg;
  HttpMethod httpMethod=(HttpMethod)src;
  Header contentType=httpMethod.getResponseHeader(HttpConstants.HEADER_CONTENT_TYPE);
  if (contentType != null && !contentType.getValue().startsWith("text/")) {
    msg=httpMethod.getResponseBody();
  }
 else {
    msg=httpMethod.getResponseBodyAsString();
  }
  Map headerProps=new HashMap();
  Header[] headers=httpMethod.getRequestHeaders();
  String name;
  for (int i=0; i < headers.length; i++) {
    name=headers[i].getName();
    if (name.startsWith("X-" + MuleProperties.PROPERTY_PREFIX)) {
      name=name.substring(2);
    }
    headerProps.put(headers[i].getName(),headers[i].getValue());
  }
  return new MuleMessage(msg,headerProps);
}
