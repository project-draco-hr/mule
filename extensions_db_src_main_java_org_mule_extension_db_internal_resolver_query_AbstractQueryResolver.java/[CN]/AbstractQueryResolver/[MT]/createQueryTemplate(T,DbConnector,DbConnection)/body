{
  QueryTemplate queryTemplate=queryTemplateParser.parse(statementDefinition.getSql());
  if (needsParamTypeResolution(queryTemplate)) {
    Map<Integer,DbType> paramTypes=getParameterTypes(connector,connection,queryTemplate);
    queryTemplate=resolveQueryTemplate(queryTemplate,paramTypes);
  }
  return queryTemplate;
}
