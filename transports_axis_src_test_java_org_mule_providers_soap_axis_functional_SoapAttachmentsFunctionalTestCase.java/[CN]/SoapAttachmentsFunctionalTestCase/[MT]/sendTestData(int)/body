{
  UMOImmutableEndpoint ep=managementContext.getRegistry().lookupEndpointFactory().getOutboundEndpoint("axis:http://localhost:60198/mule/services/testComponent?method=receiveMessageWithAttachments");
  AxisMessageDispatcher client=new AxisMessageDispatcher(ep);
  for (int i=0; i < iterations; i++) {
    UMOMessage msg=new MuleMessage("testPayload");
    File tempFile=File.createTempFile("test",".att");
    tempFile.deleteOnExit();
    msg.addAttachment("testAttachment",new DataHandler(new FileDataSource(tempFile)));
    MuleSession session=new MuleSession(msg,((AbstractConnector)ep.getConnector()).getSessionHandler());
    MuleEvent event=new MuleEvent(msg,ep,session,true);
    UMOMessage result=client.send(event);
    assertNotNull(result);
    assertNotNull(result.getPayload());
    assertEquals(result.getPayloadAsString(),"Done");
    callbackCount++;
  }
}
