{
  try {
    MuleMessage transformedMessage=getMuleContext().getTransformationService().transform(message,DataTypeFactory.createWithEncoding(String.class,encoding));
    if (isConsumable(message.getPayload().getClass())) {
      setMessage(transformedMessage);
    }
    return (String)transformedMessage.getPayload();
  }
 catch (  Exception e) {
    throw new DefaultMuleException(CoreMessages.cannotReadPayloadAsString(message.getClass().getName()),e);
  }
}
