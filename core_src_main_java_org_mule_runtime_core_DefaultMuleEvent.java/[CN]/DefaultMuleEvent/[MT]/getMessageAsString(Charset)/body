{
  try {
    MuleMessage transformedMessage=getMuleContext().getTransformationService().transform(message,DataType.builder().type(String.class).charset(encoding).build());
    if (message.getDataType().isStreamType()) {
      setMessage(transformedMessage);
    }
    return (String)transformedMessage.getPayload();
  }
 catch (  Exception e) {
    throw new DefaultMuleException(CoreMessages.cannotReadPayloadAsString(message.getClass().getName()),e);
  }
}
