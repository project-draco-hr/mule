{
  if (me.isTransacted()) {
    TransactionManager mgr=(TransactionManager)component.getContext().getTransactionManager();
    Transaction tx=(Transaction)me.getProperty(MessageExchange.JTA_TRANSACTION_PROPERTY_NAME);
    mgr.resume(tx);
  }
  if (component instanceof MessageListener) {
    ((MessageListener)component).onMessage(me);
  }
 else {
    enqueue(me);
  }
}
