{
  InputStream body=new ByteArrayInputStream(TEST_MESSAGE.getBytes());
  HttpMethod method=createMockHttpMethod(HttpConstants.METHOD_POST,body);
  MuleMessageFactory factory=createMuleMessageFactory();
  MuleMessage message=factory.create(method,encoding);
  assertNotNull(message);
  assertEquals(TEST_MESSAGE,message.getPayloadAsString());
  assertEquals(HttpConstants.METHOD_POST,message.getProperty(HttpConnector.HTTP_METHOD_PROPERTY));
  assertEquals(HttpVersion.HTTP_1_1.toString(),message.getProperty(HttpConnector.HTTP_VERSION_PROPERTY));
  assertEquals("200",message.getProperty(HttpConnector.HTTP_STATUS_PROPERTY));
}
