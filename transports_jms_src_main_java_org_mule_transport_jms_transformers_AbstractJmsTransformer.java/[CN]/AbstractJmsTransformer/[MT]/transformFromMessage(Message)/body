{
  try {
    if (logger.isDebugEnabled()) {
      logger.debug("Message type received is: " + ClassUtils.getSimpleName(source.getClass()));
    }
    String jmsSpec=JmsConstants.JMS_SPECIFICATION_102B;
    ImmutableEndpoint endpoint=this.getEndpoint();
    if (endpoint != null) {
      Connector connector=endpoint.getConnector();
      if (connector instanceof JmsConnector) {
        jmsSpec=((JmsConnector)connector).getSpecification();
      }
    }
    return JmsMessageUtils.toObject(source,jmsSpec);
  }
 catch (  Exception e) {
    throw new TransformerException(this,e);
  }
}
