{
  final String testObject="custom object";
  final UMOEndpoint endpoint=new MuleEndpoint("ftp://test:test@example.com",false);
  final UMOEndpointURI endpointURI=endpoint.getEndpointURI();
  FtpConnectionFactory testFactory=new TestFtpConnectionFactory(endpointURI);
  FtpConnector connector=(FtpConnector)getConnector();
  connector.setConnectionFactoryClass(testFactory.getClass().getName());
  connector.setValidateConnections(false);
  ObjectPool pool=connector.getFtpPool(endpointURI);
  Object obj=pool.borrowObject();
  assertEquals("Custom FTP connection factory has been ignored.",testObject,obj);
}
