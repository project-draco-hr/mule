{
  Flow flow=(Flow)getFlowConstruct("headerMap");
  MuleEvent event=getTestEvent(TEST_MESSAGE);
  Map<String,String> params=new HashMap<>();
  params.put("testName1","testValue1");
  event.getMessage().setInvocationProperty("headers",params);
  event.getMessage().setOutboundProperty("testName2","testValue2");
  flow.process(event);
  assertThat(getFirstReceivedHeader("testName1"),equalTo("testValue1"));
  assertThat(getFirstReceivedHeader("testName2"),equalTo("testValue2"));
}
