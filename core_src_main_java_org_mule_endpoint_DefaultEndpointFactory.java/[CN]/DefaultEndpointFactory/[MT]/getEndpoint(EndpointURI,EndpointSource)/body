{
  logger.debug("DefaultEndpointFactory request for endpoint for: " + uri);
  EndpointBuilder endpointBuilder=null;
  if (uri.getEndpointName() != null) {
    endpointBuilder=lookupEndpointBuilder(uri.getEndpointName());
    if (endpointBuilder == null) {
      throw new IllegalArgumentException("The endpoint with name: " + uri.getEndpointName() + "was not found.");
    }
  }
 else {
    logger.debug("Named EndpointBuilder not found, creating endpoint from uri");
    endpointBuilder=new EndpointURIEndpointBuilder(uri);
  }
  return source.getEndpoint(endpointBuilder);
}
