{
  UMOConnector connector=getConnectorByProtocol(url.getSchemeMetaInfo());
  if (connector == null) {
    connector=ConnectorFactory.createConnector(url);
    try {
      BeanUtils.populate(connector,url.getParams());
      MuleManager.getInstance().registerConnector(connector);
    }
 catch (    Exception e) {
      throw new ConnectorFactoryException("Failed to set bean properties on the connector: " + e.getMessage(),e);
    }
  }
  return connector;
}
