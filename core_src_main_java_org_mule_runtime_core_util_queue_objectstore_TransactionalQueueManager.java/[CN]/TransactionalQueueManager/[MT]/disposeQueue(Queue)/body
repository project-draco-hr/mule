{
  if (queue == null) {
    throw new IllegalArgumentException("Queue to be disposed cannot be null");
  }
  final String queueName=queue.getName();
  Lock lock=this.queuesLock.writeLock();
  lock.lock();
  try {
    if (!this.queues.containsKey(queueName)) {
      throw new IllegalArgumentException(String.format("There's no queue for name %s",queueName));
    }
    this.queues.remove(queueName);
  }
  finally {
    lock.unlock();
  }
  queue.clear();
  if (queue instanceof Stoppable) {
    ((Stoppable)queue).stop();
  }
  if (queue instanceof Disposable) {
    ((Disposable)queue).dispose();
  }
}
