{
  if (topic && connection instanceof TopicConnection) {
    return ((TopicConnection)connection).createTopicSession(noLocal,ackMode);
  }
 else   if (connection instanceof QueueConnection) {
    return ((QueueConnection)connection).createQueueSession(transacted,(transacted ? Session.SESSION_TRANSACTED : ackMode));
  }
 else {
    return connection.createSession(transacted,ackMode);
  }
}
