{
  Apple apple=new Apple();
  Banana banana=new Banana();
  Orange orange=new Orange();
  eventContext.getMessage().setProperty("apple",apple,PropertyScope.INBOUND);
  eventContext.getMessage().setProperty("banana",banana,PropertyScope.INBOUND);
  eventContext.getMessage().setProperty("orange",orange,PropertyScope.INBOUND);
  eventContext.getMessage().setProperty(MuleProperties.MULE_ENCODING_PROPERTY,"UTF-8",PropertyScope.INBOUND);
  InvocationResult response=invokeResolver("processHeadersListWithGenerics",eventContext);
  assertTrue("Message payload should be a List",response.getResult() instanceof List);
  List<?> result=(List<?>)response.getResult();
  assertEquals(2,result.size());
  assertTrue(result.contains(apple));
  assertTrue(result.contains(orange));
  assertFalse(result.contains(banana));
}
