{
  Apple apple=new Apple();
  props.put("apple",apple);
  MuleClient client=new MuleClient(muleContext);
  MuleMessage message=client.send("vm://headerWithType",null,props);
  assertNotNull("return message from MuleClient.send() should not be null",message);
  assertEquals(apple,message.getPayload());
}
