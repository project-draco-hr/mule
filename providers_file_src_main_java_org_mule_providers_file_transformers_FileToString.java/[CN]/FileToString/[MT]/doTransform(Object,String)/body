{
  if (src instanceof byte[]) {
    if (encoding != null) {
      try {
        return new String((byte[])src,encoding);
      }
 catch (      UnsupportedEncodingException ex) {
        return new String((byte[])src);
      }
    }
 else {
      return new String((byte[])src);
    }
  }
  if (src instanceof String) {
    return src.toString();
  }
  FileInputStream fis=null;
  InputStreamReader isr=null;
  try {
    fis=new FileInputStream((File)src);
    isr=(encoding != null ? new InputStreamReader(fis,encoding) : new InputStreamReader(fis));
    return IOUtils.toString(isr);
  }
 catch (  IOException e) {
    throw new TransformerException(this,e);
  }
 finally {
    IOUtils.closeQuietly(isr);
  }
}
