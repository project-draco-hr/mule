{
  JbpmContext jbpmContext=jbpmConfiguration.createJbpmContext();
  try {
    task=jbpmContext.getTaskMgmtSession().loadTaskInstance(task.getId());
    if (transition != null) {
      task.end(transition);
    }
 else {
      task.end();
    }
  }
  finally {
    jbpmContext.close();
  }
}
