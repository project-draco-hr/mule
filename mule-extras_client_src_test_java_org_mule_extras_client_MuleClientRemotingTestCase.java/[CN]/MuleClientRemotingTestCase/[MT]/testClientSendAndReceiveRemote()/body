{
  String remoteEndpoint="vm://vmRemoteProvider/remote.queue";
  MuleClient client=new MuleClient();
  MuleManager.getConfiguration().setSynchronous(true);
  RemoteDispatcher dispatcher=client.getRemoteDispatcher(getServerUrl());
  UMOMessage message=dispatcher.receiveRemote(remoteEndpoint,1000);
  assertNull(message);
  dispatcher.dispatchRemote(remoteEndpoint,"Test Remote Message 2",null);
  message=dispatcher.receiveRemote(remoteEndpoint,2000);
  assertNotNull(message);
  assertEquals("Test Remote Message 2",message.getPayload());
}
