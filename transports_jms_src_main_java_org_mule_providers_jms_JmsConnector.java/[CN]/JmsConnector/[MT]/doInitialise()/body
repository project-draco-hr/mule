{
  if (connectionFactory == null) {
    connectionFactory=getDefaultConnectionFactory();
  }
  if (connectionFactory == null) {
    throw new InitialisationException(JmsMessages.noConnectionFactorySet(),this);
  }
  if (topicResolver == null) {
    topicResolver=new DefaultJmsTopicResolver(this);
  }
  if (redeliveryHandler == null) {
    redeliveryHandler=new DefaultRedeliveryHandler();
  }
  try {
    managementContext.registerListener(this,getName());
  }
 catch (  NotificationException nex) {
    throw new InitialisationException(nex,this);
  }
}
