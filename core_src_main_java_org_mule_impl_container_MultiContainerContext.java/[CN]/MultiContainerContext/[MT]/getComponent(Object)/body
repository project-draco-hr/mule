{
  ContainerKeyPair realKey=null;
  StringBuffer cause=new StringBuffer();
  Throwable finalCause=null;
  if (key instanceof String) {
    realKey=new ContainerKeyPair(null,key);
  }
 else {
    realKey=(ContainerKeyPair)key;
  }
  if (realKey == null) {
    throw new ObjectNotFoundException(null);
  }
  Object component=null;
  UMOContainerContext container;
  if (realKey.getContainerName() != null) {
    container=(UMOContainerContext)containers.get(realKey.getContainerName());
    if (container != null) {
      return container.getComponent(realKey);
    }
 else {
      throw new ObjectNotFoundException("Container: " + realKey.getContainerName());
    }
  }
  for (Iterator iterator=containers.values().iterator(); iterator.hasNext(); ) {
    container=(UMOContainerContext)iterator.next();
    try {
      component=container.getComponent(realKey);
    }
 catch (    ObjectNotFoundException e) {
      if (e.getCause() != null) {
        finalCause=e.getCause();
        if (logger.isDebugEnabled()) {
          logger.debug("Object: '" + realKey + "' not found in container: "+ container.getName());
        }
      }
 else {
        finalCause=e;
        if (logger.isDebugEnabled()) {
          logger.debug("Object: '" + realKey + "' not found in container: "+ container.getName());
        }
      }
      if (cause.length() > 0) {
        cause.append("; ");
      }
      cause.append(finalCause.toString());
    }
    if (component != null) {
      if (logger.isDebugEnabled()) {
        logger.debug("Object: '" + realKey + "' found in container: "+ container.getName());
      }
      break;
    }
  }
  if (component == null) {
    if (realKey.isRequired()) {
      throw new ObjectNotFoundException(realKey.toString() + " " + cause,finalCause);
    }
 else     if (logger.isDebugEnabled()) {
      logger.debug("Component reference not found: " + realKey.toFullString());
      return null;
    }
  }
  return component;
}
