{
  try {
    Agent agent=createRmiAgent();
    if (!isAgentRegistered(agent)) {
      muleContext.getRegistry().registerAgent(agent);
    }
    agent=createJmxAgent();
    if (!isAgentRegistered(agent)) {
      muleContext.getRegistry().registerAgent(agent);
    }
    if (loadLog4jAgent) {
      agent=createLog4jAgent();
      if (!isAgentRegistered(agent)) {
        muleContext.getRegistry().registerAgent(agent);
      }
    }
    agent=createJmxNotificationAgent();
    if (!isAgentRegistered(agent)) {
      muleContext.getRegistry().registerAgent(agent);
    }
    if (loadJdmkAgent) {
      agent=createJdmkAgent();
      if (!isAgentRegistered(agent)) {
        muleContext.getRegistry().registerAgent(agent);
      }
    }
    if (loadMx4jAgent) {
      agent=createMx4jAgent();
      if (!isAgentRegistered(agent)) {
        muleContext.getRegistry().registerAgent(agent);
      }
    }
    if (loadProfilerAgent) {
      agent=createProfilerAgent();
      if (!isAgentRegistered(agent)) {
        muleContext.getRegistry().registerAgent(agent);
      }
    }
    muleContext.getRegistry().unregisterAgent(name);
  }
 catch (  MuleException e) {
    throw new InitialisationException(e,this);
  }
}
