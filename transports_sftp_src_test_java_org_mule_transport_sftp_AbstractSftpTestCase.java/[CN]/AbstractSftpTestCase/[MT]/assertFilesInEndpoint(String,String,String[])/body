{
  SftpClient client=getSftpClient(endpointName);
  ImmutableEndpoint tEndpoint=muleContext.getRegistry().lookupObject(endpointName);
  try {
    String path=tEndpoint.getEndpointURI().getPath();
    if (subDirectory != null) {
      path+='/' + subDirectory;
    }
    assertFilesInPath(client,path,expectedFiles);
  }
  finally {
    client.disconnect();
  }
}
