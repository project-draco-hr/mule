{
  SftpClient sftpClient=getSftpClient(muleClient,endpointName);
  ImmutableEndpoint tEndpoint=(ImmutableEndpoint)muleClient.getProperty(endpointName);
  try {
    String path=tEndpoint.getEndpointURI().getPath();
    if (subDirectory != null) {
      path+='/' + subDirectory;
    }
    assertFilesInPath(sftpClient,path,expectedFiles);
  }
  finally {
    sftpClient.disconnect();
  }
}
