{
  ImmutableEndpoint endpoint=getImmutableEndpoint(muleClient,endpointName);
  EndpointURI endpointURI=endpoint.getEndpointURI();
  SftpClient sftpClient=new SftpClient(endpointURI.getHost());
  SftpConnector sftpConnector=(SftpConnector)endpoint.getConnector();
  if (sftpConnector.getIdentityFile() != null) {
    try {
      sftpClient.login(endpointURI.getUser(),sftpConnector.getIdentityFile(),sftpConnector.getPassphrase());
    }
 catch (    Exception e) {
      fail("Login failed: " + e);
    }
  }
 else {
    try {
      sftpClient.login(endpointURI.getUser(),endpointURI.getPassword());
    }
 catch (    Exception e) {
      fail("Login failed: " + e);
    }
  }
  return sftpClient;
}
