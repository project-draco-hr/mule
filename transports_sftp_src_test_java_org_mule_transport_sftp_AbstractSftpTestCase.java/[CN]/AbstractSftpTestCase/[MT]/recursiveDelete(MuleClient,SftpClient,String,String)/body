{
  EndpointURI endpointURI=getUriByEndpointName(muleClient,endpointName);
  String path=endpointURI.getPath() + relativePath;
  try {
    sftpClient.chmod(path,00700);
    sftpClient.changeWorkingDirectory(sftpClient.getAbsolutePath(path));
    String[] directories=sftpClient.listDirectories();
    for (    String directory : directories) {
      recursiveDelete(muleClient,sftpClient,endpointName,relativePath + "/" + directory);
    }
    sftpClient.changeWorkingDirectory(sftpClient.getAbsolutePath(path));
    String[] files=sftpClient.listFiles();
    for (    String file : files) {
      sftpClient.deleteFile(file);
    }
    try {
      sftpClient.deleteDirectory(path);
    }
 catch (    Exception e) {
      if (logger.isDebugEnabled())       logger.debug("Failed delete directory " + path,e);
    }
  }
 catch (  Exception e) {
    if (logger.isDebugEnabled())     logger.debug("Failed to recursivly delete directory " + path,e);
  }
}
