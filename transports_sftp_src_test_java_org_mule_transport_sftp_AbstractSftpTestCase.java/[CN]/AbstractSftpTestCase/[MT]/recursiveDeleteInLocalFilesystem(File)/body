{
  if (parent.isDirectory()) {
    for (    File child : parent.listFiles()) {
      recursiveDeleteInLocalFilesystem(child);
    }
  }
  File parentParent=parent.getParentFile();
  if (!parentParent.canWrite()) {
    String os=System.getProperty("os.name").toLowerCase();
    if (os.indexOf("win") >= 0) {
      Runtime.getRuntime().exec("attrib -r /D" + parentParent.getAbsolutePath());
    }
 else     if (os.indexOf("nix") >= 0 || os.indexOf("nux") >= 0) {
      Runtime.getRuntime().exec("chmod +w " + parentParent.getAbsolutePath());
    }
 else {
      throw new IOException("Failed to set readonly-folder: " + parentParent + " to writeable");
    }
  }
  if (parent.exists()) {
    String os=System.getProperty("os.name").toLowerCase();
    if (os.indexOf("win") >= 0) {
      Runtime.getRuntime().exec("attrib -r /D" + parent.getAbsolutePath());
    }
 else     if (os.indexOf("nix") >= 0 || os.indexOf("nux") >= 0) {
      Runtime.getRuntime().exec("chmod +w " + parent.getAbsolutePath());
    }
 else {
      throw new IOException("Failed to set readonly-folder: " + parent + " to writeable");
    }
    if (!parent.delete())     throw new IOException("Failed to delete folder: " + parent);
  }
}
