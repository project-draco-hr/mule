{
  UMOEndpoint endpoint=new MuleEndpoint();
  AbstractConnector connector=null;
  connector=(AbstractConnector)ClassUtils.loadClass("org.mule.tck.testmodels.mule.TestConnector",AbstractMuleTestCase.class).newInstance();
  connector.setName("testConnector");
  connector.setManagementContext(context);
  connector.initialise();
  connector.registerSupportedProtocol(protocol);
  endpoint.setConnector(connector);
  endpoint.setEndpointURI(new MuleEndpointURI("test:" + protocol + "://test"));
  endpoint.setName(name);
  endpoint.setType(type);
  return endpoint;
}
