{
  MockHttpsMessageReceiver messageReceiver=setupMockHttpsMessageReceiver();
  MockSslSocket socket=new MockSslSocket();
  HttpServerConnection serverConnection=new HttpServerConnection(socket,messageReceiver.getEndpoint().getEncoding(),(HttpConnector)messageReceiver.getConnector());
  Work work=messageReceiver.createWork(serverConnection);
  assertNotNull(work);
  invokeHandshakeCompleted(serverConnection,socket);
  MuleMessage message=new DefaultMuleMessage(TEST_MESSAGE,muleContext);
  invokePreRouteMessage(work,message);
  assertNotNull(message.<Object>getInboundProperty(MuleProperties.MULE_REMOTE_CLIENT_ADDRESS));
}
