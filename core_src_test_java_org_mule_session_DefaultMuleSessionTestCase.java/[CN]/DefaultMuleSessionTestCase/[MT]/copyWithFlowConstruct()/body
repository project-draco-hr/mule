{
  FlowConstruct originalFlow=Mockito.mock(FlowConstruct.class);
  FlowConstruct newFlow=Mockito.mock(FlowConstruct.class);
  DefaultMuleSession original=new DefaultMuleSession(originalFlow);
  original.setValid(false);
  original.setSecurityContext(Mockito.mock(SecurityContext.class));
  original.setProperty("foo","bar");
  DefaultMuleSession copy=new DefaultMuleSession(original,newFlow);
  assertCopy(original,copy);
  assertSame(copy.getFlowConstruct(),newFlow);
  assertSame(original.getProperty("foo"),copy.getProperty("foo"));
  copy.setProperty("new","bar");
  assertNotNull(original.getProperty("new"));
}
