{
  if (isKeepFileOnError()) {
    if (inputStream != null) {
      if (inputStream instanceof ErrorOccurredDecorator) {
        ((ErrorOccurredDecorator)inputStream).setErrorOccurred();
      }
 else {
        logger.warn("Class " + inputStream.getClass().getName() + " did not implement the 'ErrorOccurred' decorator, errorOccured=true could not be set.");
      }
    }
  }
}
