{
  Service service=muleContext.getRegistry().lookupService("appleComponent");
  assertNotNull(service.getMessageSource());
  ServiceCompositeMessageSource messageRouter=(ServiceCompositeMessageSource)service.getMessageSource();
  assertNotNull(messageRouter.getCatchAllStrategy());
  assertEquals(2,messageRouter.getMessageProcessors().size());
  MessageProcessor router=messageRouter.getMessageProcessors().get(0);
  assertTrue(router instanceof MessageFilter);
  MessageFilter sc=(MessageFilter)router;
  assertNotNull(sc.getFilter());
  Filter filter=sc.getFilter();
  assertTrue(filter instanceof PayloadTypeFilter);
  assertEquals(String.class,((PayloadTypeFilter)filter).getExpectedType());
  MessageProcessor router2=messageRouter.getMessageProcessors().get(1);
  assertTrue(router2 instanceof IdempotentMessageFilter);
}
