{
  Service service=muleContext.getRegistry().lookupService("appleComponent");
  assertNotNull(service.getOutboundRouter());
  OutboundRouterCollection router=service.getOutboundRouter();
  assertNotNull(router.getCatchAllStrategy());
  assertEquals(2,router.getRouters().size());
  OutboundRouter route1=(OutboundRouter)router.getRouters().get(0);
  assertTrue(route1 instanceof FilteringOutboundRouter);
  assertNotNull(((FilteringOutboundRouter)route1).getTransformers());
  assertTrue(TransformerUtils.firstOrNull(((FilteringOutboundRouter)route1).getTransformers()) instanceof TestCompressionTransformer);
  Filter filter=((FilteringOutboundRouter)route1).getFilter();
  assertNotNull(filter);
  assertTrue(filter instanceof PayloadTypeFilter);
  assertEquals(String.class,((PayloadTypeFilter)filter).getExpectedType());
  OutboundRouter route2=(OutboundRouter)router.getRouters().get(1);
  assertTrue(route2 instanceof FilteringOutboundRouter);
  Filter filter2=((FilteringOutboundRouter)route2).getFilter();
  assertNotNull(filter2);
  assertTrue(filter2 instanceof AndFilter);
  Filter left=((AndFilter)filter2).getLeftFilter();
  Filter right=((AndFilter)filter2).getRightFilter();
  assertNotNull(left);
  assertTrue(left instanceof RegExFilter);
  assertEquals("the quick brown (.*)",((RegExFilter)left).getPattern());
  assertNotNull(right);
  assertTrue(right instanceof RegExFilter);
  assertEquals("(.*) brown (.*)",((RegExFilter)right).getPattern());
  assertTrue(router.getCatchAllStrategy() instanceof TestCatchAllStrategy);
}
