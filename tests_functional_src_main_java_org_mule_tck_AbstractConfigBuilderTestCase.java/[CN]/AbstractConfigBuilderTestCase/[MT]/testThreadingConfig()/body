{
  ThreadingProfile tp=RegistryContext.getConfiguration().getDefaultThreadingProfile();
  assertEquals(ThreadingProfile.DEFAULT_MAX_BUFFER_SIZE,tp.getMaxBufferSize());
  assertEquals(ThreadingProfile.DEFAULT_MAX_THREADS_ACTIVE,tp.getMaxThreadsActive());
  assertEquals(4,tp.getMaxThreadsIdle());
  assertEquals(ThreadingProfile.WHEN_EXHAUSTED_WAIT,tp.getPoolExhaustedAction());
  assertEquals(60001,tp.getThreadTTL());
  tp=RegistryContext.getConfiguration().getDefaultComponentThreadingProfile();
  assertEquals(ThreadingProfile.DEFAULT_MAX_BUFFER_SIZE,tp.getMaxBufferSize());
  assertEquals(ThreadingProfile.DEFAULT_MAX_THREADS_ACTIVE,tp.getMaxThreadsActive());
  assertEquals(4,tp.getMaxThreadsIdle());
  assertEquals(ThreadingProfile.WHEN_EXHAUSTED_WAIT,tp.getPoolExhaustedAction());
  assertEquals(60001,tp.getThreadTTL());
  AbstractConnector c=(AbstractConnector)managementContext.getRegistry().lookupConnector("dummyConnector");
  tp=c.getDispatcherThreadingProfile();
  assertEquals(2,tp.getMaxBufferSize());
  assertEquals(ThreadingProfile.DEFAULT_MAX_THREADS_ACTIVE,tp.getMaxThreadsActive());
  assertEquals(ThreadingProfile.DEFAULT_MAX_THREADS_IDLE,tp.getMaxThreadsIdle());
  assertEquals(ThreadingProfile.DEFAULT_POOL_EXHAUST_ACTION,tp.getPoolExhaustedAction());
  assertEquals(ThreadingProfile.DEFAULT_MAX_THREAD_TTL,tp.getThreadTTL());
  MuleDescriptor descriptor=(MuleDescriptor)managementContext.getRegistry().lookupService("appleComponent2");
  tp=descriptor.getThreadingProfile();
  assertEquals(6,tp.getMaxBufferSize());
  assertEquals(12,tp.getMaxThreadsActive());
  assertEquals(6,tp.getMaxThreadsIdle());
  assertEquals(ThreadingProfile.DEFAULT_POOL_EXHAUST_ACTION,tp.getPoolExhaustedAction());
  assertEquals(ThreadingProfile.DEFAULT_MAX_THREAD_TTL,tp.getThreadTTL());
}
