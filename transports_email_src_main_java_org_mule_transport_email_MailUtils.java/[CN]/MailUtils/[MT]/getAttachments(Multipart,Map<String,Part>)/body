{
  int x=0;
  for (int i=0; i < content.getCount(); i++) {
    Part part=content.getBodyPart(i);
    if (part.getContentType().indexOf("multipart/mixed") > -1) {
      Multipart m=(Multipart)part.getContent();
      getAttachments(m,attachments);
    }
 else {
      String key;
      if (StringUtils.isNotEmpty(part.getDescription())) {
        key=part.getDescription();
      }
 else       if (StringUtils.isNotEmpty(part.getFileName())) {
        try {
          key=MimeUtility.decodeText(part.getFileName());
        }
 catch (        UnsupportedEncodingException e) {
          key=part.getFileName();
        }
      }
 else       if (StringUtils.isNotEmpty(part.getDisposition())) {
        key=part.getDisposition();
      }
 else {
        key=String.valueOf(x++);
      }
      key=getAttachmentName(key,attachments);
      attachments.put(key,part);
    }
  }
}
