{
  int x=0;
  for (int i=0; i < content.getCount(); i++) {
    Part p=content.getBodyPart(i);
    if (p.getContentType().indexOf("multipart/mixed") > -1) {
      Multipart m=(Multipart)p.getContent();
      getAttachments(m,attachments);
    }
 else {
      String key;
      if (StringUtils.isNotEmpty(p.getDescription())) {
        key=p.getDescription();
      }
 else       if (StringUtils.isNotEmpty(p.getFileName())) {
        key=p.getFileName();
      }
 else       if (StringUtils.isNotEmpty(p.getDisposition())) {
        key=p.getDisposition();
      }
 else {
        key=String.valueOf(x++);
      }
      attachments.put(key,p);
    }
  }
}
