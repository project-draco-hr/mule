{
  if (isSourceTypeSupported(UMOMessage.class,true)) {
    src=context.getMessage();
  }
 else {
    if (src instanceof byte[]) {
      return src;
    }
 else     if (src instanceof String) {
      try {
        return ((String)src).getBytes(encoding);
      }
 catch (      UnsupportedEncodingException e) {
        throw new TransformerException(this,e);
      }
    }
  }
  try {
    return SerializationUtils.serialize((Serializable)src);
  }
 catch (  Exception e) {
    throw new TransformerException(this,e);
  }
}
