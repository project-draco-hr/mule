{
  MuleEvent event=(MuleEvent)message.getExchange().get(CxfConstants.MULE_EVENT);
  if (event == null || event instanceof NonBlockingVoidMuleEvent) {
    return;
  }
  final Builder builder=MuleMessage.builder(event.getMessage());
  for (  Header header : message.getHeaders()) {
    if (header instanceof SoapHeader) {
      Transformer transformer=null;
      try {
        DataType sourceType=DataType.fromObject(header.getObject());
        transformer=muleContext.getRegistry().lookupTransformer(sourceType,DataType.STRING);
        String key=WSConsumer.SOAP_HEADERS_PROPERTY_PREFIX + header.getName().getLocalPart();
        String value=(String)transformer.transform(header.getObject());
        builder.addInboundProperty(key,value);
      }
 catch (      TransformerException e) {
        throw new Fault(new TransformerMessagingException(CoreMessages.createStaticMessage("Cannot parse content of SOAP header %s in the response",header.getName().getLocalPart()),event,transformer,e.getCause()));
      }
    }
  }
  final MuleEvent built=MuleEvent.builder(event).message(builder.build()).build();
  message.getExchange().put(CxfConstants.MULE_EVENT,built);
}
