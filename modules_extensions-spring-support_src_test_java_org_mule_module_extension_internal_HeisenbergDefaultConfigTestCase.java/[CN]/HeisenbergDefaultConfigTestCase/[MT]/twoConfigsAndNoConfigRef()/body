{
  ExtensionManager extensionManager=muleContext.getExtensionManager();
  Extension extension=extensionManager.getExtensions().iterator().next();
  assertThat(extension.getName(),is(EXTENSION_NAME));
  ConfigurationInstanceProvider<Object> configurationInstanceProvider=mock(ConfigurationInstanceProvider.class);
  extensionManager.registerConfigurationInstanceProvider(extension,"secondConfig",configurationInstanceProvider);
  expectedException.expectCause(IsInstanceOf.<IllegalStateException>instanceOf(IllegalStateException.class));
  runFlow("sayMyName");
}
