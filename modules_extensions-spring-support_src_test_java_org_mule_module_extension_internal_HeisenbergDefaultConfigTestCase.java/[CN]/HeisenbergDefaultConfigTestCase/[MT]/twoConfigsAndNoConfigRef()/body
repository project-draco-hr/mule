{
  ExtensionManager extensionManager=muleContext.getExtensionManager();
  Extension extension=extensionManager.getExtensions().iterator().next();
  assertThat(extension.getName(),is(EXTENSION_NAME));
  ConfigurationInstanceProvider<Object> configurationInstanceProvider=mock(ConfigurationInstanceProvider.class);
  when(configurationInstanceProvider.getConfiguration()).thenReturn(extension.getConfigurations().get(0));
  extensionManager.registerConfigurationInstanceProvider("secondConfig",configurationInstanceProvider);
  expectedException.expectCause(IsInstanceOf.<IllegalStateException>instanceOf(IllegalStateException.class));
  runFlow("sayMyName");
}
