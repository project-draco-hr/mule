{
  ExtensionManager extensionManager=muleContext.getExtensionManager();
  ExtensionModel extensionModel=extensionManager.getExtensions().stream().findFirst().get();
  assertThat(extensionModel.getName(),is(EXTENSION_NAME));
  when(configurationProvider.getName()).thenReturn("secondConfig");
  when(configurationProvider.getModel()).thenReturn(configurationModel);
  when(configurationModel.getExtensionModel()).thenReturn(extensionModel);
  extensionManager.registerConfigurationProvider(configurationProvider);
  expectedException.expectCause(IsInstanceOf.<IllegalStateException>instanceOf(IllegalStateException.class));
  runFlow("sayMyName");
}
