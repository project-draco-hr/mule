{
  ExtensionManager extensionManager=muleContext.getExtensionManager();
  ExtensionModel extensionModel=extensionManager.getExtensions().iterator().next();
  assertThat(extensionModel.getName(),is(EXTENSION_NAME));
  ConfigurationProvider<Object> configurationProvider=mock(ConfigurationProvider.class);
  when(configurationProvider.getName()).thenReturn("secondConfig");
  extensionManager.registerConfigurationProvider(extensionModel,configurationProvider);
  expectedException.expectCause(IsInstanceOf.<IllegalStateException>instanceOf(IllegalStateException.class));
  runFlow("sayMyName");
}
