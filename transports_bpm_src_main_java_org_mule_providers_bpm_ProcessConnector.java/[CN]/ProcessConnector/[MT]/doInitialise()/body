{
  try {
    if (bpms == null) {
      if (bpmsClass != null) {
        logger.info("Instantiating BPMS from the default constructor for " + bpmsClass);
        bpms=(BPMS)ClassUtils.instanciateClass(bpmsClass,new Object[0]);
      }
 else {
        throw new ConfigurationException(MessageFactory.createStaticMessage("Either the bpms or bpmsClass property must be set for this connector."));
      }
    }
    bpms.setMessageService(this);
    if ((allowGlobalDispatcher == true) && (muleClient == null)) {
      muleClient=new MuleClient(false);
    }
  }
 catch (  Exception e) {
    throw new InitialisationException(e,this);
  }
}
