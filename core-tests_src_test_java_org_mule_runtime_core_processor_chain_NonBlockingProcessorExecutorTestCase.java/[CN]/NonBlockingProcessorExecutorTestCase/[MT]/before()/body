{
  super.before();
  when(event.getExchangePattern()).thenReturn(MessageExchangePattern.REQUEST_RESPONSE);
  when(event.isSynchronous()).thenReturn(false);
  when(event.isAllowNonBlocking()).thenReturn(true);
  Pipeline mockFlow=mock(Flow.class);
  when(mockFlow.getMuleContext()).thenReturn(muleContext);
  when(mockFlow.getProcessingStrategy()).thenReturn(new NonBlockingProcessingStrategy());
}
