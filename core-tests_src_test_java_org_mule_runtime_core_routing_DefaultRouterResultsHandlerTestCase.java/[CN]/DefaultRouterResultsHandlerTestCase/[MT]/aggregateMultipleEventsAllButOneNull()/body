{
  MuleMessage message1=MuleMessage.builder().payload("test event A").build();
  MuleMessage message2=MuleMessage.builder().payload("test event B").build();
  MuleEvent event1=new DefaultMuleEvent(create(flow),message1,flow);
  event1.setFlowVariable("key","value");
  MuleEvent event2=new DefaultMuleEvent(create(flow),message2,flow);
  event2.setFlowVariable("key2","value2");
  List<MuleEvent> events=new ArrayList<>();
  events.add(null);
  events.add(event2);
  MuleEvent result=resultsHandler.aggregateResults(events,event1);
  assertSame(event2,result);
  assertThat(result.getFlowVariableNames(),not(contains("key1")));
  assertThat(result.getFlowVariable("key2"),equalTo("value2"));
}
