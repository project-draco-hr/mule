{
  if (userId != null) {
    assertThat(expressionManager.evaluate(String.format("oauthContext('%s','%s').state",configName,userId)).getValue(),Is.<Object>is(expectedState));
  }
 else {
    assertThat(expressionManager.evaluate(String.format("oauthContext('%s').state",configName)).getValue(),Is.<Object>is(expectedState));
  }
  return this;
}
