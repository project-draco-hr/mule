{
  Element rootElement=doc.getRootElement();
  Map addedProperty=new HashMap();
  try {
    Iterator properties=rootElement.elementIterator("property");
    while (properties.hasNext()) {
      Element e=(Element)properties.next();
      String name=e.valueOf("@name");
      if (addedProperty.containsKey(name) == false) {
        Property prop=ProcessFactory.addProperty(tp,name,e.valueOf("@type"));
        addedProperty.put(name,prop);
      }
    }
    Iterator propertyAlias=rootElement.elementIterator("propertyAlias");
    while (propertyAlias.hasNext()) {
      Element e=(Element)propertyAlias.next();
      String propertyName=e.valueOf("@propertyName");
      XPath xpathSelector=DocumentHelper.createXPath("//*/defaultNS:property[@name=\"" + propertyName + "\"]");
      HashMap nsMap=new HashMap(1);
      nsMap.put("defaultNS",BPEL_NS);
      xpathSelector.setNamespaceURIs(nsMap);
      Node propNode=xpathSelector.selectSingleNode(doc);
      Property prop=(Property)addedProperty.get(propertyName);
      if (propNode != null && prop == null) {
        prop=ProcessFactory.addProperty(tp,propertyName,propNode.valueOf("@type"));
        addedProperty.put(propertyName,prop);
      }
      if (prop != null) {
        ProcessFactory.addPropertyAlias(prop,e.valueOf("@messageType"),e.valueOf("@part"),e.valueOf("@query"));
      }
 else {
        log.error("A propertyAlias is defined without property : " + propertyName);
        throw new DeploymentException("a propertyAlias is defined without property : " + propertyName);
      }
    }
  }
 catch (  Exception e) {
    throw new DeploymentException(e);
  }
}
