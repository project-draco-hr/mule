{
  BlockingQueue buffer;
  if (tp.getMaxBufferSize() > 0 && tp.getMaxThreadsActive() > 1) {
    buffer=new LinkedBlockingDeque(tp.getMaxBufferSize());
  }
 else {
    buffer=new SynchronousQueue();
  }
  ThreadPoolExecutor pool=internalCreatePool(name,tp,buffer);
  configureThreadPoolExecutor(name,tp,pool);
  return pool;
}
