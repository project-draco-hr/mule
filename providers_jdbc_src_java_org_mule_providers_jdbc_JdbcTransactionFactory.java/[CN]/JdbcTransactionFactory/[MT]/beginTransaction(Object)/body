{
  if (session instanceof Connection) {
    JdbcTransaction tx=new JdbcTransaction((Connection)session);
    tx.begin();
    return tx;
  }
 else {
    throw new IllegalTransactionStateException("Session was not of expected type: " + Connection.class.getName());
  }
}
