{
  if (isGlobal(element)) {
    if (null == element.getAttributeNode(ADDRESS_ATTRIBUTE)) {
      throw new IllegalStateException("A global endpoint requires an " + ADDRESS_ATTRIBUTE + " attribute.");
    }
    if (null != element.getAttributeNode(ENDPOINT_REF_ATTRIBUTE)) {
      throw new IllegalStateException("A global endpoint cannot contain a " + ENDPOINT_REF_ATTRIBUTE + " attribute.");
    }
  }
 else {
    if (null == element.getAttributeNode(ADDRESS_ATTRIBUTE)) {
      if (null == element.getAttributeNode(ENDPOINT_REF_ATTRIBUTE)) {
        throw new IllegalStateException("An endpoint requires either an " + ADDRESS_ATTRIBUTE + " or a "+ ENDPOINT_REF_ATTRIBUTE+ " attribute.");
      }
    }
 else {
      if (null != element.getAttributeNode(ENDPOINT_REF_ATTRIBUTE)) {
        throw new IllegalStateException("The " + ADDRESS_ATTRIBUTE + " and "+ ENDPOINT_REF_ATTRIBUTE+ " attributes are mutually exclusive.");
      }
    }
  }
  if (element.getParentNode().getNodeName().equals("chaining-router") || element.getParentNode().getNodeName().equals("exception-based-router")) {
    builder.addPropertyValue("remoteSync",Boolean.TRUE);
  }
  super.parseChild(element,parserContext,builder);
}
