{
  StateEncoder stateEncoder=new StateEncoder(null);
  stateEncoder.encodeOnCompleteRedirectToInState(format("http://localhost:%s/afterLogin",onCompleteUrlPort.getNumber()));
  return appendQueryParam(localCallbackUrl.getValue(),STATE_PARAMETER,stateEncoder.getEncodedState());
}
