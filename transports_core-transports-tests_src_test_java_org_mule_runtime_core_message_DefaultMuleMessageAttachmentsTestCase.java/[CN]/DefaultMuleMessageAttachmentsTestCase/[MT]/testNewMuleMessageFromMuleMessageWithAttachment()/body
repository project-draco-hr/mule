{
  InternalMessage previous=createMuleMessage();
  DataHandler handler=new DataHandler("this is the attachment","text/plain");
  InternalMessage message=InternalMessage.builder(previous).payload(TEST_MESSAGE).addOutboundAttachment("attachment",handler).build();
  assertTrue(message.getOutboundAttachmentNames().contains("attachment"));
  assertEquals(handler,message.getOutboundAttachment("attachment"));
}
