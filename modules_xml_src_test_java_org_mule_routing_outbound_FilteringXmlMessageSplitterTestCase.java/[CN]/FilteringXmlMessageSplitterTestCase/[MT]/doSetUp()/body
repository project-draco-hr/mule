{
  endpoint1=getTestEndpoint("Test1Endpoint",Endpoint.ENDPOINT_TYPE_SENDER);
  endpoint1.setEndpointURI(new MuleEndpointURI("test://endpointUri.1"));
  endpoint2=getTestEndpoint("Test2Endpoint",Endpoint.ENDPOINT_TYPE_SENDER);
  endpoint2.setEndpointURI(new MuleEndpointURI("test://endpointUri.2"));
  endpoint3=getTestEndpoint("Test3Endpoint",Endpoint.ENDPOINT_TYPE_SENDER);
  endpoint3.setEndpointURI(new MuleEndpointURI("test://endpointUri.3"));
  xmlSplitter=new FilteringXmlMessageSplitter();
  xmlSplitter.setValidateSchema(true);
  xmlSplitter.setExternalSchemaLocation("purchase-order.xsd");
  Map namespaces=new HashMap();
  namespaces.put("e","http://www.example.com");
  xmlSplitter.setSplitExpression("/e:purchaseOrder/e:items/e:item");
  xmlSplitter.setNamespaces(namespaces);
  xmlSplitter.addEndpoint(endpoint1);
  xmlSplitter.addEndpoint(endpoint2);
  xmlSplitter.addEndpoint(endpoint3);
}
