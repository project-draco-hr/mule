{
  when(mockContext.supportsAsynchronousProcessing()).thenReturn(false);
  doThrow(mockException).when(mockTemplate).afterSuccessfulProcessingFlow(any(MuleEvent.class));
  phase.runPhase(mockTemplate,mockContext,mockNotifier);
  verify(mockContext.getFlowConstruct(),Mockito.times(1)).getExceptionListener();
  verifyOnlyFailureWasCalled(mockException);
}
