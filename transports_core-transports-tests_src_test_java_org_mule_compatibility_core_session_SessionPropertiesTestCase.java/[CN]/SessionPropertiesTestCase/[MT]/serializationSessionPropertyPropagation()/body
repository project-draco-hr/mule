{
  InternalMessage message=InternalMessage.builder().payload("data").build();
  Event event=Event.builder(context).message(message).exchangePattern(ONE_WAY).flow(flow).build();
  event.getSession().setProperty("key","value");
  ObjectSerializer serializer=muleContext.getObjectSerializer();
  SerializationProtocol serializationProtocol=serializer.getExternalProtocol();
  Event deserializedEvent=serializationProtocol.deserialize(serializationProtocol.serialize(event));
  assertNotSame(deserializedEvent,event);
  assertNotSame(deserializedEvent,event);
  assertNotSame(deserializedEvent.getSession(),event.getSession());
  assertFalse(deserializedEvent.getSession().equals(event.getSession()));
  assertEquals(1,deserializedEvent.getSession().getPropertyNamesAsSet().size());
  assertEquals("value",deserializedEvent.getSession().getProperty("key"));
  deserializedEvent.getSession().setProperty("newKey","newValue");
  assertEquals(2,deserializedEvent.getSession().getPropertyNamesAsSet().size());
  assertEquals("newValue",deserializedEvent.getSession().getProperty("newKey"));
  assertEquals(1,event.getSession().getPropertyNamesAsSet().size());
  assertNull(event.getSession().getProperty("newKey"));
}
