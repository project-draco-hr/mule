{
  when(expressionManager.isExpression(Mockito.anyString())).thenReturn(false);
  when(applicationContext.getBean(Mockito.eq("staticReferencedFlow"))).thenReturn(targetFlow);
  FlowRefFactoryBean flowRefFactoryBean=new FlowRefFactoryBean();
  flowRefFactoryBean.setName("staticReferencedFlow");
  flowRefFactoryBean.setApplicationContext(applicationContext);
  flowRefFactoryBean.setMuleContext(muleContext);
  flowRefFactoryBean.initialise();
  assertNotSame(targetFlow,flowRefFactoryBean.getObject());
  assertNotSame(targetFlow,flowRefFactoryBean.getObject());
  Assert.assertSame(result,flowRefFactoryBean.getObject().process(mock(MuleEvent.class)));
  Mockito.verify(applicationContext,Mockito.times(1)).getBean(Mockito.anyString());
  Mockito.verify(targetFlow,Mockito.times(1)).process(Mockito.any(MuleEvent.class));
  Mockito.verify(targetFlow,Mockito.never()).initialise();
  flowRefFactoryBean.dispose();
  Mockito.verify(targetSubFlow,Mockito.never()).dispose();
}
