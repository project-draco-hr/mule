{
  String payload="TEST";
  ByteArrayInputStream stream=new ByteArrayInputStream(payload.getBytes());
  HttpMessageAdapter messageAdapter=new HttpMessageAdapter(stream);
  MuleMessage message=new DefaultMuleMessage(messageAdapter,muleContext);
  byte[] serialized=SerializationUtils.serialize(message);
  MuleMessage deserializedMessage=(MuleMessage)SerializationUtils.deserialize(serialized);
  DeserializationPostInitialisable.Implementation.init(deserializedMessage,muleContext);
  assertEquals(payload,deserializedMessage.getPayloadAsString());
  assertEquals(payload,message.getPayloadAsString());
}
