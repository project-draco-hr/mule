{
  previousMuleHome=setProperty(MULE_HOME_DIRECTORY_PROPERTY,tempMuleHome.getRoot().getAbsolutePath());
  File libDir=getAppLibFolder(APP_NAME);
  assertThat(libDir.mkdirs(),is(true));
  final File appLibrary=new File(libDir,"appLibrary.jar");
  stringToFile(appLibrary.getAbsolutePath(),"Some text");
  File perAppLibFolder=getMulePerAppLibFolder();
  assertThat(perAppLibFolder.mkdirs(),is(true));
  final File perAppLibrary=new File(perAppLibFolder,"perAppLibrary.jar");
  stringToFile(perAppLibrary.getAbsolutePath(),"Some text");
  when(parentArtifactClassLoader.getClassLoaderLookupPolicy()).thenReturn(classLoaderLookupPolicy);
  when(parentArtifactClassLoader.getClassLoader()).thenReturn(getClass().getClassLoader());
  classesFolderUrl=getAppClassesFolder(APP_NAME).toURI().toURL();
  appLibraryUrl=appLibrary.toURI().toURL();
  perAppLibraryUrl=perAppLibrary.toURI().toURL();
}
