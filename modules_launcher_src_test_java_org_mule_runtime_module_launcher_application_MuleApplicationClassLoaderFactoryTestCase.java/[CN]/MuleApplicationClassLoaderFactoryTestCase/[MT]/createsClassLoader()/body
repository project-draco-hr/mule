{
  final NativeLibraryFinderFactory nativeLibraryFinderFactory=mock(NativeLibraryFinderFactory.class);
  MuleApplicationClassLoaderFactory classLoaderFactory=new MuleApplicationClassLoaderFactory(nativeLibraryFinderFactory);
  final ApplicationDescriptor descriptor=new ApplicationDescriptor();
  descriptor.setName(APP_NAME);
  descriptor.setDomain(DOMAIN_NAME);
  final MuleApplicationClassLoader artifactClassLoader=(MuleApplicationClassLoader)classLoaderFactory.create(parentArtifactClassLoader,descriptor,emptyList());
  verify(nativeLibraryFinderFactory).create(APP_NAME);
  assertThat(artifactClassLoader.getParent(),is(parentArtifactClassLoader.getClassLoader()));
  assertThat(artifactClassLoader.getURLs(),arrayContaining(classesFolderUrl,appLibraryUrl,perAppLibraryUrl));
}
