{
  UMOTransformer transformer=endpoint.getResponseTransformer();
  if (transformer == null)   transformer=component.getDescriptor().getResponseTransformer();
  if (transformer == null)   return returnMessage;
  if ((returnMessage == null)) {
    if (transformer.isAcceptNull()) {
      returnMessage=new MuleMessage(new NullPayload(),RequestContext.getProperties());
    }
 else {
      return null;
    }
  }
  if (transformer.isSourceTypeSupported(returnMessage.getPayload().getClass())) {
    Object result=transformer.transform(returnMessage.getPayload());
    if (result instanceof UMOMessage) {
      returnMessage=(UMOMessage)result;
    }
 else {
      returnMessage=new MuleMessage(result,returnMessage.getProperties());
    }
  }
 else {
    if (logger.isDebugEnabled()) {
      logger.debug("Response transformer: " + transformer + " doesn't support the result payload: "+ returnMessage.getPayload().getClass());
    }
  }
  return returnMessage;
}
