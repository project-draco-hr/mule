{
  final Object o=message.getInboundProperty(MuleProperties.MULE_REMOTE_SYNC_PROPERTY);
  if (ObjectUtils.getBoolean(o,false) && !endpoint.getExchangePattern().hasResponse()) {
    logger.warn("MuleClient.send() was used but inbound endpoint " + endpoint.getEndpointURI().getUri().toString() + " is not 'request-response'.  No response will be returned.");
  }
  message.removeProperty(MuleProperties.MULE_REMOTE_SYNC_PROPERTY,PropertyScope.INBOUND);
  MuleEvent muleEvent=createMuleEvent(message,outputStream);
  muleEvent=OptimizedRequestContext.unsafeSetEvent(muleEvent);
  if (!endpoint.isDisableTransportTransformer()) {
    applyInboundTransformers(muleEvent);
  }
  MuleEvent resultEvent=null;
  try {
    resultEvent=listener.process(muleEvent);
  }
 catch (  FilterUnacceptedException e) {
    return handleUnacceptedFilter(muleEvent.getMessage());
  }
  if (resultEvent != null && resultEvent.getMessage() != null && !endpoint.isDisableTransportTransformer()) {
    applyResponseTransformers(resultEvent);
  }
  return (resultEvent != null ? resultEvent.getMessage() : null);
}
