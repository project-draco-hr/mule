{
  String state=getPropertiesDelegate(event).get("state");
  try {
    return StringUtils.isEmpty(state) ? StringUtils.EMPTY : URLDecoder.decode(state,"UTF-8");
  }
 catch (  UnsupportedEncodingException e) {
    throw new MessagingException(MessageFactory.createStaticMessage("State query param had invalid encoding: " + state),event,this);
  }
}
