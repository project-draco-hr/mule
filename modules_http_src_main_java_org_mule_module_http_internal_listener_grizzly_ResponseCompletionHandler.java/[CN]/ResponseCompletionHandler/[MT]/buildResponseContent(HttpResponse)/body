{
  final HttpEntity body=httpResponse.getEntity();
  Buffer grizzlyBuffer=null;
  if (body != null && !(body instanceof EmptyHttpEntity)) {
    if (body instanceof ByteArrayHttpEntity) {
      grizzlyBuffer=Buffers.wrap(ctx.getMemoryManager(),((ByteArrayHttpEntity)body).getContent());
    }
 else {
      throw new MuleRuntimeException(CoreMessages.createStaticMessage("At this point only a ByteArray entity is allowed"));
    }
  }
  return HttpContent.builder(httpResponsePacket).content(grizzlyBuffer).build();
}
