{
  if (disposed) {
    throw new IllegalStateException("Requester/dispatcher has been disposed; cannot connect to resource");
  }
  if (connected) {
    return;
  }
  if (!connecting) {
    connecting=true;
    if (logger.isDebugEnabled()) {
      logger.debug("Connecting: " + this);
    }
    connectionStrategy.connect(this);
    logger.info("Connected: " + this);
    return;
  }
  try {
    connectionStrategy.connect(connector);
    this.doConnect();
    connected=true;
    connecting=false;
    connector.fireNotification(new ConnectionNotification(this,getConnectEventId(endpoint),ConnectionNotification.CONNECTION_CONNECTED));
  }
 catch (  Exception e) {
    connected=false;
    connecting=false;
    connector.fireNotification(new ConnectionNotification(this,getConnectEventId(endpoint),ConnectionNotification.CONNECTION_FAILED));
    if (e instanceof ConnectException) {
      throw (ConnectException)e;
    }
 else {
      throw new ConnectException(e,this);
    }
  }
}
