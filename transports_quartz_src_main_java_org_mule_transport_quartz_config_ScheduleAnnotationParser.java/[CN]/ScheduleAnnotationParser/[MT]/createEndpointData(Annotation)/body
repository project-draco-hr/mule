{
  Schedule schedule=(Schedule)annotation;
  String uri="quartz://schedule" + UUID.getUUID();
  AnnotatedEndpointData epData=new AnnotatedEndpointData(MessageExchangePattern.ONE_WAY,ChannelType.Inbound,annotation);
  epData.setProperties(convertProperties(getProperties(schedule)));
  String threads=(String)epData.getProperties().get("threads");
  if (threads == null) {
    threads="1";
    epData.getProperties().put("threads",threads);
  }
  epData.setAddress(uri);
  epData.setConnector(getConnector(schedule));
  EventGeneratorJobConfig config=new EventGeneratorJobConfig();
  config.setStateful(threads.equals("1"));
  epData.getProperties().put(QuartzConnector.PROPERTY_JOB_CONFIG,config);
  return epData;
}
