{
  Mockito.when(this.testStrategy.toString()).thenThrow(NotAuthorizedException.class);
  Mockito.when(this.adapter.getOnNoTokenPolicy()).thenReturn(OnNoTokenPolicy.EXCEPTION);
  try {
    this.processor.process(this.event);
  }
 catch (  MessagingException e) {
    Assert.assertTrue(e.getCause() instanceof NotAuthorizedException);
    throw e;
  }
}
