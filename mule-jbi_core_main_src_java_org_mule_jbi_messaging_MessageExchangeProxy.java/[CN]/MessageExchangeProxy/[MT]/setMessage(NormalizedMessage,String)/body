{
  if (!can(CAN_OWNER)) {
    throw new IllegalStateException("component is not owner");
  }
  if (msg == null) {
    throw new IllegalArgumentException("message should not be null");
  }
  if (name == null) {
    throw new IllegalArgumentException("name should not be null");
  }
  name=name.toLowerCase();
  if (MessageExchangeImpl.IN.equals(name) && !can(CAN_SET_IN_MSG)) {
    throw new MessagingException("In not supported");
  }
  if (MessageExchangeImpl.OUT.equals(name) && !can(CAN_SET_OUT_MSG)) {
    throw new MessagingException("Out not supported");
  }
  if (MessageExchangeImpl.FAULT.equals(name) && !can(CAN_SET_FAULT_MSG)) {
    throw new MessagingException("Fault not supported");
  }
  if (MessageExchangeImpl.FAULT.equals(name) && !(msg instanceof Fault)) {
    throw new MessagingException("Setting fault, but message is not a fault");
  }
  if (me.getMessage(name) != null) {
    throw new MessagingException("Can not set the message since it has already been set");
  }
  me.setMessage(msg,name);
}
