{
  if (!doesExist(userName)) {
    return null;
  }
  String baseKey=PREFIX + userName + '.';
  BaseUser user=new BaseUser();
  user.setName(userName);
  user.setEnabled(userDataProp.getBoolean(baseKey + ATTR_ENABLE,true));
  user.setHomeDirectory(userDataProp.getProperty(baseKey + ATTR_HOME,"/"));
  List authorities=new ArrayList();
  if (userDataProp.getBoolean(baseKey + ATTR_WRITE_PERM,false)) {
    authorities.add(new WritePermission());
  }
  int maxLogin=userDataProp.getInteger(baseKey + ATTR_MAX_LOGIN_NUMBER,0);
  int maxLoginPerIP=userDataProp.getInteger(baseKey + ATTR_MAX_LOGIN_PER_IP,0);
  authorities.add(new ConcurrentLoginPermission(maxLogin,maxLoginPerIP));
  int uploadRate=userDataProp.getInteger(baseKey + ATTR_MAX_UPLOAD_RATE,0);
  int downloadRate=userDataProp.getInteger(baseKey + ATTR_MAX_DOWNLOAD_RATE,0);
  authorities.add(new TransferRatePermission(downloadRate,uploadRate));
  user.setAuthorities((Authority[])authorities.toArray(new Authority[authorities.size()]));
  user.setMaxIdleTime(userDataProp.getInteger(baseKey + ATTR_MAX_IDLE_TIME,0));
  return user;
}
