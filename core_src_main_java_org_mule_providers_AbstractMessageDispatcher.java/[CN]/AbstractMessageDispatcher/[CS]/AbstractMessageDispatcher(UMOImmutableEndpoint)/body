{
  this.endpoint=endpoint;
  this.connector=(AbstractConnector)endpoint.getConnector();
  connectionStrategy=endpoint.getConnectionStrategy();
  if (connectionStrategy instanceof AbstractConnectionStrategy) {
    final AbstractConnectionStrategy connStrategy=(AbstractConnectionStrategy)connectionStrategy;
    if (connStrategy.isDoThreading()) {
      if (logger.isDebugEnabled()) {
        logger.debug("Overriding doThreading to false on " + connStrategy);
      }
      connStrategy.setDoThreading(false);
    }
  }
  if (isDoThreading()) {
    try {
      workManager=connector.getDispatcherWorkManager();
    }
 catch (    UMOException e) {
      dispose();
      throw new MuleRuntimeException(new Message(Messages.FAILED_TO_START_X,"WorkManager"),e);
    }
  }
  try {
    register();
  }
 catch (  RegistrationException re) {
    logger.error("Unable to register: " + re.toString());
  }
}
