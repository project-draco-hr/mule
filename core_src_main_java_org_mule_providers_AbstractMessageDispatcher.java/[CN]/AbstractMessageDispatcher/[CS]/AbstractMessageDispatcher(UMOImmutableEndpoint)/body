{
  this.endpoint=endpoint;
  this.connector=(AbstractConnector)endpoint.getConnector();
  connectionStrategy=connector.getConnectionStrategy();
  if (connectionStrategy instanceof AbstractConnectionStrategy) {
    ((AbstractConnectionStrategy)connectionStrategy).setDoThreading(false);
  }
  ThreadingProfile profile=connector.getDispatcherThreadingProfile();
  doThreading=profile.isDoThreading();
  if (doThreading) {
    try {
      workManager=connector.getDispatcherWorkManager();
    }
 catch (    UMOException e) {
      dispose();
      throw new MuleRuntimeException(new Message(Messages.FAILED_TO_START_X,"WorkManager"),e);
    }
  }
  try {
    register();
  }
 catch (  RegistrationException re) {
    logger.error("Unable to register: " + re.toString());
  }
}
