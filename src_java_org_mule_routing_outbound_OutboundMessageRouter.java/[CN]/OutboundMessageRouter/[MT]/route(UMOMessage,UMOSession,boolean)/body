{
  UMOMessage result=null;
  boolean matchfound=false;
  for (Iterator iterator=getRouters().iterator(); iterator.hasNext(); ) {
    UMOOutboundRouter umoOutboundRouter=(UMOOutboundRouter)iterator.next();
    if (umoOutboundRouter.isMatch(message)) {
      matchfound=true;
      final UMOOutboundRouter router=umoOutboundRouter;
      TransactionTemplate tt=new TransactionTemplate(umoOutboundRouter.getTransactionConfig(),session.getComponent().getDescriptor().getExceptionListener());
      TransactionCallback cb=new TransactionCallback(){
        public Object doInTransaction() throws Exception {
          return router.route(message,session,synchronous);
        }
      }
;
      try {
        result=(UMOMessage)tt.execute(cb);
      }
 catch (      Exception e) {
        throw new RoutingException(message,null,e);
      }
      if (!isMatchAll()) {
        return result;
      }
    }
  }
  if (!matchfound && getCatchAllStrategy() != null) {
    if (logger.isDebugEnabled()) {
      logger.debug("Message did not match any routers on: " + session.getComponent().getDescriptor().getName() + " invoking catch all strategy");
    }
    return catchAll(message,session,synchronous);
  }
 else   if (!matchfound) {
    System.err.println(message.toString());
    logger.warn("Message did not match any routers on: " + session.getComponent().getDescriptor().getName() + " and there is no catch all strategy configured on this router.  Disposing message.");
  }
  return message;
}
