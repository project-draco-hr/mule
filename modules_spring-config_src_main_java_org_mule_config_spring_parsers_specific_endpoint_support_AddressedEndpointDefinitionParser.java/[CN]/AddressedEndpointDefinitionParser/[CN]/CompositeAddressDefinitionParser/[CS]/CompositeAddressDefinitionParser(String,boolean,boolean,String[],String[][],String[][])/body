{
  super(false);
  addressParser=new ChildAddressDefinitionParser(metaOrProtocol,isMeta);
  addDelegate(addressParser);
  MuleChildDefinitionParser propertiesParser=new AttributePropertiesDefinitionParser(uriProperties ? QUERY_MAP : PROPERTIES);
  addressParser.registerPreProcessor(new BlockAttribute(AbstractMuleBeanDefinitionParser.ATTRIBUTE_REF));
  propertiesParser.registerPreProcessor(new BlockAttribute(AbstractMuleBeanDefinitionParser.ATTRIBUTE_REF));
  enableAttributes(addressParser,URIBuilder.ALL_ATTRIBUTES);
  if (null != requiredAddressAttributes) {
    enableAttributes(addressParser,requiredAddressAttributes);
    String[][] addressAttributeSets=new String[requiredAddressAttributes.length + 2][];
    addressAttributeSets[0]=new String[]{URIBuilder.ADDRESS};
    addressAttributeSets[1]=new String[]{AbstractMuleBeanDefinitionParser.ATTRIBUTE_REF};
    System.arraycopy(requiredAddressAttributes,0,addressAttributeSets,2,requiredAddressAttributes.length);
    addressParser.registerPreProcessor(new CheckRequiredAttributes(addressAttributeSets));
    addressParser.registerPreProcessor(new CheckExclusiveAttributes(addressAttributeSets));
  }
  disableAttributes(propertiesParser,endpointAttributes);
  disableAttributes(propertiesParser,URIBuilder.ALL_ATTRIBUTES);
  disableAttributes(propertiesParser,requiredAddressAttributes);
  disableAttribute(propertiesParser,AbstractMuleBeanDefinitionParser.ATTRIBUTE_NAME);
  propertiesParser.registerPreProcessor(new CheckExclusiveAttribute(AbstractMuleBeanDefinitionParser.ATTRIBUTE_REF));
  propertiesParser.registerPreProcessor(new CheckRequiredAttributes(requiredProperties));
  addChildDelegate(propertiesParser);
}
