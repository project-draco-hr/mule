{
  super();
  if (requestLine == null) {
    throw new IllegalArgumentException("Request line may not be null");
  }
  this.requestLine=requestLine;
  this.defaultEncoding=defaultEncoding;
  if (headers != null) {
    this.headers.setHeaders(headers);
  }
  if (content != null && shouldProcessContent()) {
    Header contentLength=this.headers.getFirstHeader(HttpConstants.HEADER_CONTENT_LENGTH);
    Header transferEncoding=this.headers.getFirstHeader(HttpConstants.HEADER_TRANSFER_ENCODING);
    InputStream in=content;
    if (transferEncoding != null) {
      if (transferEncoding.getValue().indexOf(HttpConstants.TRANSFER_ENCODING_CHUNKED) != -1) {
        in=new ChunkedInputStream(in);
      }
    }
 else     if (contentLength != null) {
      long len=getContentLength();
      if (len >= 0) {
        in=new ContentLengthInputStream(in,len);
      }
    }
    this.entity=in;
  }
}
