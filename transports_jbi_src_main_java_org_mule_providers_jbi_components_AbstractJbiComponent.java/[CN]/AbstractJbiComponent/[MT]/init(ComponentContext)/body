{
  try {
    if (context.getComponentName() != null) {
      name=context.getComponentName();
    }
    if (name == null) {
      throw new NullPointerException("No name has been set for this component");
    }
    if (service == null) {
      service=(QName)new QNameConverter().convert(QName.class,name);
    }
    context.activateEndpoint(service,service.getLocalPart());
    if (logger.isDebugEnabled()) {
      logger.debug("Initializing component: " + name);
    }
    this.context=context;
    deliveryChannel=context.getDeliveryChannel();
    exchangeFactory=deliveryChannel.createExchangeFactory();
    Object mbean=getExtensionMBean();
    if (serviceUnitManager == null) {
      serviceUnitManager=new DefaultServiceUnitManager();
    }
    if (workManager == null) {
      throw new NullPointerException("WorkManager must be set");
    }
    if (mbean != null) {
      if (mbeanName == null) {
        this.mbeanName=createExtensionMBeanName();
      }
      MBeanServer server=AbstractJbiComponent.this.context.getMBeanServer();
      if (server == null) {
        throw new JBIException("null mBeanServer");
      }
      if (server.isRegistered(this.mbeanName)) {
        server.unregisterMBean(this.mbeanName);
      }
      server.registerMBean(mbean,this.mbeanName);
    }
    doInit();
    if (logger.isDebugEnabled()) {
      logger.debug("Jbi Receiver Component initialized: " + name);
    }
  }
 catch (  JBIException e) {
    throw e;
  }
catch (  Exception e) {
    throw new JBIException("Error calling init on " + name,e);
  }
}
