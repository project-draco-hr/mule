{
  int idx=uri.indexOf('?');
  if (idx != -1) {
    uri=uri.substring(0,idx);
  }
  EndpointInfo ei=new EndpointInfo();
  ei.setAddress(uri);
  Destination d=df.getDestination(ei);
  if (d.getMessageObserver() == null) {
    throw new EndpointNotFoundException(uri);
  }
  MessageObserver mo=d.getMessageObserver();
  if (!(mo instanceof ChainInitiationObserver)) {
    throw new EndpointNotFoundException(uri);
  }
  ChainInitiationObserver co=(ChainInitiationObserver)mo;
  return co.getEndpoint();
}
