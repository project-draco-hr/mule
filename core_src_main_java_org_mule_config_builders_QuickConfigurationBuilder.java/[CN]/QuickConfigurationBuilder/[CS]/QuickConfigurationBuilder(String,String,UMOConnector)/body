{
  managementContext=new ManagementContext();
  if (serverConnector != null) {
    managementContext.getRegistry().registerConnector(serverConnector);
  }
  if (!StringUtils.isBlank(serverUrl)) {
    MuleAdminAgent agent=new MuleAdminAgent();
    agent.setServerUri(serverUrl);
    agent.setName("Mule Admin Agent");
    managementContext.getRegistry().registerAgent(agent);
  }
  if (!MODEL_NOT_SET.equals(modeltype)) {
    model=ModelFactory.createModel(modeltype);
  }
 else {
    model=ModelFactory.createModel("seda");
  }
  managementContext.getRegistry().registerModel(model);
  managementContext.start();
}
