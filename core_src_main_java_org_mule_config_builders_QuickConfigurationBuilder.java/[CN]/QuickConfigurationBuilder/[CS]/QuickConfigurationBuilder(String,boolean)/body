{
  if (RegistryContext.getRegistry() == null) {
    TransientRegistry registry=TransientRegistry.createNew();
    RegistryContext.setRegistry(registry);
  }
  managementContext=RegistryContext.getRegistry().getManagementContext();
  String defaultModelName=UMOModel.DEFAULT_MODEL_NAME + "-qbuilder";
  if (managementContext.getRegistry().lookupModel(defaultModelName) == null) {
    if (!MODEL_NOT_SET.equals(modeltype)) {
      model=ModelFactory.createModel(modeltype);
    }
 else {
      model=ModelFactory.createModel("seda");
    }
    model.setName(defaultModelName);
    managementContext.getRegistry().registerModel(model);
  }
  if (startManagementContext) {
    managementContext.start();
  }
}
