{
  try {
    MuleDescriptor descriptor=new MuleDescriptor();
    descriptor.setServiceFactory(new SimpleObjectFactory(implementation,properties));
    descriptor.setName(name);
    descriptor.setModelName(getModel().getName());
    if (properties != null) {
      descriptor.getProperties().putAll(properties);
    }
    descriptor.setOutboundRouter(new OutboundRouterCollection());
    if (outboundEndpoint != null) {
      OutboundPassThroughRouter router=new OutboundPassThroughRouter();
      router.addEndpoint(outboundEndpoint);
      descriptor.getOutboundRouter().addRouter(router);
    }
    descriptor.setInboundRouter(new InboundRouterCollection());
    if (inboundEndpoint != null) {
      descriptor.getInboundRouter().addEndpoint(inboundEndpoint);
    }
    return descriptor;
  }
 catch (  Exception e) {
    throw new CreateException(e,this);
  }
}
