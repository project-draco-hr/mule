{
  String key=address;
  if (key == null) {
    key=name;
  }
  UMOEndpoint ep=null;
  ep=RegistryContext.getRegistry().lookupEndpoint(name);
  if (ep == null) {
    ep=new MuleEndpoint(name,new MuleEndpointURI(address),connector,transformer,type,createConnector,encoding,properties);
  }
 else {
    ep=new MuleEndpoint(ep);
  }
  if (responseTransformer != null)   ep.setResponseTransformer(responseTransformer);
  if (filter != null)   ep.setFilter(filter);
  if (securityFilter != null)   ep.setSecurityFilter(securityFilter);
  if (transactionConfig != null)   ep.setTransactionConfig(transactionConfig);
  return ep;
}
