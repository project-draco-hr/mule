{
  RequestContext.safeSetEvent(getTestEvent("test"));
  Properties p=new Properties();
  p.setProperty("Key1","Value1");
  p.setProperty("Key2","Value2");
  p.setProperty("Key3","Value3");
  AbstractJmsTransformer trans=new SessionEnabledObjectToJMSMessage(session);
  trans.setReturnClass(MapMessage.class);
  Object result2=trans.transform(p);
  assertTrue("Transformed object should be a MapMessage",result2 instanceof MapMessage);
  MapMessage mMsg=(MapMessage)result2;
  AbstractJmsTransformer trans2=new JMSMessageToObject();
  trans2.setReturnClass(Map.class);
  Object result=trans2.transform(mMsg);
  assertTrue("Transformed object should be a Map",result instanceof Map);
}
