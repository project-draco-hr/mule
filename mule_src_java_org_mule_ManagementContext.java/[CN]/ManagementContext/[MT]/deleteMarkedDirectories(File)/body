{
  if (dir != null && dir.isDirectory()) {
    if (new File(dir,".delete").isFile()) {
      deleteDir(dir);
    }
 else {
      File[] children=dir.listFiles();
      for (int i=0; i < children.length; i++) {
        if (children[i].isDirectory()) {
          deleteMarkedDirectories(children[i]);
        }
      }
    }
  }
}
