{
  final ServiceDiscoverer serviceDiscoverer=mock(ServiceDiscoverer.class);
  final List<Service> services=new ArrayList<>();
  Service service1=mock(Service.class);
  Service service2=mock(Service.class);
  services.add(service1);
  services.add(service2);
  when(serviceDiscoverer.discoverServices()).thenReturn(services);
  final MuleServiceManager muleServiceManager=new MuleServiceManager(serviceDiscoverer);
  muleServiceManager.start();
  assertThat(muleServiceManager.getServices().size(),equalTo(2));
  assertThat(muleServiceManager.getServices().get(0),equalTo(service1));
  assertThat(muleServiceManager.getServices().get(1),equalTo(service2));
}
