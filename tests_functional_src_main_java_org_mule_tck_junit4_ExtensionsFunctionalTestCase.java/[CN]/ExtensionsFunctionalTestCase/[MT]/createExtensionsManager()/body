{
  extensionManager=new DefaultExtensionManager();
  Describer[] describers=getManagedDescribers();
  if (ArrayUtils.isEmpty(describers)) {
    extensionManager.discoverExtensions(muleContext.getExecutionClassLoader());
  }
 else {
    loadExtensionsFromDescribers(extensionManager,describers);
  }
  generatedResourcesDirectory=getGenerationTargetDirectory();
  ResourcesGenerator generator=new ExtensionsTestInfrastructureResourcesGenerator(serviceRegistry,generatedResourcesDirectory);
  List<GenerableResourceContributor> resourceContributors=getGenerableResourceContributors();
  for (  Extension extension : extensionManager.getExtensions()) {
    for (    GenerableResourceContributor contributor : resourceContributors) {
      contributor.contribute(extension,generator);
    }
  }
  generateResourcesAndAddToClasspath(generator);
}
