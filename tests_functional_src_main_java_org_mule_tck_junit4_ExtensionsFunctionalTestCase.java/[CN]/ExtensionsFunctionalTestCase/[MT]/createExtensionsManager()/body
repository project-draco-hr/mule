{
  extensionManager=new DefaultExtensionManager();
  Describer[] describers=getDescribers();
  if (ArrayUtils.isEmpty(describers)) {
    Class<?>[] annotatedClasses=getAnnotatedExtensionClasses();
    if (!ArrayUtils.isEmpty(annotatedClasses)) {
      describers=new Describer[annotatedClasses.length];
      int i=0;
      for (      Class<?> annotatedClass : annotatedClasses) {
        describers[i++]=new AnnotationsBasedDescriber(annotatedClass);
      }
    }
  }
  if (ArrayUtils.isEmpty(describers)) {
    extensionManager.discoverExtensions(getClass().getClassLoader());
  }
 else {
    loadExtensionsFromDescribers(extensionManager,describers);
  }
  generatedResourcesDirectory=getGenerationTargetDirectory();
  ResourcesGenerator generator=new ExtensionsTestInfrastructureResourcesGenerator(serviceRegistry,generatedResourcesDirectory);
  List<GenerableResourceContributor> resourceContributors=getGenerableResourceContributors();
  for (  Extension extension : extensionManager.getExtensions()) {
    for (    GenerableResourceContributor contributor : resourceContributors) {
      contributor.contribute(extension,generator);
    }
  }
  generateResourcesAndAddToClasspath(generator);
}
