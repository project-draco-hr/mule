{
  reader.setValidation(validate);
  reader.setFeature(APACHE_XML_FEATURES_VALIDATION_SCHEMA,validate);
  reader.setFeature(APACHE_XML_FEATURES_VALIDATION_SCHEMA_FULL_CHECKING,true);
  if (!validate) {
    return;
  }
  InputStream xsdAsStream=IOUtils.getResourceAsStream(getExternalSchemaLocation(),getClass());
  if (xsdAsStream == null) {
    throw new IllegalArgumentException("Couldn't find schema at " + getExternalSchemaLocation());
  }
  reader.setProperty(JAXP_PROPERTIES_SCHEMA_LANGUAGE,JAXP_PROPERTIES_SCHEMA_LANGUAGE_VALUE);
  reader.setProperty(JAXP_PROPERTIES_SCHEMA_SOURCE,xsdAsStream);
}
