{
  MuleMessage message=new DefaultMuleMessage(new Apple(),props,muleContext);
  Object o=muleContext.getExpressionManager().evaluate("#[string:payload is #[function:shortPayloadClass] and has foo=#[header:foo] header]",message);
  assertNotNull(o);
  assertEquals("payload is Apple and has foo=moo header",o.toString());
  o=muleContext.getExpressionManager().evaluate("#[string:literal string]",message);
  assertNotNull(o);
  assertEquals("literal string",o.toString());
}
