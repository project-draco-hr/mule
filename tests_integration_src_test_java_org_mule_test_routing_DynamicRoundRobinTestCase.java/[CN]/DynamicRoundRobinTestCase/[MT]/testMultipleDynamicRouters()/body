{
  initCustomResolver();
  Flow testFlow=getTestFlow(MULTIPLE_ROUND_ROBIN);
  runFlowAndAssertResponse(testFlow,Collections.<String,Object>singletonMap(FIRST_ROUTER_VAR,FIRST_ROUTER),LETTER_A);
  runFlowAndAssertResponse(testFlow,Collections.<String,Object>singletonMap(FIRST_ROUTER_VAR,FIRST_ROUTER),LETTER_B);
  runFlowAndAssertResponse(testFlow,Collections.<String,Object>singletonMap(FIRST_ROUTER_VAR,!FIRST_ROUTER),LETTER_A);
  runFlowAndAssertResponse(testFlow,Collections.<String,Object>singletonMap(FIRST_ROUTER_VAR,FIRST_ROUTER),LETTER_C);
  runFlowAndAssertResponse(testFlow,Collections.<String,Object>singletonMap(FIRST_ROUTER_VAR,!FIRST_ROUTER),LETTER_B);
}
