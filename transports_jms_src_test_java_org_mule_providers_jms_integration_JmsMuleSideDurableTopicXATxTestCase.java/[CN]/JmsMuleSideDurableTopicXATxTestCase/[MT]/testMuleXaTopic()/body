{
  UMOMessage result=null;
  MuleClient client=new MuleClient();
  client.dispatch("vm://in",DEFAULT_INPUT_MESSAGE,null);
  result=client.receive("vm://out",TIMEOUT);
  assertNotNull(result);
  result=client.receive("vm://out",TIMEOUT);
  assertNotNull(result);
  result=client.receive("vm://out",SMALL_TIMEOUT);
  assertNull(result);
  managementContext.getRegistry().lookupConnector(CONNECTOR1_NAME).stop();
  assertEquals(managementContext.getRegistry().lookupConnector(CONNECTOR1_NAME).isStarted(),false);
  logger.info(CONNECTOR1_NAME + " is stopped");
  client.dispatch("vm://in",DEFAULT_INPUT_MESSAGE,null);
  Thread.sleep(1000);
  managementContext.getRegistry().lookupConnector(CONNECTOR1_NAME).start();
  Thread.sleep(1000);
  logger.info(CONNECTOR1_NAME + " is started");
  result=client.receive("vm://out",TIMEOUT);
  assertNotNull(result);
  result=client.receive("vm://out",TIMEOUT);
  assertNotNull(result);
  result=client.receive("vm://out",SMALL_TIMEOUT);
  assertNull(result);
}
