{
  if (connectionProperties != null && connectionProperties.isEmpty()) {
    return url;
  }
  StringBuilder effectiveUrl=new StringBuilder(url);
  if (getUri(url).getQuery() == null) {
    effectiveUrl.append("?");
  }
 else {
    effectiveUrl.append("&");
  }
  return effectiveUrl.append(buildQueryParams(connectionProperties)).toString();
}
