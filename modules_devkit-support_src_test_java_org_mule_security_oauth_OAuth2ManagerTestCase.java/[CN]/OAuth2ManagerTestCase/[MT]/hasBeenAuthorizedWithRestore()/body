{
  RestoreAccessTokenCallback callback=Mockito.mock(RestoreAccessTokenCallback.class);
  Mockito.when(this.adapter.getOauthRestoreAccessToken()).thenReturn(callback);
  final String accessToken="accessToken";
  Mockito.when(callback.getAccessToken()).thenReturn(accessToken);
  Mockito.when(this.adapter.getAccessToken()).thenReturn(null).thenAnswer(new Answer<String>(){
    @Override public String answer(    InvocationOnMock invocation) throws Throwable {
      Mockito.verify(adapter).setAccessToken(accessToken);
      return accessToken;
    }
  }
);
  this.manager.hasBeenAuthorized(this.adapter);
}
