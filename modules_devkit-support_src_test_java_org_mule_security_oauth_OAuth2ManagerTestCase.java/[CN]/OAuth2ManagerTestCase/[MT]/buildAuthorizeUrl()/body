{
  final Map<String,String> extraParameters=new LinkedHashMap<String,String>();
  extraParameters.put("extra1","extra1");
  extraParameters.put("extra2","extra2");
  final String authorizationUrl="authorizationUrl";
  final String redirectUri="redirectUri";
  when(adapter.getAuthorizationUrl()).thenReturn(authorizationUrl);
  when(adapter.getConsumerKey()).thenReturn("consumerKey");
  Assert.assertEquals(URLDecoder.decode(this.manager.buildAuthorizeUrl(extraParameters,null,redirectUri),"UTF-8"),"authorizationUrl?response_type=code&client_id=consumerKey&scope=<<myScope>>&extra1=extra1&extra2=extra2&redirect_uri=redirectUri");
  Assert.assertEquals(URLDecoder.decode(this.manager.buildAuthorizeUrl(extraParameters,"custom",redirectUri),"UTF-8"),"custom?response_type=code&client_id=consumerKey&scope=<<myScope>>&extra1=extra1&extra2=extra2&redirect_uri=redirectUri");
}
