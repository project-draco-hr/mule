{
  final String accessTokenUrl="accessTokenUrl";
  this.manager.setAccessTokenUrl(accessTokenUrl);
  final String oauthVerifier="oauthVerifier";
  final String consumerKey="consumerKey";
  final String consumerSecret="consumerSecret";
  final String response="response";
  final String requestBody="grant_type=refresh_token&client_id=consumerKey&client_secret=consumerSecret&refresh_token=refreshToken";
  final Pattern accessTokenPattern=Pattern.compile(".");
  final Pattern expirationPattern=Pattern.compile(".");
  final Pattern refreshTokenPattern=Pattern.compile(".");
  final String accessToken="accessToken";
  final String refreshToken="refreshToken";
  final Date expiration=new Date();
  SaveAccessTokenCallback saveCallback=Mockito.mock(SaveAccessTokenCallback.class);
  Mockito.when(this.adapter.getOauthSaveAccessToken()).thenReturn(saveCallback);
  Mockito.when(adapter.getOauthVerifier()).thenReturn(oauthVerifier);
  Mockito.when(adapter.getConsumerKey()).thenReturn(consumerKey);
  Mockito.when(adapter.getConsumerSecret()).thenReturn(consumerSecret);
  Mockito.when(adapter.getAccessCodePattern()).thenReturn(accessTokenPattern);
  Mockito.when(adapter.getRefreshTokenPattern()).thenReturn(refreshTokenPattern);
  Mockito.when(adapter.getExpirationTimePattern()).thenReturn(expirationPattern);
  Mockito.when(adapter.getRefreshToken()).thenReturn(refreshToken);
  Mockito.when(this.httpUtil.post(this.manager.getAccessTokenUrl(),requestBody)).thenReturn(response);
  Mockito.when(this.oauthResponseParser.extractAccessCode(accessTokenPattern,response)).thenReturn(accessToken);
  Mockito.when(this.oauthResponseParser.extractExpirationTime(expirationPattern,response)).thenReturn(expiration);
  Mockito.when(this.oauthResponseParser.extractRefreshToken(refreshTokenPattern,response)).thenReturn(refreshToken);
  this.manager.refreshAccessToken(adapter);
  Mockito.verify(this.adapter).setAccessToken(null);
  Mockito.verify(this.httpUtil).post(this.manager.getAccessTokenUrl(),requestBody);
  Mockito.verify(this.oauthResponseParser).extractAccessCode(accessTokenPattern,response);
  Mockito.verify(this.adapter).setAccessToken(accessToken);
  Mockito.verify(this.adapter).setExpiration(expiration);
  Mockito.verify(this.adapter).setRefreshToken(refreshToken);
  Mockito.verify(this.adapter).getOauthSaveAccessToken();
  Mockito.verify(saveCallback).saveAccessToken(Mockito.anyString(),Mockito.anyString());
  Mockito.verify(adapter).postAuth();
  Mockito.verify(this.manager).fetchCallbackParameters(this.adapter,response);
}
