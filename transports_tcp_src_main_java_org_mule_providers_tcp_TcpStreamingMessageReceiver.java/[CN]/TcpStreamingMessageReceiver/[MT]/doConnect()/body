{
  URI uri=endpoint.getEndpointURI().getUri();
  String host=StringUtils.defaultIfEmpty(uri.getHost(),"localhost");
  try {
    logger.debug("Attempting to connect to server socket");
    InetAddress inetAddress=InetAddress.getByName(host);
    clientSocket=new Socket(inetAddress,uri.getPort());
    TcpConnector connector=(TcpConnector)this.connector;
    clientSocket.setReceiveBufferSize(connector.getReceiveBufferSize());
    clientSocket.setSendBufferSize(connector.getSendBufferSize());
    clientSocket.setSoTimeout(connector.getServerSoTimeout());
    dataIn=new DataInputStream(new BufferedInputStream(clientSocket.getInputStream()));
    logger.debug("Connected to server socket");
  }
 catch (  Exception e) {
    throw new ConnectException(TcpMessages.failedToBindToUri(uri),e,this);
  }
}
