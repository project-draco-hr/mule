{
  super.setEndpoint(uri,props);
  String newUri=null;
  String oldUri=uri.toString();
  if (oldUri.startsWith("jms://queue") || oldUri.startsWith("jms://topic")) {
    oldUri=oldUri.substring(6);
  }
  if (oldUri.startsWith("topic")) {
    props.setProperty(RESOURCE_INFO_PROPERTY,"topic");
    newUri=oldUri.replace("topic://","jms://");
  }
 else   if (oldUri.startsWith("queue")) {
    newUri=uri.toString().replace("queue://","jms://");
  }
  try {
    if (newUri != null) {
      rewriteURI(new URI(newUri));
    }
  }
 catch (  URISyntaxException e) {
    throw new MalformedEndpointException(e);
  }
}
