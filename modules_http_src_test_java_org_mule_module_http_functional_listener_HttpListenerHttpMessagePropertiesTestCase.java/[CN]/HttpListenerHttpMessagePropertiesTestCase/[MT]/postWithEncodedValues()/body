{
  final ImmutableMap<String,Object> queryParams=ImmutableMap.<String,Object>builder().put(QUERY_PARAM_NAME,QUERY_PARAM_VALUE_WITH_SPACES).build();
  final String url=String.format("http://localhost:%s/?" + buildQueryString(queryParams),listenPort.getNumber());
  Request.Post(url).connectTimeout(1000).execute();
  final MuleMessage message=muleContext.getClient().request("vm://out",1000);
  ParameterMap retrivedQueryParams=message.getInboundProperty(HttpConstants.RequestProperties.HTTP_QUERY_PARAMS);
  assertThat(retrivedQueryParams,IsNull.notNullValue());
  assertThat(retrivedQueryParams.size(),is(1));
  assertThat(retrivedQueryParams.get(QUERY_PARAM_NAME),is(QUERY_PARAM_VALUE_WITH_SPACES));
}
