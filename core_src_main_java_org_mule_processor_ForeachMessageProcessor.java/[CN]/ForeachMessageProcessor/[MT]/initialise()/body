{
  if (expression != null) {
    ExpressionConfig config=new ExpressionConfig();
    config.setExpression(expression);
    splitter=new ExpressionSplitter(config);
  }
 else {
    splitter=new CollectionSplitter();
  }
  splitter.setGroupSize(groupSize);
  splitter.setCounterVariableName(counterVariableName);
  splitter.setMuleContext(muleContext);
  messageProcessors.add(0,splitter);
  try {
    this.ownedMessageProcessor=new DefaultMessageProcessorChainBuilder().chain(messageProcessors).build();
  }
 catch (  MuleException e) {
    throw new InitialisationException(e,this);
  }
  super.initialise();
}
