{
  Object msgRecipients=message.removeProperty(RECIPIENTS_PROPERTY);
  if (msgRecipients == null) {
    return recipients;
  }
 else   if (msgRecipients instanceof String) {
    return new CopyOnWriteArrayList(StringUtils.splitAndTrim(msgRecipients.toString(),getListDelimiter()));
  }
 else   if (msgRecipients instanceof List) {
    return new CopyOnWriteArrayList((List)msgRecipients);
  }
 else {
    logger.warn("Recipients on message are neither String nor List but: " + msgRecipients.getClass());
    return Collections.EMPTY_LIST;
  }
}
