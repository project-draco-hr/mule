{
  UMOEndpoint endpoint=lookupEndpoint(uriIdentifier);
  if (endpoint == null) {
    return createEndpointFromUri(uriIdentifier,type,managementContext);
  }
 else {
    if (UMOEndpoint.ENDPOINT_TYPE_SENDER.equals(type)) {
      return new OutboundEndpoint(endpoint);
    }
 else     if (UMOEndpoint.ENDPOINT_TYPE_RECEIVER.equals(type)) {
      return new InboundEndpoint(endpoint);
    }
 else     if (UMOEndpoint.ENDPOINT_TYPE_RESPONSE.equals(type)) {
      return new ResponseEndpoint(endpoint);
    }
 else {
      throw new IllegalArgumentException("Endpoint matching: " + uriIdentifier + " is not of a recognized type: "+ type+ ". It is of type: "+ endpoint.getType());
    }
  }
}
