{
  if (logger.isInfoEnabled()) {
    logger.info(miniSplash(format("Initializing app '%s'",descriptor.getName())));
  }
  try {
    ArtifactMuleContextBuilder artifactBuilder=new ArtifactMuleContextBuilder().setArtifactProperties(descriptor.getAppProperties()).setArtifactType(APP).setArtifactInstallationDirectory(new File(MuleContainerBootstrapUtils.getMuleAppsDir(),getArtifactName())).setConfigurationFiles(descriptor.getAbsoluteResourcePaths()).setDefaultEncoding(descriptor.getEncoding()).setApplicationPlugins(applicationPlugins).setExecutionClassloader(deploymentClassLoader.getClassLoader());
    Domain domain=domainRepository.getDomain(descriptor.getDomain());
    if (domain.getMuleContext() != null) {
      artifactBuilder.setParentContext(domain.getMuleContext());
    }
    if (deploymentListener != null) {
      artifactBuilder.setMuleContextListener(new MuleContextDeploymentListener(getArtifactName(),deploymentListener));
    }
    setMuleContext(artifactBuilder.build());
  }
 catch (  Exception e) {
    setStatusToFailed();
    logger.error(null,ExceptionUtils.getRootCause(e));
    throw new DeploymentInitException(createStaticMessage(ExceptionUtils.getRootCauseMessage(e)),e);
  }
}
