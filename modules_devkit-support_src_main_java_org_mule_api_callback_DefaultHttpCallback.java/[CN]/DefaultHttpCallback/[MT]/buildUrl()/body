{
  StringBuilder urlBuilder=new StringBuilder();
  if (!domain.contains("://")) {
    if (connector != null) {
      urlBuilder.append((connector.getProtocol() + "://"));
    }
 else {
      urlBuilder.append("http://");
    }
  }
  urlBuilder.append(domain);
  if ((remotePort != null) && (remotePort != 80)) {
    urlBuilder.append(":");
    urlBuilder.append(remotePort);
  }
  urlBuilder.append("/");
  if (callbackPath != null) {
    urlBuilder.append(callbackPath);
  }
 else {
    urlBuilder.append(UUID.randomUUID());
  }
  return urlBuilder.toString();
}
