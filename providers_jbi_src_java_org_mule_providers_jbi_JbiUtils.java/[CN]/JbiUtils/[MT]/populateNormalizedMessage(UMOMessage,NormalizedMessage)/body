{
  try {
    message.setContent(new StreamSource(new ByteArrayInputStream(muleMessage.getPayloadAsBytes())));
  }
 catch (  Exception e) {
    throw new MessagingException(e.getMessage(),e);
  }
  for (Iterator iterator=muleMessage.getPropertyNames(); iterator.hasNext(); ) {
    String s=(String)iterator.next();
    message.setProperty(s,muleMessage.getProperty(s));
  }
  for (Iterator iterator=muleMessage.getAttachmentNames().iterator(); iterator.hasNext(); ) {
    String s=(String)iterator.next();
    message.addAttachment(s,muleMessage.getAttachment(s));
  }
}
