{
  try {
    logger.info("processing xmpp message from: " + message.getFrom());
    UMOMessageAdapter adapter=connector.getMessageAdapter(message);
    logger.info("UMOMessageAdapter is a: " + adapter.getClass().getName());
    UMOMessage returnMessage=routeMessage(new MuleMessage(adapter),endpoint.isSynchronous());
    if (returnMessage != null) {
      xmppConnection.sendPacket(new Message(returnMessage.getPayloadAsString()));
    }
  }
 catch (  Exception e) {
    handleException("Something bad happened processing xmpp message: ",e);
  }
}
