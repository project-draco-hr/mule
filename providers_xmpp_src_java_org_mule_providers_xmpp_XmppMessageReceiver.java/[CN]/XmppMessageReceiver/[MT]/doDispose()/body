{
  if (worker != null) {
    worker.interrupt();
    worker=null;
  }
  try {
    threadPool.shutdownAfterProcessingCurrentlyQueuedTasks();
    threadPool.awaitTerminationAfterShutdown();
  }
 catch (  Exception e) {
    throw new DisposeException(e,this);
  }
  logger.info("Closed Xmpp connection");
}
