{
  if (basePath == null) {
    basePath="/";
  }
  if (!basePath.startsWith("/")) {
    basePath="/" + basePath;
  }
  if (!basePath.endsWith("/")) {
    basePath+="/";
  }
  Map<MessageProcessor,String> result=new LinkedHashMap<MessageProcessor,String>();
  int index=0;
  for (  MessageProcessor mp : processors) {
    String prefix=basePath + index;
    result.put(mp,prefix);
    if (mp instanceof MessageProcessorContainer) {
      Map<MessageProcessor,String> children=((MessageProcessorContainer)mp).getMessageProcessorPaths();
      prefixMessageProcessorPaths(prefix,children);
      result.putAll(children);
    }
    index++;
  }
  return result;
}
