{
  FtpMuleMessageFactory factory=new FtpMuleMessageFactory();
  factory.setFtpClient(new TestFTPClient());
  MuleContext muleContext=mock(MuleContext.class,RETURNS_DEEP_STUBS);
  final FTPFile file=new FTPFile();
  file.setName("test.txt");
  MuleMessage message=factory.create(file,null,muleContext);
  assertThat(message.getDataType().getMimeType(),equalTo(MimeTypes.TEXT));
}
