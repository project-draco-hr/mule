{
  UMOEndpoint endpoint=MuleEndpoint.getOrCreateEndpointForUri(endpointUri,UMOEndpoint.ENDPOINT_TYPE_SENDER);
  if (beginTransaction && factory == null) {
    ConnectorServiceDescriptor csd=ConnectorFactory.getServiceDescriptor(endpointUri.getSchemeMetaInfo());
    factory=csd.createTransactionFactory();
  }
  setTransactionAttributes(endpoint);
  Object temp=message.getProperty(MuleProperties.MULE_SYNCHRONOUS_RECEIVE_PROPERTY);
  if (temp == null) {
    message.setBooleanProperty(MuleProperties.MULE_SYNCHRONOUS_RECEIVE_PROPERTY,true);
  }
  return session.sendEvent(message,endpoint);
}
