{
  Foreach foreachMp=new Foreach();
  foreachMp.setMuleContext(muleContext);
  List<MessageProcessor> processors=getSimpleMessageProcessors();
  foreachMp.setMessageProcessors(processors);
  foreachMp.initialise();
  MessageProcessorPathElement mpPathElement=mock(MessageProcessorPathElement.class);
  foreachMp.addMessageProcessorPathElements(mpPathElement);
  final List<MessageProcessor> originalMessageProcessors=processors.subList(1,3);
  assertAddedPathElements(originalMessageProcessors,mpPathElement);
}
