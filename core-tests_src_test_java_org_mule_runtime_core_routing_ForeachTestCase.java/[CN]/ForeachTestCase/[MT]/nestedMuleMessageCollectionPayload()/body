{
  List<MuleMessage> parentList=new ArrayList<>();
  List<MuleMessage> list1=new ArrayList<>();
  List<MuleMessage> list2=new ArrayList<>();
  list1.add(new DefaultMuleMessage("a1",muleContext));
  list1.add(new DefaultMuleMessage("a2",muleContext));
  list1.add(new DefaultMuleMessage("a3",muleContext));
  list2.add(new DefaultMuleMessage("b1",muleContext));
  list2.add(new DefaultMuleMessage("b2",muleContext));
  list2.add(new DefaultMuleMessage("c1",muleContext));
  parentList.add(new DefaultMuleMessage(list1,muleContext));
  parentList.add(new DefaultMuleMessage(list2,muleContext));
  MuleMessage parentCollection=new DefaultMuleMessage(parentList,muleContext);
  nestedForeach.process(getTestEvent(parentCollection));
  assertNestedProcessedMessages();
}
