{
  EndpointMessageProcessorChainFactory factory=getMessageProcessorsFactory();
  MessageProcessor processorChain=factory.createInboundMessageProcessorChain(this,flowConstruct,listener);
  if (processorChain instanceof MuleContextAware) {
    ((MuleContextAware)processorChain).setMuleContext(getMuleContext());
  }
  if (processorChain instanceof FlowConstructAware) {
    ((FlowConstructAware)processorChain).setFlowConstruct(flowContruct);
  }
  if (processorChain instanceof Initialisable) {
    ((Initialisable)processorChain).initialise();
  }
  OutboundEndpoint polledEndpoint=(OutboundEndpoint)getProperty(MessageProcessorPollingMessageReceiver.SOURCE_MESSAGE_PROCESSOR_PROPERTY_NAME);
  if (polledEndpoint instanceof MuleContextAware) {
    ((MuleContextAware)processorChain).setMuleContext(getMuleContext());
  }
  if (polledEndpoint instanceof FlowConstructAware) {
    ((FlowConstructAware)processorChain).setFlowConstruct(flowContruct);
  }
  if (polledEndpoint instanceof Initialisable) {
    ((Initialisable)processorChain).initialise();
  }
  return processorChain;
}
