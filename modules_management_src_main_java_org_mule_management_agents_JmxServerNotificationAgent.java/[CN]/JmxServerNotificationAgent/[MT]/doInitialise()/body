{
  if (getName() == null) {
    setName("Jmx Notification Agent");
  }
  try {
    jmxSupport=jmxSupportFactory.newJmxSupport();
    mBeanServer=(MBeanServer)MBeanServerFactory.findMBeanServer(null).get(0);
    broadcasterObjectName=ObjectName.getInstance(jmxSupport.getDomainName() + ":" + BROADCASTER_JMX_OBJECT_NAME);
    broadcastNotificationMbean=new BroadcastNotificationService();
    mBeanServer.registerMBean(broadcastNotificationMbean,broadcasterObjectName);
    if (registerListenerMbean) {
      listenerObjectName=ObjectName.getInstance(jmxSupport.getDomainName() + ":" + LISTENER_JMX_OBJECT_NAME);
      NotificationListener mbean=new NotificationListener();
      broadcastNotificationMbean.addNotificationListener(mbean,null,null);
      mBeanServer.registerMBean(mbean,listenerObjectName);
    }
  }
 catch (  Exception e) {
    throw new InitialisationException(new Message(Messages.FAILED_TO_START_X,"JMX Server Notification Agent"),e,this);
  }
}
