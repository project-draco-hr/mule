{
  if (poolingProfile == null) {
    DataSource singleDataSource=createSingleDataSource();
    if (useXaTransactions) {
      singleDataSource=decorateDataSourceIfRequired(singleDataSource);
    }
    return singleDataSource;
  }
 else {
    return createPooledDataSource();
  }
}
