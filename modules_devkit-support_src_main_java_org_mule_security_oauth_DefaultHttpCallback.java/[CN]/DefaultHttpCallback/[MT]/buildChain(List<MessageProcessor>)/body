{
  DefaultMessageProcessorChainBuilder builder=new DefaultMessageProcessorChainBuilder();
  for (  Object messageProcessor : messageProcessors) {
    if (messageProcessor instanceof MessageProcessor) {
      builder.chain(((MessageProcessor)messageProcessor));
      continue;
    }
    if (messageProcessor instanceof MessageProcessorBuilder) {
      builder.chain(((MessageProcessorBuilder)messageProcessor));
      continue;
    }
  }
  return builder.build();
}
