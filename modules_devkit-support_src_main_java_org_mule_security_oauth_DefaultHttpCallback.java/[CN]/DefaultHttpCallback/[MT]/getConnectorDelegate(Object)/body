{
  if (connector != null) {
    if (connector instanceof HttpListenerConfig) {
      return new HttpConnectorDelegate((HttpListenerConfig)connector);
    }
 else {
      throw new IllegalArgumentException(String.format("Could not create OAuth callback at url %s because a connector of class %s was supplied. Valid types are '%s' and '%s' ",url,connector.getClass().getName(),HttpListenerConfig.class.getName(),Connector.class));
    }
  }
 else {
    return new HttpConnectorDelegate();
  }
}
