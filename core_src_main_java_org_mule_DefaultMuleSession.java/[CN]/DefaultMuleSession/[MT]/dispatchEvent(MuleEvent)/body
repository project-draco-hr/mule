{
  if (event.getEndpoint() instanceof OutboundEndpoint) {
    ((OutboundEndpoint)event.getEndpoint()).process(event);
  }
 else   if (service != null) {
    if (logger.isDebugEnabled()) {
      logger.debug("dispatching event to service: " + service.getName() + ", event is: "+ event);
    }
    service.dispatchEvent(event);
  }
 else {
    throw new DispatchException(CoreMessages.noComponentForEndpoint(),event.getMessage(),event.getEndpoint());
  }
}
