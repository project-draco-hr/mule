{
  if (endpoint == null) {
    throw new DispatchException(CoreMessages.objectIsNull("Outbound Endpoint"),message,endpoint);
  }
  if (logger.isDebugEnabled()) {
    logger.debug("Creating event with data: " + message.getPayload().getClass().getName() + ", for endpoint: "+ endpoint);
  }
  try {
    MuleEvent event;
    if (previousEvent != null) {
      event=new DefaultMuleEvent(message,endpoint,flowConstruct,previousEvent);
    }
 else {
      event=new DefaultMuleEvent(message,endpoint,this,null);
    }
    return event;
  }
 catch (  Exception e) {
    throw new DispatchException(CoreMessages.failedToCreate("MuleEvent"),message,endpoint,e);
  }
}
