{
  Boolean rewriteSoapAddress=ei.getProperty("autoRewriteSoapAddress",Boolean.class);
  List<Element> elementList=null;
  if (rewriteSoapAddress != null && rewriteSoapAddress.booleanValue()) {
    List<Element> serviceList=DOMUtils.findAllElementsByTagNameNS(doc.getDocumentElement(),"http://schemas.xmlsoap.org/wsdl/","service");
    for (    Element serviceEl : serviceList) {
      String serviceName=serviceEl.getAttribute("name");
      if (serviceName.equals(ei.getService().getName().getLocalPart())) {
        elementList=DOMUtils.findAllElementsByTagNameNS(doc.getDocumentElement(),"http://schemas.xmlsoap.org/wsdl/","port");
        for (        Element el : elementList) {
          String name=el.getAttribute("name");
          if (name.equals(ei.getName().getLocalPart())) {
            Element soapAddress=DOMUtils.findAllElementsByTagNameNS(el,"http://schemas.xmlsoap.org/wsdl/soap/","address").iterator().next();
            soapAddress.setAttribute("location",base);
          }
        }
      }
    }
  }
}
