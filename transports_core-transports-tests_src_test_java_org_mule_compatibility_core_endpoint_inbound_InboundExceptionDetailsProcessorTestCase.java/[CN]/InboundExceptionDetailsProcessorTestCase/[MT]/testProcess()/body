{
  InboundEndpoint endpoint=createTestInboundEndpoint(null,null);
  InboundExceptionDetailsMessageProcessor mp=new InboundExceptionDetailsMessageProcessor(endpoint.getConnector());
  mp.setMuleContext(muleContext);
  Event event=createTestInboundEvent(endpoint);
  RuntimeException exception=new RuntimeException();
  event=Event.builder(event).message(InternalMessage.builder(event.getMessage()).exceptionPayload(new DefaultExceptionPayload(exception)).build()).error(createErrorMock(exception)).build();
  Event result=mp.process(event);
  assertNotNull(result);
  final int status=result.getMessage().getOutboundProperty("status",0);
  assertEquals(500,status);
}
