{
  Map.Entry entry=null;
  if (namespaces != null) {
    if (logger.isDebugEnabled()) {
      logger.debug("Initializing JXPathContext with namespaces: " + namespaces);
    }
    for (Iterator iterator=namespaces.entrySet().iterator(); iterator.hasNext(); ) {
      entry=(Map.Entry)iterator.next();
      context.registerNamespace(entry.getKey().toString(),entry.getValue().toString());
    }
  }
  if (contextProperties != null) {
    if (logger.isDebugEnabled()) {
      logger.debug("Initializing JXPathContext with properties: " + contextProperties);
    }
    for (Iterator iterator=contextProperties.entrySet().iterator(); iterator.hasNext(); ) {
      entry=(Map.Entry)iterator.next();
      context.setValue(entry.getKey().toString(),entry.getValue());
    }
  }
  if (factory != null) {
    context.setFactory(factory);
  }
  context.setLenient(lenient);
}
