{
  String contents=context.getTransformedMessageAsString();
  String msg=null;
  msg=StringMessageHelper.getBoilerPlate("Message Received in component: " + context.getComponentDescriptor().getName() + ". Content is: "+ StringMessageHelper.truncate(contents,100,true),'*',80);
  logger.info(msg);
  if (eventCallback != null) {
    eventCallback.eventReceived(context,this);
  }
  MuleManager.getInstance().fireNotification(new FunctionalTestNotification(context.getComponentDescriptor().getName(),contents,FunctionalTestNotification.EVENT_RECEIVED));
  if (throwException) {
    throw new MuleException(Message.createStaticMessage("Functional Test Component Exception"));
  }
  if (returnMessage != null) {
    return returnMessage;
  }
 else {
    contents+=" Received";
    return contents;
  }
}
