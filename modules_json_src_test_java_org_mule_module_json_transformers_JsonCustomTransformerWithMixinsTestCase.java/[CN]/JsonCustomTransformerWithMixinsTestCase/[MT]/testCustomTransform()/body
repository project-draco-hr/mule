{
  MuleMessage message=new DefaultMuleMessage(APPLE_JSON,muleContext);
  Apple apple=(Apple)message.getPayload(DataTypeFactory.create(Apple.class));
  assertNotNull(apple);
  assertFalse(apple.isWashed());
  assertTrue(apple.isBitten());
  message=new DefaultMuleMessage(apple,muleContext);
  String json=(String)message.getPayload(DataTypeFactory.create(String.class));
  assertNotNull(json);
  JsonData data=new JsonData(json);
  assertEquals("true",data.get("bitten"));
  assertEquals("false",data.get("washed"));
}
