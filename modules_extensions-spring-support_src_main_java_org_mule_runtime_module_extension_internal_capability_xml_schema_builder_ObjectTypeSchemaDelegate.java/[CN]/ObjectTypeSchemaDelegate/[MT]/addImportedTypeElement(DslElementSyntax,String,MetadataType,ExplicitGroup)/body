{
  DslElementSyntax typeDsl=builder.getDslResolver().resolve(metadataType);
  if (paramDsl.isWrapped()) {
    TopLevelElement objectElement=builder.createTopLevelElement(paramDsl.getElementName(),ZERO,"1");
    objectElement.setComplexType(new LocalComplexType());
    objectElement.setAnnotation(builder.createDocAnnotation(description));
    if (typeDsl.isWrapped()) {
      objectElement.getComplexType().setSequence(builder.createTypeRefChoiceLocalOrGlobal(metadataType,ZERO,UNBOUNDED));
    }
 else {
      ExplicitGroup sequence=new ExplicitGroup();
      sequence.setMinOccurs(ONE);
      sequence.setMaxOccurs("1");
      QName refQName=new QName(paramDsl.getNamespaceUri(),typeDsl.getAbstractElementName(),paramDsl.getNamespace());
      sequence.getParticle().add(objectFactory.createElement(builder.createRefElement(refQName,false)));
      objectElement.getComplexType().setSequence(sequence);
    }
    all.getParticle().add(objectFactory.createElement(objectElement));
  }
 else {
    QName extensionBase=new QName(typeDsl.getNamespaceUri(),sanitizeName(getId(metadataType)),typeDsl.getNamespace());
    addChildElementTypeExtension(extensionBase,description,paramDsl.getElementName(),all);
  }
}
