{
  MuleEvent receivedEvent=events.iterator().next();
  MuleMessage result=super.aggregateEvents(events);
  MuleEvent event=new DefaultMuleEvent(result,receivedEvent.getEndpoint(),receivedEvent.getFlowConstruct(),receivedEvent);
  if (!(event.getFlowConstruct() instanceof Service)) {
    throw new UnsupportedOperationException("CollectionResponseWithCallbackCorrelator is only supported with Service");
  }
  try {
    return ((Service)event.getFlowConstruct()).getComponent().process(event).getMessage();
  }
 catch (  MuleException e) {
    throw new AggregationException(AnnotationsMessages.failedToInvokeReplyMethod(callback),events,event.getEndpoint());
  }
}
