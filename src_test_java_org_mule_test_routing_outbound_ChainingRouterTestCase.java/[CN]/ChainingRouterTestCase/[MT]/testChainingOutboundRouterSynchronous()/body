{
  UMOMessage message=new MuleMessage("test event");
  assertTrue(router.isMatch(message));
  message=new MuleMessage("test event");
  session.expectAndReturn("sendEvent",C.eq(message,endpoints.get(0)),message);
  session.expectAndReturn("sendEvent",C.eq(message,endpoints.get(1)),message);
  final UMOMessage result=router.route(message,(UMOSession)session.proxy(),true);
  assertNotNull("This is a sync call, we need a result returned.",result);
  assertEquals(message,result);
  session.verify();
}
