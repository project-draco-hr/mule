{
  MuleClient client=muleContext.getClient();
  for (int i=0; i < getNumberOfMessages(); i++) {
    client.dispatch("component1.endpoint","test",null);
  }
  List<MuleMessage> results=new ArrayList<MuleMessage>();
  for (int i=0; i < getNumberOfMessages(); i++) {
    MuleMessage result=client.request("results.endpoint",1000);
    assertNotNull(result);
    results.add(result);
  }
  assertEquals(results.size(),getNumberOfMessages());
  for (  MuleMessage message : results) {
    assertEquals("request received by service 3",message.getPayloadAsString());
  }
}
