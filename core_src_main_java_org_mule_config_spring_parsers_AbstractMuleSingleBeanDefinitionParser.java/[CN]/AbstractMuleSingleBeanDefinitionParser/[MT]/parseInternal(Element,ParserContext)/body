{
  this.parserContext=parserContext;
  Class beanClass=getBeanClass(element);
  Assert.state(beanClass != null,"Class returned from getBeanClass(Element) must not be null, element is: " + element.getNodeName());
  BeanDefinitionBuilder builder=createBeanDefinitionBuilder(element,beanClass);
  builder.setSource(parserContext.extractSource(element));
  builder.setSingleton(isSingleton());
  builder.addDependsOn("_registry");
  if (getInitMethodName() != null) {
    builder.setInitMethodName(getInitMethodName());
  }
  if (getDisposeMethodName() != null) {
    builder.setDestroyMethodName(getDisposeMethodName());
  }
  if (parserContext.isNested()) {
    builder.setSingleton(parserContext.getContainingBeanDefinition().isSingleton());
  }
  doParse(element,parserContext,builder);
  return builder.getBeanDefinition();
}
