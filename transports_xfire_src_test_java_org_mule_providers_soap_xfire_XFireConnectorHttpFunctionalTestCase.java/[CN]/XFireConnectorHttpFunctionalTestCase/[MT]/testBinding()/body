{
  String url="http://localhost:62108/";
  String folder="mule/";
  String componentName="mycomponent";
  String fullPath=url + folder + componentName;
  MuleClient client=new MuleClient();
  Map props=new HashMap();
  props.put("http.method","GET");
  UMOMessage reply=client.send(fullPath + "?wsdl",folder + componentName + "?wsdl",props);
  assertNotNull(reply);
  assertNotNull(reply.getPayload());
  Document document=DocumentHelper.parseText(reply.getPayloadAsString());
  List nodes;
  nodes=document.selectNodes("//wsdl:definitions/wsdl:service");
  Element element=(Element)nodes.get(0);
  assertEquals(componentName,element.attribute("name").getStringValue());
  nodes=document.selectNodes("//wsdl:definitions/wsdl:service/wsdl:port");
  for (Iterator i=nodes.iterator(); i.hasNext(); ) {
    element=(Element)i.next();
    if ((element.attribute("name").getStringValue().compareTo(componentName + "MulePort") == 0) || (element.attribute("name").getStringValue().compareTo(componentName + "LocalPort") == 0)) {
      Element tempElement=(Element)element.elements().get(0);
      String mulePort=tempElement.attribute("location").getStringValue();
      assertEquals(fullPath,mulePort);
    }
  }
}
