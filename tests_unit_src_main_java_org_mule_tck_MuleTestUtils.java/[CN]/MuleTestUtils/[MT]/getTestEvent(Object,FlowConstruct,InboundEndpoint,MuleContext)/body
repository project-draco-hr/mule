{
  final MuleSession session=getTestSession(flowConstruct,context);
  final MuleMessageFactory factory=endpoint.getConnector().createMuleMessageFactory();
  final MuleMessage message=factory.create(data,endpoint.getEncoding(),context);
  final DefaultMuleEvent event=new DefaultMuleEvent(message,flowConstruct,session);
  event.populateFieldsFromInboundEndpoint(endpoint);
  return event;
}
