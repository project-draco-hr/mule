{
  Evaluator evaluator=annotation.annotationType().getAnnotation(Evaluator.class);
  if (evaluator != null) {
    String expr=((InboundHeaders)annotation).value();
    boolean optional=false;
    String eval=MessageHeaderExpressionEvaluator.NAME;
    if (parameterType.isAssignableFrom(Map.class)) {
      eval=MessageHeadersExpressionEvaluator.NAME;
    }
 else     if (parameterType.isAssignableFrom(List.class)) {
      eval=MessageHeadersListExpressionEvaluator.NAME;
    }
 else     if (expr.endsWith(ExpressionConstants.OPTIONAL_ARGUMENT)) {
      optional=true;
    }
    return new ExpressionArgument(null,new ExpressionConfig("INBOUND:" + expr,eval,null),optional,parameterType);
  }
 else {
    throw new IllegalArgumentException("The @Evaluator annotation must be set on an Expression Annotation");
  }
}
