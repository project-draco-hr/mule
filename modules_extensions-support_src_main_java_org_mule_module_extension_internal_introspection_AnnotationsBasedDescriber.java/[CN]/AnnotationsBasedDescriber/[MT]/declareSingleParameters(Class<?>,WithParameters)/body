{
  ImmutableSet.Builder<ParameterDescriptor> parameters=ImmutableSet.builder();
  for (  Field field : getParameterFields(extensionType)) {
    Parameter parameter=field.getAnnotation(Parameter.class);
    Optional optional=field.getAnnotation(Optional.class);
    String parameterName=getParameterName(field,parameter);
    ParameterDescriptor parameterDescriptor;
    DataType dataType=IntrospectionUtils.getFieldDataType(field);
    if (optional == null) {
      parameterDescriptor=with.requiredParameter(parameterName);
    }
 else {
      parameterDescriptor=with.optionalParameter(parameterName).defaultingTo(getDefaultValue(optional));
    }
    parameterDescriptor.ofType(dataType);
    if (!parameter.isDynamic()) {
      parameterDescriptor.whichIsNotDynamic();
    }
    parameterDescriptor.withCapability(new MemberNameCapability(field.getName()));
    parameters.add(parameterDescriptor);
  }
  return parameters.build();
}
