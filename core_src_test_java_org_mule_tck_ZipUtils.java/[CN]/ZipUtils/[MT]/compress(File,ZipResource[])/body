{
  try (ZipOutputStream out=new ZipOutputStream(new FileOutputStream(targetFile))){
    for (    ZipResource zipResource : resources) {
      try (FileInputStream in=new FileInputStream(zipResource.getFile())){
        out.putNextEntry(new ZipEntry(zipResource.getName()));
        byte[] buffer=new byte[1024];
        int count;
        while ((count=in.read(buffer)) > 0) {
          out.write(buffer,0,count);
        }
      }
     }
  }
 catch (  IOException e) {
    throw e;
  }
catch (  Exception e) {
    throw new IOException("Error compressing file " + targetFile.getName(),e);
  }
}
