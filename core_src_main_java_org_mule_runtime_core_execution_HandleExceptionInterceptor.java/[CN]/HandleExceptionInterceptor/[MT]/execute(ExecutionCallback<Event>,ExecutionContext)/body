{
  try {
    return next.execute(callback,executionContext);
  }
 catch (  MessagingException e) {
    Event result;
    try {
      if (messagingExceptionHandler != null) {
        result=messagingExceptionHandler.handleException(e,e.getEvent());
      }
 else {
        result=flow.getExceptionListener().handleException(e,e.getEvent());
      }
      e.setProcessedEvent(result);
    }
 catch (    Exception messagingExceptionHandlerException) {
      if (messagingExceptionHandlerException.getCause() instanceof MessagingException) {
        throw (MessagingException)messagingExceptionHandlerException.getCause();
      }
      throw messagingExceptionHandlerException;
    }
    throw e;
  }
catch (  Exception e) {
    throw e;
  }
}
