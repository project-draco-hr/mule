{
  MuleClient client=muleContext.getClient();
  ArrayList<Integer> payload=new ArrayList<Integer>();
  payload.add(42);
  InternalMessage message=client.send(String.format("http://localhost:%d/RemoteService",httpPort2.getNumber()),getTestMuleMessage(muleContext.getObjectSerializer().serialize(payload)),HTTP_REQUEST_OPTIONS).getRight();
  assertNotNull(message);
  ByteArrayToSerializable bas=new ByteArrayToSerializable();
  bas.setMuleContext(muleContext);
  assertNotNull(message.getPayload().getValue());
  Object result=bas.transform(message.getPayload().getValue());
  assertThat(result,is(payload));
}
