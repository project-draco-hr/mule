{
  if (contextFactories.get(type) != null) {
    throw new IllegalArgumentException("Factory for type already registered: " + type.getName());
  }
  contextFactories.put(type,factory);
}
