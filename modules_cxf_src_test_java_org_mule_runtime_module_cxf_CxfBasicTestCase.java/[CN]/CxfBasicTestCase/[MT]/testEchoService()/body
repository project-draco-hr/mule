{
  MuleClient client=muleContext.getClient();
  InputStream xml=getClass().getResourceAsStream("/direct/direct-request.xml");
  InternalMessage result=client.send("http://localhost:" + dynamicPort.getNumber() + "/services/Echo",InternalMessage.builder().payload(xml).mediaType(APP_SOAP_XML).build(),HTTP_REQUEST_OPTIONS).getRight();
  assertTrue(getPayloadAsString(result).contains("Hello!"));
  String ct=result.getPayload().getDataType().getMediaType().toRfcString();
  assertEquals("text/xml; charset=UTF-8",ct);
}
