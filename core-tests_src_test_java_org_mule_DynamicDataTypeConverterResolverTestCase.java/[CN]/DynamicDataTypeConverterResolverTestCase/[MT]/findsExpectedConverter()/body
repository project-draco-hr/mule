{
  Transformer expectedConverter=new MockConverterBuilder().from(DataTypeFactory.BYTE_ARRAY).to(DataTypeFactory.STRING).build();
  when(muleContext.getRegistry()).thenReturn(muleRegistry);
  when(muleRegistry.lookupTransformer(DataTypeFactory.BYTE_ARRAY,DataTypeFactory.STRING)).thenReturn(expectedConverter);
  DynamicDataTypeConversionResolver resolver=new DynamicDataTypeConversionResolver(muleContext);
  List<DataType<?>> targetTypes=new ArrayList<DataType<?>>();
  targetTypes.add(DataTypeFactory.INPUT_STREAM);
  targetTypes.add(DataTypeFactory.STRING);
  Transformer resolvedConverter=resolver.resolve(DataTypeFactory.BYTE_ARRAY,targetTypes);
  assertEquals(expectedConverter,resolvedConverter);
}
