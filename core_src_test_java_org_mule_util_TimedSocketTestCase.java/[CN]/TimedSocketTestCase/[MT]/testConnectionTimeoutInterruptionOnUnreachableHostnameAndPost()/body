{
  Socket client=null;
  long startTime=0;
  long stopTime=0;
  try {
    startTime=System.currentTimeMillis();
    client=TimedSocket.createSocket(UNREACHABLE_HOSTNAME,UNREACHABLE_PORT,TEST_TIMEOUT);
    fail("Timeout is expected");
  }
 catch (  InterruptedIOException iioe) {
    stopTime=System.currentTimeMillis();
    assertTrue("Remote host timeout was longer than expected. Expected: " + TEST_TIMEOUT + ", but was"+ stopTime,(stopTime - startTime) > (TEST_TIMEOUT - TEST_TIMEOUT_DELTA));
  }
catch (  MalformedURLException mue) {
    fail("Invalid URL: " + mue);
  }
catch (  SocketException se) {
    fail("Socket exception: " + se);
  }
catch (  IOException ioe) {
    fail("Network I/O error: " + ioe);
  }
 finally {
    try {
      if (client != null) {
        client.close();
      }
    }
 catch (    Exception ignore) {
      fail("Error closing connection: " + ignore);
    }
  }
}
