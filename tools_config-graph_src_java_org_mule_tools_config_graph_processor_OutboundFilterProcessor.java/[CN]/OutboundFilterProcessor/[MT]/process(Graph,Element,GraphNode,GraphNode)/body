{
  Element filter=endpoint.getChild("filter");
  if (filter == null)   filter=endpoint.getChild("left-filter");
  if (filter == null)   filter=endpoint.getChild("right-filter");
  if (filter != null) {
    GraphNode filterNode=graph.addNode();
    filterNode.getInfo().setHeader(filter.getAttributeValue(MuleTag.ATTRIBUTE_CLASS_NAME));
    filterNode.getInfo().setFillColor(ColorRegistry.COLOR_FILTER);
    StringBuffer caption=new StringBuffer();
    appendProperties(filter,caption);
    filterNode.getInfo().setCaption(caption.toString());
    process(graph,filter,filterNode,parent);
    graph.addEdge(filterNode,endpointNode).getInfo().setCaption("out");
  }
 else {
    graph.addEdge(parent,endpointNode).getInfo().setCaption("filters on");
  }
}
