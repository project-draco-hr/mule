{
  if (parts != null) {
    try {
      for (      Part part : parts) {
        if (!part.getName().equals("payload")) {
          ((DefaultMuleMessage)message).addInboundAttachment(part.getName(),new DataHandler(new PartDataSource(part)));
        }
      }
    }
  finally {
      parts.clear();
      parts=null;
    }
  }
  return message;
}
