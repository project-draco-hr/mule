{
  Map.Entry entry=null;
  ArrayList list=new ArrayList();
  for (Iterator i=endpoints.entrySet().iterator(); i.hasNext(); ) {
    entry=(Map.Entry)i.next();
    if (((UMOEndpoint)entry.getValue()).getProtocol().equalsIgnoreCase(protocol)) {
      list.add(entry.getValue());
    }
  }
  return (MuleEndpoint[])list.toArray(new MuleEndpoint[list.size()]);
}
