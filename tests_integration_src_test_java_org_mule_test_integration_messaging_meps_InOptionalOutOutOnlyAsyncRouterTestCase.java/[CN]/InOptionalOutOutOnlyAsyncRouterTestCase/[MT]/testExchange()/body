{
  MuleClient client=new MuleClient(muleContext);
  MuleMessage result=client.send("inboundEndpoint","some data",null);
  assertNotNull(result);
  assertEquals(NullPayload.getInstance(),result.getPayload());
  assertNull(result.getExceptionPayload());
  DefaultMuleMessage msg=new DefaultMuleMessage("some data",muleContext);
  msg.setOutboundProperty("foo","bar");
  result=client.send("inboundEndpoint",msg);
  assertNotNull(result);
  assertEquals("got it!",result.getPayloadAsString());
  Service async=muleContext.getRegistry().lookupService("In-Out_Out-Only-Async-Service");
  Service external=muleContext.getRegistry().lookupService("ExternalApp");
  assertEquals(2,async.getStatistics().getProcessedEvents());
  assertEquals(1,external.getStatistics().getProcessedEvents());
}
