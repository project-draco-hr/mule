{
  List<BeanDefinition> params=parseStoreProcedureParams(paramElements,nestedCtx);
  BeanDefinitionBuilder queryTemplateFactory=BeanDefinitionBuilder.genericBeanDefinition(ParameterizedQueryTemplateFactoryBean.class);
  queryTemplateFactory.addConstructorArgValue(queryElement.getTextContent());
  queryTemplateFactory.addConstructorArgValue(params);
  queryTemplateFactory.addConstructorArgValue(new SimpleQueryTemplateParser());
  BeanDefinitionBuilder queryBean=BeanDefinitionBuilder.genericBeanDefinition(Query.class);
  queryBean.addConstructorArgValue(queryTemplateFactory.getBeanDefinition());
  return queryBean.getBeanDefinition();
}
