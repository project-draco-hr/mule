{
  mockMuleEvent=spy(mockMuleEvent);
  catchMessagingExceptionStrategy.setMessageProcessors(asList(createSetStringMessageProcessor("A"),createSetStringMessageProcessor("B")));
  catchMessagingExceptionStrategy.initialise();
  final MuleEvent result=catchMessagingExceptionStrategy.handleException(mockException,mockMuleEvent);
  verify(mockMuleEvent,times(1)).setMessage(argThat(new ArgumentMatcher<MuleMessage>(){
    @Override public boolean matches(    Object argument){
      return ((MuleMessage)argument).getPayload().equals("A");
    }
  }
));
  assertThat(result.getMessage().getPayload(),is("B"));
  assertThat(result.getMessage().getExceptionPayload(),is(nullValue()));
}
