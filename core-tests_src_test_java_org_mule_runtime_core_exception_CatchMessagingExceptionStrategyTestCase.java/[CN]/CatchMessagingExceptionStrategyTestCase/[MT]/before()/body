{
  Transaction currentTransaction=TransactionCoordination.getInstance().getTransaction();
  if (currentTransaction != null) {
    TransactionCoordination.getInstance().unbindTransaction(currentTransaction);
  }
  catchMessagingExceptionStrategy=new CatchMessagingExceptionStrategy();
  catchMessagingExceptionStrategy.setMuleContext(mockMuleContext);
  catchMessagingExceptionStrategy.setFlowConstruct(getTestFlow());
  when(mockMuleContext.getStreamCloserService()).thenReturn(mockStreamCloserService);
  Flow flow=getTestFlow();
  mockMuleEvent=new DefaultMuleEvent(create(flow),muleMessage,flow);
}
