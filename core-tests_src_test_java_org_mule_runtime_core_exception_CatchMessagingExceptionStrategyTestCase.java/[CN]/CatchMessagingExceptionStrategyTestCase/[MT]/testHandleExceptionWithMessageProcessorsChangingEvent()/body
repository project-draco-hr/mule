{
  MuleEvent lastEventCreated=new DefaultMuleEvent(muleMessage,getTestFlow());
  catchMessagingExceptionStrategy.setMessageProcessors(asList(createChagingEventMessageProcessor(new DefaultMuleEvent(muleMessage,getTestFlow())),createChagingEventMessageProcessor(lastEventCreated)));
  catchMessagingExceptionStrategy.initialise();
  MuleEvent exceptionHandlingResult=catchMessagingExceptionStrategy.handleException(mockException,mockMuleEvent);
  assertThat(exceptionHandlingResult.getId(),is(lastEventCreated.getId()));
  assertThat(exceptionHandlingResult.getMessage().getUniqueId(),is(lastEventCreated.getMessage().getUniqueId()));
}
