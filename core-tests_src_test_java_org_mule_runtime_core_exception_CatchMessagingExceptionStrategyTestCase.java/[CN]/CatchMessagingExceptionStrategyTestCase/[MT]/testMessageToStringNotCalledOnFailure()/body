{
  MuleEvent lastEventCreated=mock(MuleEvent.class,RETURNS_DEEP_STUBS.get());
  catchMessagingExceptionStrategy.setMessageProcessors(asList(createFailingEventMessageProcessor(mock(MuleEvent.class,RETURNS_DEEP_STUBS.get())),createFailingEventMessageProcessor(lastEventCreated)));
  catchMessagingExceptionStrategy.initialise();
  when(mockMuleEvent.getMessage().toString()).thenThrow(new RuntimeException("MuleMessage.toString() should not be called"));
  MuleEvent exceptionHandlingResult=exceptionHandlingResult=catchMessagingExceptionStrategy.handleException(mockException,mockMuleEvent);
}
