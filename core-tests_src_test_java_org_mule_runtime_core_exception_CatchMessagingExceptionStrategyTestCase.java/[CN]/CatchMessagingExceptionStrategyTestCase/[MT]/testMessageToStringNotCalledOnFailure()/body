{
  mockMuleEvent.setMessage(spy(muleMessage));
  mockMuleEvent=spy(mockMuleEvent);
  Flow flow=getTestFlow();
  MuleEvent lastEventCreated=new DefaultMuleEvent(create(flow),muleMessage,flow);
  catchMessagingExceptionStrategy.setMessageProcessors(asList(createFailingEventMessageProcessor(new DefaultMuleEvent(create(flow),muleMessage,flow)),createFailingEventMessageProcessor(lastEventCreated)));
  catchMessagingExceptionStrategy.initialise();
  when(mockMuleEvent.getMessage().toString()).thenThrow(new RuntimeException("MuleMessage.toString() should not be called"));
  MuleEvent exceptionHandlingResult=exceptionHandlingResult=catchMessagingExceptionStrategy.handleException(mockException,mockMuleEvent);
}
