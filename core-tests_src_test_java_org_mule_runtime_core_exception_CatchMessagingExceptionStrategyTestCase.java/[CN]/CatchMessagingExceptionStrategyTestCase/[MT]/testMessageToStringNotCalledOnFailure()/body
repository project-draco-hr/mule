{
  mockMuleEvent.setMessage(spy(muleMessage));
  mockMuleEvent=spy(mockMuleEvent);
  MuleEvent lastEventCreated=new DefaultMuleEvent(muleMessage,getTestFlow());
  catchMessagingExceptionStrategy.setMessageProcessors(asList(createFailingEventMessageProcessor(new DefaultMuleEvent(muleMessage,getTestFlow())),createFailingEventMessageProcessor(lastEventCreated)));
  catchMessagingExceptionStrategy.initialise();
  when(mockMuleEvent.getMessage().toString()).thenThrow(new RuntimeException("MuleMessage.toString() should not be called"));
  MuleEvent exceptionHandlingResult=exceptionHandlingResult=catchMessagingExceptionStrategy.handleException(mockException,mockMuleEvent);
}
