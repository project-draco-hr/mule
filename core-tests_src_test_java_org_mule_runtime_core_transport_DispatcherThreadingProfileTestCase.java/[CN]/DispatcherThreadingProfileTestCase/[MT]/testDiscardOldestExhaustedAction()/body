{
  latch=new CountDownLatch(3);
  createTestConnectorWithSingleDispatcherThread(2,ThreadingProfile.WHEN_EXHAUSTED_DISCARD_OLDEST,ThreadingProfile.DEFAULT_THREAD_WAIT_TIMEOUT,1);
  dispatchTwoAsyncEvents();
  dispatchTwoAsyncEvents();
  dispatchTwoAsyncEvents();
  assertTrue(latch.await(SERIAL_WAIT_TIME,TimeUnit.MILLISECONDS));
  Thread.sleep(LONGER_WAIT_TIME);
  assertEquals(3,counter.get());
}
