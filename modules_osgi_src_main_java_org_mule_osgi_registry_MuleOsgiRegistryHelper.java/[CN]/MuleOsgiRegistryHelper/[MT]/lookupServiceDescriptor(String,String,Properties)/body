{
  if (ServiceDescriptorFactory.PROVIDER_SERVICE_TYPE.equals(type)) {
    ServiceReference[] transportRefs=null;
    String filter="(" + TransportServiceDescriptor.OSGI_HEADER_TRANSPORT + "="+ name+ ")";
    try {
      ServiceReference[] refs=bundleContext.getServiceReferences(TransportServiceDescriptor.class.getName(),null);
      int nRefs=refs.length;
      logger.debug("Searching for transport = " + name + ", "+ nRefs+ " TransportServiceDescriptor(s) found");
      String transport;
      for (int i=0; i < nRefs; ++i) {
        transport=(String)refs[i].getProperty(TransportServiceDescriptor.OSGI_HEADER_TRANSPORT);
        logger.debug("transport = " + transport);
        if (name.equals(transport)) {
          transportRefs=new ServiceReference[1];
          transportRefs[0]=refs[i];
          break;
        }
      }
    }
 catch (    InvalidSyntaxException e) {
      throw new ServiceException(MessageFactory.createStaticMessage("Unable to look up TransportServiceDescriptors with filter: " + filter),e);
    }
    if (transportRefs == null || transportRefs.length < 1) {
      throw new ServiceException(MessageFactory.createStaticMessage("No transport available with the schema: " + name));
    }
 else     if (transportRefs.length > 1) {
      throw new ServiceException(MessageFactory.createStaticMessage("More than one transport is available with the schema: " + name + " and no algorithm is implemented to choose the correct one."));
    }
 else {
      ServiceDescriptor sd=(ServiceDescriptor)bundleContext.getService(transportRefs[0]);
      return sd;
    }
  }
 else {
    return super.lookupServiceDescriptor(type,name,overrides);
  }
}
