{
  List<Element> elements=(List<Element>)flowRunner(flowName).withPayload(input).withVariable("books",books).withVariable("cities",cities).run().getMessage().getPayload().getValue();
  assertThat(elements,hasSize(1));
  NodeList childNodes=elements.get(0).getChildNodes();
  assertThat(childNodes.getLength(),greaterThan(0));
  NamedNodeMap firstChildAttributes=childNodes.item(0).getAttributes();
  assertThat(firstChildAttributes.getNamedItem("title").getNodeValue(),equalTo("Pride and Prejudice"));
  assertThat(firstChildAttributes.getNamedItem("city").getNodeValue(),equalTo("milan"));
}
