{
  RoundRobin roundRobin=new RoundRobin();
  roundRobin.setMuleContext(muleContext);
  List<MessageProcessor> routes=new ArrayList<>(2);
  MessageProcessor route1=mock(MessageProcessor.class,"route1");
  routes.add(route1);
  MessageProcessor route2=mock(MessageProcessor.class,"route2");
  routes.add(route2);
  roundRobin.setRoutes(new ArrayList<>(routes));
  MuleMessage message=MuleMessage.builder().payload(singletonList(TEST_MESSAGE)).build();
  Flow flow=getTestFlow();
  roundRobin.process(MuleEvent.builder(DefaultMessageContext.create(flow,TEST_CONNECTOR)).message(message).exchangePattern(REQUEST_RESPONSE).flow(flow).build());
  verify(route1).process(any(MuleEvent.class));
  verify(route2,never()).process(any(MuleEvent.class));
}
