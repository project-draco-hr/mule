{
  File rootFolder=descriptor.getRootFolder();
  if (rootFolder == null || !rootFolder.exists()) {
    throw new IllegalArgumentException("Service folder does not exists: " + (rootFolder != null ? rootFolder.getName() : null));
  }
  List<URL> urls=new LinkedList<>();
  addDirectoryToClassLoader(urls,new File(rootFolder,CLASSES_DIR));
  loadJarsFromFolder(urls,new File(rootFolder,LIB_DIR));
  return new MuleArtifactClassLoader(descriptor.getName(),urls.toArray(new URL[0]),parent.getClassLoader(),parent.getClassLoaderLookupPolicy());
}
