{
  String driverClass=props.getProperty(Environment.DRIVER);
  poolSize=getInt(Environment.POOL_SIZE,props,20);
  log.info("Using Hibernate built-in connection pool (not for production use!)");
  log.info("Hibernate connection pool size: " + poolSize);
  autocommit=getBoolean(Environment.AUTOCOMMIT,props);
  log.info("autocommit mode: " + autocommit);
  isolation=getInteger(Environment.ISOLATION,props);
  if (isolation != null)   log.info("JDBC isolation level: " + Environment.isolationLevelToString(isolation.intValue()));
  if (driverClass == null) {
    log.warn("no JDBC Driver class was specified by property " + Environment.DRIVER);
  }
 else {
    try {
      driver=(Driver)Class.forName(driverClass,true,Thread.currentThread().getContextClassLoader()).newInstance();
    }
 catch (    Exception e) {
      try {
        driver=(Driver)ReflectHelper.classForName(driverClass).newInstance();
      }
 catch (      Exception e1) {
        log.error(e1.getMessage());
        throw new HibernateException(e1);
      }
    }
  }
  url=props.getProperty(Environment.URL);
  if (url == null) {
    String msg="JDBC URL was not specified by property " + Environment.URL;
    log.error(msg);
    throw new HibernateException(msg);
  }
  connectionProps=ConnectionProviderFactory.getConnectionProperties(props);
  log.info("using driver: " + driverClass + " at URL: "+ url);
  if (log.isDebugEnabled()) {
    log.info("connection properties: " + connectionProps);
  }
 else   if (log.isInfoEnabled()) {
    log.info("connection properties: " + maskOut(connectionProps,"password"));
  }
}
