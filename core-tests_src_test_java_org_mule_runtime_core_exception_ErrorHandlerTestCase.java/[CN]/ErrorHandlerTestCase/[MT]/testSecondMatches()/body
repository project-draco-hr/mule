{
  ErrorHandler errorHandler=new ErrorHandler();
  errorHandler.setMuleContext(mockMuleContext);
  errorHandler.setExceptionListeners(new ArrayList<>(Arrays.<MessagingExceptionHandlerAcceptor>asList(mockTestExceptionStrategy1,mockTestExceptionStrategy2)));
  when(mockMuleContext.getDefaultExceptionStrategy()).thenReturn(mockDefaultTestExceptionStrategy2);
  errorHandler.initialise();
  when(mockTestExceptionStrategy1.accept(any(MuleEvent.class))).thenReturn(false);
  when(mockTestExceptionStrategy2.accept(any(MuleEvent.class))).thenReturn(true);
  when(mockDefaultTestExceptionStrategy2.accept(any(MuleEvent.class))).thenReturn(true);
  errorHandler.handleException(mockException,mockMuleEvent);
  verify(mockTestExceptionStrategy1,VerificationModeFactory.times(0)).handleException(any(MessagingException.class),any(MuleEvent.class));
  verify(mockDefaultTestExceptionStrategy2,VerificationModeFactory.times(0)).handleException(any(MessagingException.class),any(MuleEvent.class));
  verify(mockTestExceptionStrategy2,VerificationModeFactory.times(1)).handleException(eq(mockException),any(MuleEvent.class));
}
