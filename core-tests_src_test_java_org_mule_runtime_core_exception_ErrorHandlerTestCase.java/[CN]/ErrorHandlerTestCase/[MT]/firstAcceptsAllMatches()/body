{
  ErrorHandler errorHandler=new ErrorHandler();
  errorHandler.setExceptionListeners(new ArrayList<>(Arrays.<MessagingExceptionHandlerAcceptor>asList(mockTestExceptionStrategy1,mockTestExceptionStrategy2)));
  errorHandler.setMuleContext(mockMuleContext);
  when(mockMuleContext.getDefaultErrorHandler()).thenReturn(mockDefaultTestExceptionStrategy2);
  when(mockTestExceptionStrategy1.acceptsAll()).thenReturn(true);
  when(mockTestExceptionStrategy2.acceptsAll()).thenReturn(false);
  when(mockDefaultTestExceptionStrategy2.acceptsAll()).thenReturn(true);
  errorHandler.initialise();
}
