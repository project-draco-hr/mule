{
  MuleEvent event=getTestEvent("whatever");
  MuleMessage message=event.getMessage();
  message.setInvocationProperty("foo","bar");
  MuleEvent copy=new DefaultMuleEvent((MuleMessage)((ThreadSafeAccess)event.getMessage()).newThreadCopy(),event,false);
  MuleMessage messageCopy=copy.getMessage();
  messageCopy.setInvocationProperty("foo","bar2");
  assertEquals("bar2",event.getFlowVariable("foo"));
  assertEquals("bar2",message.getInvocationProperty("foo"));
  assertEquals("bar2",copy.getFlowVariable("foo"));
  assertEquals("bar2",messageCopy.getInvocationProperty("foo"));
}
