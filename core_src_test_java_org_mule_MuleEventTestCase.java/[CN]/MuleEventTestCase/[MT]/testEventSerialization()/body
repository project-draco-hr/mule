{
  InboundEndpoint endpoint=getTestInboundEndpoint("Test",null,null,new PayloadTypeFilter(Object.class),null,null);
  MuleEvent event=RequestContext.setEvent(getTestEvent("payload",endpoint));
  Serializable serialized=(Serializable)new SerializableToByteArray().transform(event);
  assertNotNull(serialized);
  ByteArrayToObject trans=new ByteArrayToObject();
  trans.setMuleContext(muleContext);
  MuleEvent deserialized=(MuleEvent)trans.transform(serialized);
  assertNotNull(deserialized);
  assertNotNull(deserialized.getMuleContext());
  assertNotNull(deserialized.getSession());
  assertEquals(event.getSession().getId(),deserialized.getSession().getId());
  assertNotNull(deserialized.getSession().getFlowConstruct());
  assertEquals(event.getSession().getFlowConstruct(),deserialized.getSession().getFlowConstruct());
  assertSame(event.getSession().getFlowConstruct(),deserialized.getSession().getFlowConstruct());
}
