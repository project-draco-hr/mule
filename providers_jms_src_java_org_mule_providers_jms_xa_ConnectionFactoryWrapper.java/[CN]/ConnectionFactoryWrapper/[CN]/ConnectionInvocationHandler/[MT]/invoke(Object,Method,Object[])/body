{
  if (logger.isDebugEnabled()) {
    logger.debug("Invoking " + method);
  }
  if (method.getName().equals("createSession")) {
    XASession xas=((XAConnection)xac).createXASession();
    return Proxy.newProxyInstance(Session.class.getClassLoader(),new Class[]{Session.class},new SessionInvocationHandler(xas.getSession(),xas.getXAResource()));
  }
 else   if (method.getName().equals("createQueueSession")) {
    XAQueueSession xaqs=((XAQueueConnection)xac).createXAQueueSession();
    return Proxy.newProxyInstance(Session.class.getClassLoader(),new Class[]{QueueSession.class},new SessionInvocationHandler(xaqs.getQueueSession(),xaqs.getXAResource()));
  }
 else   if (method.getName().equals("createTopicSession")) {
    XATopicSession xats=((XATopicConnection)xac).createXATopicSession();
    return Proxy.newProxyInstance(Session.class.getClassLoader(),new Class[]{TopicSession.class},new SessionInvocationHandler(xats.getTopicSession(),xats.getXAResource()));
  }
 else {
    return method.invoke(xac,args);
  }
}
