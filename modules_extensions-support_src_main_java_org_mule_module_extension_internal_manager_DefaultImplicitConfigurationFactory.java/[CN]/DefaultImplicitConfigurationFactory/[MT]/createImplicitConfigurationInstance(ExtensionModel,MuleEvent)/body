{
  ConfigurationModel implicitConfigurationModel=getImplicitConfiguration(extensionModel);
  if (implicitConfigurationModel == null) {
    throw new IllegalStateException(String.format("Could not find a config for extension '%s' and none can be created automatically. Please define one",extensionModel.getName()));
  }
synchronized (implicitConfigurationModel) {
    final String providerName=String.format("%s-%s",extensionModel.getName(),implicitConfigurationModel.getName());
    final ResolverSet resolverSet=buildImplicitConfigurationResolverSet(implicitConfigurationModel);
    try {
      return new ConfigurationInstanceFactory<C>(implicitConfigurationModel,resolverSet).createConfiguration(providerName,event);
    }
 catch (    MuleException e) {
      throw new MuleRuntimeException(e);
    }
  }
}
