{
  ConfigurationModel implicitConfigurationModel=getImplicitConfiguration(extensionModel);
  if (implicitConfigurationModel == null) {
    throw new IllegalStateException(String.format("Could not find a config for extension '%s' and none can be created automatically. Please define one",extensionModel.getName()));
  }
synchronized (implicitConfigurationModel) {
    if (!extensionRegistry.getExtensionState(extensionModel).getConfigurationProviders().isEmpty()) {
      return null;
    }
    final String instanceName=String.format("%s-%s",extensionModel.getName(),implicitConfigurationModel.getName());
    ConfigurationObjectBuilder configurationObjectBuilder=new ConfigurationObjectBuilder(implicitConfigurationModel,buildImplicitConfigurationResolverSet(implicitConfigurationModel));
    Object configuration;
    try {
      configuration=configurationObjectBuilder.build(asOperationContextAdapter(operationContext).getEvent());
    }
 catch (    MuleException e) {
      throw new MuleRuntimeException(e);
    }
    return new ConfigurationHolder(instanceName,configuration);
  }
}
