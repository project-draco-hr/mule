{
  Service testService=getTestService("test",Apple.class);
  MuleSession session=getTestSession(testService);
  Endpoint endpoint=getTestEndpoint("Test1Provider",Endpoint.ENDPOINT_TYPE_SENDER);
  FilteringListMessageSplitter router=new FilteringListMessageSplitter();
  router.setFilter(null);
  router.addEndpoint(endpoint);
  List payload=new ArrayList();
  payload.add("one");
  payload.add("two");
  payload.add("three");
  payload.add("four");
  MuleMessage message=new DefaultMuleMessage(payload);
  MuleMessage result=router.route(message,session,true);
  assertNotNull(result);
  assertEquals("Correlation group size has not been set.",4,result.getCorrelationGroupSize());
}
