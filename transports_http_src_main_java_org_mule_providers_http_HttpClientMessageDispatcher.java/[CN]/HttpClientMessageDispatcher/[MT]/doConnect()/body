{
  if (client == null) {
    HttpState state=new HttpState();
    if (connector.getProxyUsername() != null) {
      state.setProxyCredentials(new AuthScope(null,-1,null,null),new UsernamePasswordCredentials(connector.getProxyUsername(),connector.getProxyPassword()));
    }
    client=new HttpClient();
    client.setState(state);
    client.setHttpConnectionManager(connector.getClientConnectionManager());
    HeadMethod method=new HeadMethod(endpoint.getEndpointURI().getAddress());
    try {
      client.executeMethod(getHostConfig(endpoint.getEndpointURI().getUri()),method);
    }
 catch (    Exception e) {
      throw new ConnectException(new Message("http",13,endpoint.getEndpointURI().getUri()),e,this);
    }
  }
}
