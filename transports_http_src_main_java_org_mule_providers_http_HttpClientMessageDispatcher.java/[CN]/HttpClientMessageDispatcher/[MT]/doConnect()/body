{
  if (client == null) {
    HttpState state=new HttpState();
    if (connector.getProxyUsername() != null) {
      state.setProxyCredentials(new AuthScope(null,-1,null,null),new UsernamePasswordCredentials(connector.getProxyUsername(),connector.getProxyPassword()));
    }
    client=new HttpClient();
    client.setState(state);
    client.setHttpConnectionManager(new MultiThreadedHttpConnectionManager());
  }
}
