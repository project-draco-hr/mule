{
  try {
    while (Character.isWhitespace(expr.charAt(index)))     index++;
    if (expr.charAt(index) != '(')     throw new IllegalArgumentException("Filter mismatch: expected ( at position " + index + " : "+ expr);
    index++;
    while (Character.isWhitespace(expr.charAt(index)))     index++;
switch (expr.charAt(index)) {
case '!':
case '&':
case '|':
      return verifyFilterSubExpression(expr,index) + 1;
default :
    return verifyFilterOperation(expr,index) + 1;
}
}
 catch (IndexOutOfBoundsException e) {
throw new IllegalArgumentException("Filter mismatch: early EOF from " + index);
}
}
