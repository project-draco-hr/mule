{
  if (getApplicationContext() == null) {
    throw new IllegalStateException("Spring Application context has not been set");
  }
  if (key == null) {
    throw new ComponentNotFoundException("Component not found for null key");
  }
  if (key instanceof Class) {
    String[] names=getApplicationContext().getBeanDefinitionNames((Class)key);
    if (names == null || names.length == 0 || names.length > 1) {
      throw new ComponentNotFoundException("The container is unable to build single instance of " + ((Class)key).getName() + " number of instances found was: "+ names.length);
    }
 else {
      key=names[0];
    }
  }
  try {
    return getApplicationContext().getBean(key.toString());
  }
 catch (  BeansException e) {
    throw new ComponentNotFoundException("Component not found for key: " + key.toString(),e);
  }
}
