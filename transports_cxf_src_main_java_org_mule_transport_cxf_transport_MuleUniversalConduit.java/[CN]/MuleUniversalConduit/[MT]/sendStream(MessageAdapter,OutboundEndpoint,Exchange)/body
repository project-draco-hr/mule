{
  MuleEventContext eventContext=RequestContext.getEventContext();
  MuleSession session=null;
  if (eventContext != null) {
    session=eventContext.getSession();
  }
  MuleMessage message=new DefaultMuleMessage(sa,connector.getMuleContext());
  if (session == null) {
    session=new DefaultMuleSession(message,connector.getSessionHandler(),connector.getMuleContext());
  }
  MuleEvent prev=RequestContext.getEvent();
  if (prev != null) {
    for (Iterator itr=prev.getEndpoint().getProperties().keySet().iterator(); itr.hasNext(); ) {
      String key=(String)itr.next();
      message.removeProperty(key);
    }
  }
  message.removeProperty(CxfConstants.OPERATION);
  message.removeProperty(CxfConstants.INBOUND_OPERATION);
  message.removeProperty(CxfConstants.INBOUND_SERVICE);
  message.removeProperty(CxfConstants.IN_INTERCEPTORS);
  message.removeProperty(CxfConstants.IN_FAULT_INTERCEPTORS);
  message.removeProperty(CxfConstants.OUT_INTERCEPTORS);
  message.removeProperty(CxfConstants.OUT_FAULT_INTERCEPTORS);
  message.removeProperty(CxfConstants.APPLY_FILTERS_TO_PROTOCOL);
  message.removeProperty(CxfConstants.APPLY_SECURITY_TO_PROTOCOL);
  message.removeProperty(CxfConstants.APPLY_TRANSFORMERS_TO_PROTOCOL);
  message.removeProperty(CxfConstants.WSDL_LOCATION);
  message.removeProperty(CxfConstants.DATA_BINDING);
  message.removeProperty(CxfConstants.ENABLE_MULE_SOAP_HEADERS);
  message.removeProperty(CxfConstants.FEATURES);
  message.removeProperty(CxfConstants.FRONTEND);
  message.removeProperty(CxfConstants.PROXY);
  message.removeProperty(CxfConstants.SERVICE_NAME);
  message.removeProperty(CxfConstants.PROTOCOL_CONNECTOR);
  MuleEvent event=new DefaultMuleEvent(message,protocolEndpoint,session,true);
  event.setTimeout(MuleEvent.TIMEOUT_NOT_SET_VALUE);
  RequestContext.setEvent(event);
  if (applyTransformersToProtocol) {
    message.applyTransformers(((OutboundEndpoint)prev.getEndpoint()).getTransformers());
    event.transformMessage();
  }
  MuleMessage msg=null;
  if (muleEndpoint == null || muleEndpoint.isSynchronous()) {
    msg=protocolEndpoint.send(event);
  }
 else {
    protocolEndpoint.dispatch(event);
  }
  Holder<MuleMessage> holder=(Holder<MuleMessage>)exchange.get("holder");
  if (holder != null) {
    holder.value=msg;
  }
  return msg;
}
