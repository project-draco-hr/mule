{
  Socket socket=connector.getSocket(event.getEndpoint());
  try {
    dispatchToSocket(socket,event);
    if (useRemoteSync(event)) {
      try {
        Object result=receiveFromSocket(socket,event.getTimeout());
        if (result == null) {
          return null;
        }
        return new MuleMessage(connector.getMessageAdapter(result));
      }
 catch (      SocketTimeoutException e) {
        logger.info("Socket timed out normally while doing a synchronous receive on endpointUri: " + event.getEndpoint().getEndpointURI());
        return null;
      }
    }
 else {
      return event.getMessage();
    }
  }
  finally {
    connector.releaseSocket(socket,event.getEndpoint());
  }
}
