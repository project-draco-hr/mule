{
  AttributeEvaluator attributeEvaluator=new AttributeEvaluator("#[expression]");
  attributeEvaluator.initialize(mockExpressionManager);
  final String expectedValue="123";
  when(mockExpressionManager.evaluate(anyString(),any(MuleEvent.class),any(FlowConstruct.class))).thenReturn(expectedValue);
  assertThat(attributeEvaluator.resolveIntegerValue(mockMuleEvent),is(Integer.parseInt(expectedValue)));
}
