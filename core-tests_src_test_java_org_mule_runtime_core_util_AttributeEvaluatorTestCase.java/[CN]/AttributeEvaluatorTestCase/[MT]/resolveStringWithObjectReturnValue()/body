{
  AttributeEvaluator attributeEvaluator=new AttributeEvaluator("#[expression]");
  attributeEvaluator.initialize(mockExpressionLanaguage);
  final String expectedValue="hi";
  when(mockExpressionLanaguage.evaluate(anyString(),any(MuleEvent.class),any(FlowConstruct.class))).thenReturn(new StringBuilder(expectedValue));
  assertThat(attributeEvaluator.resolveStringValue(mockMuleEvent),is(expectedValue));
}
