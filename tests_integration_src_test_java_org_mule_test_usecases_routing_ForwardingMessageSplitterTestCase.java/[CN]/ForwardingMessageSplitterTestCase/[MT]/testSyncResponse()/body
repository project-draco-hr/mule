{
  MuleClient client=muleContext.getClient();
  List<Object> payload=new ArrayList<Object>();
  payload.add("hello");
  payload.add(new Integer(3));
  payload.add(new Exception());
  client.send("vm://in.queue",payload,null);
  MuleMessage m=client.request("vm://component.1",2000);
  assertNotNull(m);
  assertTrue(m.getPayload() instanceof String);
  m=client.request("vm://component.2",2000);
  assertNotNull(m);
  assertTrue(m.getPayload() instanceof Integer);
  m=client.request("vm://error.queue",2000);
  assertNotNull(m);
  assertTrue(m.getPayload() instanceof Exception);
}
