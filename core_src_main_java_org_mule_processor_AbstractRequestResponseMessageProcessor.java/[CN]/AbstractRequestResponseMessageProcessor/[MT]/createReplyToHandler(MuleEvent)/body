{
  final ReplyToHandler originalReplyToHandler=event.getReplyToHandler();
  return new ReplyToHandler(){
    @Override public void processReplyTo(    MuleEvent event,    MuleMessage returnMessage,    Object replyTo) throws MuleException {
      MuleEvent response=processResponse(recreateEventWithOriginalReplyToHandler(event,originalReplyToHandler));
      if (!NonBlockingVoidMuleEvent.getInstance().equals(response)) {
        originalReplyToHandler.processReplyTo(response,null,null);
      }
      processFinally(event,null);
    }
    @Override public void processExceptionReplyTo(    MessagingException exception,    Object replyTo){
      originalReplyToHandler.processExceptionReplyTo(exception,replyTo);
      processFinally(exception.getEvent(),exception);
    }
  }
;
}
