{
  phaseList.add(mockProcessPhase);
  when(mockProcessPhase.supportsTemplate(mockTemplate)).thenReturn(supportsTemplate);
  Mockito.doAnswer(new Answer(){
    @Override public Object answer(    InvocationOnMock invocationOnMock) throws Throwable {
      ((PhaseResultNotifier)invocationOnMock.getArguments()[2]).phaseSuccessfully();
      return null;
    }
  }
).when(mockProcessPhase).runPhase(any(MessageProcessTemplate.class),any(MessageProcessContext.class),any(PhaseResultNotifier.class));
}
