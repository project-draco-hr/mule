{
  System.setProperty("java.security.policy",connector.getSecurityPolicy());
  if (System.getSecurityManager() == null) {
    System.setSecurityManager(new RMISecurityManager());
  }
  String methodName=MapUtils.getString(endpoint.getEndpointURI().getParams(),MuleProperties.MULE_METHOD_PROPERTY,null);
  if (null == methodName) {
    methodName=(String)endpoint.getProperty(MuleProperties.MULE_METHOD_PROPERTY);
    if (null == methodName) {
      throw new ConnectException(RmiMessages.messageParamServiceMethodNotSet(),this);
    }
  }
  remoteObject=connector.getRemoteObject(getEndpoint());
  List<Object> args=(List<Object>)endpoint.getProperty(RmiConnector.PROPERTY_SERVICE_METHOD_PARAMS_LIST);
  Class[] argTypes=new Class[]{};
  if (args == null) {
    logger.info(RmiConnector.PROPERTY_SERVICE_METHOD_PARAMS_LIST + " not set on endpoint, assuming method call has no arguments");
    methodArguments=ClassUtils.NO_ARGS;
  }
 else {
    argTypes=connector.getArgTypes(endpoint.getProperty(RmiConnector.PROPERTY_SERVICE_METHOD_PARAM_TYPES),RequestContext.getEvent());
    methodArguments=new Object[args.size()];
    methodArguments=args.toArray(methodArguments);
  }
  invokeMethod=remoteObject.getClass().getMethod(methodName,argTypes);
}
