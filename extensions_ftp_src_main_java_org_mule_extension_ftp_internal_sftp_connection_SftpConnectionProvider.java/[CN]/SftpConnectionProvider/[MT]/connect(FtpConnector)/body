{
  SftpClient client=clientFactory.createInstance(getHost(),port);
  client.setConnectionTimeoutMillis(config.getConnectionTimeoutUnit().toMillis(config.getConnectionTimeout()));
  client.setPassword(password);
  client.setIdentity(identityFile,passphrase);
  if (!CollectionUtils.isEmpty(preferredAuthenticationMethods)) {
    client.setPreferredAuthenticationMethods(Joiner.on(",").join(preferredAuthenticationMethods));
  }
  client.setKnownHostsFile(knownHostsFile);
  try {
    client.login(username);
  }
 catch (  Exception e) {
    throw new ConnectionException(e);
  }
  return new SftpFileSystem(config,client,muleContext);
}
