{
  if (xstream == null) {
    if (useJaxpDom) {
      xstream=new XStream(new DomDriver());
    }
 else {
      xstream=new XStream(new XppDriver());
    }
  }
  try {
    xstream.registerConverter(new ConcurrentHashMapConverter(xstream.getClassMapper()),-1);
  }
 catch (  ClassNotFoundException cnf) {
    throw new TransformerException(this,cnf);
  }
  addAliases();
  addConverters();
  return xstream;
}
