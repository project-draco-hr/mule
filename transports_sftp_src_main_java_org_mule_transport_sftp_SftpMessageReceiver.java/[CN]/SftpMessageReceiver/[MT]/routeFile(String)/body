{
  ProcessingTemplate<MuleEvent> processingTemplate=createProcessingTemplate();
  processingTemplate.execute(new ProcessingCallback<MuleEvent>(){
    @Override public MuleEvent process() throws Exception {
      SftpNotifier notifier=new SftpNotifier((SftpConnector)connector,createNullMuleMessage(),endpoint,flowConstruct.getName());
      InputStream inputStream=sftpRRUtil.retrieveFile(path,notifier);
      if (logger.isDebugEnabled()) {
        logger.debug("Routing file: " + path);
      }
      MuleMessage message=createMuleMessage(inputStream);
      message.setOutboundProperty(SftpConnector.PROPERTY_FILENAME,path);
      message.setOutboundProperty(SftpConnector.PROPERTY_ORIGINAL_FILENAME,path);
      notifier.setMessage(message);
      routeMessage(message);
      if (logger.isDebugEnabled()) {
        logger.debug("Routed file: " + path);
      }
      return null;
    }
  }
);
}
