{
  String encoding=System.getProperty(MuleProperties.MULE_OS_ENCODING_SYSTEM_PROPERTY);
  if (encoding == null) {
    encoding=config.getDefaultOSEncoding();
    System.setProperty(MuleProperties.MULE_OS_ENCODING_SYSTEM_PROPERTY,encoding);
  }
 else {
    config.setDefaultOSEncoding(encoding);
  }
  if (!Charset.isSupported(config.getDefaultOSEncoding())) {
    throw new FatalException(new Message(Messages.PROPERTY_X_HAS_INVALID_VALUE_X,"osEncoding",config.getDefaultOSEncoding()),this);
  }
}
