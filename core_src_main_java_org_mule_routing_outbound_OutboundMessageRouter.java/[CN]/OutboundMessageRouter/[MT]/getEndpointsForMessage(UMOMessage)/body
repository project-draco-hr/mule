{
  List endpoints=new ArrayList();
  for (Iterator iterator=getRouters().iterator(); iterator.hasNext(); ) {
    UMOOutboundRouter umoOutboundRouter=(UMOOutboundRouter)iterator.next();
    if (umoOutboundRouter.isMatch(message)) {
      endpoints.addAll(umoOutboundRouter.getEndpoints());
      if (!isMatchAll()) {
        break;
      }
    }
  }
  UMOEndpoint[] result=new UMOEndpoint[endpoints.size()];
  return (UMOEndpoint[])endpoints.toArray(result);
}
