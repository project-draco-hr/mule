{
  for (  final ImmutableEndpoint endpoint : endpoints) {
    if (endpoint instanceof InboundEndpoint) {
      wsProxyBuilder.inboundEndpoint((InboundEndpoint)endpoint);
    }
 else     if (endpoint instanceof OutboundEndpoint) {
      wsProxyBuilder.outboundEndpoint((OutboundEndpoint)endpoint);
    }
 else {
      throw new IllegalArgumentException("unsupported type of endpoint: " + endpoint);
    }
  }
}
