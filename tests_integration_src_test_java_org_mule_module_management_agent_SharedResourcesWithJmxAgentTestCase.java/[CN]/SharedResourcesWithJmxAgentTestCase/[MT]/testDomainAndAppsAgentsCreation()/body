{
  JmxDomainAgent jmxAgent=getMuleContextForDomain().getRegistry().lookupObject(JmxDomainAgent.class);
  MBeanServer mBeanServer=jmxAgent.getMBeanServer();
  Set<ObjectName> objectNames=mBeanServer.queryNames(null,null);
  Assert.assertEquals(1,getNamesCount(objectNames,ENDPOINT_JMS_QUEUE_APP1));
  Assert.assertEquals(1,getNamesCount(objectNames,ENDPOINT_JMS_QUEUE_APP1,FLOW_APP1));
  Assert.assertEquals(1,getNamesCount(objectNames,ENDPOINT_JMS_QUEUE_APP2));
  Assert.assertEquals(1,getNamesCount(objectNames,ENDPOINT_JMS_QUEUE_APP2,FLOW_APP2));
  Assert.assertEquals(1,getNamesCount(objectNames,FLOW_APP1,TYPE_ENDPOINT));
  Assert.assertEquals(1,getNamesCount(objectNames,FLOW_APP2,TYPE_ENDPOINT));
}
