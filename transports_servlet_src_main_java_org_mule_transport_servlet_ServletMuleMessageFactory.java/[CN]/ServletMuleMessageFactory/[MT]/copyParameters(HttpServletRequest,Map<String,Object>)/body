{
  Map<?,?> parameterMap=request.getParameterMap();
  if (parameterMap != null && parameterMap.size() > 0) {
    for (    Map.Entry<?,?> entry : parameterMap.entrySet()) {
      String key=(String)entry.getKey();
      Object value=entry.getValue();
      if (value != null) {
        if (value.getClass().isArray() && ((Object[])value).length == 1) {
          value=((Object[])value)[0];
        }
      }
      messageProperties.put(key,value);
    }
  }
}
