{
  MuleMessage message=new DefaultMuleMessage("data",muleContext);
  MuleEvent event=new DefaultMuleEvent(message,getTestInboundEndpoint(""),getTestFlow());
  Object nonSerializable=new Object();
  message.setProperty("keyNonSerializable",nonSerializable,PropertyScope.SESSION);
  Flow flow=(Flow)muleContext.getRegistry().lookupFlowConstruct("PassthroughFlow");
  flow.process(event);
  MuleMessage out=muleContext.getClient().request("vm://PassthroughFlow-out?connector=VMConnector",RECEIVE_TIMEOUT);
  assertNotNull(out);
  assertNull(out.getProperty("keyNonSerializable",PropertyScope.SESSION));
}
