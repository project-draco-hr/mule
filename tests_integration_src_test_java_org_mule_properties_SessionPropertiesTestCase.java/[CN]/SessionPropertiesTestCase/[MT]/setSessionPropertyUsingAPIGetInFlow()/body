{
  MuleMessage message=new DefaultMuleMessage("data",muleContext);
  MuleEvent event=new DefaultMuleEvent(message,getTestFlow());
  message.setProperty("key","value",PropertyScope.SESSION);
  Flow flowA=(Flow)muleContext.getRegistry().lookupFlowConstruct("A");
  MuleEvent result=flowA.process(event);
  assertEquals("value",result.getMessageAsString());
}
