{
  MuleMessage message=new DefaultMuleMessage("data",muleContext);
  final Flow testFlow=getTestFlow();
  MuleEvent event=new DefaultMuleEvent(message,getTestInboundEndpoint(""),testFlow,getTestSession(testFlow,muleContext));
  Object nonSerializable=new Object();
  event.getSession().setProperty("keyNonSerializable",nonSerializable);
  event.getSession().setProperty("keyNonSerializable2",nonSerializable);
  event.getSession().setProperty("key","value");
  event.getSession().setProperty("key2","value2");
  MuleEvent result=((Flow)muleContext.getRegistry().lookupFlowConstruct("requestResponseNoSessionPropagationFlow")).process(event);
  assertNotNull(result);
  assertNotSame(event,result);
  assertEquals(nonSerializable,result.getSession().getProperty("keyNonSerializable"));
  assertEquals(nonSerializable,result.getSession().getProperty("keyNonSerializable2"));
  assertEquals("value",result.getSession().getProperty("key"));
  assertEquals("value2",result.getSession().getProperty("key2"));
  assertNull(result.getSession().getProperty("nonSerializableBean"));
}
