{
  String creds=(String)properties.get(MuleProperties.MULE_USER_PROPERTY);
  if (creds != null) {
    try {
      credentials=new MuleCredentials(creds);
    }
 catch (    Exception e) {
      throw new MuleRuntimeException(new Message(Messages.FAILED_TO_CREATE_X,"event: " + toString()),e);
    }
  }
 else   if (endpoint.getEndpointURI().getUserInfo() != null) {
    credentials=new MuleCredentials(endpoint.getEndpointURI().getUsername(),endpoint.getEndpointURI().getPassword().toCharArray());
  }
}
