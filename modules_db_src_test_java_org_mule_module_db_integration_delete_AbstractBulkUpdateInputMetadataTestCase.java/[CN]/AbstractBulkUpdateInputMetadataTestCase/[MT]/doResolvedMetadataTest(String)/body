{
  Flow flowConstruct=(Flow)muleContext.getRegistry().lookupFlowConstruct(flowName);
  List<MessageProcessor> messageProcessors=flowConstruct.getMessageProcessors();
  AbstractDbMessageProcessor messageProcessor=(AbstractDbMessageProcessor)messageProcessors.get(0);
  Result<MetaData> inputMetaData=messageProcessor.getInputMetaData();
  DefaultListMetaDataModel listMetaDataModel=(DefaultListMetaDataModel)inputMetaData.get().getPayload();
  DefinedMapMetaDataModel mapDataModel=(DefinedMapMetaDataModel)listMetaDataModel.getElementModel();
  assertThat(mapDataModel.getKeys().size(),equalTo(2));
  MetaDataModel id=mapDataModel.getValueMetaDataModel("position");
  assertThat(id.getDataType(),equalTo(testDatabase.getIdFieldDataType()));
  MetaDataModel data=mapDataModel.getValueMetaDataModel("name");
  assertThat(data.getDataType(),equalTo(DataType.STRING));
}
