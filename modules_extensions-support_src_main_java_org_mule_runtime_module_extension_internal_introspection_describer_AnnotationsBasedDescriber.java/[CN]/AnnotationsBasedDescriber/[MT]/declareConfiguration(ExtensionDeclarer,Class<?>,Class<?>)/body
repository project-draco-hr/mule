{
  checkConfigurationIsNotAnOperation(configurationType);
  ConfigurationDeclarer configurationDeclarer;
  Configuration configurationAnnotation=configurationType.getAnnotation(Configuration.class);
  if (configurationAnnotation != null) {
    configurationDeclarer=declaration.withConfig(configurationAnnotation.name()).describedAs(configurationAnnotation.description());
  }
 else {
    configurationDeclarer=declaration.withConfig(Extension.DEFAULT_CONFIG_NAME).describedAs(Extension.DEFAULT_CONFIG_DESCRIPTION);
  }
  configurationDeclarer.createdWith(new TypeAwareConfigurationFactory(configurationType,extensionType.getClassLoader())).withModelProperty(new ImplementingTypeModelProperty(configurationType));
  declareAnnotatedParameters(configurationType,configurationDeclarer);
  if (!extensionType.equals(configurationType)) {
    declareOperations(configurationDeclarer,configurationType);
    declareMessageSources(configurationDeclarer,configurationType);
    declareConnectionProviders(configurationDeclarer,configurationType);
  }
}
