{
  Connector connector=getConnector();
  assertNotNull(connector);
  Component component=getTestComponent("anApple",Apple.class);
  EndpointBuilder builder=new EndpointURIEndpointBuilder(getTestEndpointURI(),muleContext);
  builder.setName("test");
  ImmutableEndpoint endpoint=muleContext.getRegistry().lookupEndpointFactory().getOutboundEndpoint(builder);
  try {
    connector.registerListener(component,endpoint);
    fail("SMTP connector does not accept listeners");
  }
 catch (  Exception e) {
    assertNotNull("expected",e);
  }
}
