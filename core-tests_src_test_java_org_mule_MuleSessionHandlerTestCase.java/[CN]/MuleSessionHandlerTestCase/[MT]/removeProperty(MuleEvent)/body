{
  final Object outbound=event.getMessage().removeProperty(MuleProperties.MULE_SESSION_PROPERTY,OUTBOUND);
  final Object invocation=event.getFlowVariable(MuleProperties.MULE_SESSION_PROPERTY);
  event.removeFlowVariable((MuleProperties.MULE_SESSION_PROPERTY));
  return outbound != null ? outbound : invocation;
}
