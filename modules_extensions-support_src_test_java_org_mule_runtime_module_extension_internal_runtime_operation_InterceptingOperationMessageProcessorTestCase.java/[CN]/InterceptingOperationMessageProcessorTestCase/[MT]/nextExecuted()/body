{
  org.mule.runtime.core.api.MuleEvent resultEvent=mock(org.mule.runtime.core.api.MuleEvent.class);
  MuleMessage resultMessage=mock(MuleMessage.class);
  when(resultEvent.getMessage()).thenReturn(resultMessage);
  when(next.process(event)).thenReturn(resultEvent);
  assertThat(messageProcessor.process(event),is(sameInstance(resultEvent)));
  verify(next).process(event);
  verify(interceptingCallback).onSuccess(resultMessage);
  verify(interceptingCallback,never()).onException(any());
  verify(interceptingCallback).onComplete();
}
