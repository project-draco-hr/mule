{
  MuleClient client=new MuleClient(muleContext);
  Book book=new Book(1,"testBook","testAuthor");
  client.sendNoReceive("jms://my.queue",book,null);
  MuleMessage result=client.request("vm://output",RECEIVE_TIMEOUT);
  assertNotNull(result);
  assertNotNull(result.getPayload());
  assertTrue(((Boolean)result.getPayload()).booleanValue());
  int res=execSqlUpdate("UPDATE BOOK SET TITLE = 'My Test' WHERE TITLE='testBook'");
  if (res < 0) {
    fail();
  }
  client.sendNoReceive("jms://my.queue",book,null);
  result=client.request("vm://output",5000);
  assertNull(result);
}
