{
  Map properties=new HashMap();
  properties.put("delegateClass",Apple.class.getName());
  properties.put("delegateInstance",new Apple());
  try {
    UMOImmutableEndpoint endpoint=managementContext.getRegistry().lookupInboundEndpoint("test://in",managementContext);
    MuleDescriptor desc=(MuleDescriptor)MuleTestUtils.createDescriptor(NoArgsCallWrapper.class.getName(),"WrapperUMO",endpoint,null,properties);
    managementContext.getRegistry().registerService(desc,managementContext);
  }
 catch (  UMOException e) {
    Throwable t=ExceptionUtils.getRootCause(e);
    assertNotNull(t);
    assertTrue(t instanceof InitialisationException);
    assertTrue("Wrong exception?",t.getMessage().indexOf("No \"delegateClass\" must be specified") > -1);
  }
}
