{
  ArgumentCaptor<OperationContext> operationContextCaptor=ArgumentCaptor.forClass(OperationContext.class);
  messageProcessor.process(event);
  verify(operationExecutor).execute(operationContextCaptor.capture());
  OperationContext operationContext=operationContextCaptor.getValue();
  assertThat(operationContext,is(instanceOf(OperationContextAdapter.class)));
  OperationContextAdapter operationContextAdapter=(OperationContextAdapter)operationContext;
  assertThat(operationContextAdapter.getEvent(),is(sameInstance(event)));
  assertThat(operationContextAdapter.getOperation(),is(sameInstance(operation)));
  assertThat(operationContextAdapter.getConfigurationInstance(),is(sameInstance(configurationInstance)));
}
