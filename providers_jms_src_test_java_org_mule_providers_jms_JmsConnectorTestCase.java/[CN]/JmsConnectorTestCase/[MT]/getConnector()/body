{
  if (connector == null) {
    connector=new JmsConnector();
    connector.setName("TestConnector");
    connector.setSpecification("1.1");
    Mock connectionFactory=new Mock(ConnectionFactory.class);
    Mock connection=new Mock(Connection.class);
    connectionFactory.expectAndReturn("createConnection",(Connection)connection.proxy());
    connection.expect("close");
    connection.expect("start");
    connection.expect("stop");
    connection.expect("setClientID","mule.TestConnector");
    connector.setConnectionFactory((ConnectionFactory)connectionFactory.proxy());
    connector.initialise();
  }
  return connector;
}
