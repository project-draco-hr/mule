{
  LinkedList<String> list=new LinkedList<String>();
  list.add(MESSAGE);
  flowRunner("outboundDynamicEndpointInScope").withPayload(list).withInboundProperties(getMessageProperties()).asynchronously().run();
  LocalMuleClient client=muleContext.getClient();
  MuleMessage response=client.request("test://outScope3",3000);
  assertNotNull(response);
  assertTrue(response.getProperty("expectedHandler",PropertyScope.SESSION));
  assertTrue(injectedMessagingExceptionHandler instanceof RollbackMessagingExceptionStrategy);
}
