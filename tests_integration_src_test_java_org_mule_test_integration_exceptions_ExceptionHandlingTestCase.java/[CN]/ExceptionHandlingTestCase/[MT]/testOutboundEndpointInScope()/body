{
  LocalMuleClient client=muleContext.getClient();
  LinkedList<String> list=new LinkedList<String>();
  list.add(MESSAGE);
  client.send("vm://inScope2",list,null);
  MuleMessage response=client.request("vm://outScope2",3000);
  assertNotNull(response);
  assertTrue((Boolean)response.getProperty("expectedHandler",PropertyScope.SESSION));
  assertTrue(injectedMessagingExceptionHandler instanceof RollbackMessagingExceptionStrategy);
}
