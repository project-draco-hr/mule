{
  ConfigurationModel implicitConfigurationModel=getFirstImplicit(extensionModel.getConfigurationModels());
  if (implicitConfigurationModel == null) {
    throw new IllegalStateException(String.format("Could not find a config for extension '%s' and none can be created automatically. Please define one",extensionModel.getName()));
  }
  final String providerName=String.format("%s-%s",extensionModel.getName(),implicitConfigurationModel.getName());
  final ResolverSet resolverSet=buildImplicitResolverSet(implicitConfigurationModel,event.getMuleContext().getExpressionManager());
  try {
    return new ConfigurationInstanceFactory<C>(implicitConfigurationModel,resolverSet).createConfiguration(providerName,event);
  }
 catch (  MuleException e) {
    throw new MuleRuntimeException(e);
  }
}
