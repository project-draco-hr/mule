{
  JarOutputStream jarStream=null;
  FileOutputStream fileStream=null;
  if (jarFile != null) {
    try {
      fileStream=new FileOutputStream(jarFile);
      jarStream=new JarOutputStream(fileStream);
      if (entries != null && !entries.isEmpty()) {
        Iterator iter=entries.keySet().iterator();
        while (iter.hasNext()) {
          String jarFilePath=(String)iter.next();
          Object content=entries.get(jarFilePath);
          JarEntry entry=new JarEntry(jarFilePath);
          jarStream.putNextEntry(entry);
          if (content instanceof String) {
            writeJarEntry(jarStream,((String)content).getBytes());
          }
 else           if (content instanceof byte[]) {
            writeJarEntry(jarStream,(byte[])content);
          }
 else           if (content instanceof File) {
            writeJarEntry(jarStream,(File)content);
          }
        }
      }
      jarStream.flush();
      fileStream.getFD().sync();
    }
  finally {
      if (jarStream != null) {
        jarStream.close();
      }
      if (fileStream != null) {
        fileStream.close();
      }
    }
  }
}
