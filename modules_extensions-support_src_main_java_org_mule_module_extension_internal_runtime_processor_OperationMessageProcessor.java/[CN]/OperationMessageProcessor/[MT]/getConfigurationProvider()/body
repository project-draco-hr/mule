{
  Optional<ConfigurationProvider<Object>> provider=StringUtils.isBlank(configurationProviderName) ? extensionManager.getConfigurationProvider(extensionModel) : extensionManager.getConfigurationProvider(configurationProviderName);
  if (provider.isPresent()) {
    RuntimeConfigurationModel configurationModel=provider.get().getModel();
    if (!configurationModel.getOperationModel(operationModel.getName()).isPresent() && !configurationModel.getExtensionModel().getOperationModel(operationModel.getName()).isPresent()) {
      throw new IllegalOperationException(String.format("Flow '%s' defines an usage of operation '%s' which points to configuration '%s'. " + "The selected config does not support that operation.",flowConstruct.getName(),operationModel.getName(),provider.get().getName()));
    }
  }
  return provider;
}
