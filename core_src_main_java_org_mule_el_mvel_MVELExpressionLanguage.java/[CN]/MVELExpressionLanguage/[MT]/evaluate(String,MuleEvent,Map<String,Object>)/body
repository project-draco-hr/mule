{
  MVELExpressionLanguageContext factory=new MVELExpressionLanguageContext(parserContext,muleContext);
  factory.appendFactory(new EventVariableResolverFactory(parserContext,muleContext,event));
  if (autoResolveVariables) {
    factory.appendFactory(new VariableVariableResolverFactory(parserContext,muleContext,event));
  }
  if (vars != null) {
    factory.appendFactory(new CachedMapVariableResolverFactory(vars));
  }
  return (T)evaluateInternal(expression,factory);
}
