{
  System.setProperty("mvel2.compiler.allow_override_all_prophandling","true");
  parserContext=createParserContext();
  expressionExecutor=new MVELExpressionExecutor(parserContext);
  if (globalFunctionsFile != null) {
    try {
      globalFunctions.putAll(CompilerTools.extractAllDeclaredFunctions(new ExpressionCompiler(IOUtils.getResourceAsString(globalFunctionsFile,getClass())).compile()));
    }
 catch (    IOException e) {
      throw new InitialisationException(CoreMessages.failedToLoad(globalFunctionsFile),e,this);
    }
  }
  globalFunctions.putAll(CompilerTools.extractAllDeclaredFunctions(new ExpressionCompiler(globalFunctionsString).compile()));
  staticContext=new StaticVariableResolverFactory(parserContext,muleContext);
  if (muleContext.getExpressionManager() instanceof DefaultExpressionManager) {
    ((DefaultExpressionManager)muleContext.getExpressionManager()).setExpressionLanguage(this);
  }
}
