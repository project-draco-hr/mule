{
  VariableResolverFactoryChainBuilder builder=new VariableResolverFactoryChainBuilder(appVariableResolverFactory);
  builder.add(new MessageVariableResolverFactory(parserContext,muleContext,message));
  builder.add(new VariableVariableResolverFactory(parserContext,muleContext,message));
  if (vars != null) {
    builder.add(new CachedMapVariableResolverFactory(vars));
  }
  return (T)interalExecuteExpression(expression,builder.build());
}
