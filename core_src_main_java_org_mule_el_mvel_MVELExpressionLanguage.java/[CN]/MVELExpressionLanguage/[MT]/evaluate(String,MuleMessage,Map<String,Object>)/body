{
  MVELExpressionLanguageContext context=createExpressionLanguageContext();
  if (vars != null) {
    context.setNextFactory(new CachedMapVariableResolverFactory(vars,new DelegateVariableResolverFactory(staticContext,new MessageVariableResolverFactory(parserConfiguration,muleContext,message,new DelegateVariableResolverFactory(globalContext,createVariableVariableResolverFactory(message))))));
  }
 else {
    context.setNextFactory(new DelegateVariableResolverFactory(staticContext,new MessageVariableResolverFactory(parserConfiguration,muleContext,message,new DelegateVariableResolverFactory(globalContext,createVariableVariableResolverFactory(message)))));
  }
  return evaluateInternal(expression,context);
}
