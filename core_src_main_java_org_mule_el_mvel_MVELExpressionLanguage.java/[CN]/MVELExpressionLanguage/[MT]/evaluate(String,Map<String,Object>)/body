{
  MVELExpressionLanguageContext context=createExpressionLanguageContext();
  if (vars != null) {
    context.setNextFactory(new CachedMapVariableResolverFactory(vars,new DelegateVariableResolverFactory(staticContext,globalContext)));
  }
 else {
    context.setNextFactory(new DelegateVariableResolverFactory(staticContext,globalContext));
  }
  return (T)evaluateInternal(expression,context);
}
