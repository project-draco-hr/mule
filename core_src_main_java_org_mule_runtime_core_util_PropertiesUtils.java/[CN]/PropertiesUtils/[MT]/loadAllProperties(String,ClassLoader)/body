{
  Properties p=new Properties();
  List<URL> resourcesUrl=new ArrayList<URL>();
  Enumeration<URL> resources;
  try {
    resources=classLoader.getResources(fileName);
    while (resources.hasMoreElements()) {
      resourcesUrl.add(resources.nextElement());
    }
    Collections.sort(resourcesUrl,new Comparator<URL>(){
      @Override public int compare(      URL url,      URL url1){
        if ("file".equals(url.getProtocol())) {
          return 1;
        }
        return -1;
      }
    }
);
    for (    URL resourceUrl : resourcesUrl) {
      InputStream in=resourceUrl.openStream();
      p.load(in);
      in.close();
    }
  }
 catch (  IOException e) {
    throw new MuleRuntimeException(CoreMessages.createStaticMessage("Failed to load resource: " + fileName),e);
  }
  return p;
}
