{
  new IdempotentDeclarationWalker(){
    @Override public void onConfiguration(    ConfigurationDeclaration declaration){
      declaration.addModelProperty(new ConfigurationFactoryModelProperty(mock(ConfigurationFactory.class,RETURNS_DEEP_STUBS)));
    }
    @Override protected void onOperation(    OperationDeclaration declaration){
      declaration.addModelProperty(new OperationExecutorModelProperty(mock(OperationExecutorFactory.class,RETURNS_DEEP_STUBS)));
    }
    @Override protected void onConnectionProvider(    ConnectionProviderDeclaration declaration){
      declaration.addModelProperty(new ConnectionTypeModelProperty(Object.class));
    }
  }
.walk(declarer.getDeclaration());
  return declarer;
}
