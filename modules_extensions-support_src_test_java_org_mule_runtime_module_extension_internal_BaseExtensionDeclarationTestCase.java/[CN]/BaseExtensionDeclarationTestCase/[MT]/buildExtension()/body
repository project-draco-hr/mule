{
  Collection<ModelEnricher> emptyList=Collections.emptyList();
  when(serviceRegistry.lookupProviders(same(ModelEnricher.class))).thenReturn(emptyList);
  when(serviceRegistry.lookupProviders(same(ModelEnricher.class),any(ClassLoader.class))).thenReturn(emptyList);
  factory=new DefaultExtensionFactory(serviceRegistry,getClass().getClassLoader());
  extensionDeclarer=createDeclarationDescriptor();
  extensionModel=factory.createFrom(extensionDeclarer);
}
