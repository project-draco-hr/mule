{
  configureWireMockToExpectTokenPathRequestForAuthorizationCodeGrantType();
  Request.Get(localCallbackUrl.getValue() + "?" + OAuthConstants.CODE_PARAMETER+ "="+ AUTHENTICATION_CODE).connectTimeout(REQUEST_TIMEOUT).socketTimeout(REQUEST_TIMEOUT).execute();
  verifyRequestDoneToTokenUrlForAuthorizationCode();
  TokenManagerConfig tokenManagerConfig=muleContext.getRegistry().lookupObject(TokenManagerConfig.class);
  final ResourceOwnerOAuthContext oauthContext=tokenManagerConfig.getConfigOAuthContext().getContextForResourceOwner(ResourceOwnerOAuthContext.DEFAULT_RESOURCE_OWNER_ID);
  assertThat(oauthContext.getAccessToken(),Is.is(ACCESS_TOKEN));
  assertThat(oauthContext.getRefreshToken(),Is.is(REFRESH_TOKEN));
}
