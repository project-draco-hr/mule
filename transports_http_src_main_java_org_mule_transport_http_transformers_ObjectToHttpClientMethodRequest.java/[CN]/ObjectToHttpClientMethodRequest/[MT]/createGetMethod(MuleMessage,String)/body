{
  final Object src=msg.getPayload();
  final URI uri=getURI(msg);
  HttpMethod httpMethod;
  String query=uri.getRawQuery();
  httpMethod=new GetMethod(uri.toString());
  String paramName=msg.getOutboundProperty(HttpConnector.HTTP_GET_BODY_PARAM_PROPERTY,null);
  if (paramName != null) {
    paramName=URLEncoder.encode(paramName,outputEncoding);
    String paramValue;
    Boolean encode=msg.getInvocationProperty(HttpConnector.HTTP_ENCODE_PARAMVALUE);
    if (encode == null) {
      encode=msg.getOutboundProperty(HttpConnector.HTTP_ENCODE_PARAMVALUE,true);
    }
    if (encode) {
      paramValue=URLEncoder.encode(src.toString(),outputEncoding);
    }
 else {
      paramValue=src.toString();
    }
    if (!(src instanceof NullPayload) && !StringUtils.EMPTY.equals(src)) {
      if (query == null) {
        query=paramName + "=" + paramValue;
      }
 else {
        query+="&" + paramName + "="+ paramValue;
      }
    }
  }
  httpMethod.setQueryString(query);
  return httpMethod;
}
