{
  componentModel.setType(componentModel.getInnerComponents().get(0).getType());
  ComponentBuildingDefinition parentBuildingDefinition=componentBuildingDefinitionRegistry.getBuildingDefinition(componentModel.getParent().getIdentifier()).get();
  Map<String,ChildType> wrapperIdentifierAndTypeMap=getWrapperIdentifierAndTypeMap(parentBuildingDefinition);
  ChildType wrapperType=wrapperIdentifierAndTypeMap.get(componentModel.getIdentifier().getName());
  if (wrapperType.equals(ChildType.COLLECTION)) {
    ManagedList<Object> managedList=new ManagedList<>();
    for (    ComponentModel innerComponentModel : componentModel.getInnerComponents()) {
      Object value=innerComponentModel.getBeanDefinition() != null ? innerComponentModel.getBeanDefinition() : innerComponentModel.getBeanReference();
      managedList.add(value);
    }
    componentModel.setBeanDefinition(genericBeanDefinition(ArrayList.class).addConstructorArgValue(managedList).getBeanDefinition());
  }
 else {
    componentModel.setBeanDefinition(componentModel.getInnerComponents().get(0).getBeanDefinition());
    componentModel.setBeanReference(componentModel.getInnerComponents().get(0).getBeanReference());
  }
}
