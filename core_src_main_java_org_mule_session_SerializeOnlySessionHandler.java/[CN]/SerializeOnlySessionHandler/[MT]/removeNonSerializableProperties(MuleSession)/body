{
  for (  String key : session.getPropertyNamesAsSet()) {
    final Object value=session.getProperty(key);
    if (!(value instanceof Serializable)) {
      logger.warn(String.format("Property %s is not serializable, it will not be preserved " + "as part of the MuleSession",key));
      session.removeProperty(key);
    }
  }
  return session;
}
