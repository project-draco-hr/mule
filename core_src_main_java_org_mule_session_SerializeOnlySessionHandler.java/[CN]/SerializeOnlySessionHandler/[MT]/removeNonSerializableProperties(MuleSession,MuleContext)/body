{
  MuleSession copy=new DefaultMuleSession(session,muleContext);
  for (  String key : copy.getPropertyNamesAsSet()) {
    final Object value=copy.getProperty(key);
    if (!(value instanceof Serializable)) {
      logger.warn(String.format("Property %s is not serializable, it will not be preserved " + "as part of the MuleSession",key));
      copy.removeProperty(key);
    }
  }
  return copy;
}
