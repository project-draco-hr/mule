{
  buffer.append(protocol);
  buffer.append(DOTS_SLASHES);
  boolean atStart=true;
  if (null != user) {
    buffer.append(tokenEncoder.transform(tokenProcessor.transform(user)));
    if (null != password) {
      buffer.append(":");
      buffer.append(tokenEncoder.transform(tokenProcessor.transform(password)));
    }
    buffer.append("@");
    atStart=false;
  }
  if (null != host) {
    buffer.append(tokenProcessor.transform(host));
    if (null != port) {
      buffer.append(":");
      buffer.append(tokenProcessor.transform(port));
    }
    atStart=false;
  }
  if (null != path) {
    if (!atStart && !path.startsWith("/")) {
      buffer.append("/");
    }
    buffer.append(tokenProcessor.transform(path));
  }
}
