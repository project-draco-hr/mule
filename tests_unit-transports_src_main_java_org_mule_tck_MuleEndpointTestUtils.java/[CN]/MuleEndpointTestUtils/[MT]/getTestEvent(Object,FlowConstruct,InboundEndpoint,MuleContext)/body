{
  final MuleSession session=getTestSession(flowConstruct,context);
  final MuleMessageFactory factory=endpoint.getConnector().createMuleMessageFactory();
  final MuleMessage message=factory.create(data,endpoint.getEncoding());
  final MuleEvent event=MuleEvent.builder(DefaultMessageContext.create(flowConstruct,TEST_CONNECTOR)).message(message).flow(flowConstruct).session(session).build();
  populateFieldsFromInboundEndpoint(event,endpoint);
  return event;
}
