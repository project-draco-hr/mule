{
  final MuleSession session=getTestSession(flowConstruct,context);
  final MuleMessageFactory factory=endpoint.getConnector().createMuleMessageFactory();
  final InternalMessage message=factory.create(data,endpoint.getEncoding());
  final Event event=Event.builder(DefaultEventContext.create(flowConstruct,TEST_CONNECTOR)).message(message).flow(flowConstruct).session(session).build();
  return populateFieldsFromInboundEndpoint(event,endpoint);
}
