{
  return (InboundEndpoint)getTestEndpoint(null,null,null,null,null,context,new EndpointSource(){
    @Override public ImmutableEndpoint getEndpoint(    EndpointBuilder builder) throws MuleException {
      builder.setExchangePattern(mep);
      TransactionConfig txConfig=new MuleTransactionConfig(TransactionConfig.ACTION_BEGIN_OR_JOIN);
      txConfig.setFactory(new TestTransactionFactory());
      builder.setTransactionConfig(txConfig);
      return getEndpointFactory(context.getRegistry()).getInboundEndpoint(builder);
    }
  }
,null);
}
