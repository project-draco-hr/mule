{
  ProcessorExecutor executor=createProcessorExecutor(processors);
  if (event.getExchangePattern() == REQUEST_RESPONSE) {
    assertThat(executor.execute().getMessageAsString(muleContext),equalTo(RESULT));
  }
 else {
    assertThat(executor.execute().getMessage(),equalTo(event.getMessage()));
  }
  assertThat(processor1.event,is(notNullValue()));
  assertThat(processor1.thread,equalTo(Thread.currentThread()));
  assertThat(processor2.event,is(notNullValue()));
  assertThat(processor2.thread,equalTo(Thread.currentThread()));
  assertThat(processor3.event,is(notNullValue()));
  assertThat(processor3.thread,equalTo(Thread.currentThread()));
}
