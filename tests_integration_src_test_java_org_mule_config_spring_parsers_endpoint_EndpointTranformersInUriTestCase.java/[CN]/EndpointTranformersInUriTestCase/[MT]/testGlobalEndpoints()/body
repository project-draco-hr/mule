{
  ImmutableEndpoint endpoint;
  Object service=muleContext.getRegistry().lookupObject("globalEndpoints");
  if (variant.equals(ConfigVariant.FLOW)) {
    endpoint=(ImmutableEndpoint)((Flow)service).getMessageSource();
  }
 else {
    endpoint=((ServiceCompositeMessageSource)((Service)service).getMessageSource()).getEndpoints().get(0);
  }
  List<MessageProcessor> processors=endpoint.getMessageProcessors();
  assertNotNull(processors);
  assertEquals(1,processors.size());
  assertTrue(processors.get(0) instanceof TestInboundTransformer);
  List<Transformer> transformers=endpoint.getTransformers();
  assertNotNull(transformers);
  assertEquals(1,transformers.size());
  assertTrue(transformers.get(0) instanceof TestInboundTransformer);
  processors=endpoint.getResponseMessageProcessors();
  assertNotNull(processors);
  assertEquals(1,processors.size());
  assertTrue(processors.get(0) instanceof TestResponseTransformer);
  transformers=endpoint.getResponseTransformers();
  assertNotNull(transformers);
  assertEquals(1,transformers.size());
  assertTrue(transformers.get(0) instanceof TestResponseTransformer);
  if (variant.equals(ConfigVariant.FLOW)) {
    endpoint=(ImmutableEndpoint)((Flow)service).getMessageProcessors().get(0);
  }
 else {
    endpoint=(ImmutableEndpoint)((OutboundPassThroughRouter)((OutboundRouterCollection)((Service)service).getOutboundMessageProcessor()).getRoutes().get(0)).getRoutes().get(0);
  }
  processors=endpoint.getMessageProcessors();
  assertNotNull(processors);
  assertEquals(2,processors.size());
  assertTrue(processors.get(0) instanceof TestInboundTransformer);
  assertTrue(processors.get(1) instanceof TestInboundTransformer);
  transformers=endpoint.getTransformers();
  assertNotNull(transformers);
  assertEquals(2,transformers.size());
  assertTrue(transformers.get(0) instanceof TestInboundTransformer);
  assertTrue(transformers.get(1) instanceof TestInboundTransformer);
  processors=endpoint.getResponseMessageProcessors();
  assertNotNull(processors);
  assertEquals(2,processors.size());
  assertTrue(processors.get(0) instanceof TestResponseTransformer);
  assertTrue(processors.get(1) instanceof TestResponseTransformer);
  transformers=endpoint.getResponseTransformers();
  assertNotNull(transformers);
  assertEquals(2,transformers.size());
  assertTrue(transformers.get(0) instanceof TestResponseTransformer);
  assertTrue(transformers.get(1) instanceof TestResponseTransformer);
}
