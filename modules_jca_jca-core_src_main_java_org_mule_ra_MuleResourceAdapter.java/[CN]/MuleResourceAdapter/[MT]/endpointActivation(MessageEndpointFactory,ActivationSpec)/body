{
  if (activationSpec.getResourceAdapter() != this) {
    throw new ResourceException("ActivationSpec not initialized with this ResourceAdapter instance");
  }
  if (activationSpec.getClass().equals(MuleActivationSpec.class)) {
    try {
      UMOEndpointURI uri=new MuleEndpointURI(((MuleActivationSpec)activationSpec).getEndpoint());
      UMOEndpoint endpoint=TransportFactory.createEndpoint(uri,UMOEndpoint.ENDPOINT_TYPE_RECEIVER,managementContext);
      ((AbstractConnector)endpoint.getConnector()).getReceiverThreadingProfile().setWorkManagerFactory(new ThreadingProfile.WorkManagerFactory(){
        public UMOWorkManager createWorkManager(        ThreadingProfile profile,        String name){
          return new DelegateWorkManager(bootstrapContext.getWorkManager());
        }
      }
);
      MessageEndpoint messageEndpoint=null;
      messageEndpoint=endpointFactory.createEndpoint(null);
      String name="JcaComponent#" + messageEndpoint.hashCode();
      MuleDescriptor descriptor=new MuleDescriptor(name);
      descriptor.getInboundRouter().addEndpoint(endpoint);
      descriptor.setServiceFactory(new SingletonObjectFactory(messageEndpoint));
      managementContext.getRegistry().lookupModel(JcaModel.JCA_MODEL_TYPE).registerComponent(descriptor);
      MuleEndpointKey key=new MuleEndpointKey(endpointFactory,(MuleActivationSpec)activationSpec);
      endpoints.put(key,descriptor);
    }
 catch (    Exception e) {
      logger.error(e.getMessage(),e);
    }
  }
 else {
    throw new NotSupportedException("That type of ActicationSpec not supported: " + activationSpec.getClass());
  }
}
