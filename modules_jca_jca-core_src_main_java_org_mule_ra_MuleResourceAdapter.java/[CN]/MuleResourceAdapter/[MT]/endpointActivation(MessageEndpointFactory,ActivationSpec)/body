{
  if (activationSpec.getResourceAdapter() != this) {
    throw new ResourceException("ActivationSpec not initialized with this ResourceAdapter instance");
  }
  if (activationSpec.getClass().equals(MuleActivationSpec.class)) {
    try {
      UMOEndpointURI uri=new MuleEndpointURI(((MuleActivationSpec)activationSpec).getEndpoint());
      UMOImmutableEndpoint endpoint=managementContext.getRegistry().lookupEndpointFactory().getEndpoint(uri,UMOEndpoint.ENDPOINT_TYPE_RECEIVER);
      ((AbstractConnector)endpoint.getConnector()).getReceiverThreadingProfile().setWorkManagerFactory(new ThreadingProfile.WorkManagerFactory(){
        public UMOWorkManager createWorkManager(        ThreadingProfile profile,        String name){
          return new DelegateWorkManager(bootstrapContext.getWorkManager());
        }
      }
);
      MessageEndpoint messageEndpoint=null;
      messageEndpoint=endpointFactory.createEndpoint(null);
      String name="JcaComponent#" + messageEndpoint.hashCode();
      UMOComponent component=new SedaComponent();
      component.setName(name);
      component.getInboundRouter().addEndpoint(endpoint);
      component.setServiceFactory(new SingletonObjectFactory(messageEndpoint));
      managementContext.getRegistry().registerComponent(component);
      MuleEndpointKey key=new MuleEndpointKey(endpointFactory,(MuleActivationSpec)activationSpec);
      endpoints.put(key,component);
    }
 catch (    Exception e) {
      logger.error(e.getMessage(),e);
    }
  }
 else {
    throw new NotSupportedException("That type of ActicationSpec not supported: " + activationSpec.getClass());
  }
}
