{
  Optional<ConfigurationProvider<C>> provider=getConfigurationProvider(extensionModel);
  if (provider.isPresent()) {
    return provider.get().get(muleEvent);
  }
  if (attemptToCreateImplicitConfiguration(extensionModel,(MuleEvent)muleEvent)) {
    return getConfiguration(extensionModel,muleEvent);
  }
  throw new IllegalStateException(String.format("No config-ref was specified for operation of extension '%s' and no implicit configuration could be inferred. Please define one.",extensionModel.getName()));
}
