{
  Class<?> searchClass=type;
  checkArgument(searchClass.getSuperclass().equals(superClass),String.format("Class '%s' does not extend the '%s' class",type.getName(),superClass.getName()));
  while (!Object.class.equals(searchClass)) {
    if (searchClass.getSuperclass().equals(superClass)) {
      Type superType=searchClass.getGenericSuperclass();
      if (superType instanceof ParameterizedType) {
        return Arrays.stream(((ParameterizedType)superType).getActualTypeArguments()).collect(toList());
      }
    }
    searchClass=searchClass.getSuperclass();
  }
  return new LinkedList<>();
}
