{
  final MuleMessage message=setupRequestContext("http://localhost:8080/services",HttpConstants.METHOD_POST);
  final String contentType="text/plain";
  String payload="I'm a payload";
  message.setPayload(payload);
  message.setOutboundProperty(HttpConstants.HEADER_CONTENT_TYPE,contentType);
  message.setOutboundProperty(HttpConnector.HTTP_VERSION_PROPERTY,HttpConstants.HTTP10);
  final ObjectToHttpClientMethodRequest transformer=createTransformer();
  final Object response=transformer.transform(message);
  assertTrue(response instanceof PostMethod);
  final HttpMethod httpMethod=(HttpMethod)response;
  assertEquals(null,httpMethod.getQueryString());
  final byte[] byteArrayContent=((ByteArrayRequestEntity)((PostMethod)httpMethod).getRequestEntity()).getContent();
  assertArrayEquals(payload.getBytes(),byteArrayContent);
}
