{
  UMODescriptor descriptor=new MuleDescriptor();
  descriptor.setExceptionListener(new DefaultExceptionStrategy());
  descriptor.setName("testComponent");
  descriptor.setImplementation(JdbcFunctionalTestComponent.class.getName());
  UMOEndpoint endpoint=new MuleEndpoint("testIn",getInDest(),connector,null,UMOEndpoint.ENDPOINT_TYPE_RECEIVER,0,null,null);
  UMOTransactionFactory tf=getTransactionFactory();
  UMOTransactionConfig txConfig=new MuleTransactionConfig();
  txConfig.setFactory(tf);
  txConfig.setAction(txBeginAction);
  UMOEndpoint outProvider=new MuleEndpoint("testOut",getOutDest(),connector,null,UMOEndpoint.ENDPOINT_TYPE_SENDER,0,null,null);
  endpoint.setTransactionConfig(txConfig);
  descriptor.setOutboundRouter(new OutboundRouterCollection());
  OutboundPassThroughRouter router=new OutboundPassThroughRouter();
  router.addEndpoint(outProvider);
  descriptor.getOutboundRouter().addRouter(router);
  descriptor.setInboundRouter(new InboundRouterCollection());
  descriptor.getInboundRouter().addEndpoint(endpoint);
  HashMap props=new HashMap();
  props.put("eventCallback",callback);
  descriptor.setProperties(props);
  model.registerComponent(descriptor);
  UMOComponent component=model.getComponent(descriptor.getName());
  return component;
}
