{
  Transformer t=muleContext.getRegistry().lookupTransformer(factory.create(String.class),factory.create(Apple.class));
  assertNotNull(t);
  assertEquals(StringToApple.class,t.getClass());
  t=muleContext.getRegistry().lookupTransformer(factory.create(String.class),factory.create(Orange.class));
  assertNotNull(t);
  assertEquals(StringToOrange.class,t.getClass());
  try {
    t=muleContext.getRegistry().lookupTransformer(factory.create(String.class),factory.create(Banana.class));
    fail("There is no transformer to go from String to Banana");
  }
 catch (  TransformerException e) {
  }
  muleContext.getRegistry().registerTransformer(new StringToRedApple());
  t=muleContext.getRegistry().lookupTransformer(factory.create(String.class),factory.create(RedApple.class));
  assertNotNull(t);
  assertEquals(StringToRedApple.class,t.getClass());
}
