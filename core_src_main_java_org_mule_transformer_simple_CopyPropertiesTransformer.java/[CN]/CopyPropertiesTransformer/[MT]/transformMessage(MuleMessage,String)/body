{
  if (!propertyNameEvaluator.isRegularExpression()) {
    Object keyValue=propertyNameEvaluator.resolveValue(message);
    if (keyValue != null) {
      String propertyName=keyValue.toString();
      Object propertyValue=message.getInboundProperty(propertyName);
      if (propertyValue != null) {
        message.setOutboundProperty(propertyName,propertyValue);
      }
 else {
        logger.info("Property value for is null, no property will be copied");
      }
    }
 else {
      logger.info("Key expression return null, no property will be copied");
    }
  }
 else {
    for (    String inboundPropertyName : message.getInboundPropertyNames()) {
      if (propertyNameEvaluator.matches(inboundPropertyName)) {
        message.setOutboundProperty(inboundPropertyName,message.getInboundProperty(inboundPropertyName));
      }
    }
  }
  return message;
}
