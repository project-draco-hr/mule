{
  try {
    Connector connector;
    String scheme=url.getFullScheme();
    TransportServiceDescriptor sd=(TransportServiceDescriptor)lookupServiceDescriptor(muleContext.getRegistry(),LegacyServiceType.TRANSPORT,scheme,null);
    if (sd == null) {
      throw new ServiceException(TransportCoreMessages.noServiceTransportDescriptor(scheme));
    }
    connector=sd.createConnector();
    if (connector != null) {
      if (connector instanceof AbstractConnector) {
        ((AbstractConnector)connector).initialiseFromUrl(url);
      }
    }
 else {
      throw new TransportFactoryException(TransportCoreMessages.objectNotSetInService("Connector",scheme));
    }
    connector.setName(new TransportObjectNameHelper(muleContext).getConnectorName(connector));
    return connector;
  }
 catch (  Exception e) {
    throw new TransportFactoryException(TransportCoreMessages.failedToCreateObjectWith("Endpoint",url),e);
  }
}
