{
  when(mockMessagingInfoMapping.getCorrelationId(isA(MuleEvent.class))).thenReturn(TEST_GROUP_ID);
  when(mockProcessedGroups.contains(TEST_GROUP_ID)).thenReturn(false);
  when(mockEventCorrelatorCallback.shouldAggregateEvents(mockEventGroup)).thenReturn(false);
  EventCorrelator eventCorrelator=createEventCorrelator();
  eventCorrelator.process(mockMuleEvent);
  verify(mockEventGroup,times(1)).initAfterDeserialisation(mockMuleContext);
}
