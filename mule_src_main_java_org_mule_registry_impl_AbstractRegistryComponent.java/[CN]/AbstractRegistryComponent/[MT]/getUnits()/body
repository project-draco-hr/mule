{
  Collection c=new ArrayList();
  for (Iterator it=this.units.iterator(); it.hasNext(); ) {
    String ref=(String)it.next();
    String[] refs=ref.split("/");
    if (refs.length != 2) {
      throw new IllegalStateException("Malformed unit ref");
    }
    Unit unit=getRegistry().getAssembly(refs[0]).getUnit(refs[1]);
    c.add(unit);
  }
  return (Unit[])c.toArray(new Unit[c.size()]);
}
