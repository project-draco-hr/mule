{
  if (configurationLocation != null) {
    bus=new SpringBusFactory().createBus(configurationLocation);
  }
 else {
    bus=new SpringBusFactory().createBus();
  }
  MuleUniversalTransport transport=new MuleUniversalTransport(this);
  DestinationFactoryManager dfm=bus.getExtension(DestinationFactoryManager.class);
  dfm.registerDestinationFactory("http://schemas.xmlsoap.org/soap/http",transport);
  dfm.registerDestinationFactory("http://schemas.xmlsoap.org/wsdl/soap/http",transport);
  dfm.registerDestinationFactory(MuleUniversalTransport.TRANSPORT_ID,transport);
  ConduitInitiatorManager extension=bus.getExtension(ConduitInitiatorManager.class);
  extension.registerConduitInitiator("http://schemas.xmlsoap.org/wsdl/soap/",transport);
  extension.registerConduitInitiator("http://schemas.xmlsoap.org/soap/http",transport);
  extension.registerConduitInitiator(MuleUniversalTransport.TRANSPORT_ID,transport);
  try {
    managementContext.registerListener(this);
  }
 catch (  Exception e) {
    throw new InitialisationException(e,this);
  }
}
