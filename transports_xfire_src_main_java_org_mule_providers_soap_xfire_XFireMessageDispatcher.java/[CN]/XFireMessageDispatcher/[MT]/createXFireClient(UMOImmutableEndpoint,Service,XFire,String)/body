{
  Class transportClazz;
  if (connector.getClientTransport() == null) {
    if (!StringUtils.isBlank(transportClass)) {
      transportClazz=ClassUtils.loadClass(transportClass,this.getClass());
    }
 else {
      transportClazz=MuleUniversalTransport.class;
    }
  }
 else {
    transportClazz=ClassUtils.loadClass(connector.getClientTransport(),this.getClass());
  }
  Transport transport=(Transport)transportClazz.getConstructor(null).newInstance(null);
  Client client=new Client(transport,service,endpoint.getEndpointURI().toString());
  client.setXFire(xfire);
  client.setEndpointUri(endpoint.getEndpointURI().toString());
  client.addInHandler(new MuleHeadersInHandler());
  client.addOutHandler(new MuleHeadersOutHandler());
  List inList=connector.getClientInHandlers();
  if (inList != null) {
    for (int i=0; i < inList.size(); i++) {
      Class clazz=ClassUtils.loadClass(inList.get(i).toString(),this.getClass());
      Handler handler=(Handler)clazz.getConstructor(null).newInstance(null);
      client.addInHandler(handler);
    }
  }
  List outList=connector.getClientOutHandlers();
  if (outList != null) {
    for (int i=0; i < outList.size(); i++) {
      Class clazz=ClassUtils.loadClass(outList.get(i).toString(),this.getClass());
      Handler handler=(Handler)clazz.getConstructor(null).newInstance(null);
      client.addOutHandler(handler);
    }
  }
  return client;
}
