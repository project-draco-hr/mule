{
  MuleEvent response=exception.getEvent();
  MuleMessage message=response.getMessage();
  httpStatus=message.getOutboundProperty(HTTP_STATUS_PROPERTY) != null ? Integer.valueOf(response.getMessage().getOutboundProperty(HTTP_STATUS_PROPERTY).toString()) : httpStatus;
  response.setMessage(MuleMessage.builder(response.getMessage()).payload(exception.getMessage()).addOutboundProperty(HTTP_STATUS_PROPERTY,httpStatus).build());
  HttpResponse httpResponse=transformResponse(response.getMessage());
  httpServerConnection.writeResponse(httpResponse,getThrottlingHeaders());
}
