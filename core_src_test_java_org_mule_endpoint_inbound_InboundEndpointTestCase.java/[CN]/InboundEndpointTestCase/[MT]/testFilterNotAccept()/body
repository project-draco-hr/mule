{
  endpoint=createTestInboundEndpoint(new TestFilter(false),null,null,null,MessageExchangePattern.ONE_WAY,null);
  endpoint.setListener(inboundListener);
  requestEvent=createTestRequestEvent(endpoint);
  responseEvent=createTestResponseEvent(endpoint);
  MessageProcessor mpChain=((AbstractEndpoint)endpoint).getMessageProcessorChain();
  try {
    result=mpChain.process(requestEvent);
    fail("Filter should have thrown a FilterException");
  }
 catch (  FilterUnacceptedException e) {
  }
  assertMessageNotSent();
}
