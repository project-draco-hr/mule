{
  receiver=createTestMessageReceiver(null,null,null,null,false,null);
  responseEvent=createTestResponseEvent(receiver);
  responseEvent.getMessage().setExceptionPayload(new DefaultExceptionPayload(new RuntimeException()));
  MuleMessage result=receiver.routeMessage(inMessage);
  assertMessageSentSame(false);
  assertEquals(responseEvent.getMessage(),result);
  assertEquals(500,result.getIntProperty("status",0));
}
