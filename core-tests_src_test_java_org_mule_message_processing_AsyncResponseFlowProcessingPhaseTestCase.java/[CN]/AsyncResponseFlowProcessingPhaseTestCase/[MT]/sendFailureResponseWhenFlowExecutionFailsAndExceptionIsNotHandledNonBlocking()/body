{
  when(mockTemplate.routeEvent(any(MuleEvent.class))).thenThrow(mockMessagingException);
  when(mockMessagingException.handled()).thenReturn(false);
  when(mockMuleEvent.isAllowNonBlocking()).thenReturn(true);
  phase.runPhase(mockTemplate,mockContext,mockNotifier);
  verify(mockTemplate).sendFailureResponseToClient(any(MessagingException.class),any(ResponseCompletionCallback.class));
  verifyOnlySuccessfulWasCalled();
}
