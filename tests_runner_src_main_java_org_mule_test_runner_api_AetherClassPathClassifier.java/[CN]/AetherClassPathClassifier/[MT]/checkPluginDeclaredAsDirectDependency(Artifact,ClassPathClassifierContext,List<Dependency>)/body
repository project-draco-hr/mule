{
  if (!context.getRootArtifact().equals(pluginArtifact)) {
    if (!findDirectDependency(pluginArtifact.getGroupId(),pluginArtifact.getArtifactId(),rootArtifactDirectDependencies).isPresent()) {
      throw new IllegalStateException("Plugin '" + pluginArtifact + "' has to be defined as direct dependency");
    }
  }
}
