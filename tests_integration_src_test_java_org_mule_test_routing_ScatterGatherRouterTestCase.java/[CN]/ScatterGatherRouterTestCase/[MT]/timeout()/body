{
  MessagingException e=flowRunner("timeout").runExpectingException();
  assertThat(e,instanceOf(CompositeRoutingException.class));
  MuleEvent response=e.getEvent();
  ExceptionPayload ep=response.getMessage().getExceptionPayload();
  assertThat(ep,is(notNullValue()));
  assertThat(e,sameInstance(ep.getException()));
  Map<Integer,Throwable> exceptions=((CompositeRoutingException)e).getExceptions();
  assertThat(1,is(exceptions.size()));
  assertThat(exceptions.get(2),instanceOf(ResponseTimeoutException.class));
}
