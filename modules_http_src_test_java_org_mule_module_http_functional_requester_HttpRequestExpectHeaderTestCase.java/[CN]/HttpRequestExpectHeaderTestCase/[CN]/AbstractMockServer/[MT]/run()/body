{
  try {
    ServerSocket serverSocket=new ServerSocket(listenPort.getNumber());
    startedLatch.release();
    Socket socket=serverSocket.accept();
    InputStream inputStream=socket.getInputStream();
    OutputStream outputStream=socket.getOutputStream();
    BufferedReader reader=new BufferedReader(new InputStreamReader(inputStream),1);
    BufferedWriter writer=new BufferedWriter(new OutputStreamWriter(outputStream),1);
    while (!reader.readLine().isEmpty()) {
    }
    process(reader,writer);
    reader.close();
    writer.close();
    socket.close();
    serverSocket.close();
    finishedLatch.release();
  }
 catch (  IOException e) {
    throw new RuntimeException(e);
  }
}
