{
  Flow flow=(Flow)getFlowConstruct(flowName);
  MuleEvent event=getTestEvent("<test/>");
  getFunctionalTestComponent("server").setEventCallback(new EventCallback(){
    @Override public void eventReceived(    MuleEventContext context,    Object component) throws Exception {
      String soapAction=context.getMessage().getInboundProperty("SOAPAction");
      String contentType=context.getMessage().getInboundProperty("Content-Type");
      String actionInContentType=extractAction(contentType);
      assertMatchesQuoted(expectedSoapActionHeader,soapAction);
      assertMatchesQuoted(expectedActionInContentType,actionInContentType);
    }
  }
);
  flow.process(event);
}
