{
  Flow flow=(Flow)getFlowConstruct(flowName);
  MuleEvent event=getTestEvent("<test/>");
  getFunctionalTestComponent("server").setEventCallback(new EventCallback(){
    @Override public void eventReceived(    MuleEventContext context,    Object component) throws Exception {
      errorCollector.checkThat((String)context.getMessage().getInboundProperty("SOAPAction"),equalTo(String.format("\"%s\"",expectedSoapAction)));
    }
  }
);
  flow.process(event);
}
