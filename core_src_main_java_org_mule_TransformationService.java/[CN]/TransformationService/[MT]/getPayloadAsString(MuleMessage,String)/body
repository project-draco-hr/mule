{
  if (message instanceof MuleMessageCollection) {
    if (((MuleMessageCollection)message).isInvalidatedPayload()) {
      return getPayloadAsString(message);
    }
 else {
      throw new UnsupportedOperationException("getPayloadAsString(), use getPayload(DataType.STRING_DATA_TYPE)");
    }
  }
 else {
    return getPayload(message,DataType.STRING_DATA_TYPE,encoding);
  }
}
