{
  KeepAlive ka=null;
  if (usePersistentConnections) {
    ka=new KeepAlive();
    ka.setMaxRequestsCount(MAX_KEEP_ALIVE_REQUESTS);
    ka.setIdleTimeoutInSeconds(convertToSeconds(connectionIdleTimeout));
  }
  return new HttpServerFilter(true,HttpCodecFilter.DEFAULT_MAX_HTTP_PACKET_HEADER_SIZE,ka,idleTimeoutDelayedExecutor);
}
