{
  event=new MuleEvent(new MuleMessage(event.getMessage().getPayload(),event.getMessage()),endpoint,component,event);
  if (connector.isQueueEvents()) {
    QueueSession queueSession=connector.getQueueSession();
    Queue queue=queueSession.getQueue(endpoint.getEndpointURI().getAddress());
    try {
      queue.put(event);
    }
 catch (    InterruptedException e) {
      throw new MuleException(CoreMessages.interruptedQueuingEventFor(this.endpoint.getEndpointURI()),e);
    }
  }
 else {
    UMOMessage msg=event.getMessage();
synchronized (lock) {
      routeMessage(msg);
    }
  }
}
