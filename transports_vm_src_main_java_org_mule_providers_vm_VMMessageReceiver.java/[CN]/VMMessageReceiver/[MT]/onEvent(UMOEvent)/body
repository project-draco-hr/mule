{
  if (connector.isQueueEvents()) {
    QueueSession queueSession=connector.getQueueSession();
    Queue queue=queueSession.getQueue(endpoint.getEndpointURI().getAddress());
    try {
      queue.put(event);
    }
 catch (    InterruptedException e) {
      throw new MuleException(CoreMessages.interruptedQueuingEventFor(this.endpoint.getEndpointURI()),e);
    }
  }
 else {
    UMOMessage msg=new MuleMessage(event.getTransformedMessage(),event.getMessage());
synchronized (lock) {
      routeMessage(msg);
    }
  }
}
