{
  FunctionalTestComponent ftc=getFunctionalTestComponent("matchesCorrectExceptionStrategyUsingExceptionType");
  ftc.setEventCallback(new EventCallback(){
    @Override public void eventReceived(    MuleEventContext context,    Object component) throws Exception {
      throw exceptionToThrow;
    }
  }
);
  MuleMessage response=flowRunner("matchesCorrectExceptionStrategyUsingExceptionType").withPayload(getTestMuleMessage(payload)).run().getMessage();
  assertThat(getPayloadAsString(response),is(expectedMessage));
}
