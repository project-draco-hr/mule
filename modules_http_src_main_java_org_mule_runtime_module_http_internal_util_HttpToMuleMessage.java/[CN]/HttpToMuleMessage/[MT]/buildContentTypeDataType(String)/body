{
  DataTypeBuilder dataTypeBuilder=DataType.builder();
  if (contentTypeValue != null) {
    try {
      dataTypeBuilder.mimeType(contentTypeValue);
    }
 catch (    IllegalArgumentException e) {
      if (parseBoolean(System.getProperty(SYSTEM_PROPERTY_PREFIX + "strictContentType"))) {
        throw e;
      }
 else {
        String encoding=defaultCharset().name();
        logger.warn(format("%s when parsing Content-Type '%s': %s",e.getClass().getName(),contentTypeValue,e.getMessage()));
        logger.warn(format("Using default encoding: %s",encoding));
        dataTypeBuilder.encoding(encoding);
      }
    }
  }
  final DataType dataType=dataTypeBuilder.build();
  if (dataType.getEncoding() == null) {
    return DataType.builder(dataType).encoding(defaultCharset().name()).build();
  }
 else {
    return dataType;
  }
}
