{
  byte[] buffer=null;
  if (payload instanceof FileObject[]) {
    int bufferLength=0;
    for (int i=0; i < files.length; i++) {
      InputStream inputStream=files[i].getContent().getInputStream();
      bufferLength+=inputStream.available();
      inputStream.close();
    }
    buffer=new byte[bufferLength];
    int start=0;
    for (int i=0; i < files.length; i++) {
      InputStream inputStream=files[i].getContent().getInputStream();
      int length=inputStream.available();
      inputStream.read(buffer,start,length);
      inputStream.close();
      start+=length;
    }
  }
 else {
    InputStream inputStream=file.getContent().getInputStream();
    buffer=new byte[inputStream.available()];
    inputStream.read(buffer);
    inputStream.close();
  }
  return buffer;
}
