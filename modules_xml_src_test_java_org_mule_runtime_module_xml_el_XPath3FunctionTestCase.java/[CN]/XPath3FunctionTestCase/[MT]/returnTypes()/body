{
  Map<XPathReturnType,Class<?>> types=new HashMap<>();
  types.put(XPathReturnType.BOOLEAN,Boolean.class);
  types.put(XPathReturnType.NODE,Node.class);
  types.put(XPathReturnType.NODESET,NodeList.class);
  types.put(XPathReturnType.NUMBER,Double.class);
  types.put(XPathReturnType.STRING,String.class);
  Event event=eventBuilder().message(InternalMessage.of(ROOT_FOO_BAR)).build();
  for (  Map.Entry<XPathReturnType,Class<?>> entry : types.entrySet()) {
    String expression=String.format("xpath3('/root/@foo', payload, '%s')",entry.getKey().name());
    assertThat(doEvaluate(expression,event,Event.builder(event)),instanceOf(entry.getValue()));
  }
}
