{
  LoanQuote lowestQuote=null;
  LoanQuote quote=null;
  MuleEvent event=null;
  for (Iterator iterator=events.iterator(); iterator.hasNext(); ) {
    event=(MuleEvent)iterator.next();
    Object o=event.transformMessage();
    if (o instanceof LoanQuote) {
      quote=(LoanQuote)o;
    }
 else {
      throw new IllegalArgumentException("Object received by Aggregator is not of expected type. Wanted: " + LoanQuote.class.getName() + " Got: "+ o);
    }
    logger.info(LocaleMessage.processingQuote(quote));
    if (lowestQuote == null) {
      lowestQuote=quote;
    }
 else {
      if (quote.getInterestRate() < lowestQuote.getInterestRate()) {
        lowestQuote=quote;
      }
    }
  }
  logger.info(LocaleMessage.lowestQuote(lowestQuote));
  return new DefaultMuleMessage(lowestQuote,event.getMessage(),event.getMuleContext());
}
