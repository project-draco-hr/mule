{
  DefaultMuleMessage muleMessage=new DefaultMuleMessage(TEST,muleContext);
  DataType<Integer> newDataType=DataTypeFactory.create(Integer.class,APPLICATION_XML);
  newDataType.setEncoding(CUSTOM_ENCODING);
  muleMessage.setPayload(null,newDataType);
  assertThat(muleMessage.getPayload(),Matchers.<Object>equalTo(NullPayload.getInstance()));
  assertDataType(muleMessage,Integer.class,APPLICATION_XML,CUSTOM_ENCODING);
}
