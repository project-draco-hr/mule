{
  when(mockTemporaryArtifact.isStarted()).thenReturn(true);
  when(mockTemporaryArtifact.getMuleContext().getRegistry().lookupObjects(ConnectivityTestingStrategy.class)).thenReturn(emptyList());
  when(mockTemporaryArtifact.getMuleContext().getRegistry().get(COMPONENT_IDENTIFIER)).thenReturn(null);
  expectedException.expect(ConnectivityTestingObjectNotFoundException.class);
  connectivityTestingService.testConnection(COMPONENT_IDENTIFIER);
}
