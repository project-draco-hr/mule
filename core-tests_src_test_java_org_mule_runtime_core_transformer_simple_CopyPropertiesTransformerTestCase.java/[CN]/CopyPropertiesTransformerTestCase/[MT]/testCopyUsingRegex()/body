{
  CopyPropertiesTransformer copyPropertiesTransformer=createCopyPropertiesTransformer("MULE_*");
  when(mockMuleMessage.getInboundPropertyNames()).thenReturn(new HashSet<>(Arrays.asList("MULE_ID","MULE_CORRELATION_ID","SomeVar","MULE_GROUP_ID")));
  when(mockMuleMessage.getInboundProperty("MULE_ID")).thenReturn(PROPERTY_VALUE);
  when(mockMuleMessage.getInboundProperty("MULE_CORRELATION_ID")).thenReturn(PROPERTY_VALUE);
  when(mockMuleMessage.getInboundProperty("MULE_GROUP_ID")).thenReturn(PROPERTY_VALUE);
  when(mockMuleMessage.getInboundProperty("SomeVar")).thenReturn(PROPERTY_VALUE);
  when(mockMuleMessage.getInboundPropertyDataType(anyString())).thenReturn(PROPERTY_DATA_TYPE);
  copyPropertiesTransformer.transform(mockMuleMessage,ENCODING);
  verify(mockMuleMessage,times(0)).setOutboundProperty("SomeVar",PROPERTY_VALUE,PROPERTY_DATA_TYPE);
  verify(mockMuleMessage).copyProperty("MULE_ID");
  verify(mockMuleMessage).copyProperty("MULE_CORRELATION_ID");
  verify(mockMuleMessage).copyProperty("MULE_GROUP_ID");
}
