{
  this.socket=socket;
  final TcpConnector tcpConnector=((TcpConnector)connector);
  this.protocol=tcpConnector.getTcpProtocol();
  try {
    if (tcpConnector.getBufferSize() != UMOConnector.INT_VALUE_NOT_SET && socket.getReceiveBufferSize() != tcpConnector.getBufferSize()) {
      socket.setReceiveBufferSize(tcpConnector.getBufferSize());
    }
    if (tcpConnector.getBufferSize() != UMOConnector.INT_VALUE_NOT_SET && socket.getSendBufferSize() != tcpConnector.getBufferSize()) {
      socket.setSendBufferSize(tcpConnector.getBufferSize());
    }
    if (tcpConnector.getReceiveTimeout() != UMOConnector.INT_VALUE_NOT_SET && socket.getSoTimeout() != tcpConnector.getReceiveTimeout()) {
      socket.setSoTimeout(tcpConnector.getReceiveTimeout());
    }
    socket.setTcpNoDelay(true);
    socket.setKeepAlive(tcpConnector.isKeepAlive());
  }
 catch (  SocketException e) {
    logger.error("Failed to set Socket properties: " + e.getMessage(),e);
  }
}
