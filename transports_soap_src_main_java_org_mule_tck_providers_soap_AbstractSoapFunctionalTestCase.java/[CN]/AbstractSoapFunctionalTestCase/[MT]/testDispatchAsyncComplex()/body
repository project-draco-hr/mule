{
  MuleClient client=new MuleClient();
  client.dispatch(getDispatchAsyncComplexEndpoint1(),new Person("Betty","Rubble"),null);
  Thread.sleep(4500);
  UMOMessage result=client.receive(getDispatchAsyncComplexEndpoint2(),0);
  assertNotNull(result);
  assertTrue("Did not receive a Person but: " + result.getPayload().getClass(),result.getPayload() instanceof Person);
  assertEquals("Betty",((Person)result.getPayload()).getFirstName());
  assertEquals("Rubble",((Person)result.getPayload()).getLastName());
}
