{
  String[] targets={"service1","nosuch","vmConnector","flow1"};
  String expectedResponses[]={"Hellogoodbye",null,null,"Helloaloha"};
  MuleClient client=new MuleClient(muleContext);
  RemoteDispatcher dispatcher=client.getRemoteDispatcher("http://localhost:" + getPorts().get(0));
  for (int i=0; i < targets.length; i++) {
    String construct=targets[i];
    String expected=expectedResponses[i];
    MuleMessage result=dispatcher.sendToRemoteComponent(construct,"Hello",null);
    assertNotNull(result);
    if (expected != null) {
      assertEquals(expected,result.getPayload());
    }
 else {
      ExceptionPayload payload=result.getExceptionPayload();
      assertNotNull(payload);
      assertTrue(payload.getException().getMessage().contains(construct));
    }
  }
}
