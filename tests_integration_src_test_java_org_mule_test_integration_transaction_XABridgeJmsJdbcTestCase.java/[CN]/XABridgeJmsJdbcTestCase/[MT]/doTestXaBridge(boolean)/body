{
  XABridgeComponent.mayRollback=rollback;
  List results=execSqlQuery("SELECT * FROM TEST");
  assertEquals(0,results.size());
  for (int i=0; i < NUMBER_OF_MESSAGES; i++) {
    execSqlUpdate("INSERT INTO TEST(TYPE, DATA) VALUES (1, 'Test " + i + "')");
  }
  results=execSqlQuery("SELECT * FROM TEST WHERE TYPE = 1");
  assertEquals(NUMBER_OF_MESSAGES,results.size());
  long t0=System.currentTimeMillis();
  while (true) {
    results=execSqlQuery("SELECT * FROM TEST WHERE TYPE = 2");
    logger.info("Results found: " + results.size());
    if (results.size() >= NUMBER_OF_MESSAGES) {
      break;
    }
    System.out.println("Time elapsed: " + (System.currentTimeMillis() - t0));
    assertTrue(System.currentTimeMillis() - t0 < 40000);
    Thread.sleep(500);
  }
  assertTrue(results.size() >= NUMBER_OF_MESSAGES);
}
