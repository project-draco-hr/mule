{
  MuleMessage message=new DefaultMuleMessage("data",muleContext);
  MuleEvent event=new DefaultMuleEvent(message,MessageExchangePattern.ONE_WAY,getTestService());
  Object nonSerializable=new Object();
  message.setInvocationProperty("key",nonSerializable);
  message.setInvocationProperty("key2","value2");
  ObjectSerializer serializer=muleContext.getObjectSerializer();
  try {
    serializer.deserialize(serializer.serialize(event));
    fail("Serialization should have failed.");
  }
 catch (  Exception e) {
    assertEquals(SerializationException.class,e.getClass());
  }
}
