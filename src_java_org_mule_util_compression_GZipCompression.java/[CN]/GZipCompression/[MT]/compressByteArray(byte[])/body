{
  logger.debug("Compressing message of size: " + bytes.length);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  GZIPOutputStream gos=new GZIPOutputStream(baos);
  gos.write(bytes,0,bytes.length);
  gos.finish();
  gos.close();
  byte[] compressedByteArray=baos.toByteArray();
  logger.debug("Compressed message to size: " + compressedByteArray.length);
  return compressedByteArray;
}
