{
  componentId=new ProcessorId(TYPE_WITH_DECLARED_SUBTYPES_METADATA,FIRST_PROCESSOR_INDEX);
  MetadataResult<ComponentMetadataDescriptor> metadata=metadataManager.getMetadata(componentId);
  assertThat(metadata.isSuccess(),is(true));
  MetadataResult<ParameterMetadataDescriptor> shapeMetadata=metadata.get().getParametersMetadata().get(0);
  assertThat(shapeMetadata.get().getName(),is("plainShape"));
  MetadataType shapeType=shapeMetadata.get().getType();
  assertThat(shapeType,is(instanceOf(DefaultUnionType.class)));
  assertThat(((DefaultUnionType)shapeType).getTypes(),hasSize(2));
  assertThat(((DefaultUnionType)shapeType).getTypes(),hasItems(toMetadataType(Circle.class),toMetadataType(Rectangle.class)));
}
