{
  Service d=muleContext.getRegistry().lookupService("msgInfoMappingTestComponent");
  assertNotNull(d);
  OutboundRouterCollection router=d.getOutboundRouter();
  assertNotNull(router);
  List routers=router.getRouters();
  assertNotNull(routers);
  assertEquals(1,routers.size());
  AbstractOutboundRouter theRouter=(AbstractOutboundRouter)routers.get(0);
  final MessageInfoMapping mapping=theRouter.getMessageInfoMapping();
  assertTrue(mapping instanceof ExpressionMessageInfoMapping);
  Map props=new HashMap();
  props.put("id","myID123");
  props.put("correlation","myCorrelationID456");
  MuleMessage msg=new DefaultMuleMessage("foo",props,muleContext);
  assertEquals("myID123",mapping.getMessageId(msg));
  assertEquals("myCorrelationID456",mapping.getCorrelationId(msg));
}
