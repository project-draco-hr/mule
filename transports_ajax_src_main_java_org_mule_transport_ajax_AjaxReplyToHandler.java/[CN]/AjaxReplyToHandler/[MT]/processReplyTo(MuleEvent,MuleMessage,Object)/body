{
  AbstractBayeux bayeux=((BayeuxAware)connector).getBayeux();
  Channel channel=bayeux.getChannel(replyTo.toString(),false);
  if (channel == null) {
    logger.warn("No ajax Channel: " + replyTo + ". Maybe the client unregistered interest.");
    return;
  }
  Object ret;
  if (returnMessage.getExceptionPayload() != null) {
    ret=returnMessage.getExceptionPayload().getMessage();
  }
 else {
    EndpointBuilder endpointBuilder=new EndpointURIEndpointBuilder(event.getMessageSourceURI().toString(),muleContext);
    endpointBuilder.setConnector(connector);
    OutboundEndpoint tempEndpoint=muleContext.getEndpointFactory().getOutboundEndpoint(endpointBuilder);
    List<Transformer> defaultTransportTransformers=((org.mule.transport.AbstractConnector)connector).getDefaultOutboundTransformers(tempEndpoint);
    returnMessage.applyTransformers(event,defaultTransportTransformers);
    ret=returnMessage.getPayload();
  }
  for (  Client client : channel.getSubscribers()) {
    channel.publish(client,ret,null);
  }
}
