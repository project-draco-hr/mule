{
  try {
    dispatchToSocket(event);
    if (returnResponse(event)) {
      try {
        Object result=receiveFromSocket(socket,event.getTimeout(),endpoint);
        if (result == null) {
          return new DefaultMuleMessage(NullPayload.getInstance(),this.getEndpoint().getMuleContext());
        }
        if (result instanceof MutableMuleMessage) {
          return (MutableMuleMessage)result;
        }
        return new DefaultMuleMessage(result,this.getEndpoint().getMuleContext());
      }
 catch (      Exception ex) {
        if (logger.isInfoEnabled()) {
          logger.info("Error occurred while Reading; Message: " + ex.getMessage(),ex);
        }
        closeSocket();
        throw ex;
      }
    }
 else {
      return (MutableMuleMessage)event.getMessage();
    }
  }
  finally {
    if (!this.getConnector().isKeepSendSocketOpen()) {
      closeSocket();
    }
  }
}
