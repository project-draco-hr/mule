{
  endpoint=new MuleEndpoint("http://localhost:52581",true);
  HttpConnector c=new HttpConnector();
  c.setDefaultResponseTransformer(new UMOMessageToResponseString());
  endpoint.setConnector(c);
  Mock mockComponent=new Mock(UMOComponent.class);
  Mock mockDescriptor=new Mock(UMODescriptor.class);
  mockComponent.expectAndReturn("getDescriptor",mockDescriptor.proxy());
  mockDescriptor.expectAndReturn("getResponseTransformer",null);
  return new HttpMessageReceiver((AbstractConnector)endpoint.getConnector(),(UMOComponent)mockComponent.proxy(),endpoint);
}
