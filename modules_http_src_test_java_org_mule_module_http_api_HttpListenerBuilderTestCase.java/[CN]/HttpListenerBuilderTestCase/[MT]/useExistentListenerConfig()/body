{
  when(mockMuleContext.getRegistry().get(MuleProperties.OBJECT_DEFAULT_MESSAGE_PROCESSING_MANAGER)).thenReturn(mockMessageProcessingManager);
  when(mockMuleContext.getRegistry().lookupObjects(DefaultHttpListenerConfig.class)).thenReturn(Arrays.asList(mockListenerConfig));
  when(mockListenerConfig.getPort()).thenReturn(PORT);
  when(mockListenerConfig.getHost()).thenReturn(HOST);
  when(mockListenerConfig.resolvePath(anyString())).thenCallRealMethod();
  final HttpListener httpListener=new HttpListenerBuilder(mockMuleContext).setFlow(mockFlow).setHost(HOST).setPort(PORT).setPath(PATH).build();
  assertThat(httpListener.getConfig(),Is.<HttpListenerConfig>is(mockListenerConfig));
}
