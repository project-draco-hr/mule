{
  when(mockMuleContext.getRegistry().lookupObject(MessageProcessingManager.class)).thenReturn(mockMessageProcessingManager);
  when(mockMuleContext.getRegistry().lookupObjects(HttpListenerConfig.class)).thenReturn(Arrays.<HttpListenerConfig>asList(mockListenerConfig));
  when(mockMuleContext.getRegistry().lookupObject(HttpListenerConnectionManager.class)).thenReturn(mockListenerConnectionManager);
  when(mockMuleContext.getRegistry().get(anyString())).thenReturn(null);
  when(mockListenerConfig.getPort()).thenReturn(PORT);
  when(mockListenerConfig.getHost()).thenReturn(HOST);
  final HttpListener httpListener=new HttpListenerBuilder(mockMuleContext).setFlow(mockFlow).setHost(HOST).setPort(PORT).setPath(PATH).build();
  assertThat(httpListener.getConfig(),Is.<HttpListenerConfig>is(mockListenerConfig));
}
