{
  when(mockMuleContext.getRegistry().get(MuleProperties.OBJECT_DEFAULT_MESSAGE_PROCESSING_MANAGER)).thenReturn(mockMessageProcessingManager);
  when(mockMuleContext.getRegistry().get(HTTP_LISTENER_CONNECTION_MANAGER)).thenReturn(mockListenerConnectionManager);
  when(mockMuleContext.getRegistry().lookupObjects(DefaultHttpListenerConfig.class)).thenReturn(Collections.<DefaultHttpListenerConfig>emptyList());
  new HttpListenerBuilder(mockMuleContext).setFlow(mockFlow).setHost(HOST).setPort(PORT).setPath(PATH).build();
  verify(mockListenerConnectionManager).createServer(HOST,PORT);
}
