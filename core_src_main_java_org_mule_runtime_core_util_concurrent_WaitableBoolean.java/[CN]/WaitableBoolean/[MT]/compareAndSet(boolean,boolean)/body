{
synchronized (lock) {
    boolean success=(value == assumedValue);
    if (success) {
      value=newValue;
      lock.notifyAll();
    }
    return success;
  }
}
