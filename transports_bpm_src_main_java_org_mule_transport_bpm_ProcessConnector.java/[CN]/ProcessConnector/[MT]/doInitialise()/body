{
  try {
    if (bpms == null) {
      bpms=createBpms();
    }
    if (bpms == null) {
      throw new ConfigurationException(MessageFactory.createStaticMessage("The bpms property must be set for this connector."));
    }
    if (bpms instanceof Initialisable) {
      ((Initialisable)bpms).initialise();
    }
    bpms.setMessageService(this);
    if ((allowGlobalDispatcher == true) && (muleClient == null)) {
      muleClient=new MuleClient(muleContext);
    }
  }
 catch (  Exception e) {
    throw new InitialisationException(e,this);
  }
}
