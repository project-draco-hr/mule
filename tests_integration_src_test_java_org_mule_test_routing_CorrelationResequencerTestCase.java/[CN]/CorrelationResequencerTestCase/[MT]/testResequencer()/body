{
  flowRunner("splitter").withPayload(Arrays.asList("a","b","c","d","e","f")).asynchronously().run();
  FunctionalTestComponent resequencer=getFunctionalTestComponent("sorted");
  assertTrue(receiveLatch.await(3000,TimeUnit.SECONDS));
  assertEquals("Wrong number of messages received.",6,resequencer.getReceivedMessagesCount());
  assertEquals("Sequence wasn't reordered.","a",resequencer.getReceivedMessage(1));
  assertEquals("Sequence wasn't reordered.","b",resequencer.getReceivedMessage(2));
  assertEquals("Sequence wasn't reordered.","c",resequencer.getReceivedMessage(3));
  assertEquals("Sequence wasn't reordered.","d",resequencer.getReceivedMessage(4));
  assertEquals("Sequence wasn't reordered.","e",resequencer.getReceivedMessage(5));
  assertEquals("Sequence wasn't reordered.","f",resequencer.getReceivedMessage(6));
}
