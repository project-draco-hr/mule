{
  if (obj == null) {
    return false;
  }
  if (expression == null) {
    logger.warn("Expression for JXPathFilter is not set");
    return false;
  }
  if (value == null) {
    if (logger.isDebugEnabled()) {
      logger.debug("Value for JXPathFilter is not set : true by default");
    }
    value=Boolean.TRUE.toString();
  }
  boolean res=false;
  try {
    Object o=null;
    if (obj instanceof String) {
      Document doc=DocumentHelper.parseText((String)obj);
      o=doc.valueOf(expression);
    }
 else {
      JXPathContext context=JXPathContext.newContext(obj);
      o=context.getValue(expression);
    }
    if (logger.isDebugEnabled()) {
      logger.debug("JXPathFilter Expression result='" + o + "' -  Expected value='"+ value+ "'");
    }
    if (o != null) {
      res=value.equals(o.toString());
    }
 else {
      res=false;
      logger.warn("JXPathFilter Expression result is null (" + expression + ")");
    }
  }
 catch (  Exception e) {
    logger.warn("JXPathFilter cannot evaluate expression (" + expression + ") :"+ e.getMessage(),e);
  }
  if (logger.isDebugEnabled()) {
    logger.debug("JXPathFilter accept object  : " + res);
  }
  return res;
}
