{
  MuleMessage message=event.getMessage();
  InboundEndpoint endpoint=(InboundEndpoint)event.getEndpoint();
  if (endpoint.getFilter() != null && !endpoint.getFilter().accept(message)) {
    RequestContext.setEvent(new DefaultMuleEvent(message,event));
    throw new FilterException(CoreMessages.messageRejectedByFilter(),endpoint.getFilter());
  }
  return processNext(event);
}
