{
  try {
    byte[] data=null;
    if (src instanceof byte[]) {
      data=(byte[])src;
    }
 else     if (src instanceof InputStream) {
      InputStream input=(InputStream)src;
      try {
        data=IOUtils.toByteArray(input);
      }
  finally {
        input.close();
      }
    }
 else {
      data=SerializationUtils.serialize((Serializable)src);
    }
    return this.getStrategy().compressByteArray(data);
  }
 catch (  IOException ioex) {
    throw new TransformerException(this,ioex);
  }
}
