{
  LifecycleRegistry cachedLifecycleRegistry=lifecycleRegistry.get();
  if (cachedLifecycleRegistry == null) {
    for (    Registry registry : registries) {
      if (registry instanceof LifecycleRegistry) {
        cachedLifecycleRegistry=(LifecycleRegistry)registry;
        return lifecycleRegistry.compareAndSet(null,cachedLifecycleRegistry) ? cachedLifecycleRegistry : lifecycleRegistry.get();
      }
    }
  }
  return cachedLifecycleRegistry;
}
