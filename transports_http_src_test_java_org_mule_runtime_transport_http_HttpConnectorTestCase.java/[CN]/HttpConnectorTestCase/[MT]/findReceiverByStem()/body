{
  Map<Object,MessageReceiver> receiversMap=createTestReceivers();
  assertThat((HttpMessageReceiver)HttpConnector.findReceiverByStem(receiversMap,"http://somehost:5555/"),is(mockReceiverPort5555));
  assertThat((HttpMessageReceiver)HttpConnector.findReceiverByStem(receiversMap,"http://somehost:5555/service"),is(mockServiceReceiverPort5555));
  assertThat((HttpMessageReceiver)HttpConnector.findReceiverByStem(receiversMap,"http://somehost:5555/service/order"),is(mockServiceOrderReceiverPort5555));
  assertThat((HttpMessageReceiver)HttpConnector.findReceiverByStem(receiversMap,"http://somehost:7777/service/order"),is(mockServiceOrderReceiverPort7777));
  assertThat((HttpMessageReceiver)HttpConnector.findReceiverByStem(receiversMap,"http://somehost:7777/service"),is(mockServiceReceiverPort7777));
  assertThat((HttpMessageReceiver)HttpConnector.findReceiverByStem(receiversMap,"http://anotherhost:5555/"),is(mockServiceReceiverAnotherHost));
}
