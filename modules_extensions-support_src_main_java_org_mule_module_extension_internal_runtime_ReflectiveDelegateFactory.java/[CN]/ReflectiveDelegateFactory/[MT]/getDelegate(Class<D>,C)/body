{
  DelegateKey key=new DelegateKey(delegateType,configurationInstance);
  try {
    return (D)delegates.get(key,new Callable<D>(){
      @Override public D call() throws Exception {
        return createDelegate(delegateType,configurationInstance);
      }
    }
);
  }
 catch (  Exception e) {
    if (e.getCause() instanceof RuntimeException) {
      throw (RuntimeException)e.getCause();
    }
    throw new RuntimeException(e);
  }
}
