{
  if (securityManager == null) {
    securityManager=muleContext.getSecurityManager();
  }
  if (securityManager == null) {
    throw new InitialisationException(CoreMessages.authSecurityManagerNotSet(),this);
  }
  if (securityProviders != null) {
    SecurityManager localManager=new MuleSecurityManager();
    String[] sp=StringUtils.splitAndTrim(securityProviders,",");
    for (int i=0; i < sp.length; i++) {
      SecurityProvider provider=securityManager.getProvider(sp[i]);
      if (provider != null) {
        localManager.addProvider(provider);
      }
 else {
        throw new InitialisationException(CoreMessages.objectNotRegistered("Security Provider",sp[i]),this);
      }
    }
    securityManager=localManager;
  }
  return LifecycleTransitionResult.OK;
}
