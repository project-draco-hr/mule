{
  VariableExpressionEvaluator eval=new VariableExpressionEvaluator();
  VariableExpressionEnricher enricher=new VariableExpressionEnricher();
  MuleMessage message=new DefaultMuleMessage("test",muleContext);
  enricher.enrich("foo",message,"fooValue");
  Object result=eval.evaluate("foo",message);
  assertNotNull(result);
  assertEquals("fooValue",result);
  try {
    eval.evaluate("fool",message);
    fail("required value");
  }
 catch (  Exception e) {
  }
  result=message.getProperty("foo",PropertyScope.INVOCATION);
  assertNotNull(result);
  assertEquals("fooValue",result);
}
