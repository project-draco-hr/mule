{
  ExpressionManager expressionManager=muleContext.getExpressionManager();
  MuleMessage message=new DefaultMuleMessage("test",muleContext);
  expressionManager.enrich("#[variable:foo]",message,"fooValue");
  Object result=expressionManager.evaluate("#[variable:foo]",message);
  assertNotNull(result);
  assertEquals("fooValue",result);
  try {
    expressionManager.evaluate("#[variable:fool]",message);
    fail("required value");
  }
 catch (  Exception e) {
  }
  result=message.getProperty("foo",PropertyScope.INVOCATION);
  assertNotNull(result);
  assertEquals("fooValue",result);
}
