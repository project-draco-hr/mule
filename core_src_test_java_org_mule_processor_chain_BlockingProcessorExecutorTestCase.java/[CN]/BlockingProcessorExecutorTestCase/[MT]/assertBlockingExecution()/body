{
  ProcessorExecutor executor=createProcessorExecutor();
  if (event.getExchangePattern() == MessageExchangePattern.REQUEST_RESPONSE) {
    assertThat(executor.execute().getMessageAsString(),equalTo(RESULT));
  }
 else {
    assertThat(executor.execute(),equalTo(event));
  }
  assertThat(processor1.event,is(notNullValue()));
  assertThat(processor1.thread,equalTo(Thread.currentThread()));
  assertThat(processor2.event,is(notNullValue()));
  assertThat(processor2.thread,equalTo(Thread.currentThread()));
  assertThat(processor3.event,is(notNullValue()));
  assertThat(processor3.thread,equalTo(Thread.currentThread()));
}
