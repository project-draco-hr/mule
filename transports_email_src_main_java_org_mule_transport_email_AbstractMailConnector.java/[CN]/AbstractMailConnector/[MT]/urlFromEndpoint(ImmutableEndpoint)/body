{
  String inbox=endpoint.getEndpointURI().getPath();
  if (inbox.length() == 0) {
    inbox=getMailboxFolder();
  }
 else {
    inbox=inbox.substring(1);
  }
  EndpointURI uri=endpoint.getEndpointURI();
  String user=uri.getUser();
  if (user != null) {
    user=URLDecoder.decode(user,endpoint.getEncoding());
  }
  String pass=uri.getPassword();
  if (pass != null) {
    pass=URLDecoder.decode(pass,endpoint.getEncoding());
  }
  return new URLName(uri.getScheme(),uri.getHost(),uri.getPort(),inbox,user,pass);
}
