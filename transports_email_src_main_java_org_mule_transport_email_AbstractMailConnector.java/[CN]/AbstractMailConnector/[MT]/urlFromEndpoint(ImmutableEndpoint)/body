{
  String inbox=endpoint.getEndpointURI().getPath();
  if (inbox.length() == 0) {
    inbox=getMailboxFolder();
  }
 else {
    inbox=inbox.substring(1);
  }
  EndpointURI uri=endpoint.getEndpointURI();
  String user=URLDecoder.decode((uri.getUser() == null ? StringUtils.EMPTY : uri.getUser()),endpoint.getEncoding());
  String pass=URLDecoder.decode((uri.getPassword() == null ? StringUtils.EMPTY : uri.getPassword()),endpoint.getEncoding());
  return new URLName(uri.getScheme(),uri.getHost(),uri.getPort(),inbox,user,pass);
}
