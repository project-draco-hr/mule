{
synchronized (sessions) {
    SessionDetails sessionDetails=sessions.get(endpoint);
    if (null == sessionDetails) {
      sessionDetails=newSession(endpoint);
      sessions.put(endpoint,sessionDetails);
    }
    return sessionDetails;
  }
}
