{
  MuleClient client=muleContext.getClient();
  List<Object> results=new ArrayList<Object>();
  for (int i=0; i < noOfMessages; i++) {
    results.add(client.send(((InboundEndpoint)muleContext.getRegistry().lookupObject(endPointName)).getAddress(),message,null).getPayload(DataType.BYTE_ARRAY_DATA_TYPE));
  }
  assertEquals(noOfMessages,results.size());
  for (int i=0; i < noOfMessages; i++) {
    assertEquals(response,new String((byte[])results.get(i)));
  }
}
