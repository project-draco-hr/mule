{
  try {
    if (logger.isDebugEnabled()) {
      logger.debug("Checking for changes...");
    }
    if (!lock.tryLock(0,TimeUnit.SECONDS)) {
      if (logger.isDebugEnabled()) {
        logger.debug("Another deployment operation in progress, will skip this cycle. Owner thread: " + ((DebuggableReentrantLock)lock).getOwner());
      }
      return;
    }
    undeployRemovedApps();
    String[] apps=appsDir.list(DirectoryFileFilter.DIRECTORY);
    final String[] zips=appsDir.list(ZIP_APPS_FILTER);
    deployPackedApps(zips);
    if (zips.length > 0 || dirty) {
      apps=appsDir.list(DirectoryFileFilter.DIRECTORY);
    }
    deployExplodedApps(apps);
  }
 catch (  InterruptedException e) {
    Thread.currentThread().interrupt();
  }
 finally {
    if (lock.isHeldByCurrentThread()) {
      lock.unlock();
    }
    dirty=false;
  }
}
