{
  try {
    deploymentListener.onDeploymentStart(application.getAppName());
    guardedDeploy(application);
    deploymentListener.onDeploymentSuccess(application.getAppName());
    zombieMap.remove(application.getAppName());
  }
 catch (  Throwable t) {
    String msg=miniSplash(String.format("Failed to deploy app '%s', see below",application.getAppName()));
    logger.error(msg,t);
    addZombieApp(application);
    deploymentListener.onDeploymentFailure(application.getAppName(),t);
    if (t instanceof DeploymentException) {
      throw (DeploymentException)t;
    }
 else {
      msg="Failed to deploy application: " + application.getAppName();
      throw new DeploymentException(MessageFactory.createStaticMessage(msg),t);
    }
  }
}
