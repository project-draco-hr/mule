{
  final Thread thread=newReaderThread();
  Object object=new Disposable(){
    @Override public void dispose(){
      try {
        thread.start();
        waitOn(latch);
      }
 catch (      Exception e) {
        throw new RuntimeException(e);
      }
    }
  }
;
  muleContext.getRegistry().registerObject(KEY,object);
  muleContext.getRegistry().unregisterObject(KEY);
  waitOn(auxiliaryLatch);
  assertThat(lookupObjects.containsKey(KEY),is(false));
}
