{
  SedaModel model=new SedaModel();
  model.setMuleContext(muleContext);
  muleContext.applyLifecycle(model);
  Service c=new SedaService();
  c.setName("test");
  PooledObjectFactory of=new PooledObjectFactory(Orange.class,getDefaultPoolingProfile());
  of.initialise();
  c.setServiceFactory(of);
  c.setModel(model);
  c.setMuleContext(muleContext);
  muleContext.applyLifecycle(c);
  assertTrue(c.getServiceFactory() instanceof PooledObjectFactory);
  assertEquals(0,((PooledObjectFactory)c.getServiceFactory()).getPoolSize());
  assertTrue(c.getServiceFactory().getOrCreate() instanceof Orange);
  assertEquals(1,((PooledObjectFactory)c.getServiceFactory()).getPoolSize());
  c.dispose();
  assertEquals(0,((PooledObjectFactory)c.getServiceFactory()).getPoolSize());
}
