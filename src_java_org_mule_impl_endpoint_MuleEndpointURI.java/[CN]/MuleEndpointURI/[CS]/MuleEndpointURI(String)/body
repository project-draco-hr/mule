{
  String uriIdentifier=MuleManager.getInstance().lookupEndpointIdentifier(uri,uri);
  if (!uriIdentifier.equals(uri)) {
    endpointName=uri;
    uri=uriIdentifier;
  }
  uri=uri.trim().replaceAll(" ","%20");
  if (!validateUrl(uri)) {
    throw new MalformedEndpointException(uri);
  }
  try {
    schemeMetaInfo=retrieveSchemeMetaInfo(uri);
    if (schemeMetaInfo != null) {
      uri=uri.replaceFirst(schemeMetaInfo + ":","");
    }
    this.uri=new URI(uri);
    this.userInfo=this.uri.getUserInfo();
  }
 catch (  URISyntaxException e) {
    throw new MalformedEndpointException(uri,e);
  }
  try {
    EndpointBuilder builder=null;
    String scheme=(schemeMetaInfo == null ? this.uri.getScheme() : schemeMetaInfo);
    ConnectorServiceDescriptor csd=ConnectorFactory.getServiceDescriptor(scheme);
    builder=csd.createEndpointBuilder();
    UMOEndpointURI built=builder.build(this.uri);
    initialise(built);
  }
 catch (  ConnectorFactoryException e) {
    throw new MalformedEndpointException(e);
  }
}
