{
  EventCallback callback=new EventCallback(){
    public synchronized void eventReceived(    UMOEventContext context,    Object component) throws Exception {
      currentTx=context.getCurrentTransaction();
      assertNull(currentTx);
      callbackCalled.countDown();
    }
  }
;
  FunctionalTestComponent ftc=lookupTestComponent("transactionTestModel","component1");
  ftc.setEventCallback(callback);
  send(TEST_MESSAGE,"component1In");
  assertTrue(callbackCalled.await(LOCK_TIMEOUT,TimeUnit.MILLISECONDS));
  assertEquals(TEST_MESSAGE,ftc.getLastReceivedMessage());
  assertNull(currentTx);
  assertEquals(TEST_MESSAGE_RESPONSE,receiveTextMessage("component1Out"));
}
