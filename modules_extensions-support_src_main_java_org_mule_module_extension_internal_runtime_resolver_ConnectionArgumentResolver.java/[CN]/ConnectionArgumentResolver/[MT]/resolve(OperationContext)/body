{
  ManagedConnection managedConnection=((OperationContextAdapter)operationContext).getVariable(CONNECTION_PARAM);
  checkArgument(managedConnection != null,"No connection was provided for the operation");
  try {
    return managedConnection.getConnection();
  }
 catch (  ConnectionException e) {
    throw new MuleRuntimeException(MessageFactory.createStaticMessage(String.format("Error was found trying to obtain a connection to execute operation '%s' of extension '%s'",operationContext.getOperationModel().getName(),operationContext.getConfiguration().getModel().getExtensionModel().getName())),e);
  }
}
