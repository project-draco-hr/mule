{
  if (endpoint.startsWith("soap") || endpoint.startsWith("axis") || endpoint.startsWith("cxf")) {
    EndpointURI ep=new MuleEndpointURI(endpoint,muleContext);
    String serviceName=null;
    if (ep.getPath() != null) {
      String path=ep.getPath();
      if (path.endsWith("/")) {
        path=path.substring(0,path.length() - 1);
      }
      int i=path.lastIndexOf("/");
      if (i > -1) {
        serviceName=path.substring(i + 1);
      }
    }
 else {
      serviceName=service.getName();
    }
    String newEndpoint=endpoint;
    int i=newEndpoint.indexOf(serviceName);
    newEndpoint=newEndpoint.substring(0,i - 1);
    SedaService s=new SedaService(muleContext);
    s.setName(serviceName);
    s.setModel(muleContext.getRegistry().lookupSystemModel());
    QueueProfile queueProfile=QueueProfile.newInstancePersistingToDefaultMemoryQueueStore(muleContext);
    s.setQueueProfile(queueProfile);
    ((CompositeMessageSource)s.getMessageSource()).addSource(muleContext.getEndpointFactory().getInboundEndpoint(newEndpoint));
    final DefaultJavaComponent component=new DefaultJavaComponent(new SingletonObjectFactory(listener));
    component.setMuleContext(muleContext);
    s.setComponent(component);
    muleContext.getRegistry().registerService(s);
    return true;
  }
 else {
    return false;
  }
}
