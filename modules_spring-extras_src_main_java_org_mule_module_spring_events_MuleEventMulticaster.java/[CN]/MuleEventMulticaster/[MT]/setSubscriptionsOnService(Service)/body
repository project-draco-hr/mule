{
  List<String> endpoints=new ArrayList<String>();
  for (Iterator iterator=listeners.iterator(); iterator.hasNext(); ) {
    ApplicationListener listener=(ApplicationListener)iterator.next();
    if (listener instanceof AsynchronousEventListener) {
      listener=((AsynchronousEventListener)listener).getListener();
    }
    if (listener instanceof MuleSubscriptionEventListener) {
      String[] subscriptions=((MuleSubscriptionEventListener)listener).getSubscriptions();
      for (int i=0; i < subscriptions.length; i++) {
        if (subscriptions[i].indexOf("*") == -1 && MuleEndpointURI.isMuleUri(subscriptions[i])) {
          boolean isSoap=registerAsSoap(subscriptions[i],listener);
          if (!isSoap) {
            endpoints.add(subscriptions[i]);
          }
        }
      }
    }
  }
  if (endpoints.size() > 0) {
    for (    String endpoint : endpoints) {
      InboundEndpoint ep=muleContext.getEndpointFactory().getInboundEndpoint(endpoint);
      if (((ServiceCompositeMessageSource)service.getMessageSource()).getEndpoint(ep.getName()) == null) {
        ((ServiceCompositeMessageSource)service.getMessageSource()).addSource(ep);
      }
    }
  }
}
