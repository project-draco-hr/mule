{
  OutboundEndpoint endpoint=mock(OutboundEndpoint.class);
  when(endpoint.getTransformers()).thenReturn(CollectionUtils.singletonList(new TestEventTransformer()));
  when(endpoint.process(any(MuleEvent.class))).thenAnswer(new Answer<MuleEvent>(){
    @Override public MuleEvent answer(    InvocationOnMock invocation) throws Throwable {
      assertEquals(1,invocation.getArguments().length);
      assertTrue(invocation.getArguments()[0] instanceof MuleEvent);
      MuleEvent event=(MuleEvent)invocation.getArguments()[0];
      assertEquals("Transformed Test Data",event.getMessage().getPayload());
      return null;
    }
  }
);
  ForwardingCatchAllStrategy strategy=new ForwardingCatchAllStrategy();
  strategy.setSendTransformed(true);
  strategy.setEndpoint(endpoint);
  MuleEvent event=getTestEvent("UncaughtEvent");
  strategy.process(event);
  assertNotNull(strategy.getEndpoint());
}
