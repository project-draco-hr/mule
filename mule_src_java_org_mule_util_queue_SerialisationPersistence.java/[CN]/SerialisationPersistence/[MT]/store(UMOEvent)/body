{
synchronized (lock) {
    File item=new File(store,event.getEndpoint().getEndpointURI().getAddress() + "/" + event.getId()+ ".e");
    try {
      EventHolder eventHolder=new EventHolder(event);
      ObjectOutputStream oos=new ObjectOutputStream(new FileOutputStream(item));
      oos.writeObject(eventHolder);
      oos.close();
    }
 catch (    IOException e) {
      throw new PersistentQueueException(new Message(Messages.FAILED_TO_PERSIST_EVENT_X,event.getId()),e);
    }
  }
}
