{
  LinkedHashMap entries=new LinkedHashMap();
  JarFile jarFileWrapper=null;
  if (jarFile != null) {
    try {
      jarFileWrapper=new JarFile(jarFile);
      Enumeration iter=jarFileWrapper.entries();
      while (iter.hasMoreElements()) {
        ZipEntry zipEntry=(ZipEntry)iter.nextElement();
        InputStream entryStream=jarFileWrapper.getInputStream(zipEntry);
        ByteArrayOutputStream byteArrayStream=new ByteArrayOutputStream();
        try {
          MuleBootstrapUtils.copy(entryStream,byteArrayStream);
          entries.put(zipEntry.getName(),byteArrayStream.toByteArray());
        }
  finally {
          byteArrayStream.close();
        }
      }
    }
  finally {
      if (jarFileWrapper != null) {
        jarFileWrapper.close();
      }
    }
  }
  return entries;
}
