{
  Collection<DbConfigResolver> dbConfigResolvers=registry.lookupObjects(DbConfigResolver.class);
  if (dbConfigResolvers.isEmpty()) {
    throw new UnresolvableDbConfigException("There is no database config defined");
  }
  if (dbConfigResolvers.size() > 1) {
    StringBuilder stringBuilder=new StringBuilder();
    for (    DbConfigResolver dbConfigResolver : dbConfigResolvers) {
      if (stringBuilder.length() != 0) {
        stringBuilder.append(", ");
      }
      stringBuilder.append(dbConfigResolver.resolve(null).getName());
    }
    throw new UnresolvableDbConfigException("Database config must be explicitly defined using 'config-ref' attribute there are multiple database configs defined: " + stringBuilder);
  }
  return dbConfigResolvers.iterator().next();
}
