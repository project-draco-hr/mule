{
  this.clientConfig=clientConfig;
  this.providerConfig=clientConfig.getAsyncHttpProviderConfig() instanceof GrizzlyAsyncHttpProviderConfig ? (GrizzlyAsyncHttpProviderConfig)clientConfig.getAsyncHttpProviderConfig() : new GrizzlyAsyncHttpProviderConfig();
  final TCPNIOTransportBuilder builder=TCPNIOTransportBuilder.newInstance();
  clientTransport=builder.build();
  initializeTransport(clientConfig);
  connectionManager=new ConnectionManager(this,clientTransport,providerConfig);
  try {
    clientTransport.start();
  }
 catch (  IOException ioe) {
    throw new RuntimeException(ioe);
  }
}
