{
  final Latch latch=new Latch();
  ((FunctionalTestComponent)getComponent("serverClientProxyWithWsdl2")).setEventCallback(new EventCallback(){
    @Override public void eventReceived(    MuleEventContext context,    Object component) throws Exception {
      latch.countDown();
    }
  }
);
  String msg="<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">" + "<soap:Body> <test xmlns=\"http://foo\"></test>" + "</soap:Body>"+ "</soap:Envelope>";
  MuleClient client=muleContext.getClient();
  MuleMessage result=client.send("http://localhost:" + dynamicPort.getNumber() + "/services/proxyWithWsdl2",new DefaultMuleMessage(msg,muleContext),HTTP_REQUEST_OPTIONS);
  String resString=result.getPayloadAsString();
  assertTrue(latch.await(1000,TimeUnit.MILLISECONDS));
  assertTrue(resString.indexOf("<test xmlns=\"http://foo\"") != -1);
}
