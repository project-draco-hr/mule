{
  MetadataType resultingType=result.get() == null ? type : result.get();
  TypeMetadataDescriptor descriptor=typeDescriptor().withType(resultingType).dynamic(isDynamic).build();
  if (result.isSuccess()) {
    return success(descriptor);
  }
  MetadataFailure failure=result.getFailure().get();
  return failure(descriptor,failure.getMessage(),failure.getFailureCode(),failure.getReason());
}
