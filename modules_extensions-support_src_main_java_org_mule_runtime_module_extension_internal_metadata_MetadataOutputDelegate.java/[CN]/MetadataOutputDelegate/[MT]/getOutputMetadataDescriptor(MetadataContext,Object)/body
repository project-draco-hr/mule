{
  MetadataResult<MetadataType> outputMetadataResult=getOutputMetadata(context,key);
  MetadataResult<MetadataType> attributesMetadataResult=getOutputAttributesMetadata(context,key);
  MetadataResult<TypeMetadataDescriptor> outputDescriptor=toMetadataDescriptorResult(component.getOutput().getType(),component.getOutput().hasDynamicType(),outputMetadataResult);
  MetadataResult<TypeMetadataDescriptor> attributesDescriptor=toMetadataDescriptorResult(component.getOutputAttributes().getType(),false,attributesMetadataResult);
  OutputMetadataDescriptor descriptor=outputDescriptor().withReturnType(outputDescriptor).withAttributesType(attributesDescriptor).build();
  if (!outputMetadataResult.isSuccess() || !attributesMetadataResult.isSuccess()) {
    return mergeFailures(descriptor,outputMetadataResult,attributesMetadataResult);
  }
  return success(descriptor);
}
