{
  logger.info("Initialising");
  MuleManager manager=(MuleManager)MuleManager.getInstance();
  String workDir=manager.getConfiguration().getWorkingDirectory();
  String fileName=workDir + "/" + (fileStoreDirectory != null ? fileStoreDirectory : DEFAULT_FILESTORE_DIRECTORY);
  try {
    logger.info("Creating directory " + fileName);
    storeDir=FileUtils.openDirectory(fileName);
    ready=true;
  }
 catch (  IOException ieo) {
    String msg="Unable to find or create the file store directory: " + fileName;
    ready=false;
    storeDir=null;
    throw new InitialisationException(new MuleException(msg),this);
  }
  try {
    xstreamFactory=new XStreamFactory();
  }
 catch (  Exception e) {
    String msg="Unable to initialize the XStreamFactory: " + e.toString();
    logger.error(msg);
    xstreamFactory=null;
    throw new InitialisationException(new MuleException(msg),this);
  }
}
