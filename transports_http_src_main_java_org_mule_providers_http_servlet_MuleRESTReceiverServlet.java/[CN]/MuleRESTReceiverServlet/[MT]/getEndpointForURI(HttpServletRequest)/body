{
  String endpointName=httpServletRequest.getParameter("endpoint");
  if (endpointName == null) {
    throw new EndpointException(HttpMessages.httpParameterNotSet("endpoint"));
  }
  UMOImmutableEndpoint endpoint=RegistryContext.getRegistry().lookupEndpoint(endpointName);
  if (endpoint == null) {
    UMOMessageReceiver receiver=(UMOMessageReceiver)getReceivers().get(endpointName);
    if (receiver == null) {
      throw new EndpointNotFoundException(endpointName);
    }
    endpoint=receiver.getEndpoint();
  }
  return endpoint;
}
