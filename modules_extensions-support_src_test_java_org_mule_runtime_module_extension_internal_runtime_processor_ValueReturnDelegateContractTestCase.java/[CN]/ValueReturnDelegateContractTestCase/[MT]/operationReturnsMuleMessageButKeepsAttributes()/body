{
  Object payload=new Object();
  DataType dataType=DataType.builder(DataType.OBJECT).charset(getDefaultEncoding(muleContext)).build();
  delegate.asReturnValue(new DefaultMuleMessage(payload,dataType),operationContext);
  MuleMessage message=getOutputMessage();
  assertThat(message.getPayload(),is(sameInstance(payload)));
  assertThat(message.getAttributes(),is(sameInstance(attributes)));
  assertThat(message.getDataType(),is(sameInstance(dataType)));
}
