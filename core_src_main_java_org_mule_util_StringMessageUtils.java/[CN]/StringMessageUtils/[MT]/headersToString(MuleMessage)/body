{
  if (m == null) {
    return null;
  }
  StringBuilder buf=new StringBuilder();
  buf.append(SystemUtils.LINE_SEPARATOR).append("Message properties:").append(SystemUtils.LINE_SEPARATOR);
  for (int i=0; i < PropertyScope.ALL_SCOPES.length; i++) {
    PropertyScope scope=PropertyScope.ALL_SCOPES[i];
    try {
      Set<Object> names=new TreeSet<Object>(m.getPropertyNames(scope));
      buf.append("  ").append(scope.getScopeName().toUpperCase()).append(" scoped properties:").append(SystemUtils.LINE_SEPARATOR);
      for (      Object name : names) {
        Object value=m.getProperty(name.toString(),scope);
        if (value instanceof MuleMessage) {
          value="<<<MuleMessage>>>";
        }
        if (name.equals("password") || name.toString().contains("secret") || name.equals("pass")) {
          value="****";
        }
        buf.append("    ").append(name).append("=").append(value).append(SystemUtils.LINE_SEPARATOR);
      }
    }
 catch (    IllegalArgumentException e) {
    }
  }
  return buf.toString();
}
