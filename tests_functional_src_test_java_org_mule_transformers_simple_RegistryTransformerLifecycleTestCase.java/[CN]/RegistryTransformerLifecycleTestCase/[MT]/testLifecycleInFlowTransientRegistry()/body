{
  Flow flow=new Flow("flow",muleContext);
  TransformerLifecycleTracker transformer=new TransformerLifecycleTracker();
  transformer.setProperty("foo");
  flow.setMessageProcessors(Collections.<MessageProcessor>singletonList(transformer));
  muleContext.getRegistry().registerFlowConstruct(flow);
  muleContext.dispose();
  assertLifecycle(transformer);
}
