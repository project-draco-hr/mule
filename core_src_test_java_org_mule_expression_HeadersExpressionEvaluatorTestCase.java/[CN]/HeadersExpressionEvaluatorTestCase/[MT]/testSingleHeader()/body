{
  MessageHeaderExpressionEvaluator eval=new MessageHeaderExpressionEvaluator();
  MuleMessage message=new DefaultMuleMessage("test",props,muleContext);
  Object result=eval.evaluate("foo",message);
  assertNotNull(result);
  assertEquals("foovalue",result);
  result=eval.evaluate("foo?",message);
  assertNotNull(result);
  assertEquals("foovalue",result);
  result=eval.evaluate("fool?",message);
  assertNull(result);
  try {
    eval.evaluate("fool",message);
    fail("required value");
  }
 catch (  Exception e) {
  }
  ((DefaultMuleMessage)message).addInboundProperties(Collections.singletonMap("testProp",(Object)"value"));
  result=eval.evaluate("testProp?",message);
  assertNull(result);
  result=eval.evaluate("INBOUND:testProp",message);
  assertEquals("value",result);
}
