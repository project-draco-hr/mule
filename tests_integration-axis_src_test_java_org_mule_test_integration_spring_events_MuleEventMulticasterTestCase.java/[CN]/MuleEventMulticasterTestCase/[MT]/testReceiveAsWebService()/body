{
  MuleClient client=muleContext.getClient();
  OrderManagerBean orderManager=muleContext.getRegistry().get("orderManagerBean");
  assertNotNull(orderManager);
  EventCallback callback=new EventCallback(){
    @Override public void eventReceived(    MuleEventContext context,    Object o) throws Exception {
      eventCount.incrementAndGet();
    }
  }
;
  orderManager.setEventCallback(callback);
  Order order=new Order("Sausage and Mash");
  MuleMessage result=client.send("axis:http://localhost:" + dynamicPort.getNumber() + "/mule/orderManager?method=processOrder",order,null);
  assertNotNull(result);
  assertEquals("Order 'Sausage and Mash' Processed",(result.getPayload()));
}
