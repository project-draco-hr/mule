{
  AssertionMessageProcessor asp=new AssertionMessageProcessor();
  asp.setFlowConstruct(flowConstruct);
  asp.setExpression(TRUE_EXPRESSION);
  asp.start();
  asp.process(mock(MuleEvent.class));
  asp.process(mock(MuleEvent.class));
  asp.setExpression(FALSE_EXPRESSION);
  asp.process(mock(MuleEvent.class));
  asp.setExpression(TRUE_EXPRESSION);
  asp.process(mock(MuleEvent.class));
  assertTrue(asp.expressionFailed());
  assertFalse(asp.countFailOrNullEvent());
}
