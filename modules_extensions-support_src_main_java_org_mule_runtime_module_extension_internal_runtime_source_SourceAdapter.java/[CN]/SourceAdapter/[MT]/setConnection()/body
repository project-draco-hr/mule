{
  if (connectionSetter.isPresent() && configurationInstance.isPresent()) {
    try {
      connectionHandler=connectionManager.getConnection(configurationInstance.get().getValue());
      connectionSetter.get().set(source,connectionHandler.getConnection());
    }
 catch (    ConnectionException e) {
      throw new MuleRuntimeException(createStaticMessage(format("Could not obtain connection for message source '%s' on flow '%s'",getName(),flowConstruct.getName())),e);
    }
  }
}
