{
  Mock mockDataSource=new Mock(DataSource.class);
  Mock mockConnection=new Mock(Connection.class);
  mockDataSource.expectAndReturn("getConnection",mockConnection.proxy());
  mockConnection.expectAndReturn("getAutoCommit",false);
  mockConnection.expect("commit");
  mockConnection.expect("close");
  return (DataSource)mockDataSource.proxy();
}
