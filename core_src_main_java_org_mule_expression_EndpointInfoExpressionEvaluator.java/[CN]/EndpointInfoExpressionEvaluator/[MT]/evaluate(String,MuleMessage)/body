{
  int i=expression.indexOf(".");
  String endpointName;
  String property;
  if (i > 0) {
    endpointName=expression.substring(0,i);
    property=expression.substring(i + 1);
  }
 else {
    throw new IllegalArgumentException(CoreMessages.expressionMalformed(expression,getName()).getMessage());
  }
  AbstractEndpointBuilder eb=(AbstractEndpointBuilder)muleContext.getRegistry().lookupEndpointBuilder(endpointName);
  if (eb != null) {
    if (property.equalsIgnoreCase("address")) {
      return eb.getEndpointBuilder().getEndpoint().getAddress();
    }
 else {
      throw new IllegalArgumentException(CoreMessages.expressionInvalidForProperty(property,expression).getMessage());
    }
  }
 else {
    logger.warn("There is no endpoint registered with name: " + endpointName);
    return null;
  }
}
