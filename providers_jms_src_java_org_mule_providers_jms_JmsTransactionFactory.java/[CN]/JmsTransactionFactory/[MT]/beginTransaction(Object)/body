{
  if (session instanceof Session) {
    JmsTransaction tx=new JmsTransaction((Session)session);
    tx.begin();
    return tx;
  }
 else {
    throw new IllegalTransactionStateException("Session was not of expected type: " + Session.class.getName());
  }
}
