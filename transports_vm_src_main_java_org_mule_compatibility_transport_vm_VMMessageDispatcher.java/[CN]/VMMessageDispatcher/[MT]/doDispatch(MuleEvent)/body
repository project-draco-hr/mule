{
  EndpointURI endpointUri=endpoint.getEndpointURI();
  if (endpointUri == null) {
    throw new DispatchException(CoreMessages.objectIsNull("Endpoint"),event,getEndpoint());
  }
  MuleEvent eventToDispatch=DefaultMuleEvent.copy(event);
  eventToDispatch.clearFlowVariables();
  eventToDispatch.setMessage(eventToDispatch.getMessage().createInboundMessage());
  QueueSession session=getQueueSession();
  Queue queue=session.getQueue(endpointUri.getAddress());
  if (!queue.offer(eventToDispatch.getMessage(),connector.getQueueTimeout())) {
    throw new DispatchException(VMMessages.queueIsFull(queue.getName(),queue.size()),eventToDispatch,getEndpoint());
  }
  if (logger.isDebugEnabled()) {
    logger.debug("dispatched MuleEvent on endpointUri: " + endpointUri);
  }
}
