{
  setClientId("Client1");
  assertNull(receiveNoWait());
  setClientId("Client2");
  assertNull(receiveNoWait());
  setClientId("Sender");
  send();
  setClientId("Client1");
  Message output=receive();
  assertPayloadEquals(DEFAULT_INPUT_MESSAGE,output);
  assertNull(receiveNoWait());
  setClientId("Client2");
  output=receive();
  assertPayloadEquals(DEFAULT_INPUT_MESSAGE,output);
  assertNull(receiveNoWait());
}
