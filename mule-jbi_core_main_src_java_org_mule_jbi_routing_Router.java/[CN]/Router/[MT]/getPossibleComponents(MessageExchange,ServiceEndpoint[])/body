{
  List components=new ArrayList();
  for (int i=0; i < endpoints.length; i++) {
    ServiceEndpoint se=endpoints[i];
    String compName=this.container.getEndpointRegistry().getComponentFor(se);
    ComponentInfo compInfo=this.container.getComponentRegistry().getComponent(compName);
    if (me.getRole() == MessageExchange.Role.CONSUMER) {
      if (compInfo.getComponent().isExchangeWithConsumerOkay(se,me)) {
        components.add(compName);
      }
    }
 else {
      if (compInfo.getComponent().isExchangeWithProviderOkay(se,me)) {
        components.add(compName);
      }
    }
  }
  return components;
}
