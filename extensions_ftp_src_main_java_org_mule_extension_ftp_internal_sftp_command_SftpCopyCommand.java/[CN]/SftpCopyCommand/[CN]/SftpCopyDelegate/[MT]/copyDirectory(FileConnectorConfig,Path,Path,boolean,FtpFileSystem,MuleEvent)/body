{
  for (  FileAttributes fileAttributes : client.list(sourcePath.toString())) {
    if (isVirtualDirectory(fileAttributes.getName())) {
      continue;
    }
    if (fileAttributes.isDirectory()) {
      Path targetPath=target.resolve(fileAttributes.getName());
      copyDirectory(config,Paths.get(fileAttributes.getPath()),targetPath,overwrite,writerConnection,event);
    }
 else {
      copyFile(config,fileAttributes,target.resolve(fileAttributes.getName()),overwrite,writerConnection,event);
    }
  }
}
