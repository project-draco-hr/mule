{
  ThreadingProfile tp=new ChainedThreadingProfile();
  tp.setThreadWaitTimeout(10);
  tp.setMuleContext(muleContext);
  QueueProfile qp=new QueueProfile(1,(org.mule.api.store.QueueStore<Serializable>)muleContext.getRegistry().lookupObject(MuleProperties.QUEUE_STORE_DEFAULT_IN_MEMORY_NAME));
  SedaStageInterceptingMessageProcessor mp=new SedaStageInterceptingMessageProcessor("threadName","queueMame",qp,queueTimeout,tp,queueStatistics,muleContext);
  mp.setListener(target);
  mp.initialise();
  mp.enqueue(getTestEvent("foo"));
  mp.enqueue(getTestEvent("bar"));
}
