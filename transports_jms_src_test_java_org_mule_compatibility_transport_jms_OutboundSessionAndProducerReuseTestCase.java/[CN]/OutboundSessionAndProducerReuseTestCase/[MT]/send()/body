{
  connector.initialise();
  connector.connect();
  connector.start();
  reset(connectionFactory);
  outboundEndpoint.process(getTestEvent(TEST_MESSAGE));
  verify(connectionFactory,times(0)).createConnection();
  verify(connection,times(1)).createSession(anyBoolean(),anyInt());
  assertTrue(messageSentLatch.await(RECEIVE_TIMEOUT,TimeUnit.MILLISECONDS));
}
