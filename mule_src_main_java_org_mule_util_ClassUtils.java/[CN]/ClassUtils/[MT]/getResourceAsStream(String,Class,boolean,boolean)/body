{
  if (resourceName == null) {
    throw new IllegalArgumentException(new Message(Messages.X_IS_NULL,"Resource name").getMessage());
  }
  InputStream is=null;
  try {
    is=getResourceAsStream(resourceName,callingClass);
    if (is == null) {
      logger.debug("Unable to load resource from the classpath");
    }
  }
 catch (  Exception e) {
    logger.debug("Unable to load resource from the classpath: " + e.getMessage());
  }
  if ((is == null) && tryAsFile) {
    try {
      File file=new File(resourceName);
      if (file.exists() == false && MuleServer.getStartupDirectory() != null) {
        file=new File(MuleServer.getStartupDirectory(),resourceName);
      }
      if (file.exists()) {
        is=new FileInputStream(file);
      }
 else {
        logger.debug("Unable to load resource from the file system: " + file.getAbsolutePath());
      }
    }
 catch (    Exception e) {
      logger.debug("Unable to load resource from the file system: " + e.getMessage());
    }
  }
  if ((is == null) && tryAsUrl) {
    try {
      URL url=new URL(resourceName);
      is=url.openStream();
      if (is == null) {
        logger.debug("Unable to load resource as a URL");
      }
    }
 catch (    Exception e) {
      logger.debug("Unable to load resource as a URL: " + e.getMessage());
    }
  }
  return is;
}
