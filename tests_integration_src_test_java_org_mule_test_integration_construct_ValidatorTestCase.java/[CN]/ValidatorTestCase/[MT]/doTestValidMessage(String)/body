{
  final FunctionalTestComponent ftc=getFunctionalTestComponent("test-service");
  final Latch latch=new Latch();
  ftc.setEventCallback(new EventCallback(){
    public void eventReceived(    MuleEventContext context,    Object component) throws Exception {
      latch.countDown();
    }
  }
);
  final Integer payload=RandomUtils.nextInt();
  assertEquals("GOOD:" + payload + "@"+ serviceName,muleClient.send("vm://" + serviceName + ".in",payload,null).getPayload());
  latch.await(getTestTimeoutSecs(),TimeUnit.SECONDS);
  assertEquals(1,ftc.getReceivedMessagesCount());
  assertEquals(payload,ftc.getLastReceivedMessage());
  ftc.initialise();
}
