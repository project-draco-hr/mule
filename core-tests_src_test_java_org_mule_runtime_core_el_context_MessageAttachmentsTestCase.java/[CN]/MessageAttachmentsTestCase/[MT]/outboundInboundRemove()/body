{
  MuleEvent event=getTestEvent("");
  final MuleMessage message=event.getMessage();
  event.setMessage(MuleMessage.builder(message).addOutboundAttachment("foo",mock(DataHandler.class)).build());
  assertFalse((Boolean)evaluate("message.outboundAttachments.isEmpty()",event));
  evaluate("message.outboundAttachments.remove('foo')",event);
  assertTrue((Boolean)evaluate("message.outboundAttachments.isEmpty()",event));
}
