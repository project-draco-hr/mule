{
  CopyOnWriteCaseInsensitiveMap<String,Object> original=createTestMap();
  Map<String,Object> copyOnWriteMap=serializeAndDeserialize(original);
  assertEquals(2,original.size());
  assertEquals(2,copyOnWriteMap.size());
  copyOnWriteMap.keySet().remove("FOO");
  assertEquals(2,original.size());
  assertEquals(1,copyOnWriteMap.size());
  copyOnWriteMap.keySet().clear();
  assertEquals(2,original.size());
  assertEquals(0,copyOnWriteMap.size());
}
