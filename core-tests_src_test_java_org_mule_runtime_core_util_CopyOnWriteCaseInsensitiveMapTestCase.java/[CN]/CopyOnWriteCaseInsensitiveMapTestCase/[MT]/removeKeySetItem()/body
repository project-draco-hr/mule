{
  CopyOnWriteCaseInsensitiveMap<String,Object> map=createTestMap();
  Iterator<String> it=map.keySet().iterator();
  assertTrue(it.hasNext());
  String key=it.next();
  it.remove();
  assertFalse(map.keySet().contains(key));
  it=map.keySet().iterator();
  assertTrue(it.hasNext());
  String key2=it.next();
  assertFalse(key.equals(key2));
  assertFalse(it.hasNext());
  it.remove();
  assertFalse(it.hasNext());
  assertTrue(map.keySet().isEmpty());
  it=map.keySet().iterator();
  assertFalse(it.hasNext());
  try {
    it.next();
    fail("Was expecting NoSuchElementException");
  }
 catch (  NoSuchElementException e) {
  }
}
