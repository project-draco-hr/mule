{
  UMODescriptor descriptor=new MuleDescriptor();
  descriptor.setExceptionStrategy(new DefaultExceptionStrategy());
  descriptor.setName("testComponent");
  descriptor.setImplementation(JdbcFunctionalTestComponent.class.getName());
  UMOEndpoint endpoint=new MuleEndpoint("testIn",getInDest(),connector,null,UMOEndpoint.ENDPOINT_TYPE_RECEIVER,null);
  UMOTransactionFactory tf=getTransactionFactory();
  UMOTransactionConfig txConfig=new MuleTransactionConfig();
  txConfig.setFactory(tf);
  txConfig.setBeginAction(txBeginAction);
  UMOEndpoint outProvider=new MuleEndpoint("testOut",getOutDest(),connector,null,UMOEndpoint.ENDPOINT_TYPE_SENDER,null);
  UMOTransactionConfig txConfig2=new MuleTransactionConfig();
  txConfig2.setFactory(tf);
  txConfig2.setCommitAction(txCommitAction);
  endpoint.setTransactionConfig(txConfig);
  outProvider.setTransactionConfig(txConfig2);
  descriptor.setOutboundEndpoint(outProvider);
  descriptor.setInboundEndpoint(endpoint);
  HashMap props=new HashMap();
  props.put("eventCallback",callback);
  descriptor.setProperties(props);
  UMOComponent component=MuleManager.getInstance().getModel().registerComponent(descriptor);
  return component;
}
