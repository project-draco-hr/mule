{
  Object impl=descriptor.getImplementation();
  Object component;
  if (impl instanceof ContainerKeyPair) {
    component=RegistryContext.getRegistry().lookupObject(impl);
    if (component == null) {
      throw new InitialisationException(new Message(Messages.X_NOT_REGISTERED_WITH_MANAGER,impl),this);
    }
    if (descriptor.isSingleton()) {
      descriptor.setImplementation(component);
    }
  }
 else {
    component=impl;
  }
  descriptor.fireInitialisationCallbacks(component);
  return component;
}
