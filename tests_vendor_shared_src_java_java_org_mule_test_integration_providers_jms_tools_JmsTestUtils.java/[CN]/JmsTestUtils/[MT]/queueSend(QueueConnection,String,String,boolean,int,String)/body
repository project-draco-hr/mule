{
  QueueSession session=cnn.createQueueSession(transacted,ack);
  Queue queue=session.createQueue(queueName);
  QueueSender sender=session.createSender(queue);
  TextMessage msg=session.createTextMessage();
  msg.setText(payload);
  msg.setJMSDeliveryMode(ack);
  if (replyTo != null) {
    msg.setJMSReplyTo(session.createQueue(replyTo));
  }
  sender.send(msg);
  sender.close();
  session.close();
}
