{
  if (!(key instanceof DataSource) || !(resource instanceof Connection)) {
    throw new IllegalTransactionStateException(CoreMessages.transactionCanOnlyBindToResources("javax.sql.DataSource/java.sql.Connection"));
  }
  Connection con=(Connection)resource;
  try {
    if (con.getAutoCommit()) {
      con.setAutoCommit(false);
    }
  }
 catch (  SQLException e) {
    throw new TransactionException(DbMessages.transactionSetAutoCommitFailed(),e);
  }
  super.bindResource(key,resource);
}
