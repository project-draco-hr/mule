{
  try {
    assertTrue("Couldn't create test Mule home folder.",muleHome.mkdirs());
    assertTrue("Couldn't create test Mule base folder.",muleBase.mkdirs());
    DefaultMuleClassPathConfig cp=new DefaultMuleClassPathConfig(muleHome,muleBase);
    List<URL> urls=cp.getURLs();
    assertNotNull("Urls shouldn't be null.",urls);
    assertFalse("Urls shouldn't be empty.",urls.isEmpty());
    URL muleBaseUserFolder=new File(muleBase,DefaultMuleClassPathConfig.USER_DIR).getAbsoluteFile().toURI().toURL();
    String expectedMuleBaseUserFolder=muleBaseUserFolder.toExternalForm();
    String firstUrl=(urls.get(0)).toExternalForm();
    assertEquals("$MULE_BASE/lib/user must come first.",expectedMuleBaseUserFolder,firstUrl);
  }
  finally {
    FileUtils.deleteTree(currentTestFolder);
  }
}
