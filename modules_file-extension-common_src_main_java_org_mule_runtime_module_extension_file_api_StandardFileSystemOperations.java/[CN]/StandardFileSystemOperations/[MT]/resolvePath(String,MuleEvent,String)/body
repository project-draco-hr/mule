{
  if (!StringUtils.isBlank(path)) {
    return path;
  }
  MuleMessage<?,?> message=event.getMessage().asNewMessage();
  if (message.getAttributes() instanceof FileAttributes) {
    return ((FileAttributes)message.getAttributes()).getPath();
  }
  throw new IllegalArgumentException(String.format("A %s was not specified and a default one could not be obtained from the current message attributes",attributeName));
}
