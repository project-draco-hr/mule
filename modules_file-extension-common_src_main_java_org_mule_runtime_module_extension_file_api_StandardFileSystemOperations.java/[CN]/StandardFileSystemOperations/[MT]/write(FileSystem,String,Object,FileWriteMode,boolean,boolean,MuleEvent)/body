{
  if (content == null || content instanceof NullPayload) {
    throw new IllegalArgumentException("Cannot write a null content");
  }
  if (content instanceof String) {
    String value=(String)content;
    AttributeEvaluator evaluator=new AttributeEvaluator(value);
    evaluator.initialize(muleContext.getExpressionManager());
    if (evaluator.isExpression() || evaluator.isParseExpression()) {
      content=evaluator.resolveValue(event);
    }
  }
  path=resolvePath(path,event,"path");
  fileSystem.write(path,content,mode,event,lock,createParentDirectories);
}
