{
  MuleMessage message1=new DefaultMuleMessage("test event A",muleContext);
  message1.setInvocationProperty("key1","value1");
  MuleEvent event1=new DefaultMuleEvent(message1,flow);
  MuleMessage message2=new DefaultMuleMessage("test event B",muleContext);
  MuleMessage message3=new DefaultMuleMessage("test event C",muleContext);
  List<MuleMessage> list=new ArrayList<>();
  list.add(message2);
  list.add(message3);
  MuleMessage messageCollection=new DefaultMuleMessage(list,muleContext);
  messageCollection.setInvocationProperty("key2","value2");
  MuleEvent event2=new DefaultMuleEvent(messageCollection,flow);
  MuleEvent result=resultsHandler.aggregateResults(Collections.<MuleEvent>singletonList(event2),event1,muleContext);
  assertSame(event2,result);
  assertNull(result.getMessage().getInvocationProperty("key1"));
  assertEquals("value2",result.getMessage().getInvocationProperty("key2"));
}
