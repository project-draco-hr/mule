{
  String result=parser.getFilename(event,"Test1_[org.mule.runtime.transport.file.ExpressionFilenameParser.count()].txt");
  assertEquals("Test1_0.txt",result);
  result=parser.getFilename(event,"Test2_[org.mule.runtime.core.util.DateUtils.getTimeStamp('yyMMdd')].txt");
  assertDatestampWithYearMonthAndDayMatches(result);
  result=parser.getFilename(event,"Test3_[org.mule.runtime.core.util.DateUtils.getTimeStamp('dd-MM-yy_HH-mm-ss.SSS')].txt");
  assertDefaultDatestampMatches(result);
  result=parser.getFilename(event,"Test4_[server.dateTime.toDate()].txt");
  assertFalse(result.equals("Test4_[server.dateTime.toDate()].txt"));
  result=parser.getFilename(event,"Test5_[org.mule.runtime.core.util.UUID.getUUID()].txt");
  assertFalse(result.equals("Test5_[org.mule.runtime.core.util.UUID.getUUID()].txt"));
  result=parser.getFilename(event,"Test6_[org.mule.runtime.transport.file.ExpressionFilenameParser.count()].txt");
  assertEquals("Test6_1.txt",result);
  result=parser.getFilename(event,"Test7_[message.inboundProperties.originalFilename].txt");
  assertEquals("Test7_originalName.txt",result);
  result=parser.getFilename(event,"Test8_[message.outboundProperties.foo].txt");
  assertEquals("Test8_bar.txt",result);
  result=parser.getFilename(event,"Test9_[message.outboundProperties.xxx].txt");
  assertEquals("Test9_null.txt",result);
}
