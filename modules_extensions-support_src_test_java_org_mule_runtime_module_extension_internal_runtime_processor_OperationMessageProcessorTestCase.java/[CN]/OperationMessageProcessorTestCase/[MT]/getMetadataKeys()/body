{
  MetadataResult<Set<MetadataKey>> metadataKeysResult=messageProcessor.getMetadataKeys();
  verify(operationModel).getMetadataResolverFactory();
  verify(metadataResolverFactory).getKeyResolver();
  assertThat(metadataKeysResult.isSuccess(),is(true));
  final Set<MetadataKey> metadataKeys=metadataKeysResult.get();
  assertThat(metadataKeys.size(),is(2));
  assertThat(metadataKeys,hasItem(MetadataKeyMatcher.metadataKeyWithId(BOOLEAN.name())));
  assertThat(metadataKeys,hasItem(MetadataKeyMatcher.metadataKeyWithId(STRING.name())));
}
