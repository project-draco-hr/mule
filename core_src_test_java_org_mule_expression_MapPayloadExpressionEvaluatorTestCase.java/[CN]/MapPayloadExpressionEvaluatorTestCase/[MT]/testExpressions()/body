{
  MapPayloadExpressionEvaluator eval=new MapPayloadExpressionEvaluator();
  MuleMessage message=new DefaultMuleMessage(props,(Map)null);
  Object result=eval.evaluate("foo",message);
  assertEquals("moo",result);
  result=eval.evaluate("bar*",message);
  assertEquals("mar",result);
  result=eval.evaluate("ba*z",message);
  assertEquals("maz",result);
  result=eval.evaluate("fool*",message);
  assertNull(result);
  try {
    eval.evaluate("fool",message);
    fail("Should've failed with an exception.");
  }
 catch (  RequiredValueException rex) {
    assertTrue(rex.getMessage().contains("fool"));
  }
}
