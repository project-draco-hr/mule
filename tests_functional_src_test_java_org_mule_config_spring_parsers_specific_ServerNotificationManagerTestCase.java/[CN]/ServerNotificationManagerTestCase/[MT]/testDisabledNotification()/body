{
  ServerNotificationManager manager=muleContext.getNotificationManager();
  Collection listeners=manager.getListeners();
  assertEquals(3,listeners.size());
  TestListener2 listener2=(TestListener2)muleContext.getRegistry().lookupObject("listener2");
  assertNotNull(listener2);
  assertFalse(listener2.isCalled());
  TestAdminListener adminListener=(TestAdminListener)muleContext.getRegistry().lookupObject("adminListener");
  assertNotNull(adminListener);
  assertFalse(adminListener.isCalled());
  manager.fireNotification(new TestAdminEvent());
  Thread.sleep(1000);
  assertTrue(listener2.isCalled());
  assertFalse(adminListener.isCalled());
}
