{
  MuleMessage message=new DefaultMuleMessage(new FruitBowl(new Apple(),new Banana()),muleContext);
  muleContext.getRegistry().registerTransformer(new FruitBowlToFruitBasket());
  Object result=muleContext.getExpressionManager().evaluate("#[mule:message.payload(org.mule.tck.testmodels.fruit.FruitBasket)]",message);
  assertNotNull(result);
  assertTrue(result instanceof FruitBasket);
  FruitBasket fb=(FruitBasket)result;
  assertEquals(2,fb.getFruit().size());
  assertTrue(fb.hasBanana());
  assertTrue(fb.hasApple());
}
