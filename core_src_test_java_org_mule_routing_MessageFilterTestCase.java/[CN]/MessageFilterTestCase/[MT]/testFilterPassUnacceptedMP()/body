{
  MessageFilter mp=getMessageFilter(new EqualsFilter(TEST_MESSAGE));
  SensingNullMessageProcessor out=getSensingNullMessageProcessor();
  SensingNullMessageProcessor unaccepted=getSensingNullMessageProcessor();
  mp.setListener(out);
  mp.setUnacceptedMessageProcessor(unaccepted);
  MuleEvent inEvent=getTestEvent(TEST_MESSAGE);
  MuleEvent resultEvent=mp.process(inEvent);
  assertNotNull(out.event);
  assertSame(inEvent,out.event);
  assertEquals(inEvent,resultEvent);
  assertNull(unaccepted.event);
}
