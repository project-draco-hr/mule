{
  handshakeComplete.await(HANDSHAKE_WAIT,TimeUnit.MILLISECONDS);
  if (0 != handshakeComplete.getCount()) {
    throw new IllegalStateException("Handshake did not complete");
  }
  if (peerCertificateChain != null) {
    message.setProperty(SslConnector.PEER_CERTIFICATES,peerCertificateChain);
  }
  if (localCertificateChain != null) {
    message.setProperty(SslConnector.LOCAL_CERTIFICATES,localCertificateChain);
  }
}
