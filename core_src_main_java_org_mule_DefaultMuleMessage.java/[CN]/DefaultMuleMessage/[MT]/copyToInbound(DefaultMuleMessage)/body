{
  Map<String,DataHandler> attachments=new HashMap<String,DataHandler>(3);
  for (  String name : getOutboundAttachmentNames()) {
    attachments.put(name,getOutboundAttachment(name));
  }
  Map<String,Object> newInboundProperties=new HashMap<String,Object>(3);
  for (  String name : getOutboundPropertyNames()) {
    newInboundProperties.put(name,getOutboundProperty(name));
  }
  newMessage.clearProperties(INBOUND);
  newMessage.clearProperties(INVOCATION);
  newMessage.clearProperties(PropertyScope.OUTBOUND);
  for (  Map.Entry<String,Object> s : newInboundProperties.entrySet()) {
    DataType<?> propertyDataType=getPropertyDataType(s.getKey(),PropertyScope.OUTBOUND);
    newMessage.setInboundProperty(s.getKey(),s.getValue(),propertyDataType);
  }
  newMessage.inboundAttachments.clear();
  newMessage.outboundAttachments.clear();
  for (  Map.Entry<String,DataHandler> s : attachments.entrySet()) {
    newMessage.addInboundAttachment(s.getKey(),s.getValue());
  }
  newMessage.setCorrelationId(getCorrelationId());
  newMessage.setCorrelationGroupSize(getCorrelationGroupSize());
  newMessage.setCorrelationSequence(getCorrelationSequence());
  newMessage.setReplyTo(getReplyTo());
  newMessage.setEncoding(getEncoding());
}
