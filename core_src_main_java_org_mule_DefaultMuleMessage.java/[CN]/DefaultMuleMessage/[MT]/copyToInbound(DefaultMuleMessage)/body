{
  Map<String,DataHandler> attachments=new HashMap<String,DataHandler>(3);
  for (  String name : getOutboundAttachmentNames()) {
    attachments.put(name,getOutboundAttachment(name));
  }
  Map<String,Object> newInboundProperties=new HashMap<String,Object>(3);
  for (  String name : getOutboundPropertyNames()) {
    newInboundProperties.put(name,getOutboundProperty(name));
  }
  newMessage.clearProperties(PropertyScope.INBOUND);
  newMessage.clearProperties(PropertyScope.INVOCATION);
  newMessage.clearProperties(PropertyScope.OUTBOUND);
  for (  String s : newInboundProperties.keySet()) {
    newMessage.setInboundProperty(s,newInboundProperties.get(s));
  }
  newMessage.inboundAttachments.clear();
  newMessage.outboundAttachments.clear();
  for (  String s : attachments.keySet()) {
    newMessage.addInboundAttachment(s,attachments.get(s));
  }
  newMessage.setCorrelationId(getCorrelationId());
  newMessage.setCorrelationGroupSize(getCorrelationGroupSize());
  newMessage.setCorrelationSequence(getCorrelationSequence());
  newMessage.setReplyTo(getReplyTo());
  newMessage.setEncoding(getEncoding());
}
