{
  if (muleContext == null) {
    throw new IllegalArgumentException(CoreMessages.objectIsNull("muleContext").getMessage());
  }
  this.muleContext=muleContext;
  if (message instanceof MuleMessage) {
    adapter=((MuleMessage)message).getAdapter();
  }
 else   if (message instanceof MessageAdapter) {
    adapter=(MessageAdapter)message;
  }
 else {
    adapter=new DefaultMessageAdapter(message);
  }
  addProperties(properties);
  resetAccessControl();
}
