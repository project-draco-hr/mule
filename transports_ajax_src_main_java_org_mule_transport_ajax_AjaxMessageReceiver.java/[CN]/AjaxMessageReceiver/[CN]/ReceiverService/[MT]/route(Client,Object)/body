{
  MuleMessage messageToRoute=createMuleMessage(data,endpoint.getEncoding());
  messageToRoute.setInvocationProperty(AjaxConnector.COMETD_CLIENT,client);
  Object replyTo=messageToRoute.getReplyTo();
  if (replyTo != null) {
    messageToRoute.setProperty(MuleProperties.MULE_FORCE_SYNC_PROPERTY,Boolean.TRUE,PropertyScope.INBOUND);
  }
  MuleEvent event=AjaxMessageReceiver.this.routeMessage(messageToRoute);
  MuleMessage message=event == null ? null : event.getMessage();
  if (getConnector() instanceof AjaxConnector) {
    AjaxConnector ajaxConnector=(AjaxConnector)getConnector();
    if (!ajaxConnector.isDisableReplyTo() && message != null && message.getExceptionPayload() == null && replyTo != null && endpoint.getExchangePattern().hasResponse()) {
      ajaxConnector.getReplyToHandler(endpoint).processReplyTo(RequestContext.getEvent(),message,replyTo);
    }
  }
  return null;
}
