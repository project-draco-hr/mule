{
  if (StringUtils.isEmpty(sourceExpressionArg)) {
    sourceExpressionArg="#[payload:]";
  }
  TypedValue typedValue=expressionManager.evaluateTyped(sourceExpressionArg,enrichmentEvent,flowConstruct);
  if (typedValue.getValue() instanceof MuleMessage) {
    MuleMessage muleMessage=(MuleMessage)typedValue.getValue();
    typedValue=new TypedValue(muleMessage.getPayload(),muleMessage.getDataType());
  }
  if (!StringUtils.isEmpty(targetExpressionArg)) {
    expressionManager.enrichTyped(targetExpressionArg,currentEvent,flowConstruct,typedValue);
  }
 else {
    currentEvent=MuleEvent.builder(currentEvent).message(MuleMessage.builder(currentEvent.getMessage()).payload(typedValue.getValue()).mediaType(typedValue.getDataType().getMediaType()).build()).build();
  }
}
