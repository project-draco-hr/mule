{
  SslConnector connector=new SslConnector(muleContext);
  connector.setSslHandshakeTimeout(1000);
  Map<String,Object> properties=Collections.emptyMap();
  InboundEndpoint endpoint=mock(InboundEndpoint.class);
  when(endpoint.getProperties()).thenReturn(properties);
  when(endpoint.getConnector()).thenReturn(connector);
  when(endpoint.getEncoding()).thenReturn(new DefaultMuleConfiguration().getDefaultEncoding());
  when(endpoint.getMuleContext()).thenReturn(muleContext);
  Service service=mock(Service.class);
  return new SslMessageReceiver(connector,service,endpoint);
}
