{
  if (connector != null && endpointUri != null && !connector.supportsProtocol(endpointUri.getFullScheme())) {
    throw new IllegalArgumentException(new Message(Messages.CONNECTOR_SCHEME_X_INCOMPATIBLE_WITH_ENDPOINT_SCHEME_X,connector.getProtocol(),endpointUri).getMessage());
  }
  if (endpointUri == null) {
    throw new NullPointerException(new Message(Messages.X_IS_NULL,"endpointURI").getMessage());
  }
  this.endpointUri=endpointUri;
  if (endpointUri != null) {
    properties.putAll(endpointUri.getParams());
  }
  if (initialised.get()) {
    try {
      endpointUri.initialise();
    }
 catch (    InitialisationException e) {
      throw new EndpointException(e);
    }
  }
}
