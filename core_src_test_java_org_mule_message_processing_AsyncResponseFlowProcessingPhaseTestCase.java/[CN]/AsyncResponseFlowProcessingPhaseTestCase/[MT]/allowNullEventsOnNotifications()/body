{
  RequestContext.setEvent(null);
  when(mockTemplate.getMuleEvent()).thenReturn(null);
  when(mockTemplate.routeEvent(any(MuleEvent.class))).thenReturn(null);
  phase.runPhase(mockTemplate,mockContext,mockNotifier);
  when(mockMuleEvent.newThreadCopy()).thenReturn(mockMuleEvent);
  RequestContext.setEvent(mockMuleEvent);
  phase.runPhase(mockTemplate,mockContext,mockNotifier);
}
