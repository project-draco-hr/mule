{
  UMODescriptor descriptor=MuleManager.getInstance().getModel().getDescriptor("appleComponent2");
  UMOEndpoint inEndpoint=descriptor.getInboundRouter().getEndpoint("transactedInboundEndpoint");
  assertNotNull(inEndpoint);
  assertNull(descriptor.getOutboundEndpoint());
  assertEquals(1,descriptor.getOutboundRouter().getRouters().size());
  UMOEndpoint outEndpoint=(UMOEndpoint)((UMOOutboundRouter)descriptor.getOutboundRouter().getRouters().get(0)).getEndpoints().get(0);
  assertNotNull(outEndpoint);
  assertNotNull(inEndpoint.getTransactionConfig());
  assertEquals(UMOTransactionConfig.ACTION_ALWAYS_BEGIN,inEndpoint.getTransactionConfig().getBeginAction());
  assertTrue(inEndpoint.getTransactionConfig().getFactory() instanceof TestTransactionFactory);
  assertNull(inEndpoint.getTransactionConfig().getConstraint());
  assertNotNull(outEndpoint.getTransactionConfig());
  assertEquals(UMOTransactionConfig.ACTION_ALWAYS_COMMIT,outEndpoint.getTransactionConfig().getCommitAction());
  assertNull(outEndpoint.getTransactionConfig().getFactory());
  assertNotNull(outEndpoint.getTransactionConfig().getConstraint());
  assertTrue(outEndpoint.getTransactionConfig().getConstraint() instanceof BatchConstraint);
  BatchConstraint constraint=(BatchConstraint)outEndpoint.getTransactionConfig().getConstraint();
  assertEquals(3,constraint.getBatchSize());
}
