{
  ObjectStore<?> os;
  if (objectStoreRef == null) {
    ObjectStoreManager mgr=(ObjectStoreManager)registry.get(MuleProperties.OBJECT_STORE_MANAGER);
    os=mgr.getObjectStore(MULE_WATERMARK_PARTITION);
  }
 else {
    os=registry.get(objectStoreRef);
  }
  return new Watermark(os,variable,defaultExpression,updateExpression);
}
