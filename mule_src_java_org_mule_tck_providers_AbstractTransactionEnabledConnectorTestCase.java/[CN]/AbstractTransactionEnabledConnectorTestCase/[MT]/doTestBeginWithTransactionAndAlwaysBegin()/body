{
  UMOEndpoint endpoint=getTestEndpoint("test",UMOImmutableEndpoint.ENDPOINT_TYPE_SENDER);
  Mock transaction=getMockTransaction();
  TransactionCoordination.getInstance().bindTransaction((UMOTransaction)transaction.proxy(),null);
  endpoint.getTransactionConfig().setBeginAction(UMOTransactionConfig.ACTION_ALWAYS_BEGIN);
  try {
    getTxConnector().beginTransaction(endpoint);
    fail("Should fail as a transaction is already bound");
  }
 catch (  UMOTransactionException e) {
  }
 finally {
    TransactionCoordination.getInstance().unbindTransaction();
  }
}
