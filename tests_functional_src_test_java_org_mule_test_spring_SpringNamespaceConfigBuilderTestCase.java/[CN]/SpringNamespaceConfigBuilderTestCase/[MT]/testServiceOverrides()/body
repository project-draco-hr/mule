{
  TestConnector connector=(TestConnector)muleContext.getRegistry().lookupConnector("dummyConnector");
  assertNotNull(connector);
  InboundEndpoint endpoint=getTestInboundEndpoint("foo");
  endpoint.getTransactionConfig().setAction(MuleTransactionConfig.ACTION_ALWAYS_BEGIN);
  endpoint.getTransactionConfig().setFactory(new XaTransactionFactory());
  MessageReceiver receiver=connector.getServiceDescriptor().createMessageReceiver(connector,getTestService(),endpoint);
  assertEquals(TestMessageReceiver.class,receiver.getClass());
}
