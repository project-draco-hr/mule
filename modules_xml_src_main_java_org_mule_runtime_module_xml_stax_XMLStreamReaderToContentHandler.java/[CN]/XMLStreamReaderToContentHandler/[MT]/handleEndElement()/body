{
  QName qName=staxStreamReader.getName();
  try {
    String prefix=qName.getPrefix();
    String rawname;
    if (prefix == null || prefix.length() == 0)     rawname=qName.getLocalPart();
 else     rawname=prefix + ':' + qName.getLocalPart();
    filter.endElement(qName.getNamespaceURI(),qName.getLocalPart(),rawname);
    int nsCount=staxStreamReader.getNamespaceCount();
    for (int i=nsCount - 1; i >= 0; i--) {
      String nsprefix=staxStreamReader.getNamespacePrefix(i);
      if (nsprefix == null) {
        nsprefix="";
      }
      filter.endPrefixMapping(nsprefix);
    }
  }
 catch (  SAXException e) {
    throw new XMLStreamException(e);
  }
}
