{
  DefaultMessageCollection original=mock(DefaultMessageCollection.class);
  MuleMessage message=mock(MuleMessage.class);
  DataType dataType=mock(DataType.class);
  when(message.getDataType()).thenReturn(dataType);
  when(original.getMessagesAsArray()).thenReturn(new MuleMessage[]{message});
  new DefaultMessageCollection(original,muleContext,true);
  verify(original,Mockito.times(1)).getMessagesAsArray();
}
