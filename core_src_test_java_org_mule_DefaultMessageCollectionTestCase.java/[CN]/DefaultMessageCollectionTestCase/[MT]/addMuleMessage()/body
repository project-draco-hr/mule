{
  MuleMessage message1=new DefaultMuleMessage(apple,muleContext);
  MuleMessage message2=new DefaultMuleMessage(banana,muleContext);
  MuleMessage message3=new DefaultMuleMessage(orange,muleContext);
  DefaultMessageCollection messageCollection=new DefaultMessageCollection(muleContext);
  messageCollection.addMessage(message1);
  messageCollection.addMessage(message2);
  messageCollection.addMessage(message3);
  assertEquals(3,messageCollection.getMessageList().size());
  assertSame(message1,messageCollection.getMessage(0));
  assertSame(message2,messageCollection.getMessage(1));
  assertSame(message3,messageCollection.getMessage(2));
  assertEquals(3,messageCollection.getPayloadList().size());
  assertTrue(messageCollection.getPayload() instanceof List<?>);
  assertSame(apple,((List)messageCollection.getPayload()).get(0));
  assertSame(banana,((List)messageCollection.getPayload()).get(1));
  assertSame(orange,((List)messageCollection.getPayload()).get(2));
}
