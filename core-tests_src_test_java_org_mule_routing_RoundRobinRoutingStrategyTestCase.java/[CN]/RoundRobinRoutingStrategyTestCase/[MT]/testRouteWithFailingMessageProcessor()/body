{
  List<MessageProcessor> messageProcessors=getMessageProcessorsListWithFailingMessageProcessor();
  MuleEvent eventToRoute=getEventWithId(ID_1);
  assertEquals(LETTER_A,getPayloadAsString(roundRobinRoutingStrategy.route(eventToRoute,messageProcessors).getMessage()));
  try {
    roundRobinRoutingStrategy.route(eventToRoute,messageProcessors);
    fail("Exception was expected");
  }
 catch (  MessagingException me) {
    assertEquals(EXCEPTION_MESSAGE,me.getCause().getMessage());
  }
  assertEquals(LETTER_B,getPayloadAsString(roundRobinRoutingStrategy.route(eventToRoute,messageProcessors).getMessage()));
  assertEquals(LETTER_A,getPayloadAsString(roundRobinRoutingStrategy.route(eventToRoute,messageProcessors).getMessage()));
}
