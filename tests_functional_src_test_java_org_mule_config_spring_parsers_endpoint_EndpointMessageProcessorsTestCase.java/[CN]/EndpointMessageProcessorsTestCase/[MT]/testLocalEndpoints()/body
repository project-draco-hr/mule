{
  ImmutableEndpoint endpoint=muleContext.getRegistry().lookupService("localEndpoints").getInboundRouter().getEndpoint("ep3");
  List<MessageProcessor> processors=endpoint.getMessageProcessors();
  assertNotNull(processors);
  assertEquals(3,processors.size());
  assertEquals("A",((TestMessageProcessor)processors.get(0)).getLabel());
  assertEquals("B",((TestMessageProcessor)processors.get(1)).getLabel());
  assertEquals("C",((TestMessageProcessor)processors.get(2)).getLabel());
  endpoint=((OutboundPassThroughRouter)muleContext.getRegistry().lookupService("localEndpoints").getOutboundRouter().getRouters().get(0)).getEndpoint("ep4");
  processors=endpoint.getMessageProcessors();
  assertNotNull(processors);
  assertEquals(3,processors.size());
  assertEquals("D",((TestMessageProcessor)processors.get(0)).getLabel());
  assertEquals("E",((TestMessageProcessor)processors.get(1)).getLabel());
  assertEquals("F",((TestMessageProcessor)processors.get(2)).getLabel());
}
