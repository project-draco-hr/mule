{
  ServiceCompositeMessageSource serviceCompositeMessageSource=(ServiceCompositeMessageSource)compositeSource;
  serviceCompositeMessageSource.setListener(listener);
  serviceCompositeMessageSource.setCatchAllStrategy(listener2);
  serviceCompositeMessageSource.addMessageProcessor(new AppendingInterceptingMessageProcessor("one"));
  serviceCompositeMessageSource.addMessageProcessor(new TestMessageFilter(false));
  serviceCompositeMessageSource.addSource(source);
  serviceCompositeMessageSource.initialise();
  serviceCompositeMessageSource.start();
  source.triggerSource();
  assertNull(listener.event);
  assertNotNull(listener2.event);
  assertEquals(TEST_MESSAGE + "one",listener2.event.getMessageAsString());
}
