{
  MuleTransactionConfig config=new MuleTransactionConfig(TransactionConfig.ACTION_INDIFFERENT);
  TransactionTemplate transactionTemplate=createTransactionalTemplate(config);
  AlreadyHandledMessagingException mockAlreadyManagedException=Mockito.mock(AlreadyHandledMessagingException.class);
  when(mockAlreadyManagedException.getCause()).thenReturn(mockMessagingException);
  try {
    transactionTemplate.execute(TransactionTemplateTestUtils.getFailureTransactionCallback(mockAlreadyManagedException));
  }
 catch (  MessagingException e) {
    assertThat(e,is(mockMessagingException));
  }
}
