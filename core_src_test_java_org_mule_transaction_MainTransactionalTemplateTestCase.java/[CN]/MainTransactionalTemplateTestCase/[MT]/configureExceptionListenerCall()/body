{
  final MuleEvent mockResultEvent=mock(MuleEvent.class);
  when(mockMessagingException.getEvent()).thenReturn(mockEvent).thenReturn(mockEvent).thenReturn(mockResultEvent);
  when(mockEvent.getFlowConstruct().getExceptionListener().handleException(mockMessagingException,mockEvent)).thenAnswer(new Answer<Object>(){
    @Override public Object answer(    InvocationOnMock invocationOnMock) throws Throwable {
      new DefaultMessagingExceptionStrategy().handleException((Exception)invocationOnMock.getArguments()[0],(MuleEvent)invocationOnMock.getArguments()[1]);
      return mockResultEvent;
    }
  }
);
  return mockResultEvent;
}
