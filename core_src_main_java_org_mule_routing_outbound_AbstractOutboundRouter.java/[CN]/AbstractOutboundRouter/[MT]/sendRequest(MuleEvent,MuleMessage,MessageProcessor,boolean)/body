{
  if (awaitResponse && replyTo != null) {
    logger.debug("event was dispatched synchronously, but there is a ReplyTo route set, so using asynchronous dispatch");
    awaitResponse=false;
  }
  setMessageProperties(routedEvent.getSession().getFlowConstruct(),message,route);
  if (logger.isDebugEnabled()) {
    if (route instanceof OutboundEndpoint) {
      logger.debug("Message being sent to: " + ((OutboundEndpoint)route).getEndpointURI());
    }
    logger.debug(message);
  }
  if (logger.isTraceEnabled()) {
    try {
      logger.trace("Request payload: \n" + StringMessageUtils.truncate(message.getPayloadAsString(),100,false));
      if (route instanceof OutboundEndpoint) {
        logger.trace("outbound transformer is: " + ((OutboundEndpoint)route).getTransformers());
      }
    }
 catch (    Exception e) {
      logger.trace("Request payload: \n(unable to retrieve payload: " + e.getMessage());
      if (route instanceof OutboundEndpoint) {
        logger.trace("outbound transformer is: " + ((OutboundEndpoint)route).getTransformers());
      }
    }
  }
  MuleEvent result;
  try {
    result=sendRequestEvent(routedEvent,message,route,awaitResponse);
  }
 catch (  MessagingException me) {
    throw me;
  }
catch (  Exception e) {
    throw new RoutingException(routedEvent,null,e);
  }
  if (getRouterStatistics() != null) {
    if (getRouterStatistics().isEnabled()) {
      getRouterStatistics().incrementRoutedMessage(route);
    }
  }
  if (result != null) {
    MuleMessage resultMessage=result.getMessage();
    if (logger.isTraceEnabled()) {
      if (resultMessage != null) {
        try {
          logger.trace("Response payload: \n" + StringMessageUtils.truncate(resultMessage.getPayloadAsString(),100,false));
        }
 catch (        Exception e) {
          logger.trace("Response payload: \n(unable to retrieve payload: " + e.getMessage());
        }
      }
    }
  }
  return result;
}
