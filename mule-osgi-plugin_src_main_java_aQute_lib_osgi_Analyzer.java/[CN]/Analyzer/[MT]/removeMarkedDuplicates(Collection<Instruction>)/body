{
  Set<Instruction> result=new HashSet<Instruction>();
  for (Iterator<Instruction> i=superfluous.iterator(); i.hasNext(); ) {
    Instruction instr=(Instruction)i.next();
    if (!isDuplicate(instr.getPattern()) && !instr.isOptional())     result.add(instr);
  }
  return result;
}
