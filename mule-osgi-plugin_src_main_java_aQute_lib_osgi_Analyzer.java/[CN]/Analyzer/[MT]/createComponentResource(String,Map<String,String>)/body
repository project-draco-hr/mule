{
  ByteArrayOutputStream out=new ByteArrayOutputStream();
  PrintWriter pw=new PrintWriter(new OutputStreamWriter(out,"UTF-8"));
  pw.println("<?xml version='1.0' encoding='utf-8'?>");
  pw.print("<component name='" + name + "'");
  String factory=info.get(COMPONENT_FACTORY);
  if (factory != null)   pw.print(" factory='" + factory + "'");
  String immediate=info.get(COMPONENT_IMMEDIATE);
  if (immediate != null)   pw.print(" immediate='" + immediate + "'");
  String enabled=info.get(COMPONENT_ENABLED);
  if (enabled != null)   pw.print(" enabled='" + enabled + "'");
  pw.println(">");
  String impl=(String)info.get(COMPONENT_IMPLEMENTATION);
  pw.println("  <implementation class='" + (impl == null ? name : impl) + "'/>");
  String provides=info.get(COMPONENT_PROVIDE);
  boolean servicefactory=Boolean.getBoolean(info.get(COMPONENT_SERVICEFACTORY) + "");
  provides(pw,provides,servicefactory);
  properties(pw,info);
  reference(info,pw);
  pw.println("</component>");
  pw.close();
  byte[] data=out.toByteArray();
  out.close();
  return new EmbeddedResource(data,0);
}
