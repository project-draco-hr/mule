{
  if (result != null && result.getPayload() instanceof InputStream) {
    DelegatingInputStream is=new DelegatingInputStream((InputStream)result.getPayload()){
      @Override public void close() throws IOException {
        try {
          super.close();
        }
  finally {
          returnDispatcher(endpoint,dispatcher);
        }
      }
    }
;
    result.setPayload(is);
  }
 else {
    this.returnDispatcher(endpoint,dispatcher);
  }
}
