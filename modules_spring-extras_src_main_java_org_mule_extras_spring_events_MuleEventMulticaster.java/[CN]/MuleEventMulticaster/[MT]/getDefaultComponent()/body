{
  Model model=muleContext.getRegistry().lookupModel(MuleProperties.OBJECT_SYSTEM_MODEL);
  if (model == null) {
    model=new SedaModel();
    model.setName(MuleProperties.OBJECT_SYSTEM_MODEL);
    muleContext.getRegistry().registerModel(model);
  }
  Component component=muleContext.getRegistry().lookupComponent(EVENT_MULTICASTER_DESCRIPTOR_NAME);
  if (component != null) {
    muleContext.getRegistry().unregisterComponent(component.getName());
  }
  component=new SedaComponent();
  component.setName(EVENT_MULTICASTER_DESCRIPTOR_NAME);
  if (subscriptions == null) {
    logger.info("No receive endpoints have been set, using default '*'");
    component.getInboundRouter().addEndpoint(muleContext.getRegistry().lookupEndpointFactory().getInboundEndpoint("vm://*"));
  }
 else {
    InboundRouterCollection messageRouter=component.getInboundRouter();
    for (int i=0; i < subscriptions.length; i++) {
      String subscription=subscriptions[i];
      EndpointFactory endpointFactory=muleContext.getRegistry().lookupEndpointFactory();
      EndpointBuilder endpointBuilder=endpointFactory.getEndpointBuilder(subscription);
      endpointBuilder.setSynchronous(!asynchronous);
      ImmutableEndpoint endpoint=endpointFactory.getInboundEndpoint(endpointBuilder);
      messageRouter.addEndpoint(endpoint);
    }
  }
  component.setServiceFactory(new PrototypeObjectFactory(MuleEventMulticaster.class));
  return component;
}
