{
  final Builder<Object,Serializable> builder=MuleMessage.builder().payload(payload != null ? payload : NullPayload.getInstance());
  if (messageProperties != null) {
    builder.outboundProperties(messageProperties);
    if (messageProperties.containsKey(MULE_REPLY_TO_PROPERTY)) {
      builder.replyTo(messageProperties.get(MULE_REPLY_TO_PROPERTY));
    }
  }
  return builder.build();
}
