{
  List<MuleCoreExtension> coreExtensions=new LinkedList<MuleCoreExtension>();
  TestCoreExtensionDependency dependantCoreExtension=mock(TestCoreExtensionDependency.class);
  coreExtensions.add(dependantCoreExtension);
  final List<LinkedMuleCoreExtensionDependency> dependencies=new LinkedList<LinkedMuleCoreExtensionDependency>();
  final LinkedMuleCoreExtensionDependency linkedMuleCoreExtensionDependency=new LinkedMuleCoreExtensionDependency(TestCoreExtension.class,TestCoreExtensionDependency.class.getMethod("setTestCoreExtension",TestCoreExtension.class));
  dependencies.add(linkedMuleCoreExtensionDependency);
  when(dependencyDiscoverer.findDependencies(dependantCoreExtension)).thenReturn(dependencies);
  dependencyResolver.resolveDependencies(coreExtensions);
}
