{
  ThreadingProfile threadingProfile=new ChainedThreadingProfile();
  threadingProfile.setThreadWaitTimeout(10);
  threadingProfile.setMuleContext(muleContext);
  org.mule.api.store.QueueStore<Serializable> queueStore=(org.mule.api.store.QueueStore<Serializable>)muleContext.getRegistry().lookupObject(MuleProperties.QUEUE_STORE_DEFAULT_IN_MEMORY_NAME);
  QueueProfile queueProfile=new QueueProfile(1,queueStore);
  SedaStageInterceptingMessageProcessor mp;
  mp=new SedaStageInterceptingMessageProcessor("threadName","queueMame",queueProfile,queueTimeout,threadingProfile,queueStatistics,muleContext);
  mp.setListener(target);
  mp.initialise();
  mp.enqueue(getTestEvent("foo"));
  mp.enqueue(getTestEvent("bar"));
}
