{
  SAXBuilder builder=new SAXBuilder();
  builder.setValidation(true);
  builder.setIgnoringElementContentWhitespace(true);
  File myFile=new File(file);
  Document doc=builder.build(myFile);
  System.out.println("processing file " + myFile.getCanonicalPath());
  Graph graph=GraphFactory.newGraph();
  Element root=doc.getRootElement();
  if (caption == null) {
    caption=root.getAttribute("id").getValue();
    if (caption != null) {
      caption=caption.replaceAll("_"," ");
    }
 else {
      caption="Mule Configuration";
    }
  }
  StringBuffer captionBuffer=new StringBuffer();
  captionBuffer.append(caption);
  appendDescription(root,captionBuffer);
  graph.getInfo().setCaption(captionBuffer.toString());
  parseEndpoints(graph,root);
  Element model=root.getChild("model");
  if (model != null) {
    parseModel(graph,model);
  }
 else {
    parseModel(graph,root);
  }
  parseConnectors(graph,root);
  saveGraph(graph,outputDir);
  return graph;
}
