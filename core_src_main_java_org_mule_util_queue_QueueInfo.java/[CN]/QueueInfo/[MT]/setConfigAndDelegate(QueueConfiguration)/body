{
  boolean hadConfig=this.config != null;
  this.config=config;
  int capacity=0;
  QueueInfoDelegateFactory factory=null;
  if (config != null) {
    capacity=config.capacity;
    factory=delegateFactories.get(TransactionalQueueManager.getActualStore(config.objectStore).getClass());
  }
  if (delegate == null || (config != null && !hadConfig)) {
    this.delegate=factory != null ? factory.createDelegate(this) : new DefaultQueueInfoDelegate(capacity);
  }
}
