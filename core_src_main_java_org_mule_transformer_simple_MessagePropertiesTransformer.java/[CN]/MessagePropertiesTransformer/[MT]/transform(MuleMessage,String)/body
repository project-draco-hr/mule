{
  if (hasPropertiesToRemove()) {
    removePropertiesFromMessage(message);
  }
  if (hasPropertiesToAdd()) {
    addPropertiesToMessage(message);
  }
  if (hasPropertiesToRename()) {
    renamePropertiesInMessage(message);
  }
  if (getProperty != null) {
    Object prop=message.getProperty(getProperty,scope);
    if (prop != null) {
      message=new DefaultMuleMessage(prop,muleContext);
    }
 else {
      message=new DefaultMuleMessage(NullPayload.getInstance(),muleContext);
    }
  }
  return message;
}
