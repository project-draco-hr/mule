{
  OutputStream out=connector.getOutputStream();
  if (out == null) {
    throw new DispatchException(StdioMessages.couldNotFindStreamWithName(event.getEndpoint().getEndpointURI().getAddress()),event.getMessage(),event.getEndpoint());
  }
  if (connector instanceof PromptStdioConnector) {
    PromptStdioConnector ssc=(PromptStdioConnector)connector;
    if (StringUtils.isNotBlank(ssc.getOutputMessage())) {
      out.write(ssc.getOutputMessage().getBytes());
    }
  }
  Object data=event.transformMessage();
  if (data instanceof byte[]) {
    out.write((byte[])data);
  }
 else {
    out.write(data.toString().getBytes());
  }
  out.flush();
}
