{
  StringBuilder urlBuilder=new StringBuilder();
  if (authorizationUrl != null) {
    urlBuilder.append(authorizationUrl);
  }
 else {
    urlBuilder.append(this.getDefaultUnauthorizedConnector().getAuthorizationUrl());
  }
  urlBuilder.append("?").append("response_type=code&").append("client_id=").append(this.getDefaultUnauthorizedConnector().getConsumerKey());
  String scope=this.getDefaultUnauthorizedConnector().getScope();
  if (!StringUtils.isBlank(scope)) {
    urlBuilder.append("&scope=").append(scope);
  }
  for (  Map.Entry<String,String> entry : extraParameters.entrySet()) {
    urlBuilder.append("&").append(entry.getKey()).append("=").append(entry.getValue());
  }
  urlBuilder.append("&redirect_uri=").append(redirectUri);
  if (getLogger().isDebugEnabled()) {
    getLogger().debug(("Authorization URL has been generated as follows: " + urlBuilder));
  }
  return urlBuilder.toString();
}
