{
  StringBuilder urlBuilder=new StringBuilder();
  if (authorizationUrl != null) {
    urlBuilder.append(authorizationUrl);
  }
 else {
    urlBuilder.append(this.getDefaultUnauthorizedConnector().getAuthorizationUrl());
  }
  urlBuilder.append("?");
  urlBuilder.append("response_type=code&");
  urlBuilder.append("client_id=");
  urlBuilder.append(this.getDefaultUnauthorizedConnector().getConsumerKey());
  for (  String parameter : extraParameters.keySet()) {
    urlBuilder.append("&");
    urlBuilder.append(parameter);
    urlBuilder.append("=");
    urlBuilder.append(extraParameters.get(parameter));
  }
  urlBuilder.append("&redirect_uri=");
  urlBuilder.append(redirectUri);
  if (getLogger().isDebugEnabled()) {
    getLogger().debug(("Authorization URL has been generated as follows: " + urlBuilder));
  }
  return urlBuilder.toString();
}
