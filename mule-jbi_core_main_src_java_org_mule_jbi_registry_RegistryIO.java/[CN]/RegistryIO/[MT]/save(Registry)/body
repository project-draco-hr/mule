{
synchronized (registry) {
    try {
      Writer w=new FileWriter(registry.getStore());
      getXStream().toXML(registry,w);
      w.close();
    }
 catch (    Exception e) {
      if (e instanceof IOException) {
        throw (IOException)e;
      }
      throw (IOException)new IOException("Could not save registry").initCause(e);
    }
  }
}
