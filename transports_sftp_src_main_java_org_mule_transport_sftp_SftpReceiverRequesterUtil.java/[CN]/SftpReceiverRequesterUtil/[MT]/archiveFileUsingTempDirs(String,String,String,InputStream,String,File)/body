{
  File archiveTmpReceivingFolder=FileUtils.newFile(archive + '/' + archiveTmpReceivingDir);
  File archiveTmpReceivingFile=FileUtils.newFile(archive + '/' + archiveTmpReceivingDir,fileNamePart);
  if (!archiveTmpReceivingFolder.exists()) {
    if (logger.isInfoEnabled()) {
      logger.info("Creates " + archiveTmpReceivingFolder.getAbsolutePath());
    }
    if (!archiveTmpReceivingFolder.mkdirs())     throw new IOException("Failed to create archive-tmp-receiving-folder: " + archiveTmpReceivingFolder);
  }
  File archiveTmpSendingFolder=FileUtils.newFile(archive + '/' + archiveTmpSendingDir);
  File archiveTmpSendingFile=FileUtils.newFile(archive + '/' + archiveTmpSendingDir,fileNamePart);
  if (!archiveTmpSendingFolder.exists()) {
    if (logger.isInfoEnabled()) {
      logger.info("Creates " + archiveTmpSendingFolder.getAbsolutePath());
    }
    if (!archiveTmpSendingFolder.mkdirs())     throw new IOException("Failed to create archive-tmp-sending-folder: " + archiveTmpSendingFolder);
  }
  if (logger.isInfoEnabled()) {
    logger.info("Copy SftpInputStream to archiveTmpReceivingFile... " + archiveTmpReceivingFile.getAbsolutePath());
  }
  sftpUtil.copyStreamToFile(is,archiveTmpReceivingFile);
  if (logger.isInfoEnabled()) {
    logger.info("Move archiveTmpReceivingFile (" + archiveTmpReceivingFile + ") to archiveTmpSendingFile ("+ archiveTmpSendingFile+ ")...");
  }
  FileUtils.moveFile(archiveTmpReceivingFile,archiveTmpSendingFile);
  if (logger.isDebugEnabled()) {
    logger.debug("Return SftpFileArchiveInputStream for archiveTmpSendingFile (" + archiveTmpSendingFile + ")...");
  }
  return new SftpFileArchiveInputStream(archiveTmpSendingFile,archiveFile);
}
