{
  if (isDisposed()) {
    return;
  }
  if (started.get()) {
    if (isConnected()) {
      try {
        disconnect();
      }
 catch (      Exception e) {
        logger.error("Failed to disconnect: " + e.getMessage(),e);
      }
    }
    if (logger.isInfoEnabled()) {
      logger.info("Stopping Connector: " + getClass().getName());
    }
    doStop();
    for (Iterator iterator=receivers.values().iterator(); iterator.hasNext(); ) {
      UMOMessageReceiver mr=(UMOMessageReceiver)iterator.next();
      if (logger.isDebugEnabled()) {
        logger.debug("Stopping receiver on endpoint: " + mr.getEndpoint().getEndpointURI());
      }
      mr.stop();
    }
    started.set(false);
    if (logger.isInfoEnabled()) {
      logger.info("Connector " + getClass().getName() + " has been stopped");
    }
  }
}
