{
  List params=new ArrayList();
  for (int i=0; i < args.length; i++) {
    if (args[i] == null) {
      QName qname=call.getTypeMapping().getTypeQName(Object.class);
      params.add(String.format("value%d;qname{%s:%s:%s};in",i,qname.getPrefix(),qname.getLocalPart(),qname.getNamespaceURI()));
    }
 else     if (args[i] instanceof DataHandler[]) {
      params.add("attachments;qname{DataHandler:http://xml.apache.org/xml-soap};in");
    }
 else     if (args[i] instanceof Map && connector.isTreatMapAsNamedParams()) {
      for (Iterator iterator=((Map)args[i]).entrySet().iterator(); iterator.hasNext(); ) {
        Map.Entry entry=(Map.Entry)iterator.next();
        if (call.getTypeMapping().getTypeQName(entry.getValue().getClass()) != null) {
          QName type=call.getTypeMapping().getTypeQName(entry.getValue().getClass());
          params.add(String.format("qname{%s%s};qname{%s:%s:%s};in",entry.getKey().toString(),(methodNamespace == null ? "" : ":" + methodNamespace),type.getPrefix(),type.getLocalPart(),type.getNamespaceURI()));
        }
 else {
          params.add(String.format("value%d;qname{%s:%s};in",i,Types.getLocalNameFromFullName(args[i].getClass().getName()),Namespaces.makeNamespace(args[i].getClass().getName())));
          params.add(String.format("qname{%s%s};qname{%s:%s};in",entry.getKey().toString(),(methodNamespace == null ? "" : ":" + methodNamespace),Types.getLocalNameFromFullName(args[i].getClass().getName()),Namespaces.makeNamespace(args[i].getClass().getName())));
        }
      }
    }
 else     if (call.getTypeMapping().getTypeQName(args[i].getClass()) != null) {
      QName qname=call.getTypeMapping().getTypeQName(args[i].getClass());
      params.add(String.format("value%d;qname{%s:%s:%s};in",i,qname.getPrefix(),qname.getLocalPart(),qname.getNamespaceURI()));
    }
 else {
      params.add(String.format("value%d;qname{%s:%s};in",i,Types.getLocalNameFromFullName(args[i].getClass().getName()),Namespaces.makeNamespace(args[i].getClass().getName())));
    }
  }
  HashMap map=new HashMap();
  map.put(method,params);
  event.getMessage().setOutboundProperty(AxisConnector.SOAP_METHODS,map);
}
