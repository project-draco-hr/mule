{
  digester.addRule(path,new ObjectCreateRule(defaultImpl,classAttrib){
    public void begin(    Attributes attributes) throws Exception {
      String ref=attributes.getValue(refAttrib);
      if (ref != null) {
        Object obj=manager.getContainerContext().getComponent(ref);
        digester.push(obj);
      }
 else {
        String classRef=attributes.getValue(classAttrib);
        if (classRef == null && classRefRequired) {
          throw new ConfigurationException(new Message(Messages.MUST_SPECIFY_REF_ATTRIB_X_OR_CLASS_ATTRIB_X_FOR_X,refAttrib,classAttrib,path));
        }
 else {
          super.begin(attributes);
        }
      }
    }
  }
);
}
