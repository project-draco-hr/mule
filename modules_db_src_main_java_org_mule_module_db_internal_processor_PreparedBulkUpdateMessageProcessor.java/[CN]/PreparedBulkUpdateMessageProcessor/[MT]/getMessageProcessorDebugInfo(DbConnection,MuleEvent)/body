{
  MuleEvent eventToUse=resolveSource(muleEvent);
  final List<FieldDebugInfo<?>> fields=new ArrayList<>();
  Query resolvedQuery;
  try {
    resolvedQuery=queryResolver.resolve(connection,eventToUse);
  }
 catch (  QueryResolutionException e) {
    fields.add(createFieldDebugInfo(QUERY_DEBUG_FIELD,String.class,e));
    return fields;
  }
  fields.add(DbDebugInfoUtils.createQueryFieldDebugInfo(QUERY_DEBUG_FIELD,resolvedQuery.getQueryTemplate()));
  final List<List<QueryParamValue>> paramSets=resolveParamSets(muleEvent,resolvedQuery);
  List<FieldDebugInfo> paramSetInfos=new LinkedList<>();
  int setIndex=1;
  for (  List<QueryParamValue> paramSet : paramSets) {
    final List<FieldDebugInfo> paramFields=new ArrayList<>();
    int paramIndex=1;
    for (    QueryParamValue paramValue : paramSet) {
      final String name=paramValue.getName() == null ? PARAM_DEBUG_FIELD_PREFIX + paramIndex++ : paramValue.getName();
      paramFields.add(createFieldDebugInfo(name,String.class,paramValue.getValue()));
    }
    paramSetInfos.add(createFieldDebugInfo(PARAM_SET_DEBUG_FIELD_PREFIX + setIndex++,List.class,paramFields));
  }
  fields.add(createFieldDebugInfo(INPUT_PARAMS_DEBUG_FIELD,List.class,paramSetInfos));
  return fields;
}
