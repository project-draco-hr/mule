{
  if (payload instanceof Iterable) {
    return ((Iterable<Object>)payload).iterator();
  }
 else   if (payload instanceof Iterator) {
    return (Iterator<Object>)payload;
  }
 else {
    throw new IllegalArgumentException(String.format("Bulk mode operations require a Iterable/Iterator as payload. Got %s instead",payload != null ? payload.getClass().getCanonicalName() : "null"));
  }
}
