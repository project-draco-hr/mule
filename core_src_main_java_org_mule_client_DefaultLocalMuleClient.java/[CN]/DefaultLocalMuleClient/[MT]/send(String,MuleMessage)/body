{
  final MessageProcessor connectorMessageProcessor=getConnectorMessageProcessLocator().locateConnectorOperation(url,newOptions().build(),MessageExchangePattern.REQUEST_RESPONSE);
  if (connectorMessageProcessor != null) {
    return returnMessage(connectorMessageProcessor.process(createRequestResponseMuleEvent(message)));
  }
 else {
    OutboundEndpoint endpoint=endpointCache.getOutboundEndpoint(url,MessageExchangePattern.REQUEST_RESPONSE,null);
    return returnMessage(endpoint.process(createMuleEvent(message,endpoint)));
  }
}
