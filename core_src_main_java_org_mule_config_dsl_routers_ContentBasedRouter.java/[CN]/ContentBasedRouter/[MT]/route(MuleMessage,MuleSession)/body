{
  for (  OutboundEndpoint endpoint : endpoints) {
    if (isMatch(message)) {
      DefaultMuleEvent event=new DefaultMuleEvent(message,endpoint,session,endpoint.isSynchronous());
      if (endpoint.isSynchronous()) {
        return endpoint.send(event);
      }
 else {
        endpoint.dispatch(event);
        return null;
      }
    }
  }
  throw new RuntimeException("Event not processed");
}
