{
  this(muleContext);
  setUniqueId(msg.getUniqueId());
  setMessageRootId(msg.getMessageRootId());
  copyMessageProperties(msg);
  if (!msg.invalidatedPayload) {
    MuleMessage[] messagesAsArray=msg.getMessagesAsArray();
    for (int i=0; i < messagesAsArray.length; i++) {
      MuleMessage currentMsg=messagesAsArray[i];
      if (deepMessageCopy) {
        if (currentMsg instanceof MuleMessageCollection) {
          addMessage(new DefaultMessageCollection((DefaultMessageCollection)currentMsg,muleContext,true));
        }
 else {
          addMessage(new DefaultMuleMessage(currentMsg,currentMsg,muleContext));
        }
      }
 else {
        addMessage(currentMsg);
      }
    }
  }
 else {
    invalidatedPayload=true;
  }
}
