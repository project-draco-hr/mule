{
  CxfInboundMessageProcessor processor=createCxfMessageProcessor();
  MessageProcessor messageProcessor=new MessageProcessor(){
    public MuleEvent process(    MuleEvent event) throws MuleException {
      payload=event.getMessage().getPayload();
      assertEquals("echo",payload);
      event.getMessage().setPayload("echo");
      gotEvent=true;
      return event;
    }
  }
;
  processor.setListener(messageProcessor);
  MuleEvent event=getTestEvent(msg,getTestInboundEndpoint(MessageExchangePattern.REQUEST_RESPONSE));
  MuleEvent response=processor.process(event);
  Object payload=response.getMessage().getPayload();
  assertTrue(payload instanceof OutputHandler);
  ((OutputHandler)payload).write(response,System.out);
  assertTrue(gotEvent);
}
