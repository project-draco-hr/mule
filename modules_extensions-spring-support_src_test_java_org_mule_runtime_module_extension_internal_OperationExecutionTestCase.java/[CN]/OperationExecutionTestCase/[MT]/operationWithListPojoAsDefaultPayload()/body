{
  Ricin ricinWeapon1=new Ricin();
  ricinWeapon1.setMicrogramsPerKilo(20L);
  Ricin ricinWeapon2=new Ricin();
  ricinWeapon2.setMicrogramsPerKilo(22L);
  List<Ricin> ricins=(List<Ricin>)flowRunner("killWithRicinDefaultPayload").withPayload(Arrays.asList(ricinWeapon1,ricinWeapon2)).run().getMessage().getPayload().getValue();
  assertThat(ricins,hasSize(2));
  assertThat(ricins.get(0),instanceOf(Ricin.class));
  assertThat(ricins.get(1),instanceOf(Ricin.class));
  Ricin ricin1=ricins.get(0);
  assertThat(ricin1.getMicrogramsPerKilo(),is(20L));
  Ricin ricin2=ricins.get(1);
  assertThat(ricin2.getMicrogramsPerKilo(),is(22L));
}
