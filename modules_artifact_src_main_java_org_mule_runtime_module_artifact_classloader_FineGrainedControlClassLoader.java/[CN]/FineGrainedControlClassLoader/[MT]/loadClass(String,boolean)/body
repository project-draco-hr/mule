{
  Class<?> result=findLoadedClass(name);
  if (result != null) {
    return result;
  }
  final ClassLoaderLookupStrategy lookupStrategy=lookupPolicy.getLookupStrategy(name);
  if (lookupStrategy == null) {
    throw new NullPointerException(format("Unable to find a lookup strategy for '%s' from %s",name,this));
  }
  if (verboseLogging) {
    logLoadingClass(name,lookupStrategy,"Loading class '%s' with '%s' on '%s'",this);
  }
  ClassNotFoundException firstException=null;
  try {
    if (lookupStrategy == PARENT_ONLY) {
      result=findParentClass(name);
    }
 else     if (lookupStrategy == PARENT_FIRST) {
      try {
        result=findParentClass(name);
      }
 catch (      ClassNotFoundException e) {
        firstException=e;
        result=findLocalClass(name);
      }
    }
 else     if (lookupStrategy == CHILD_FIRST) {
      try {
        result=findLocalClass(name);
      }
 catch (      ClassNotFoundException e) {
        firstException=e;
        result=findParentClass(name);
      }
    }
 else {
      result=findLocalClass(name);
    }
  }
 catch (  ClassNotFoundException e) {
    throw new CompositeClassNotFoundException(name,lookupStrategy,firstException != null ? asList(firstException,e) : asList(e));
  }
  if (verboseLogging) {
    logLoadedClass(name,result);
  }
  if (resolve) {
    resolveClass(result);
  }
  return result;
}
