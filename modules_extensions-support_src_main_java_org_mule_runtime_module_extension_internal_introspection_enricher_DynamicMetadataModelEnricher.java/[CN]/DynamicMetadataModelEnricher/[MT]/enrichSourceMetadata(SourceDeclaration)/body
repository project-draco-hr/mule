{
  final Optional<ImplementingTypeModelProperty> modelProperty=sourceDeclaration.getModelProperty(ImplementingTypeModelProperty.class);
  if (modelProperty.isPresent()) {
    final Class<?> operationMethod=modelProperty.get().getType();
    MetadataScopeAdapter metadataScope=new MetadataScopeAdapter(getMetadataScope(operationMethod));
    MetadataResolverFactory metadataResolverFactory=getMetadataResolverFactory(metadataScope);
    sourceDeclaration.setMetadataResolverFactory(metadataResolverFactory);
    if (metadataScope.isCustomScope()) {
      declareOutput(sourceDeclaration.getOutput(),sourceDeclaration.getOutputAttributes(),metadataScope);
      declareComponentMetadataKeyId(sourceDeclaration,sourceDeclaration);
    }
  }
}
