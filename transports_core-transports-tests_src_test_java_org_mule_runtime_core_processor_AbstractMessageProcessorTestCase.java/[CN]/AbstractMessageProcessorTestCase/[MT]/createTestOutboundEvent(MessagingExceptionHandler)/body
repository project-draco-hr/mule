{
  Map<String,Object> props=new HashMap<String,Object>();
  props.put("prop1","value1");
  props.put("port",12345);
  Flow flow=getTestFlow();
  if (exceptionListener != null) {
    flow.setExceptionListener(exceptionListener);
  }
  final DefaultMuleEvent event=new DefaultMuleEvent(new DefaultMuleMessage(TEST_MESSAGE,props,muleContext),flow,getTestSession(null,muleContext));
  DefaultMuleEventEndpointUtils.populateFieldsFromInboundEndpoint(event,getTestInboundEndpoint(MessageExchangePattern.REQUEST_RESPONSE));
  return event;
}
