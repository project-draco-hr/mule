{
  List<String> tokens=parseTokens(expression);
  JsonNode o=node;
  for (  String token : tokens) {
    if (token.startsWith("[")) {
      if (o.isArray()) {
        int index=Integer.valueOf(token.substring(1,token.length() - 1));
        o=o.path(index);
      }
 else {
        throw new IllegalArgumentException("Current node is not an array, but expression is expecting one");
      }
    }
 else {
      o=o.path(token);
    }
    if (o.isMissingNode()) {
      throw new IllegalArgumentException("Not a valid element: " + token);
    }
  }
  if (o.isValueNode()) {
    return o.getValueAsText();
  }
 else {
    return o;
  }
}
