{
  final AbstractConnector endpointConnector=(AbstractConnector)endpoint.getConnector();
  MessageProcessor executionMessageProcessor;
  if (endpoint.getExchangePattern().hasResponse() || !endpointConnector.getDispatcherThreadingProfile().isDoThreading()) {
    executionMessageProcessor=endpoint;
  }
 else {
    SimpleMessageProcessorChainBuilder builder=new SimpleMessageProcessorChainBuilder();
    builder.setName("dispatcher processor chain for '" + endpoint.getAddress() + "'");
    LaxAsyncInterceptingMessageProcessor async=new LaxAsyncInterceptingMessageProcessor(new DispatcherWorkManagerSource(endpointConnector));
    async.setMuleContext(muleContext);
    async.setMessagingExceptionHandler(messagingExceptionHandler);
    builder.chain(async);
    builder.chain(endpoint);
    executionMessageProcessor=builder.build();
  }
  return createOutboundEndpointWrapper(executionMessageProcessor,endpoint);
}
