{
  if (properties != null) {
    Map.Entry entry;
    String value;
    for (Iterator iterator=properties.entrySet().iterator(); iterator.hasNext(); ) {
      entry=(Map.Entry)iterator.next();
      value=entry.getValue().toString();
      value=templateParser.parse((Map)managementContext.getRegistry().lookupObject(MuleProperties.OBJECT_MULE_APPLICATION_PROPERTIES),value);
      try {
        Map props=((Map)managementContext.getRegistry().lookupObject(MuleProperties.OBJECT_MULE_APPLICATION_PROPERTIES));
        if (props == null) {
          props=new HashMap();
          props.put(entry.getKey(),value);
          managementContext.getRegistry().registerObject(MuleProperties.OBJECT_MULE_APPLICATION_PROPERTIES,props,managementContext);
        }
 else {
          props.put(entry.getKey(),value);
        }
      }
 catch (      RegistrationException e) {
        throw new InitialisationException(e,this);
      }
    }
  }
  setSystemProperties(null);
}
