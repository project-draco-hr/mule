{
  try {
    flowRunner("dataSourcePooling").withPayload(TEST_MESSAGE).asynchronously().run();
    flowRunner("dataSourcePooling").withPayload(TEST_MESSAGE).asynchronously().run();
    LocalMuleClient client=muleContext.getClient();
    MuleMessage response=client.request("test://connectionError",RECEIVE_TIMEOUT);
    assertThat(response.getExceptionPayload().getException(),is(instanceOf(MessagingException.class)));
  }
  finally {
    connectionLatch.countDown();
  }
}
