{
  try {
    runFlowAsync("dataSourcePooling",TEST_MESSAGE);
    runFlowAsync("dataSourcePooling",TEST_MESSAGE);
    LocalMuleClient client=muleContext.getClient();
    MuleMessage response=client.request("test://connectionError",RECEIVE_TIMEOUT);
    assertThat(response.getExceptionPayload().getException(),is(instanceOf(MessagingException.class)));
  }
  finally {
    connectionLatch.countDown();
  }
}
