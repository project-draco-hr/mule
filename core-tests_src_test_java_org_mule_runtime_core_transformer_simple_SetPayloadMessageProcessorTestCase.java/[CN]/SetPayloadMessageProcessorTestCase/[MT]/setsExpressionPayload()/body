{
  setPayloadMessageProcessor.setValue(EXPRESSION);
  when(expressionLanguage.isExpression(EXPRESSION)).thenReturn(true);
  setPayloadMessageProcessor.initialise();
  TypedValue typedValue=new TypedValue(PLAIN_TEXT,DataType.STRING);
  when(expressionLanguage.evaluateTyped(EXPRESSION,muleEvent,null)).thenReturn(typedValue);
  when(expressionLanguage.evaluateTyped(eq(EXPRESSION),eq(muleEvent),any(MuleEvent.Builder.class),eq(null))).thenReturn(typedValue);
  MuleEvent response=setPayloadMessageProcessor.process(muleEvent);
  assertThat(response.getMessage().getPayload(),is(PLAIN_TEXT));
}
