{
  setPayloadMessageProcessor.setValue(EXPRESSION);
  when(expressionManager.isExpression(EXPRESSION)).thenReturn(true);
  setPayloadMessageProcessor.initialise();
  TypedValue typedValue=new TypedValue(PLAIN_TEXT,DataType.STRING);
  when(expressionManager.evaluateTyped(EXPRESSION,muleEvent,null)).thenReturn(typedValue);
  MuleEvent response=setPayloadMessageProcessor.process(muleEvent);
  assertThat(response.getMessage().getPayload(),is(PLAIN_TEXT));
}
