{
  setPayloadMessageProcessor=new SetPayloadMessageProcessor();
  muleContext=mock(MuleContext.class);
  setPayloadMessageProcessor.setMuleContext(muleContext);
  expressionManager=mock(ExpressionManager.class);
  muleMessage=mock(MuleMessage.class);
  when(muleContext.getExpressionManager()).thenReturn(expressionManager);
  when(expressionManager.parse(anyString(),any(MuleEvent.class))).thenAnswer(new Answer<String>(){
    @Override public String answer(    InvocationOnMock invocation) throws Throwable {
      return (String)invocation.getArguments()[0];
    }
  }
);
  muleEvent=mock(MuleEvent.class);
  when(muleEvent.getMessage()).thenReturn(muleMessage);
}
