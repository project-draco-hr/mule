{
  UMOImmutableEndpoint endpoint=(UMOEndpoint)descriptor.getInboundRouter().getEndpoints().get(0);
  if (endpoint != null) {
    if (endpoint.getTransformers() != null) {
      if (TransformerUtils.isSourceTypeSupportedByFirst(endpoint.getTransformers(),payload.getClass())) {
        return endpoint;
      }
 else {
        endpoint=new MuleEndpoint(endpoint);
        ((UMOEndpoint)endpoint).setTransformers(new LinkedList());
        return endpoint;
      }
    }
 else {
      return endpoint;
    }
  }
 else {
    UMOEndpointBuilder builder=new EndpointURIEndpointBuilder("vm://mule.client",managementContext);
    builder.setName("muleClientProvider");
    endpoint=managementContext.getRegistry().lookupEndpointFactory().createInboundEndpoint(builder,managementContext);
  }
  return endpoint;
}
