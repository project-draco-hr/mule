{
  JobDataMap jobDataMap=jobExecutionContext.getJobDetail().getJobDataMap();
  Object payload=jobDataMap.get(QuartzConnector.PROPERTY_PAYLOAD);
  if (payload == null) {
    payload=NullPayload.getInstance();
  }
  ScheduledDispatchJobConfig config=(ScheduledDispatchJobConfig)jobDataMap.get(QuartzConnector.PROPERTY_JOB_CONFIG);
  if (config == null) {
    throw new JobExecutionException(QuartzMessages.missingJobDetail(QuartzConnector.PROPERTY_JOB_CONFIG).getMessage());
  }
  if (this instanceof StatefulJob) {
    jobDataMap.put(MuleProperties.MULE_FORCE_SYNC_PROPERTY,Boolean.TRUE);
  }
  try {
    String endpointRef=config.getEndpointRef();
    if (jobDataMap.containsKey("endpointRef")) {
      endpointRef=(String)jobDataMap.get("endpointRef");
    }
    logger.debug("Dispatching payload on: " + config.getEndpointRef());
    dispatch(endpointRef,payload,jobDataMap);
  }
 catch (  MuleException e) {
    throw new JobExecutionException(e);
  }
}
