{
  if ("component1".equals(context.getFlowConstruct().getName())) {
    Map<String,Serializable> props=new HashMap<>();
    props.put("stringParam","param1");
    props.put("objectParam",new Apple());
    props.put("doubleParam",12345.6);
    props.put("integerParam",12345);
    props.put("longParam",(long)123456789);
    props.put("booleanParam",Boolean.TRUE);
    return MuleMessage.builder().payload(new DefaultMultiPartPayload(MuleMessage.builder().payload(context.getMessageAsString()).attributes(BODY_ATTRIBUTES).build(),MuleMessage.builder().nullPayload().mediaType(MediaType.TEXT).attributes(new PartAttributes("test1")).build())).outboundProperties(props).build();
  }
 else {
    MuleMessage msg=context.getMessage();
    assertEquals("param1",msg.getInboundProperty("stringParam"));
    final Object o=msg.getInboundProperty("objectParam");
    assertTrue(o instanceof Apple);
    assertEquals(12345.6,12345.6,msg.<Double>getInboundProperty("doubleParam",0d));
    assertEquals(12345,msg.<Integer>getInboundProperty("integerParam",0).intValue());
    assertEquals(123456789,msg.<Long>getInboundProperty("longParam",0L).longValue());
    assertEquals(Boolean.TRUE,msg.getInboundProperty("booleanParam",Boolean.FALSE));
    assertThat(msg.getPayload(),instanceOf(DefaultMultiPartPayload.class));
    assertThat(((MultiPartPayload)msg.getPayload()).getPart("test1"),not(nullValue()));
  }
  return null;
}
