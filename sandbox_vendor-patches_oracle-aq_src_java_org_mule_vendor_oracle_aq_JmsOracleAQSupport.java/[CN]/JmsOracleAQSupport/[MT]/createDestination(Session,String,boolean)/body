{
  if (session == null) {
    throw new IllegalArgumentException("Session cannot be null when creating a destination");
  }
  if (name == null) {
    throw new IllegalArgumentException("Destination name cannot be null when creating a destination");
  }
  if (!topic) {
    if (jndiDestinations) {
      if (context == null) {
        throw new IllegalArgumentException("Jndi Context name cannot be null when looking up a destination");
      }
      Destination dest=getJndiDestination(name);
      if (dest != null) {
        return dest;
      }
 else       if (forceJndiDestinations) {
        throw new JMSException("JNDI destination not found with name: " + name);
      }
    }
    if (session instanceof AQSessionDelegate) {
      AQjmsSession sess=(AQjmsSession)((AQSessionDelegate)session).getSession();
      return sess.getQueue("stephane",name);
    }
 else {
      return ((AQjmsSession)session).getQueue("stephane",name);
    }
  }
 else {
    if (session instanceof XATopicSession || session instanceof TopicSession) {
      return ((TopicSession)session).createTopic(name);
    }
 else {
      return session.createTopic(name);
    }
  }
}
