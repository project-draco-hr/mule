{
  String resourceInfo=endpoint.getEndpointURI().getResourceInfo();
  boolean topic=(resourceInfo != null && "topic".equalsIgnoreCase(resourceInfo));
  return getSession(endpoint.getTransactionConfig().isTransacted(),topic);
}
