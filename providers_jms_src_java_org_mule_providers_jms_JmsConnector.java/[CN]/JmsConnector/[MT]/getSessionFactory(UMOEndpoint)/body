{
  if (endpoint.getTransactionConfig() != null && endpoint.getTransactionConfig().getFactory() instanceof JmsClientAcknowledgeTransactionFactory) {
    throw new MuleRuntimeException("Unable to obtain session factory for JmsClient Ack");
  }
 else {
    return connection;
  }
}
