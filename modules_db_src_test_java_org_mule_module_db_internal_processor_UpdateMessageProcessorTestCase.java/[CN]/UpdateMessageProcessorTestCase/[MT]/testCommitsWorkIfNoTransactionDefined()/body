{
  DbConnection connection=mock(DbConnection.class);
  DbConnectionFactory dbConnectionFactory=mock(DbConnectionFactory.class);
  when(dbConnectionFactory.createConnection(TransactionalAction.JOIN_IF_POSSIBLE)).thenReturn(connection);
  QueryExecutor updateExecutor=mock(QueryExecutor.class);
  UpdateMessageProcessor processor=new UpdateMessageProcessor(null,null,null,null,null);
  MuleEvent event=mock(MuleEvent.class);
  MuleMessage muleMessage=mock(MuleMessage.class);
  when(event.getMessage()).thenReturn(muleMessage);
  processor.process(event);
  verify(dbConnectionFactory,times(1)).releaseConnection(connection);
  verify(updateExecutor,times(1)).execute(eq(connection),any(Query.class),any(NoAutoGeneratedKeyStrategy.class));
}
