{
  if (!getCurrentState().equals(SHUTDOWN)) {
    throw new RegistryException("Illegal status: " + getCurrentState());
  }
  String result=null;
  try {
    result=doUndeploy();
  }
 catch (  Exception e) {
    throw new RegistryException(e);
  }
  ((RegistryComponent)getRegistryComponent()).removeUnit(this);
  ((AbstractAssembly)getAssembly()).removeUnit(this);
  setCurrentState(UNKNOWN);
  return result;
}
