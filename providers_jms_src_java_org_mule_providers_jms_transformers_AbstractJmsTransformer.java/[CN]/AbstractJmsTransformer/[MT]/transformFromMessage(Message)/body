{
  Object result=null;
  try {
    if (logger.isDebugEnabled()) {
      logger.debug("Message type received is: " + source.getClass().getName());
    }
    if (source instanceof BytesMessage) {
      byte[] bytes=JmsMessageUtils.getBytesFromMessage(source);
      if (CompressionHelper.isCompressed(bytes)) {
        if (logger.isDebugEnabled()) {
          logger.debug("Message recieved is compressed");
        }
        result=CompressionHelper.uncompressByteArray(bytes);
      }
 else {
        result=JmsMessageUtils.getObjectForMessage(source);
      }
    }
 else {
      result=JmsMessageUtils.getObjectForMessage(source);
    }
  }
 catch (  Exception e) {
    throw new TransformerException(this,e);
  }
  return result;
}
