{
  if (getEndpoint(this.internalEndpoints,endpoint.getServiceName(),endpoint.getEndpointName()) != null) {
    throw new JBIException("Endpoint is already registered");
  }
  if (!(endpoint instanceof InternalEndpointImpl)) {
    throw new IllegalArgumentException("endpoint should be a " + InternalEndpointImpl.class.getName());
  }
  AbstractServiceEndpoint se=(AbstractServiceEndpoint)endpoint;
  se.setActive(true);
  this.internalEndpoints.add(se);
}
