{
  if (event.getEndpoint().canSend()) {
    try {
      logger.debug("dispatching event: " + event);
      UMOMessageDispatcher dispatcher=event.getEndpoint().getConnector().getDispatcher(event.getEndpoint().getEndpointURI().getAddress());
      dispatcher.dispatch(event);
    }
 catch (    Exception e) {
      throw new DispatchException(event.getMessage(),event.getEndpoint(),e);
    }
  }
 else   if (component != null) {
    logger.debug("dispatching event to component: " + component.getDescriptor().getName() + " event is: "+ event);
    component.dispatchEvent(event);
  }
 else {
    throw new DispatchException(new Message(Messages.NO_COMPONENT_FOR_ENDPOINT),event.getMessage(),event.getEndpoint());
  }
}
