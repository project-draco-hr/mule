{
  if (StringUtils.isNotBlank(configResources)) {
    if (configResources.indexOf(",") > -1) {
      throw new ConfigurationException(new Message(Messages.ONLY_SINGLE_RESOURCE_CAN_BE_SPECIFIED));
    }
  }
 else {
    configResources=MULE_CONFIGURATION_RESOURCE;
  }
  URL url=null;
  List list=new ArrayList();
  try {
    Enumeration e=Thread.currentThread().getContextClassLoader().getResources(configResources);
    while (e.hasMoreElements()) {
      url=(URL)e.nextElement();
      logger.info("Loading resource: " + url.toExternalForm());
      list.add(new ReaderResource(url.toExternalForm(),new InputStreamReader(url.openStream())));
    }
  }
 catch (  Exception e) {
    throw new ConfigurationException(new Message(Messages.FAILED_LOAD_X,"Config: " + ObjectUtils.toString(url,"null")),e);
  }
  ReaderResource[] resources=new ReaderResource[list.size()];
  resources=(ReaderResource[])list.toArray(resources);
  configure(resources);
  return manager;
}
