{
  String host=endpoint.getEndpointURI().getHost();
  XmppMessageType type=XmppMessageType.valueOf(host);
switch (type) {
case MESSAGE:
    return createMessageConversation(endpoint);
case CHAT:
  return createChatConversation(endpoint);
case GROUPCHAT:
return createGroupchatConversation(endpoint);
case dynamic:
throw new IllegalStateException();
}
throw new MuleRuntimeException(XmppMessages.invalidConversationType(type));
}
