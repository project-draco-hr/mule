{
  String type=endpoint.getEndpointURI().getHost();
  if (XmppConnector.CONVERSATION_TYPE_MESSAGE.equals(type)) {
    return createMessageConversation(endpoint);
  }
 else   if (XmppConnector.CONVERSATION_TYPE_CHAT.equals(type)) {
    return createChatConversation(endpoint);
  }
 else   if (XmppConnector.CONVERSATION_TYPE_GROUPCHAT.equals(type)) {
    return createGroupchatConversation(endpoint);
  }
 else {
    throw new MuleRuntimeException(XmppMessages.invalidConversationType(type));
  }
}
