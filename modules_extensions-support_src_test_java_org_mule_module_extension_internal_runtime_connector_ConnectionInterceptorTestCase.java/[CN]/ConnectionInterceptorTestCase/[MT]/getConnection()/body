{
  ArgumentCaptor<ManagedConnection> connectionCaptor=ArgumentCaptor.forClass(ManagedConnection.class);
  interceptor.before(operationContext);
  verify(operationContext,atLeastOnce()).setVariable(same(CONNECTION_PARAM),connectionCaptor.capture());
  ManagedConnection<PetStoreClient> managedConnection=connectionCaptor.getValue();
  return managedConnection.getConnection();
}
