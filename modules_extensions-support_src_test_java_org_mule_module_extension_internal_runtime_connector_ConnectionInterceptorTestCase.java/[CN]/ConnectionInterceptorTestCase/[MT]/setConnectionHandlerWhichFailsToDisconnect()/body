{
  connectionHandler=mock(PetStoreClientConnectionHandler.class);
  final Exception exception=new RuntimeException();
  doThrow(exception).when(connectionHandler).disconnect(Mockito.any(PetStoreClient.class));
  when(connectionHandler.connect(config)).thenReturn(mock(PetStoreClient.class));
  before();
  return exception;
}
