{
  MuleEvent mockEvent=mock(MuleEvent.class);
  final MuleEvent mockResponse=mock(MuleEvent.class);
  KeyGenerator keyGenerator=mock(KeyGenerator.class);
  when(keyGenerator.generateKey(mockEvent)).thenReturn(OBJECT_KEY);
  ResponseGenerator responseGenerator=mock(ResponseGenerator.class);
  when(responseGenerator.create(mockEvent,mockResponse)).thenReturn(mockResponse);
  ObjectStore<MuleEvent> objectStore=mock(ObjectStore.class);
  when(objectStore.retrieve(OBJECT_KEY)).thenReturn(mockResponse);
  ObjectStoreCachingStrategy cachingStrategy=new ObjectStoreCachingStrategy();
  cachingStrategy.setKeyGenerator(keyGenerator);
  cachingStrategy.setStore(objectStore);
  cachingStrategy.setResponseGenerator(responseGenerator);
  cachingStrategy.setConsumableFilter(new AcceptAllFilter());
  MessageProcessor cachedMessageProcessor=mock(MessageProcessor.class);
  MuleEvent response=cachingStrategy.process(mockEvent,cachedMessageProcessor);
  assertSame(mockResponse,response);
  Mockito.verify(objectStore,Mockito.times(0)).store(OBJECT_KEY,mockResponse);
  verify(cachedMessageProcessor,times(0)).process(mockEvent);
}
