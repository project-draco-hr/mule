{
  when(inboundEndpoint.getTransactionConfig().isConfigured()).thenReturn(false);
  when(inboundEndpoint.getExchangePattern().hasResponse()).thenReturn(false);
  flow.setExceptionListener(onErrorPropagateHandler);
  when(onErrorPropagateHandler.hasMaxRedeliveryAttempts()).thenReturn(true);
  when(onErrorPropagateHandler.acceptsAll()).thenReturn(true);
  when(inboundEndpoint.getRedeliveryPolicy()).thenReturn(mockRedeliveryPolicy);
  flow.setMessageSource(inboundEndpoint);
}
