{
  MuleEvent responseEvent=flowRunner("connectionRetriever").withPayload("").run();
  assertThat(responseEvent.getMessage().getPayload().getValue(),instanceOf(SubTypesConnectorConnection.class));
  SubTypesConnectorConnection payload=(SubTypesConnectorConnection)responseEvent.getMessage().getPayload().getValue();
  assertThat(payload.getDoor(),instanceOf(HouseDoor.class));
  assertThat(payload.getShape(),instanceOf(Triangle.class));
  assertThat(payload.getShape().getArea(),is(1));
}
