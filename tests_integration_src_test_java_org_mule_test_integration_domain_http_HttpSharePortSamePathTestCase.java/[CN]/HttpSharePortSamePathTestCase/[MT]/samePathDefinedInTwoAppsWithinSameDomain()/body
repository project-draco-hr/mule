{
  MuleContext domainContext=new DomainContextBuilder().setDomainConfig(domainConfig).build();
  MuleContext firstAppContext=new ApplicationContextBuilder().setApplicationResources(new String[]{appConfig}).setDomainContext(domainContext).build();
  ApplicationContextBuilder secondApp=new ApplicationContextBuilder();
  try {
    secondApp.setApplicationResources(new String[]{appConfig}).setDomainContext(domainContext).build();
    fail("Second app context start should fail");
  }
 catch (  Exception e) {
    assertThat(e.getCause(),IsInstanceOf.instanceOf(expectedExceptionType));
  }
  firstAppContext.dispose();
}
