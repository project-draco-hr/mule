{
  org.mule.api.transformer.DataType muleDT;
  if (as instanceof CollectionDataType) {
    muleDT=new org.mule.transformer.types.CollectionDataType(as.getType(),((CollectionDataType)as).getItemType(),as.getMimeType());
  }
 else {
    muleDT=new org.mule.transformer.types.SimpleDataType(as.getType(),as.getMimeType());
  }
  Transformer t=muleContext.getRegistry().lookupTransformer(org.mule.transformer.types.DataTypeFactory.create(data.getClass()),muleDT);
  return (T)t.transform(data);
}
