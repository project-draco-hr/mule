{
  if (src instanceof Entry) {
    return src;
  }
 else {
    String destination=context.getEndpointURI().toString();
    JiniMessage msg=new JiniMessage(destination,src);
    msg.setMessageId(context.getMessage().getUniqueId());
    msg.setCorrelationId(context.getMessage().getCorrelationId());
    msg.setCorrelationGroupSize(new Integer(context.getMessage().getCorrelationGroupSize()));
    msg.setCorrelationSequence(new Integer(context.getMessage().getCorrelationSequence()));
    msg.setReplyTo(context.getMessage().getReplyTo());
    msg.setEncoding(context.getMessage().getEncoding());
    msg.setExceptionPayload(context.getMessage().getExceptionPayload());
    Map props=new HashMap();
    for (Iterator iterator=context.getMessage().getPropertyNames().iterator(); iterator.hasNext(); ) {
      String key=(String)iterator.next();
      props.put(key,context.getMessage().getProperty(key));
    }
    msg.setProperties(props);
    return msg;
  }
}
