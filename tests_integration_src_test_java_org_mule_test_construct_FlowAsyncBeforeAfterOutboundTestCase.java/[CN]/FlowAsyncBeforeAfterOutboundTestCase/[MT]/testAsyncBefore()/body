{
  MuleClient client=muleContext.getClient();
  MuleMessage msgSync=flowRunner("test-async-block-before-outbound").withPayload("message").run().getMessage();
  MuleMessage msgAsync=client.request("test://test.before.async.out",RECEIVE_TIMEOUT).getRight().get();
  MuleMessage msgOut=client.request("test://test.before.out",RECEIVE_TIMEOUT).getRight().get();
  assertCorrectThreads(msgSync,msgAsync,msgOut);
}
