{
  if (endpoint.getName() != null) {
    return replaceObjectNameChars(endpoint.getName());
  }
 else {
    String name=ENDPOINT_PREFIX + SEPARATOR + replaceObjectNameChars(endpoint.getEndpointURI().getAddress());
    int i=0;
    while (MuleManager.getInstance().lookupEndpoint(name) != null) {
      i++;
      name=ENDPOINT_PREFIX + SEPARATOR + replaceObjectNameChars(endpoint.getEndpointURI().getAddress())+ SEPARATOR+ i;
    }
    return name;
  }
}
