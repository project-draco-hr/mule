{
  String name=endpoint.getName();
  if (name != null) {
    if (name.equals(endpoint.getEndpointURI().getAddress())) {
      name=endpoint.getEndpointURI().getScheme() + SEPARATOR + name;
    }
    name=replaceObjectNameChars(name);
    return name;
  }
 else {
    String address=endpoint.getEndpointURI().getAddress();
    address=(address.indexOf(":/") > -1 ? address : endpoint.getEndpointURI().getScheme() + SEPARATOR + address);
    name=ENDPOINT_PREFIX + SEPARATOR + replaceObjectNameChars(address);
    return ensureUniqueEndpoint(name);
  }
}
