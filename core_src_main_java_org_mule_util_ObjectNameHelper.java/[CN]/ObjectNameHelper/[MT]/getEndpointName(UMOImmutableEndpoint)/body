{
  if (endpoint.getName() != null) {
    return replaceObjectNameChars(endpoint.getName());
  }
 else {
    String address=endpoint.getEndpointURI().getAddress();
    address=(address.indexOf(":/") > -1 ? address : endpoint.getEndpointURI().getScheme() + SEPARATOR + address);
    String name=ENDPOINT_PREFIX + SEPARATOR + replaceObjectNameChars(address);
    int i=0;
    while (MuleManager.getInstance().lookupEndpoint(name) != null) {
      i++;
      name=ENDPOINT_PREFIX + SEPARATOR + replaceObjectNameChars(endpoint.getEndpointURI().getAddress())+ SEPARATOR+ i;
    }
    return name;
  }
}
