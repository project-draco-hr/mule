{
  String name=endpoint.getName();
  final EndpointURI endpointUri=endpoint.getEndpointURI();
  if (name != null) {
    if (name.equals(endpointUri.getAddress())) {
      name=endpointUri.getScheme() + SEPARATOR + name;
    }
    name=replaceObjectNameChars(name);
    return name;
  }
 else {
    String address=endpointUri.getAddress();
    if (StringUtils.isBlank(address)) {
      address=endpointUri.toString();
    }
    address=(address.indexOf(":/") > -1 ? address : endpointUri.getScheme() + SEPARATOR + address);
    name=ENDPOINT_PREFIX + SEPARATOR + replaceObjectNameChars(address);
    return ensureUniqueEndpoint(name);
  }
}
