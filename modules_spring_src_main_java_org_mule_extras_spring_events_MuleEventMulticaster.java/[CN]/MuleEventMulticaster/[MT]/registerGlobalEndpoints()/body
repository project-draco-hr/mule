{
  if (!MuleManager.getInstance().isInitialised()) {
    Map endpoints=applicationContext.getBeansOfType(UMOEndpoint.class,true,true);
    if (endpoints.size() > 0) {
      Map.Entry entry;
      UMOEndpoint endpoint;
      for (Iterator iterator=endpoints.entrySet().iterator(); iterator.hasNext(); ) {
        entry=(Map.Entry)iterator.next();
        endpoint=(UMOEndpoint)entry.getValue();
        if (endpoint.getName() == null) {
          endpoint.setName(entry.getKey().toString());
        }
        MuleManager.getRegistry().registerEndpoint(endpoint);
      }
    }
  }
}
