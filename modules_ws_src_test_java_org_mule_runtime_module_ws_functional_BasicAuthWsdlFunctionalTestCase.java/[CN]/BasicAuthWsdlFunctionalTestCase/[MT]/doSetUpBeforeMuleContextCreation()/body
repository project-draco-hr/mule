{
  httpServer=new Server(httpServerPort.getNumber());
  HashLoginService loginService=new HashLoginService();
  loginService.putUser("user",new Password("password"),new String[]{"user"});
  ConstraintSecurityHandler security=new ConstraintSecurityHandler();
  httpServer.setHandler(security);
  Constraint constraint=new Constraint();
  constraint.setName("auth");
  constraint.setAuthenticate(true);
  constraint.setRoles(new String[]{"user"});
  ConstraintMapping mapping=new ConstraintMapping();
  mapping.setPathSpec("/*");
  mapping.setConstraint(constraint);
  security.setConstraintMappings(Collections.singletonList(mapping));
  security.setAuthenticator(new BasicAuthenticator());
  security.setLoginService(loginService);
  ResourceHandler resourceHandler=new ResourceHandler();
  resourceHandler.setBaseResource(Resource.newClassPathResource("/"));
  HandlerList handlers=new HandlerList();
  handlers.setHandlers(new Handler[]{resourceHandler,new DefaultHandler()});
  security.setHandler(handlers);
  httpServer.start();
}
