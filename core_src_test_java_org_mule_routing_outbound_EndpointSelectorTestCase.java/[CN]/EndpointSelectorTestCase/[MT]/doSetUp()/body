{
  super.doSetUp();
  session=mock(MuleSession.class);
  dest1=getTestOutboundEndpoint("dest1");
  dest2=getTestOutboundEndpoint("dest2");
  dest3=getTestOutboundEndpoint("dest3");
  mockEndpoint1=RouterTestUtils.createMockEndpoint(dest1);
  mockEndpoint2=RouterTestUtils.createMockEndpoint(dest2);
  mockEndpoint3=RouterTestUtils.createMockEndpoint(dest3);
  List<MessageProcessor> endpoints=new ArrayList<MessageProcessor>();
  endpoints.add(mockEndpoint1);
  endpoints.add(mockEndpoint2);
  endpoints.add(mockEndpoint3);
  router=new EndpointSelector();
  router.setRoutes(endpoints);
  router.setMuleContext(muleContext);
  router.initialise();
}
