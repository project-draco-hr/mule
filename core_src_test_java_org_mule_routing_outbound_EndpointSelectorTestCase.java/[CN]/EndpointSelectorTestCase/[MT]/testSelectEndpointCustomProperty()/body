{
  router.setExpression("wayOut");
  router.setEvaluator("header");
  Map props=new HashMap();
  props.put("apple","red");
  props.put("wayOut","dest2");
  props.put("banana","yellow");
  MuleMessage message=new DefaultMuleMessage("test event",props);
  assertTrue(router.isMatch(message));
  session.expect("dispatchEvent",C.eq(message,dest2));
  router.route(message,(MuleSession)session.proxy(),false);
  session.verify();
}
