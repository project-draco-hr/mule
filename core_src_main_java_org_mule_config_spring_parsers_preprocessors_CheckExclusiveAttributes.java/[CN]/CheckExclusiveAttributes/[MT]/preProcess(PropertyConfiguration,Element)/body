{
  List foundAttributes=new LinkedList();
  int foundSetIndex=NONE;
  NamedNodeMap attributes=element.getAttributes();
  for (int i=0; i < attributes.getLength(); i++) {
    String alias=CoreXMLUtils.attributeName((Attr)attributes.item(i));
    String name=config.translateName(alias);
    if (knownAttributes.containsKey(name)) {
      int index=((Integer)knownAttributes.get(name)).intValue();
      if (foundSetIndex != NONE && foundSetIndex != index) {
        StringBuffer message=new StringBuffer("The attribute '");
        message.append(name);
        message.append("' cannot appear with the attribute");
        if (foundAttributes.size() > 1) {
          message.append("s");
        }
        Iterator found=foundAttributes.iterator();
        while (found.hasNext()) {
          message.append(" '");
          message.append(found.next());
          message.append("'");
        }
        message.append(" in element ");
        message.append(CoreXMLUtils.elementToString(element));
        message.append(".");
        throw new CheckExclusiveAttributesException(message.toString());
      }
 else {
        foundSetIndex=index;
        foundAttributes.add(name);
      }
    }
  }
}
