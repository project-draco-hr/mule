{
  MuleMessage message=new DefaultMuleMessage(new Apple(),props);
  StringExpressionEvaluator extractor=new StringExpressionEvaluator();
  extractor.setMuleContext(muleContext);
  Object o=extractor.evaluate("payload is #[function:shortPayloadClass] and has #[headers:count] headers",message);
  assertNotNull(o);
  assertEquals("payload is Apple and has 3 headers",o.toString());
  o=extractor.evaluate("literal string",message);
  assertNotNull(o);
  assertEquals("literal string",o.toString());
}
