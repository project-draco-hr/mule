{
  MuleMessage message=new DefaultMuleMessage(new Apple(),props,muleContext);
  StringExpressionEvaluator extractor=new StringExpressionEvaluator();
  extractor.setMuleContext(muleContext);
  Object o=extractor.evaluate("payload is #[function:shortPayloadClass] and has foo=#[header:foo] header",message);
  assertNotNull(o);
  assertEquals("payload is Apple and has foo=moo header",o.toString());
  o=extractor.evaluate("literal string",message);
  assertNotNull(o);
  assertEquals("literal string",o.toString());
}
