{
  UMOMessage requestMessage=new MuleMessage(eventContext.transformMessage(),eventContext.getMessage());
  UMOMessage responseMessage=null;
  Object builtMessage;
  if (component.getOutboundRouter().hasEndpoints()) {
    List endpoints=new ArrayList();
    for (Iterator iterator=component.getOutboundRouter().getRouters().iterator(); iterator.hasNext(); ) {
      UMOOutboundRouter router=(UMOOutboundRouter)iterator.next();
      endpoints.addAll(router.getEndpoints());
    }
    for (Iterator iterator=endpoints.iterator(); iterator.hasNext(); ) {
      UMOImmutableEndpoint endpoint=(UMOImmutableEndpoint)iterator.next();
      Object request=requestMessage.getPayload();
      boolean rsync=eventContext.getMessage().getBooleanProperty(MuleProperties.MULE_REMOTE_SYNC_PROPERTY,endpoint.isRemoteSync());
      if (!rsync) {
        logger.info("Endpoint: " + endpoint + " is not remoteSync enabled. Message builder finishing");
        if (eventContext.isSynchronous()) {
          responseMessage=eventContext.sendEvent(requestMessage,endpoint);
        }
 else {
          eventContext.dispatchEvent(requestMessage,endpoint);
          responseMessage=null;
        }
        break;
      }
 else {
        responseMessage=eventContext.sendEvent(requestMessage,endpoint);
        if (logger.isDebugEnabled()) {
          logger.debug("Response Message Received from: " + endpoint.getEndpointURI());
        }
        if (logger.isTraceEnabled()) {
          try {
            logger.trace("Message Payload: \n" + StringMessageUtils.truncate(StringMessageUtils.toString(responseMessage.getPayload()),200,false));
          }
 catch (          Exception e) {
          }
        }
        builtMessage=buildMessage(new MuleMessage(request,requestMessage),responseMessage);
        responseMessage=new MuleMessage(builtMessage,responseMessage);
        requestMessage=new MuleMessage(responseMessage.getPayload(),responseMessage);
      }
    }
  }
 else {
    logger.info("There are currently no endpoints configured on component: " + component.getName());
  }
  eventContext.setStopFurtherProcessing(true);
  return responseMessage;
}
