{
  MuleClient client=new MuleClient(muleContext);
  Map<String,String> messageProperties=new HashMap<String,String>();
  messageProperties.put(HttpConstants.HEADER_CONTENT_TYPE,getSendEncoding());
  MuleMessage reply=client.send("clientEndpoint",TEST_MESSAGE,messageProperties);
  assertNotNull(reply);
  assertEquals("200",reply.getProperty(HttpConnector.HTTP_STATUS_PROPERTY,PropertyScope.OUTBOUND));
  assertEquals("text/baz;charset=UTF-16BE",reply.getProperty(HttpConstants.HEADER_CONTENT_TYPE,PropertyScope.OUTBOUND).toString());
  assertEquals("UTF-16BE",reply.getEncoding());
  assertEquals(TEST_MESSAGE + " Received",reply.getPayloadAsString());
}
