{
  boolean registered=false;
  if (service.getInboundRouter() == null) {
    service.setInboundRouter(new DefaultInboundRouterCollection());
  }
  for (Iterator routers=service.getInboundRouter().getRouters().iterator(); routers.hasNext(); ) {
    InboundRouter router=(InboundRouter)routers.next();
    if (router instanceof InboundPassThroughRouter) {
      service.getInboundRouter().removeRouter(router);
    }
    registered=registered || router instanceof ForwardingConsumer;
  }
  if (!registered) {
    service.getInboundRouter().addRouter(new ForwardingConsumer());
  }
  service.getInboundRouter().setMatchAll(true);
}
