{
  this.bankName=service.getName();
  if (!(service.getMessageSource() instanceof ServiceCompositeMessageSource)) {
    throw new IllegalStateException("Only 'ServiceCompositeMessageSource' is supported");
  }
  List endpoints=((ServiceCompositeMessageSource)service.getMessageSource()).getEndpoints();
  if ((endpoints == null) || (endpoints.size() != 1)) {
    throw new IllegalArgumentException("Bank is expected to have exactly 1 incoming endpoint.");
  }
  this.endpoint=((ImmutableEndpoint)endpoints.get(0)).getName();
}
