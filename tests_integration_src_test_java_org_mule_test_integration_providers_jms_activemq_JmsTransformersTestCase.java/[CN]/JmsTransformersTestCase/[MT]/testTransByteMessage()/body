{
  RequestContext.setEvent(getTestEvent("test"));
  AbstractJmsTransformer trans=new SessionEnabledObjectToJMSMessage(session);
  trans.setReturnClass(BytesMessage.class);
  String text="This is a tests Byte Message";
  Object result2=trans.transform(text.getBytes());
  assertTrue("Transformed object should be a Bytes message",result2 instanceof BytesMessage);
  AbstractJmsTransformer trans2=new JMSMessageToObject();
  trans2.setReturnClass(byte[].class);
  BytesMessage bMsg=(BytesMessage)result2;
  Object result=trans2.transform(bMsg);
  assertTrue("Transformed object should be a byte[]",result instanceof byte[]);
  String res=new String((byte[])result);
  assertEquals("source and result messages should be the same",text,res);
}
