{
  final MuleEvent newEvent=new DefaultMuleEvent(event,this);
  RequestContext.setEvent(newEvent);
  try {
    ExecutionTemplate<MuleEvent> executionTemplate=ErrorHandlingExecutionTemplate.createErrorHandlingExecutionTemplate(muleContext,getExceptionListener());
    MuleEvent result=executionTemplate.execute(new ExecutionCallback<MuleEvent>(){
      @Override public MuleEvent process() throws Exception {
        MuleEvent result=pipeline.process(newEvent);
        if (result != null) {
          result.getMessage().release();
        }
        return result;
      }
    }
);
    if (result != null) {
      result=new DefaultMuleEvent(result,event.getFlowConstruct());
    }
    return result;
  }
 catch (  MessagingException e) {
    e.setProcessedEvent(new DefaultMuleEvent(e.getEvent(),event.getFlowConstruct()));
    throw e;
  }
catch (  Exception e) {
    throw new DefaultMuleException(CoreMessages.createStaticMessage("Flow execution exception"),e);
  }
 finally {
    RequestContext.setEvent(event);
    event.getMessage().release();
  }
}
