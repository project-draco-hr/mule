{
  TriggerableMessageSource source=new TriggerableMessageSource();
  pipeline.setMessageSource(source);
  pipeline.setExceptionListener(new DefaultMessagingExceptionStrategy());
  List<MessageProcessor> processors=new ArrayList<MessageProcessor>();
  processors.add(new AbstractMessageProcessorTestCase.ExceptionThrowingMessageProcessr());
  processors.add(new SensingNullMessageProcessor());
  pipeline.setMessageProcessors(processors);
  pipeline.setProcessingStrategy(new NonBlockingProcessingStrategy());
  pipeline.initialise();
  SensingNullCompletionHandler nullCompletionHandler=new SensingNullCompletionHandler();
  event=new DefaultMuleEvent(new DefaultMuleMessage("request",muleContext),MessageExchangePattern.REQUEST_RESPONSE,new CompletionHandlerReplyToHandlerAdaptor(nullCompletionHandler),pipeline);
  try {
    source.trigger(event);
  }
 catch (  Exception e) {
  }
  nullCompletionHandler.latch.await(AbstractMuleContextTestCase.RECEIVE_TIMEOUT,TimeUnit.MILLISECONDS);
  verify(notificationManager,times(1)).fireNotification(argThat(new PipelineMessageNotificiationArgumentMatcher(PipelineMessageNotification.PROCESS_START,false,null)));
  verify(notificationManager,times(1)).fireNotification(argThat(new PipelineMessageNotificiationArgumentMatcher(PipelineMessageNotification.PROCESS_COMPLETE,true,null)));
  verify(notificationManager,times(2)).fireNotification(any(PipelineMessageNotification.class));
}
