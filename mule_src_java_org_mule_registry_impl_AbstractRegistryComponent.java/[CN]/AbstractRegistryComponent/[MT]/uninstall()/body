{
  if (!getCurrentState().equals(SHUTDOWN) && !getCurrentState().equals(UNKNOWN)) {
    throw new RegistryException("Illegal status: " + getCurrentState());
  }
  if (this.units.size() > 0) {
    throw new RegistryException("Component has service units deployed");
  }
  Library[] libraries=getLibraries();
  for (int i=0; i < libraries.length; i++) {
    libraries[i].removeComponent(this);
  }
  registry.getManagementContext().deleteDir(getInstallRoot());
  registry.getManagementContext().deleteDir(getWorkspaceRoot());
  getRegistry().removeComponent(this);
  setCurrentState(UNKNOWN);
}
