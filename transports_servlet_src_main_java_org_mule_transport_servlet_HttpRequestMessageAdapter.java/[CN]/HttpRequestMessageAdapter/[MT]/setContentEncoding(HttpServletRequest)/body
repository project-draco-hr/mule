{
  String contentType=request.getContentType();
  if (contentType != null) {
    int i=contentType.indexOf("charset");
    if (i > -1) {
      int x=contentType.lastIndexOf(";");
      if (x > i) {
        setEncoding(contentType.substring(i + 8,x));
      }
 else {
        setEncoding(contentType.substring(i + 8));
      }
    }
  }
}
