{
  final ExpressionManager expressionManager=eventToEnrich.getMuleContext().getExpressionManager();
  if (event != null && !VoidMuleEvent.getInstance().equals(eventToEnrich)) {
    for (    EnrichExpressionPair pair : enrichExpressionPairs) {
      enrich(eventToEnrich.getMessage(),event.getMessage(),pair.getSource(),pair.getTarget(),expressionManager);
    }
  }
  if (muleContext != null && muleContext.getConfiguration().isEnricherPropagatesSessionVariableChanges()) {
    eventToEnrich=new DefaultMuleEvent(eventToEnrich.getMessage(),eventToEnrich,event.getSession());
  }
  return OptimizedRequestContext.unsafeSetEvent(eventToEnrich);
}
