{
  wireMockRule.stubFor(post(urlEqualTo(TOKEN_PATH)).willReturn(aResponse().withBody(EMPTY)));
  testWithSystemProperty(TOKEN_PATH_PROPERTY_NAME,format("http://localhost:%s%s",wireMockRule.port(),TOKEN_PATH),new MuleTestUtils.TestCallback(){
    @Override public void run() throws Exception {
      ApplicationContextBuilder applicationContextBuilder=new ApplicationContextBuilder().setApplicationResources(new String[]{"client-credentials/client-credentials-minimal-config.xml"});
      expectedException.expectCause(isA(DefaultMuleException.class));
      applicationContextBuilder.build();
    }
  }
);
}
