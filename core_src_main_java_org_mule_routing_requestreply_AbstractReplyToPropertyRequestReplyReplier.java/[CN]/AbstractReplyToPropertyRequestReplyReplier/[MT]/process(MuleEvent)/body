{
  MuleEvent resultEvent;
  if (shouldProcessEvent(event)) {
    Object replyTo=event.getReplyToDestination();
    ReplyToHandler replyToHandler=event.getReplyToHandler();
    resultEvent=processNext(event);
    final String replyToStop=resultEvent.getFlowVariable(MuleProperties.MULE_REPLY_TO_STOP_PROPERTY);
    if (resultEvent != null && !VoidMuleEvent.getInstance().equals(resultEvent) && !BooleanUtils.toBoolean(replyToStop)) {
      processReplyTo(event,resultEvent,replyToHandler,replyTo);
    }
  }
 else {
    resultEvent=processNext(event);
  }
  return resultEvent;
}
