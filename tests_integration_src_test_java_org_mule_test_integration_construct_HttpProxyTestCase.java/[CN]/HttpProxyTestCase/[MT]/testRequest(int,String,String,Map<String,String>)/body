{
  Map<String,Object> headers=new HashMap<String,Object>(Collections.singletonMap("X-Custom-Header","w00t"));
  headers.putAll(extraHeaders);
  final MuleMessage result=muleClient.send("http://localhost:" + port1.getNumber() + "/http-proxy/"+ proxyId+ pathExtension,"foo",headers,getTestTimeoutSecs() * 1000);
  assertEquals(expectedResult,result.getPayloadAsString());
  final int contentLength=getContentLength(result);
  assertEquals(expectedResult.length(),contentLength);
  assertEquals("w00tbaz",result.getInboundProperty("X-Custom-Header-Response"));
  assertEquals("/bar-appender" + pathExtension,result.getInboundProperty("X-Actual-Request-Path"));
}
