{
  MuleEvent testEvent=createMockEvent();
  HttpMessageProcessorTemplate httpMessageProcessorTemplate=new HttpMessageProcessorTemplate(testEvent,mock(MessageProcessor.class),new HttpResponseReadyCallback(){
    @Override public void responseReady(    HttpResponse response,    ResponseStatusCallback responseStatusCallback){
      assertThat(response.getStatusCode(),is(INTERNAL_SERVER_ERROR));
    }
  }
,null,HttpResponseBuilder.emptyInstance(mock(MuleContext.class)));
  httpMessageProcessorTemplate.sendFailureResponseToClient(new MessagingException(CoreMessages.createStaticMessage(TEST_MESSAGE),testEvent),null);
}
