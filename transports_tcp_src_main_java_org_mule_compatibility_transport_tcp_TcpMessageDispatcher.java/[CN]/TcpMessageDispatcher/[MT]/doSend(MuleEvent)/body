{
  Socket socket=connector.getSocket(endpoint);
  doDispatchToSocket(socket,event);
  try {
    if (returnResponse(event)) {
      try {
        Object result=receiveFromSocket(socket,event.getTimeout(),endpoint);
        if (result == null) {
          return new DefaultMuleMessage(NullPayload.getInstance());
        }
        if (result instanceof MutableMuleMessage) {
          return (MutableMuleMessage)result;
        }
        return createMuleMessage(result,endpoint.getEncoding());
      }
 catch (      SocketTimeoutException e) {
        logger.info("Socket timed out normally while doing a synchronous receive on endpointUri: " + endpoint.getEndpointURI());
        return new DefaultMuleMessage(NullPayload.getInstance());
      }
    }
 else {
      return new DefaultMuleMessage(NullPayload.getInstance());
    }
  }
  finally {
    if (!returnResponse(event)) {
      connector.releaseSocket(socket,endpoint);
    }
  }
}
