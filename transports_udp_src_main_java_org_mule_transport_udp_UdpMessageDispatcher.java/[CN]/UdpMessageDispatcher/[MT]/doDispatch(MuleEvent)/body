{
  DatagramSocket socket=connector.getSocket(endpoint);
  try {
    byte[] payload=event.transformMessage(DataType.BYTE_ARRAY_DATA_TYPE);
    int port=endpoint.getEndpointURI().getPort();
    InetAddress inetAddress=null;
    if ("null".equalsIgnoreCase(endpoint.getEndpointURI().getHost())) {
      inetAddress=NetworkUtils.getLocalHost();
    }
 else {
      inetAddress=InetAddress.getByName(endpoint.getEndpointURI().getHost());
    }
    write(socket,payload,port,inetAddress);
  }
  finally {
    connector.releaseSocket(socket,endpoint);
  }
}
