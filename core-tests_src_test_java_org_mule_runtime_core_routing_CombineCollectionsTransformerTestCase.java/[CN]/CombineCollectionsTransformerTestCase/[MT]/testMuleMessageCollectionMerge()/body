{
  List list=new ArrayList<>();
  list.add(InternalMessage.builder().collectionPayload(new String[]{"1","2","3"}).build());
  list.add(InternalMessage.builder().payload("4").build());
  list.add(InternalMessage.builder().collectionPayload(new String[]{"5","6","7"}).build());
  InternalMessage collection=InternalMessage.builder().collectionPayload(list,InternalMessage.class).build();
  Event event=Event.builder(testEvent()).message(collection).build();
  Event response=merger.process(event);
  assertTrue(response.getMessage().getPayload().getValue() instanceof List);
  assertEquals(7,((List)response.getMessage().getPayload().getValue()).size());
}
