{
  MuleEvent event=getTestEvent("hello");
  List list=new ArrayList<>();
  list.add(MuleMessage.builder().collectionPayload(asList("1","2","3"),String.class).build());
  list.add(MuleMessage.builder().payload("4").build());
  list.add(MuleMessage.builder().collectionPayload(asList("5","6","7"),String.class).build());
  MuleMessage collection=new DefaultMuleMessage(list,DataType.MULE_MESSAGE_COLLECTION);
  event=new DefaultMuleEvent(collection,event);
  MuleEvent response=merger.process(event);
  assertTrue(response.getMessage().getPayload() instanceof List);
  assertEquals(7,((List)response.getMessage().getPayload()).size());
}
