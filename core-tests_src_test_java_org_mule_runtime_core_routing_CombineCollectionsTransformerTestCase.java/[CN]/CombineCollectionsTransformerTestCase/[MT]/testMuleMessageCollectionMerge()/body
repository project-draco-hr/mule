{
  MuleEvent event=getTestEvent("hello");
  List list=new ArrayList<>();
  list.add(MuleMessage.builder().collectionPayload(new String[]{"1","2","3"}).build());
  list.add(MuleMessage.builder().payload("4").build());
  list.add(MuleMessage.builder().collectionPayload(new String[]{"5","6","7"}).build());
  MuleMessage collection=MuleMessage.builder().collectionPayload(list,MuleMessage.class).build();
  event=new DefaultMuleEvent(collection,event);
  MuleEvent response=merger.process(event);
  assertTrue(response.getMessage().getPayload() instanceof List);
  assertEquals(7,((List)response.getMessage().getPayload()).size());
}
