{
  MutableMuleMessage original=createMuleMessage();
  Map<String,Serializable> properties=createMessageProperties();
  original.addInboundProperties(properties);
  assertInboundAndOutboundMessageProperties(original);
  MutableMuleMessage copy=new DefaultMuleMessage(original);
  assertInboundAndOutboundMessageProperties(copy);
  assertThat(copy.getDataType().getMediaType().getCharset().get(),equalTo(Charset.forName(muleContext.getConfiguration().getDefaultEncoding())));
  assertThat(copy.getAttributes(),is(testAttributes));
  original.setOutboundProperty("FOO","OTHER");
  assertThat(copy.getOutboundProperty("FOO"),is(nullValue()));
  original.setInboundProperty("FOO","OTHER");
  assertThat(copy.getInboundProperty("FOO"),is(nullValue()));
  copy.setOutboundProperty("ABC","OTHER");
  assertThat(original.getOutboundProperty("ABC"),is(nullValue()));
  copy.setInboundProperty("ABC","OTHER");
  assertThat(original.getInboundProperty("ABC"),is(nullValue()));
}
