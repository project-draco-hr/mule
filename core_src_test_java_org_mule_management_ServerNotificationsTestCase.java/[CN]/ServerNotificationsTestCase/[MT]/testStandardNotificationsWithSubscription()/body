{
  final CountDownLatch latch=new CountDownLatch(1);
  muleContext.registerListener(new ServiceNotificationListener<ServiceNotification>(){
    public void onNotification(    ServiceNotification notification){
      if (notification.getAction() == ServiceNotification.SERVICE_STARTED) {
        componentStartedCount.incrementAndGet();
        assertEquals("component1",notification.getResourceIdentifier());
        latch.countDown();
      }
    }
  }
,"component1");
  getTestService("component2",Apple.class);
  getTestService("component1",Apple.class);
  latch.await(20000,TimeUnit.MILLISECONDS);
  assertEquals(1,componentStartedCount.get());
}
