{
  final String encoding=RegistryContext.getConfiguration().getDefaultEncoding();
  try {
    BeanFactory bf=new XmlBeanFactory(new CachedResource(configurationXmlAsString,encoding));
    setExternalBeanFactory(bf);
  }
 catch (  UnsupportedEncodingException e) {
    throw new ContainerException(CoreMessages.failedToConvertStringUsingEncoding(encoding),e);
  }
}
