{
synchronized (events) {
    if (events.allKeys().isEmpty()) {
      return EMPTY_EVENTS_ARRAY;
    }
    List<Serializable> keys=events.allKeys();
    MuleEvent[] eventArray=new MuleEvent[keys.size()];
    for (int i=0; i < keys.size(); i++) {
      eventArray[i]=events.retrieve(keys.get(i));
    }
    return eventArray;
  }
}
