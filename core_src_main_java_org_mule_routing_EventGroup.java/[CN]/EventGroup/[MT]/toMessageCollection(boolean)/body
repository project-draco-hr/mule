{
  List<MuleMessage> messages=new ArrayList<MuleMessage>();
synchronized (this) {
    for (    Serializable id : eventsObjectStore.allKeys(eventsPartitionKey)) {
      MuleMessage message=eventsObjectStore.retrieve(id,eventsPartitionKey).getMessage();
      messages.add(message);
    }
  }
  if (sortByArrival) {
    Collections.sort(messages,new ArrivalOrderMessageComparator());
  }
  return new DefaultMuleMessage(messages,muleContext);
}
