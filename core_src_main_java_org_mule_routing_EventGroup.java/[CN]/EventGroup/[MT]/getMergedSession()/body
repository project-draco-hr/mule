{
  MuleSession session=new DefaultMuleSession(((MuleEvent)events.retrieve(events.allKeys().get(0))).getSession());
  for (  Serializable key : events.allKeys()) {
    MuleEvent event=events.retrieve(key);
    for (    String name : event.getSession().getPropertyNamesAsSet()) {
      session.setProperty(name,event.getSession().getProperty(name));
    }
  }
  return session;
}
