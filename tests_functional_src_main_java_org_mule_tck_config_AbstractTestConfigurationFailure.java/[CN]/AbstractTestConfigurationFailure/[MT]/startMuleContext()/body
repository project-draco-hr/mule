{
  final AtomicReference<Latch> contextStartedLatch=new AtomicReference<Latch>();
  contextStartedLatch.set(new Latch());
  muleContext.registerListener(new MuleContextNotificationListener<MuleContextNotification>(){
    @Override public void onNotification(    MuleContextNotification notification){
      if (notification.getAction() == MuleContextNotification.CONTEXT_STARTED) {
        contextStartedLatch.get().countDown();
      }
    }
  }
);
  muleContext.start();
  try {
    contextStartedLatch.get().await(20,TimeUnit.SECONDS);
  }
 catch (  InterruptedException e) {
    e.printStackTrace();
  }
}
