{
  if (result instanceof MuleMessage) {
    return new DefaultMuleEvent((MuleMessage)result,event);
  }
 else   if (result instanceof VoidResult) {
    return event;
  }
 else   if (result != null) {
    final TransformerTemplate template=new TransformerTemplate(new TransformerTemplate.OverwitePayloadCallback(result));
    template.setReturnDataType(DataType.builder(DataType.OBJECT).charset(getDefaultEncoding(muleContext)).build());
    event.setMessage(muleContext.getTransformationService().applyTransformers(event.getMessage(),event,Collections.<Transformer>singletonList(template)));
    return event;
  }
 else {
    MutableMuleMessage emptyMessage=new DefaultMuleMessage(NullPayload.getInstance());
    emptyMessage.propagateRootId(event.getMessage());
    return new DefaultMuleEvent(emptyMessage,event);
  }
}
