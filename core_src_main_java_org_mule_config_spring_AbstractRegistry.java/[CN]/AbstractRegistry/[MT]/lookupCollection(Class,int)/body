{
  Map collection=doLookupCollection(returntype);
  if (collection == null) {
    collection=new HashMap(8);
  }
  if (getParent() != null && scope > SCOPE_IMMEDIATE) {
    if (getParent().isRemote() && scope == SCOPE_REMOTE) {
      Map collection2=getParent().lookupCollection(returntype);
      if (collection2 != null) {
        collection.putAll(collection2);
      }
    }
 else     if (!getParent().isRemote() && scope >= SCOPE_LOCAL) {
      Map collection2=getParent().lookupCollection(returntype);
      if (collection2 != null) {
        collection.putAll(collection2);
      }
    }
  }
  return collection;
}
