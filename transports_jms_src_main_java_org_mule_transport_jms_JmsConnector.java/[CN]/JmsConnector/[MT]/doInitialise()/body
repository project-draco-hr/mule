{
  try {
    connectionFactory=this.createConnectionFactory();
  }
 catch (  NamingException ne) {
    throw new InitialisationException(JmsMessages.errorCreatingConnectionFactory(),ne,this);
  }
  if ((connectionFactoryProperties != null) && !connectionFactoryProperties.isEmpty()) {
    BeanUtils.populateWithoutFail(connectionFactory,connectionFactoryProperties,true);
  }
  if (topicResolver == null) {
    topicResolver=new DefaultJmsTopicResolver(this);
  }
  if (redeliveryHandlerFactory == null) {
    redeliveryHandlerFactory=new DefaultRedeliveryHandlerFactory();
  }
  try {
    muleContext.registerListener(this,getName());
  }
 catch (  NotificationException nex) {
    throw new InitialisationException(nex,this);
  }
  if (jmsSupport == null) {
    if (JmsConstants.JMS_SPECIFICATION_102B.equals(specification)) {
      jmsSupport=new Jms102bSupport(this);
    }
 else {
      jmsSupport=new Jms11Support(this);
    }
  }
}
