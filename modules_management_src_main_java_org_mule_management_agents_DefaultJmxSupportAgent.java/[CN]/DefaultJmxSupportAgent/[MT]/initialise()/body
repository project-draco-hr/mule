{
  try {
    UMOAgent agent=createRmiAgent();
    if (!isAgentRegistered(agent)) {
      RegistryContext.getRegistry().registerAgent(agent,managementContext);
    }
    agent=createJmxAgent();
    if (!isAgentRegistered(agent)) {
      RegistryContext.getRegistry().registerAgent(agent,managementContext);
    }
    agent=createLog4jAgent();
    if (!isAgentRegistered(agent)) {
      RegistryContext.getRegistry().registerAgent(agent,managementContext);
    }
    agent=createJmxNotificationAgent();
    if (!isAgentRegistered(agent)) {
      RegistryContext.getRegistry().registerAgent(agent,managementContext);
    }
    if (loadJdmkAgent) {
      agent=createJdmkAgent();
      if (!isAgentRegistered(agent)) {
        RegistryContext.getRegistry().registerAgent(agent,managementContext);
      }
    }
    if (loadMx4jAgent) {
      agent=createMx4jAgent();
      if (!isAgentRegistered(agent)) {
        RegistryContext.getRegistry().registerAgent(agent,managementContext);
      }
    }
    if (loadProfilerAgent) {
      agent=createProfilerAgent();
      if (!isAgentRegistered(agent)) {
        RegistryContext.getRegistry().registerAgent(agent,managementContext);
      }
    }
    managementContext.getRegistry().unregisterAgent(name);
  }
 catch (  UMOException e) {
    throw new InitialisationException(e,this);
  }
}
