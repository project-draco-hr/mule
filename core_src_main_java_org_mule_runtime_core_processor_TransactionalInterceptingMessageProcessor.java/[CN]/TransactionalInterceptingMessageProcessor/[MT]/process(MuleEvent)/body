{
  if (next == null) {
    return event;
  }
 else {
    ExecutionTemplate<MuleEvent> executionTemplate=TransactionalErrorHandlingExecutionTemplate.createScopeExecutionTemplate(muleContext,transactionConfig,exceptionListener);
    ExecutionCallback<MuleEvent> processingCallback=new ExecutionCallback<MuleEvent>(){
      public MuleEvent process() throws Exception {
        return processNext(event);
      }
    }
;
    try {
      return executionTemplate.execute(processingCallback);
    }
 catch (    MuleException e) {
      throw e;
    }
catch (    Exception e) {
      throw new DefaultMuleException(CoreMessages.errorInvokingMessageProcessorWithinTransaction(next,transactionConfig),e);
    }
  }
}
