{
  boolean valueSerialized=in.readBoolean();
  if (valueSerialized) {
    return in.readObject();
  }
 else {
    int length=in.readInt();
    byte[] valueAsByteArray=new byte[length];
    new DataInputStream(in).readFully(valueAsByteArray);
    return valueAsByteArray;
  }
}
