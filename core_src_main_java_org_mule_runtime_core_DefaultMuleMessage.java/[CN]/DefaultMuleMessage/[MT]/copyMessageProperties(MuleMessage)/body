{
  if (muleMessage instanceof DefaultMuleMessage) {
    properties=new MessagePropertiesContext(((DefaultMuleMessage)muleMessage).properties);
  }
 else {
    for (    String name : muleMessage.getInboundPropertyNames()) {
      Serializable value=muleMessage.getInboundProperty(name);
      if (value != null) {
        properties.setInboundProperty(name,value,muleMessage.getInboundPropertyDataType(name));
      }
    }
    for (    String name : muleMessage.getOutboundPropertyNames()) {
      Serializable value=muleMessage.getOutboundProperty(name);
      if (value != null) {
        properties.setOutboundProperty(name,value,muleMessage.getOutboundPropertyDataType(name));
      }
    }
  }
}
