{
  if (typedValue.getValue() instanceof Serializable) {
    out.writeBoolean(true);
    out.writeObject(typedValue.getValue());
  }
 else {
    out.writeBoolean(false);
    byte[] valueAsByteArray=(byte[])RequestContext.getEvent().getMuleContext().getTransformationService().transform(this,DataType.BYTE_ARRAY).getPayload();
    out.writeInt(valueAsByteArray.length);
    new DataOutputStream(out).write(valueAsByteArray);
  }
}
