{
  Event event=flowRunner("InputService").withPayload("Test Message").run();
  InternalMessage msg=event.getMessage();
  assertNotNull(msg);
  assertThat(event.getError().isPresent(),is(true));
  assertEquals("Functional Test Service Exception",event.getError().get().getDescription());
  assertNotNull(msg.getPayload().getValue());
  assertEquals("Ka-boom!",msg.getPayload().getValue());
}
