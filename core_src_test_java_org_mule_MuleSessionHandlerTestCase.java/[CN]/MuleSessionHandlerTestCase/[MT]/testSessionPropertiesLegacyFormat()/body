{
  DefaultMuleMessage message=new DefaultMuleMessage("Test Message",muleContext);
  SessionHandler handler=new LegacySessionHandler();
  MuleSession session=new DefaultMuleSession();
  String string="bar";
  session.setProperty("fooString",string);
  Date date=new Date(0);
  session.setProperty("fooDate",date);
  List<String> list=createList();
  session.setProperty("fooList",list);
  handler.storeSessionInfoToMessage(session,message);
  Object s=message.removeProperty(MuleProperties.MULE_SESSION_PROPERTY);
  message.setInboundProperty(MuleProperties.MULE_SESSION_PROPERTY,s);
  session=handler.retrieveSessionInfoFromMessage(message);
  Object obj=session.getProperty("fooString");
  assertTrue(obj instanceof String);
  assertEquals(string,obj);
  obj=session.getProperty("fooDate");
  assertTrue(obj instanceof String);
  obj=session.getProperty("fooList");
  assertTrue(obj instanceof String);
}
