{
  MuleMessage response=muleContext.getClient().send(getUrl(filePath.getValue()),getTestMuleMessage());
  assertThat(response.getInboundAttachmentNames().size(),is(2));
  DataHandler attachment1=response.getInboundAttachment(FILE_BODY_FIELD_NAME);
  HttpPart part=((HttpPartDataSource)attachment1.getDataSource()).getPart();
  assertThat(part.getName(),is(FILE_BODY_FIELD_NAME));
  assertThat(part.getFileName(),is(FIELD_BDOY_FILE_NAME));
  assertThat(part.getContentType(),is("application/octet-stream"));
  assertThat(IOUtils.toString(part.getInputStream()),is(FILE_BODY_FIELD_VALUE));
  DataHandler attachment2=response.getInboundAttachment(TEXT_BODY_FIELD_NAME);
  assertThat((String)attachment2.getContent(),is(TEXT_BODY_FIELD_VALUE));
  assertThat(attachment2.getContentType(),is(TEXT_PLAIN));
}
