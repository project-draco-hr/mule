{
  MuleClient myClient;
  DefaultMuleMessage myMessage=new DefaultMuleMessage("Mule is the best!",muleContext);
  MuleMessage response=null;
  try {
    myClient=new MuleClient(muleContext);
    myClient.dispatch("vm://FromTestCase",myMessage);
    response=myClient.request("vm://ToTestCase",5000);
  }
 catch (  MuleException e) {
    fail(e.getDetailedMessage());
  }
  assertNotNull(response);
  assertNotNull(response.getPayload());
  assertTrue(response.getPayload() instanceof String);
  assertTrue((String)response.getPayload() == "Mule is the best!");
}
