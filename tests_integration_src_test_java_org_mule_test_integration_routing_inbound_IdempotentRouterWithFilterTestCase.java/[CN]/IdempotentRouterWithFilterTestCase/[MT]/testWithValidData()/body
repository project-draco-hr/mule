{
  MuleClient myClient;
  DefaultMuleMessage myMessage=new DefaultMuleMessage("Mule is the best!",muleContext);
  MuleMessage response=null;
  try {
    myClient=muleContext.getClient();
    myClient.dispatch("vm://FromTestCase",myMessage);
    response=myClient.request("vm://ToTestCase",5000);
  }
 catch (  MuleException e) {
    fail(e.getDetailedMessage());
  }
  assertNotNull(response);
  assertNotNull(response.getPayload());
  assertEquals("Mule is the best!",response.getPayload());
}
