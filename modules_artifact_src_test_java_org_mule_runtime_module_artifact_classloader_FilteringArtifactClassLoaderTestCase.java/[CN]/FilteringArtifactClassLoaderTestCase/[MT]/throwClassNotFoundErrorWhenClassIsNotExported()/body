{
  expected.expect(NotExportedClassException.class);
  if (verboseClassloadingLog) {
    expected.expectMessage(is("Class '" + CLASS_NAME + "' not found in classloader for artifact 'mockArtifact'."+ lineSeparator()+ filter.toString()));
  }
 else {
    expected.expectMessage(is("Class '" + CLASS_NAME + "' not found in classloader for artifact 'mockArtifact'."));
  }
  when(filter.exportsClass(CLASS_NAME)).thenReturn(false);
  filteringArtifactClassLoader=doCreateClassLoader();
  filteringArtifactClassLoader.loadClass(CLASS_NAME);
}
