{
  session=mock(MuleSession.class);
  OutboundEndpoint endpoint1=getTestOutboundEndpoint("Test1Provider","test://Test1Provider?exchangePattern=request-response");
  OutboundEndpoint endpoint2=getTestOutboundEndpoint("Test2Provider","test://Test2Provider?exchangePattern=request-response");
  mockEndpoint1=RouterTestUtils.getMockEndpoint(endpoint1);
  mockEndpoint2=RouterTestUtils.getMockEndpoint(endpoint2);
  router=createObject(SequenceRouter.class);
  List<MessageProcessor> endpoints=new ArrayList<MessageProcessor>();
  endpoints.add((OutboundEndpoint)mockEndpoint1.proxy());
  endpoints.add((OutboundEndpoint)mockEndpoint2.proxy());
  router.setRoutes(endpoints);
}
