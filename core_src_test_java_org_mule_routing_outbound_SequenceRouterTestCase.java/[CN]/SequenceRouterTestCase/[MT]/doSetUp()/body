{
  session=mock(MuleSession.class);
  OutboundEndpoint endpoint1=getTestOutboundEndpoint("Test1Provider","test://Test1Provider?exchangePattern=request-response");
  mockEndpoint1=RouterTestUtils.createMockEndpoint(endpoint1);
  OutboundEndpoint endpoint2=getTestOutboundEndpoint("Test2Provider","test://Test2Provider?exchangePattern=request-response");
  mockEndpoint2=RouterTestUtils.createMockEndpoint(endpoint2);
  router=createObject(SequenceRouter.class);
  List<MessageProcessor> endpoints=new ArrayList<MessageProcessor>();
  endpoints.add(mockEndpoint1);
  endpoints.add(mockEndpoint2);
  router.setRoutes(endpoints);
}
