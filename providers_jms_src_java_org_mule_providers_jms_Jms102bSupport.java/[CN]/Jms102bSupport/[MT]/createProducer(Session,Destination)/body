{
  if (dest instanceof Queue) {
    if (session instanceof XAQueueSession || session instanceof QueueSession) {
      return ((QueueSession)session).createSender((Queue)dest);
    }
  }
 else {
    if (session instanceof XATopicSession || session instanceof TopicSession) {
      return ((TopicSession)session).createPublisher((Topic)dest);
    }
  }
  throw new IllegalArgumentException("Session and domain type do not match");
}
