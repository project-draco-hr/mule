{
  if (!(key instanceof String)) {
    throw new IllegalArgumentException("Invalid key type");
  }
  String k=(String)key;
  if (!this.getAdapterClass().isInstance(obj)) {
    throw new IllegalArgumentException("Invalid connector type");
  }
  OAuthAdapter connector=(OAuthAdapter)obj;
  OAuthState state=null;
  if (this.objectStore.contains(((String)key))) {
    state=this.objectStore.retrieve(k);
    this.objectStore.remove(k);
  }
  if (state == null) {
    state=new OAuthState();
  }
  state.setAccessToken(connector.getAccessToken());
  state.setAccessTokenUrl(connector.getAccessTokenUrl());
  state.setAuthorizationUrl(connector.getAuthorizationUrl());
  state.setRefreshToken(connector.getRefreshToken());
  this.setCustomStateProperties(connector,state);
  this.objectStore.store(k,state);
}
