{
  if (!(key instanceof String)) {
    throw new IllegalArgumentException("Invalid key type");
  }
  String k=(String)key;
  if (!this.getAdapterClass().isInstance(obj)) {
    throw new IllegalArgumentException("Invalid connector type");
  }
  OAuthAdapter connector=(OAuthAdapter)obj;
  OAuthState state=null;
  try {
    if (!this.objectStore.contains(k)) {
      return false;
    }
    state=this.objectStore.retrieve(k);
    if (connector.getAccessToken() == null) {
      return false;
    }
    if (!connector.getAccessToken().equals(state.getAccessToken())) {
      return false;
    }
    if (connector.getRefreshToken() == null && state.getRefreshToken() != null) {
      return false;
    }
    if (connector.getRefreshToken() != null && !connector.getRefreshToken().equals(state.getRefreshToken())) {
      return false;
    }
  }
 catch (  ObjectStoreException e) {
    logger.warn("Could not validate object due to object store exception",e);
    return false;
  }
  return true;
}
