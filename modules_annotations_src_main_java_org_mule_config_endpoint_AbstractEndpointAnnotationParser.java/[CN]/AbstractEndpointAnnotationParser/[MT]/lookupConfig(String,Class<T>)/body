{
  if (StringUtils.isEmpty(location)) {
    return null;
  }
  Object o=muleContext.getRegistry().lookupObject(location + ENDPOINT_BUILDER_POSTFIX);
  if (o == null) {
    o=muleContext.getRegistry().lookupObject(location);
    if (o == null) {
      return null;
    }
  }
  if (type.isInstance(o)) {
    return (T)o;
  }
 else {
    throw new ConfigurationException(CoreMessages.objectNotOfCorrectType(o.getClass(),type));
  }
}
