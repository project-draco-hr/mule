{
  final List<ArtifactPluginDescriptor> pluginDescriptors=createPluginDescriptors(fooPlugin,barPlugin,bazPlugin);
  barPlugin.setClassLoaderModel(new ClassLoaderModelBuilder().dependingOn(singleton(BAZ_PLUGIN)).build());
  bazPlugin.setClassLoaderModel(new ClassLoaderModelBuilder().dependingOn(singleton(FOO_PLUGIN)).build());
  final List<ArtifactPluginDescriptor> resolvedPluginDescriptors=dependenciesResolver.resolve(pluginDescriptors);
  assertResolvedPlugins(resolvedPluginDescriptors,fooPlugin,bazPlugin,barPlugin);
}
