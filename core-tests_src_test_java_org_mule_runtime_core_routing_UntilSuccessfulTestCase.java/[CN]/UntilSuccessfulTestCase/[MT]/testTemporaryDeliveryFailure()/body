{
  targetMessageProcessor.setNumberOfFailuresToSimulate(untilSuccessful.getMaxRetries());
  untilSuccessful.initialise();
  untilSuccessful.start();
  final Event testEvent=getTestEvent("ERROR");
  assertSame(VoidMuleEvent.getInstance(),untilSuccessful.process(testEvent));
  ponderUntilEventProcessed(testEvent);
  assertEquals(targetMessageProcessor.getEventCount(),untilSuccessful.getMaxRetries() + 1);
}
