{
  untilSuccessful.setAckExpression("#['ACK']");
  untilSuccessful.setMuleContext(muleContext);
  untilSuccessful.setFlowConstruct(mockFlow);
  untilSuccessful.initialise();
  untilSuccessful.start();
  assertThat(untilSuccessful.process(testEvent()).getMessageAsString(muleContext),equalTo("ACK"));
  waitDelivery();
}
