{
  final String[] zips=appsDir.list(new SuffixFileFilter(".zip"));
  final String[] apps=appsDir.list(DirectoryFileFilter.DIRECTORY);
  final Collection removedApps=CollectionUtils.subtract(Arrays.asList(deployedApps),Arrays.asList(apps));
  final Collection addedApps=CollectionUtils.subtract(Arrays.asList(apps),Arrays.asList(deployedApps));
  for (  String zip : zips) {
    try {
      onNewApplicationArchive(new File(appsDir,zip));
    }
 catch (    Throwable t) {
      logger.error("Failed to deploy application archive: " + zip,t);
    }
  }
  deployedApps=apps;
}
