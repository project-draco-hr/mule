{
  if (referencedMessageProcessor != null) {
    return referencedMessageProcessor;
  }
 else {
    return new MessageProcessor(){
      @Override public MuleEvent process(      MuleEvent event) throws MuleException {
        MessageProcessor dynamicMessageProcessor=getReferencedMessageProcessor(muleContext.getExpressionManager().parse(refName,event));
        return dynamicMessageProcessor.process(event);
      }
    }
;
  }
}
