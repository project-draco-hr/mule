{
  final MessageProcessor processor=((MessageProcessor)applicationContext.getBean(name));
  if (processor == null) {
    throw new MuleRuntimeException(CoreMessages.objectIsNull(name));
  }
 else   if (processor instanceof FlowConstruct) {
    return new MessageProcessor(){
      @Override public MuleEvent process(      MuleEvent event) throws MuleException {
        return processor.process(event);
      }
    }
;
  }
 else {
    return processor;
  }
}
