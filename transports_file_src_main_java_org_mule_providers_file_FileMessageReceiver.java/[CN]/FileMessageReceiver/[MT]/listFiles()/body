{
  try {
    File[] todoFiles=null;
    if (fileFilter != null) {
      todoFiles=readDirectory.listFiles(fileFilter);
    }
 else {
      todoFiles=readDirectory.listFiles(filenameFilter);
    }
    return (todoFiles == null ? new File[0] : todoFiles);
  }
 catch (  Exception e) {
    throw new MuleException(FileMessages.errorWhileListingFiles(),e);
  }
}
