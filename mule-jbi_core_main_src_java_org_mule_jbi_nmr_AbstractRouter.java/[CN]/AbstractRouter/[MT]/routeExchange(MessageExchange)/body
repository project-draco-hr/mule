{
  String target=null;
  if (me.getRole() == MessageExchange.Role.CONSUMER) {
    target=((MessageExchangeProxy)me).getProvider();
  }
 else   if (me.getRole() == MessageExchange.Role.PROVIDER) {
    target=((MessageExchangeProxy)me).getProvider();
  }
 else {
    throw new UnknownRoleException(me.getRole());
  }
  DeliveryChannelImpl ch=(DeliveryChannelImpl)registry.getComponent(target).getChannel();
  ch.enqueue(me);
}
