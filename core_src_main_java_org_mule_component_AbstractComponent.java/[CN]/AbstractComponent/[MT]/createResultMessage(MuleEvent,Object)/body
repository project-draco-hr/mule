{
  if (result instanceof MuleMessage) {
    return (MuleMessage)result;
  }
 else   if (result instanceof VoidResult) {
    event.transformMessage();
    return event.getMessage();
  }
 else   if (result != null) {
    event.getMessage().applyTransformers(Collections.<Transformer>singletonList(new TransformerTemplate(new TransformerTemplate.OverwitePayloadCallback(result))));
    return event.getMessage();
  }
 else {
    return new DefaultMuleMessage(NullPayload.getInstance(),muleContext);
  }
}
