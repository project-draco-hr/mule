{
  final int timeout=1000;
  final XaTransactionFactory transactionFactory=new XaTransactionFactory();
  transactionFactory.setTimeout(timeout);
  final MuleContext muleContext=mock(MuleContext.class,RETURNS_DEEP_STUBS);
  final TransactionManager transactionManager=mock(TransactionManager.class);
  when(muleContext.getTransactionManager()).thenReturn(transactionManager);
  final Transaction transaction=transactionFactory.beginTransaction(muleContext);
  assertThat(transaction.getTimeout(),equalTo(timeout));
}
