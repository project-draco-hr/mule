{
  stub(outboundEndpoint.process(any(MuleEvent.class))).toReturn(responseEvent);
  ArgumentCaptor<MuleEvent> argument=ArgumentCaptor.forClass(MuleEvent.class);
  MuleMessage response=client.send(TEST_URI,messagePaylaod,messageProperties);
  verify(outboundEndpoint).process((MuleEvent)argument.capture());
  assertSame(message.getPayload(),argument.getValue().getMessage().getPayload());
  assertSame(message.getProperty(PROP_KEY_1,PropertyScope.OUTBOUND),argument.getValue().getMessage().getProperty(PROP_KEY_1,PropertyScope.OUTBOUND));
  assertSame(outboundEndpoint,argument.getValue().getEndpoint());
  assertSame(responseEvent.getMessage(),response);
}
