{
  sftpClient.changeWorkingDirectory(directory);
  sftpClient.storeFile(FILENAME,new ByteArrayInputStream(FILE_CONTENT.getBytes()));
  MuleClient muleClient=muleContext.getClient();
  muleClient.dispatch(getUrl(directory),new DefaultMuleMessage(TEST_MESSAGE,muleContext));
  latch.await(TIMEOUT,TimeUnit.MILLISECONDS);
  assertThat(message,notNullValue());
  assertThat(message.getPayloadAsString(),is(FILE_CONTENT));
}
