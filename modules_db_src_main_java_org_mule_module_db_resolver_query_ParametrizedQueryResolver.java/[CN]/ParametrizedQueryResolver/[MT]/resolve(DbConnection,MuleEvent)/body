{
  if (muleEvent == null) {
    return query;
  }
  List<QueryParamValue> resolvedParams=paramValueResolver.resolveParams(muleEvent,query.getParamValues());
  QueryTemplate queryTemplate=query.getQueryTemplate();
  if (needsParamTypeResolution(queryTemplate.getParams())) {
    queryTemplate=resolveQueryTemplateTypes(connection,queryTemplate);
  }
  return new Query(queryTemplate,resolvedParams);
}
