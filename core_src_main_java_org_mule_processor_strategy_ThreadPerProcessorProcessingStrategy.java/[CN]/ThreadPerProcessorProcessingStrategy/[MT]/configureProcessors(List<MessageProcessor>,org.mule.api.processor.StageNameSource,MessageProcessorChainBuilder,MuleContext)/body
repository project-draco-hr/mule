{
  for (int i=0; i < processors.size(); i++) {
    MessageProcessor processor=processors.get(i);
    builder.chain(createAsyncMessageProcessor(nameSource,muleContext));
    if (processor instanceof MessageProcessor) {
      builder.chain(processor);
    }
 else     if (processor instanceof MessageProcessorBuilder) {
      builder.chain((MessageProcessorBuilder)processor);
    }
 else {
      throw new IllegalArgumentException("MessageProcessorBuilder should only have MessageProcessor's or MessageProcessorBuilder's configured");
    }
  }
}
