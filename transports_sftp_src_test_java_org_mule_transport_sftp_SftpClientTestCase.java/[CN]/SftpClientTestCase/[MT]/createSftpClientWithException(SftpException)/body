{
  SftpClient client=new SftpClient("local");
  Field channelField=client.getClass().getDeclaredField("channelSftp");
  channelField.setAccessible(true);
  ChannelSftp mockChannel=mock(ChannelSftp.class);
  when(mockChannel.ls(anyString())).thenThrow(exceptionToThrow);
  channelField.set(client,mockChannel);
  return client;
}
