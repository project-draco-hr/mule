{
  super(parserContext,muleContext);
  if (message != null) {
    addFinalVariable("message",new MessageContext(message));
    addResolver("payload",new PayloadVariableResolver(message));
    if (message.getExceptionPayload() != null) {
      addFinalVariable("exception",message.getExceptionPayload().getException());
    }
    addFinalVariable("flowVars",new MessagePropertyMapContext(message,PropertyScope.INVOCATION));
    addFinalVariable("sessionVars",new MessagePropertyMapContext(message,PropertyScope.SESSION));
  }
}
