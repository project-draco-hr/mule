{
  UMOSession session=MuleManager.getInstance().getModel().getComponentSession(componentName);
  if (session == null) {
    throw new InitialisationException(new Message(Messages.NO_SESSION_FOR_COMPONENT_X,componentName),this);
  }
  UMOEndpoint endpoint=session.getComponent().getDescriptor().getInboundRouter().getEndpoint(endpointName);
  if (endpoint == null) {
    endpoint=MuleManager.getInstance().lookupEndpoint(endpointName);
    if (endpoint == null) {
      throw new InitialisationException(new Message(Messages.NO_ENDPOINT_X_FOR_COMPONENT_X,componentName),this);
    }
  }
  UMOEvent event=new MuleEvent(message,endpoint,session,eventId,synchronous);
  event.setStopFurtherProcessing(stopFurtherProcessing);
  event.setTimeout(timeout);
  return event;
}
