{
  if (httpRequester.getConfig() != null && tlsContextFactory != null) {
    throw new IllegalStateException("The request config and the TLS context factory cannot be configured at the same time");
  }
  if (tlsContextFactory != null) {
    DefaultHttpRequesterConfig requesterConfig=(DefaultHttpRequesterConfig)new HttpRequesterConfigBuilder(muleContext).setProtocol(HTTPS).setTlsContext(tlsContextFactory).build();
    muleContext.getRegistry().registerObject(new ObjectNameHelper(muleContext).getUniqueName("auto-generated-request-config"),requesterConfig);
    httpRequester.setConfig(requesterConfig);
  }
 else   if (httpRequester.getConfig() == null) {
    DefaultHttpRequesterConfig requestConfig=muleContext.getRegistry().get(DEFAULT_HTTP_REQUEST_CONFIG_NAME);
    if (requestConfig == null) {
synchronized (this) {
        requestConfig=muleContext.getRegistry().get(DEFAULT_HTTP_REQUEST_CONFIG_NAME);
        if (requestConfig == null) {
          requestConfig=(DefaultHttpRequesterConfig)new HttpRequesterConfigBuilder(muleContext).build();
          muleContext.getRegistry().registerObject(DEFAULT_HTTP_REQUEST_CONFIG_NAME,requestConfig);
        }
      }
    }
    httpRequester.setConfig(requestConfig);
  }
  httpRequester.initialise();
  return httpRequester;
}
