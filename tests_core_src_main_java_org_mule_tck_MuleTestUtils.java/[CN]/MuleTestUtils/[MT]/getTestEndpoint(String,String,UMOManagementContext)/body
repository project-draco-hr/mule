{
  StaticApplicationContext factory=getStaticApplicationContext(context);
  Map props=new HashMap();
  props.put("name",name);
  props.put("type",type);
  props.put("endpointURI",new MuleEndpointURI("test://test"));
  props.put("connector","testConnector");
  MuleEndpoint endpoint=new MuleEndpoint();
  AbstractConnector connector=null;
  connector=(AbstractConnector)ClassUtils.loadClass("org.mule.tck.testmodels.mule.TestConnector",AbstractMuleTestCase.class).newInstance();
  connector.setName("testConnector");
  connector.setManagementContext(context);
  connector.initialise();
  endpoint.setConnector(connector);
  endpoint.setEndpointURI(new MuleEndpointURI("test://test"));
  endpoint.setName(name);
  endpoint.setType(type);
  endpoint.setManagementContext(context);
  endpoint.initialise();
  return endpoint;
}
