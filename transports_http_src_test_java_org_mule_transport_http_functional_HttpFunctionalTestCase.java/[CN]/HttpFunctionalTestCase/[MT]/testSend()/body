{
  FunctionalTestComponent testComponent=getFunctionalTestComponent("testComponent");
  assertNotNull(testComponent);
  if (checkPathProperties) {
    EventCallback callback=new EventCallback(){
      public void eventReceived(      final MuleEventContext context,      final Object component) throws Exception {
        MuleMessage msg=context.getMessage();
        assertEquals("/",msg.getInboundProperty(HttpConnector.HTTP_REQUEST_PROPERTY));
        assertEquals("/",msg.getInboundProperty(HttpConnector.HTTP_REQUEST_PATH_PROPERTY));
        assertEquals("/",msg.getInboundProperty(HttpConnector.HTTP_CONTEXT_PATH_PROPERTY));
      }
    }
;
    testComponent.setEventCallback(callback);
  }
  MuleClient client=new MuleClient(muleContext);
  Map<String,String> props=new HashMap<String,String>();
  props.put(HttpConstants.HEADER_CONTENT_TYPE,"text/plain;charset=UTF-8");
  MuleMessage result=client.send("clientEndpoint",TEST_MESSAGE,props);
  assertEquals(TEST_MESSAGE + " Received",result.getPayloadAsString());
}
