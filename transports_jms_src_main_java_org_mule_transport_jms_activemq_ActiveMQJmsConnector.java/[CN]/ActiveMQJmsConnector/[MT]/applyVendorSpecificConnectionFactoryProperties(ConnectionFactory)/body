{
  try {
    Method getRedeliveryPolicyMethod=connectionFactory.getClass().getMethod("getRedeliveryPolicy");
    Object redeliveryPolicy=getRedeliveryPolicyMethod.invoke(connectionFactory);
    Method setMaximumRedeliveriesMethod=redeliveryPolicy.getClass().getMethod("setMaximumRedeliveries",Integer.TYPE);
    int maxRedelivery=getMaxRedelivery();
    if (maxRedelivery != REDELIVERY_IGNORE) {
      maxRedelivery++;
    }
    setMaximumRedeliveriesMethod.invoke(redeliveryPolicy,maxRedelivery);
  }
 catch (  Exception e) {
    logger.error("Can not set MaxRedelivery parameter to RedeliveryPolicy " + e);
  }
}
