{
  final MetadataType keyType=mapType.getKeyType();
  final MetadataType valueType=mapType.getValueType();
  final List<ValueResolver<Object>> keyResolvers=new LinkedList<>();
  final List<ValueResolver<Object>> valueResolvers=new LinkedList<>();
  for (  final ElementDescriptor item : mapElement.getChildsByName(childElementName)) {
    keyResolvers.add(getResolverFromValue(item.getAttribute(ATTRIBUTE_NAME_KEY),keyType));
    valueType.accept(new MetadataTypeVisitor(){
      @Override public void visitObject(      ObjectType objectType){
        valueResolvers.add(parsePojo(item,ATTRIBUTE_NAME_VALUE,getTopLevelTypeName(objectType),objectType,null));
      }
      @Override public void visitArrayType(      ArrayType arrayType){
        ValueResolver<Object> resolver;
        String valueAsExpression=item.getAttribute(ATTRIBUTE_NAME_VALUE);
        if (!StringUtils.isBlank(valueAsExpression)) {
          resolver=getResolverFromValue(valueAsExpression,valueType);
        }
 else {
          String itemName=hyphenize(NameUtils.singularize(childElementName)).concat("-item");
          resolver=parseCollectionAsInnerElement(item,itemName,arrayType);
        }
        valueResolvers.add(resolver);
      }
      @Override protected void defaultVisit(      MetadataType metadataType){
        valueResolvers.add(getResolverFromValue(item.getAttribute(ATTRIBUTE_NAME_VALUE),valueType));
      }
    }
);
  }
  return MapValueResolver.of(getType(mapType),keyResolvers,valueResolvers);
}
