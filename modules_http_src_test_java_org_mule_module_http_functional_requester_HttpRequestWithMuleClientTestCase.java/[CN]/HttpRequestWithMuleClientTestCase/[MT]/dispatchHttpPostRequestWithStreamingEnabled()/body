{
  muleContext.getClient().dispatch(getUrl(),getTestMuleMessage(new ByteArrayInputStream(TEST_MESSAGE.getBytes())),newOptions().method("POST").build());
  final MuleMessage receivedMessage=getMessageReceivedByFlow();
  assertThat(receivedMessage,notNullValue());
  assertThat(getPayloadAsString(receivedMessage),is(TEST_MESSAGE));
  assertThat(receivedMessage.getInboundProperty(HttpHeaders.Names.TRANSFER_ENCODING),Is.<Object>is(HttpHeaders.Values.CHUNKED));
}
