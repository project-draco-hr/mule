{
  muleContext.getClient().dispatch(getUrl(),getTestMuleMessage(new ByteArrayInputStream(TEST_MESSAGE.getBytes())),newOptions().method("POST").build());
  final MuleMessage vmMessage=getMessageReceivedByFlow();
  assertThat(vmMessage,notNullValue());
  assertThat(getPayloadAsString(vmMessage),is(TEST_MESSAGE));
  assertThat(vmMessage.getInboundProperty(HttpHeaders.Names.TRANSFER_ENCODING),Is.<Object>is(HttpHeaders.Values.CHUNKED));
}
