{
  try {
    return processNext(event);
  }
 catch (  Exception e) {
    e=(Exception)ExceptionHelper.sanitizeIfNeeded(e);
    if (e instanceof InternalProcessingException) {
      event.getMessage().setPayload(NullPayload.getInstance());
      event.getMessage().setExceptionPayload(new DefaultExceptionPayload(e));
      return event;
    }
 else {
      return event.getFlowConstruct().getExceptionListener().handleException(e,event);
    }
  }
}
