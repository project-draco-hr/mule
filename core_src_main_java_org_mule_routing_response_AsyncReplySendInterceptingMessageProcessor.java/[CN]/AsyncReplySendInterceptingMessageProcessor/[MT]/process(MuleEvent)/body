{
  Object replyTo=event.getMessage().getReplyTo();
  ReplyToHandler replyToHandler=getReplyToHandler(event.getMessage(),(InboundEndpoint)event.getEndpoint());
  event.getMessage().setReplyTo(null);
  MuleEvent resultEvent=processNext(event);
  final String replyToStop=(String)resultEvent.getMessage().getProperty(MuleProperties.MULE_REPLY_TO_STOP_PROPERTY,PropertyScope.INVOCATION);
  if (resultEvent != null && !BooleanUtils.toBoolean(replyToStop)) {
    processReplyTo(event,resultEvent,replyToHandler,replyTo);
  }
  return resultEvent;
}
