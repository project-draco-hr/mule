{
  Object replyTo=event.getMessage().getReplyTo();
  ReplyToHandler replyToHandler=getReplyToHandler(event.getMessage(),(InboundEndpoint)event.getEndpoint());
  event.getMessage().setReplyTo(null);
  MuleEvent resultEvent=processNext(event);
  if (resultEvent != null && !BooleanUtils.toBoolean((String)resultEvent.getProperty(MuleProperties.MULE_REPLY_TO_STOP_PROPERTY))) {
    processReplyTo(event,resultEvent,replyToHandler,replyTo);
  }
  return resultEvent;
}
