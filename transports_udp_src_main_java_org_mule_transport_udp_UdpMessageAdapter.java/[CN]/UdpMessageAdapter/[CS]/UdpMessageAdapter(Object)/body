{
  if (message instanceof DatagramPacket) {
    DatagramPacket dp=(DatagramPacket)message;
    this.message=new byte[dp.getLength()];
    System.arraycopy(dp.getData(),0,this.message,0,dp.getLength());
    InetAddress address=dp.getAddress();
    if (address != null) {
      setProperty(ADDRESS_PROPERTY,address);
    }
    setProperty(PORT_PROPERTY,new Integer(dp.getPort()));
  }
 else {
    throw new MessageTypeNotSupportedException(message,getClass());
  }
}
