{
  for (  Connector connector : muleContext.getRegistry().lookupObjects(Connector.class)) {
    if (connector instanceof AbstractConnector) {
      for (Iterator<?> iterator=((AbstractConnector)connector).getReceivers().values().iterator(); iterator.hasNext(); ) {
        EndpointServiceMBean mBean=new EndpointService((MessageReceiver)iterator.next());
        String fullName=buildFullyQualifiedEndpointName(mBean,connector);
        if (logger.isInfoEnabled()) {
          logger.info("Attempting to register service with name: " + fullName);
        }
        ObjectName on=jmxSupport.getObjectName(fullName);
        mBeanServer.registerMBean(mBean,on);
        if (logger.isInfoEnabled()) {
          logger.info("Registered Endpoint Service with name: " + on);
        }
      }
    }
 else {
      logger.warn("Connector: " + connector + " is not an istance of AbstractConnector, cannot obtain Endpoint MBeans from it");
    }
  }
}
