{
  try {
    logger.info("Creating and starting JMX agent connector Server");
    if (connectorServerUrl != null) {
      JMXServiceURL url=new JMXServiceURL(connectorServerUrl);
      if (connectorServerProperties == null) {
        connectorServerProperties=new HashMap(DEFAULT_CONNECTOR_SERVER_PROPERTIES);
      }
      if (!credentials.isEmpty()) {
        JMXAuthenticator jmxAuthenticator=(JMXAuthenticator)ClassUtils.instanciateClass(DEFAULT_JMX_AUTHENTICATOR);
        ((SimplePasswordJmxAuthenticator)jmxAuthenticator).setCredentials(credentials);
        connectorServerProperties.put(JMXConnectorServer.AUTHENTICATOR,jmxAuthenticator);
      }
      connectorServer=JMXConnectorServerFactory.newJMXConnectorServer(url,connectorServerProperties,mBeanServer);
      connectorServer.start();
    }
  }
 catch (  ExportException e) {
    throw new JmxManagementException(CoreMessages.failedToStart("Jmx Agent"),e);
  }
catch (  Exception e) {
    throw new JmxManagementException(CoreMessages.failedToStart("Jmx Agent"),e);
  }
}
