{
  setMessageProperties(session,message,endpoint);
  if (logger.isDebugEnabled()) {
    try {
      logger.debug("Message being sent to: " + endpoint.getEndpointURI() + " Message payload: \n"+ StringMessageUtils.truncate(message.getPayloadAsString(),100,false));
    }
 catch (    Exception e) {
      logger.debug("Message being sent to: " + endpoint.getEndpointURI() + " Message payload: \n(unable to retrieve payload: "+ e.getMessage());
    }
  }
  session.dispatchEvent(message,endpoint);
  if (routerStatistics != null) {
    if (routerStatistics.isEnabled()) {
      routerStatistics.incrementRoutedMessage(endpoint);
    }
  }
}
