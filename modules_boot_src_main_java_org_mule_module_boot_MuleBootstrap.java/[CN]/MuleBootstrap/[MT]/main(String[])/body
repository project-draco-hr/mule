{
  CommandLine commandLine=parseCommandLine(args);
  String[] remainingArgs=commandLine.getArgs();
  prepareBootstrapPhase(commandLine);
  String mainClassName=commandLine.getOptionValue("main");
  if (commandLine.hasOption("version")) {
    WrapperManager.start(new VersionWrapper(),remainingArgs);
  }
 else   if (mainClassName == null || mainClassName.equals(MuleServerWrapper.class.getName())) {
    System.out.println("Starting the Mule Server...");
    WrapperManager.start(new MuleServerWrapper(),remainingArgs);
  }
 else {
    String[] appArgs=new String[remainingArgs.length + 1];
    appArgs[0]=mainClassName;
    System.arraycopy(remainingArgs,0,appArgs,1,remainingArgs.length);
    System.out.println("Starting class " + mainClassName + "...");
    WrapperSimpleApp.main(appArgs);
  }
}
