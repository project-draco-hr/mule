{
  UMOEndpointURI endpointUri=null;
  UMOEndpoint endpoint=(UMOEndpoint)recipientCache.get(recipient);
  if (endpoint != null) {
    return endpoint;
  }
  try {
    endpointUri=new MuleEndpointURI(recipient);
    endpoint=MuleEndpoint.getOrCreateEndpointForUri(endpointUri,UMOEndpoint.ENDPOINT_TYPE_SENDER);
  }
 catch (  UMOException e) {
    throw new RoutingException(message,endpoint,e);
  }
  UMOEndpoint existingEndpoint=(UMOEndpoint)recipientCache.putIfAbsent(recipient,endpoint);
  if (existingEndpoint != null) {
    endpoint=existingEndpoint;
  }
  return endpoint;
}
