{
  if (!CollectionUtils.containsType(messageProcessors,EndpointAwareMessageProcessor.class)) {
    return messageProcessors;
  }
  List<MessageProcessor> newMessageProcessors=new ArrayList<MessageProcessor>(messageProcessors.size());
  for (  MessageProcessor mp : messageProcessors) {
    if (!(mp instanceof EndpointAwareMessageProcessor)) {
      newMessageProcessors.add(mp);
    }
 else {
      MessageProcessor newMp=((EndpointAwareMessageProcessor)mp).injectEndpoint(this);
      if (newMp != null) {
        newMessageProcessors.add(newMp);
      }
    }
  }
  return newMessageProcessors;
}
