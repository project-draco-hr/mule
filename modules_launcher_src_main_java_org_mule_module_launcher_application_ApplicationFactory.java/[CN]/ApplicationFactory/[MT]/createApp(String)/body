{
  AppBloodhound bh=new DefaultAppBloodhound();
  final ApplicationDescriptor descriptor=bh.fetch(appName);
  if (descriptor.isPrivileged()) {
    final PriviledgedMuleApplication delegate=new PriviledgedMuleApplication(appName);
    delegate.setDeploymentService(deploymentService);
    delegate.setCoreExtensions(coreExtensions);
    return new ApplicationWrapper(delegate);
  }
 else {
    return new ApplicationWrapper(new DefaultMuleApplication(appName));
  }
}
