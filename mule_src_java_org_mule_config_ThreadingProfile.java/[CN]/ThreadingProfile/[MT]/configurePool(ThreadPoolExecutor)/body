{
  if (maxThreadsActive < maxThreadsIdle)   maxThreadsIdle=maxThreadsActive;
  pool.setCorePoolSize(maxThreadsIdle);
  pool.setMaximumPoolSize(maxThreadsActive);
  pool.setKeepAliveTime(threadTTL,TimeUnit.MILLISECONDS);
  if (rejectedExecutionHandler != null) {
    pool.setRejectedExecutionHandler(rejectedExecutionHandler);
  }
  if (threadFactory != null) {
    pool.setThreadFactory(threadFactory);
  }
switch (poolExhaustPolicy) {
case WHEN_EXHAUSTED_DISCARD_OLDEST:
{
      pool.setRejectedExecutionHandler(new ThreadPoolExecutor.DiscardOldestPolicy());
      break;
    }
case WHEN_EXHAUSTED_RUN:
{
    pool.setRejectedExecutionHandler(new ThreadPoolExecutor.CallerRunsPolicy());
    break;
  }
case WHEN_EXHAUSTED_ABORT:
{
  pool.setRejectedExecutionHandler(new ThreadPoolExecutor.AbortPolicy());
  break;
}
case WHEN_EXHAUSTED_DISCARD:
{
pool.setRejectedExecutionHandler(new ThreadPoolExecutor.DiscardPolicy());
break;
}
case WHEN_EXHAUSTED_WAIT:
{
pool.setRejectedExecutionHandler(new WaitPolicy(threadWaitTimeout,TimeUnit.MILLISECONDS));
break;
}
default :
{
pool.setRejectedExecutionHandler(new WaitPolicy(threadWaitTimeout,TimeUnit.MILLISECONDS));
break;
}
}
}
