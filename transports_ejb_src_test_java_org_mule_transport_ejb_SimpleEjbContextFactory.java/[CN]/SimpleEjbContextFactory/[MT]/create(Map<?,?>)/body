{
  Hashtable<String,Object> env=new Hashtable<String,Object>();
  env.put(Context.INITIAL_CONTEXT_FACTORY,MuleInitialContextFactory.class.getName());
  InitialContext context=new InitialContext(env);
  for (  Map.Entry<?,?> entry : properties.entrySet()) {
    Object key=entry.getKey();
    if (key instanceof String) {
      Object value=entry.getValue();
      logger.debug("Binding " + key + " to "+ value);
      context.bind((String)key,value);
    }
  }
  return context;
}
