{
synchronized (registry) {
    try {
      Writer w=new FileWriter(FileUtils.newFile(registry.getStoreLocation()));
      getXStream().toXML(registry,w);
      w.close();
    }
 catch (    Exception e) {
      throw new RegistryException("Could not save registry",e);
    }
  }
}
