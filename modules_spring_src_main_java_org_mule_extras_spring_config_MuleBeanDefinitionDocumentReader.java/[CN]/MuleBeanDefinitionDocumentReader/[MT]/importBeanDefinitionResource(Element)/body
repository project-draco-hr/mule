{
  String location=ele.getAttribute(RESOURCE_ATTRIBUTE);
  if (!StringUtils.hasText(location)) {
    getReaderContext().error("Resource location must not be empty",ele);
    return;
  }
  location=SystemPropertyUtils.resolvePlaceholders(location);
  if (ResourcePatternUtils.isUrl(location)) {
    try {
      int importCount=getReaderContext().getReader().loadBeanDefinitions(location);
      if (logger.isDebugEnabled()) {
        logger.debug("Imported " + importCount + " bean definitions from URL location ["+ location+ "]");
      }
    }
 catch (    BeanDefinitionStoreException ex) {
      getReaderContext().error("Failed to import bean definitions from URL location [" + location + "]",ele,ex);
    }
  }
 else {
    try {
      Resource relativeResource=getReaderContext().getResource().createRelative(location);
      int importCount=getReaderContext().getReader().loadBeanDefinitions(relativeResource);
      if (logger.isDebugEnabled()) {
        logger.debug("Imported " + importCount + " bean definitions from relative location ["+ location+ "]");
      }
    }
 catch (    IOException ex) {
      if (logger.isDebugEnabled()) {
        logger.debug("Invalid relative resource location [" + location + "] to import bean definitions from, will try loading from classpath");
      }
      Resource classpathResource=new ClassPathResource(location);
      int importCount=getReaderContext().getReader().loadBeanDefinitions(classpathResource);
      if (logger.isDebugEnabled()) {
        logger.debug("Imported " + importCount + " bean definitions from classpath resource ["+ location+ "]");
      }
    }
catch (    BeanDefinitionStoreException ex) {
      if (logger.isDebugEnabled()) {
        logger.debug("Failed to import bean definitions from relative location [" + location + "], will try loading from classpath");
      }
      Resource classpathResource=new ClassPathResource(location);
      int importCount=getReaderContext().getReader().loadBeanDefinitions(classpathResource);
      if (logger.isDebugEnabled()) {
        logger.debug("Imported " + importCount + " bean definitions from classpath resource ["+ location+ "]");
      }
    }
  }
  getReaderContext().fireImportProcessed(location,extractSource(ele));
}
