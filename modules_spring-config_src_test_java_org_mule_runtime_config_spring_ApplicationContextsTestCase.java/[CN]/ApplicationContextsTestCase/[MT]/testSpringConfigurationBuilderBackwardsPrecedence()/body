{
  context=new DefaultMuleContextFactory().createMuleContext();
  ApplicationContext appContext=new ClassPathXmlApplicationContext("application-context-2.xml");
  ConfigurationBuilder builder=new SpringConfigurationBuilder(appContext);
  builder.configure(context);
  appContext=new ClassPathXmlApplicationContext("application-context.xml");
  builder=new SpringConfigurationBuilder(appContext);
  builder.configure(context);
  context.start();
  Object orange=context.getRegistry().lookupObject("orange");
  assertNotNull(orange);
  assertTrue(orange instanceof Orange);
  assertEquals("Pirulo",((Orange)orange).getBrand());
}
