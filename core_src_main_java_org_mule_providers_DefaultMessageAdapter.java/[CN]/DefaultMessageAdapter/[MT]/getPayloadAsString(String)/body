{
  if (message instanceof byte[]) {
    if (encoding != null) {
      return new String((byte[])message,encoding);
    }
 else {
      return new String((byte[])message);
    }
  }
 else   if (message instanceof String) {
    return (String)message;
  }
 else {
    return (String)getPayload(String.class);
  }
}
