{
  UMOEndpoint endpoint=(UMOEndpoint)endpointCache.get(endpointUri);
  if (endpoint == null) {
    endpoint=RegistryContext.getRegistry().lookupEndpoint(endpointUri);
    if (endpoint != null) {
      endpoint.setType(UMOEndpoint.ENDPOINT_TYPE_SENDER);
      endpoint.setTransformer(((AbstractConnector)endpoint.getConnector()).getDefaultOutboundTransformer());
    }
 else {
      UMOEndpointURI ep=new MuleEndpointURI(endpointUri);
      endpoint=event.getManagementContext().getRegistry().getOrCreateEndpointForUri(ep,UMOEndpoint.ENDPOINT_TYPE_SENDER);
      endpointCache.put(endpointUri,endpoint);
    }
  }
  return endpoint;
}
