{
  MuleApplicationEvent event=new MuleApplicationEvent("Event from a spring bean","vm://testBean2");
  TestSubscriptionEventBean bean2=(TestSubscriptionEventBean)context.getBean("testSubscribingEventBean2");
  assertNotNull(bean2);
  EventCallback callback=new EventCallback(){
    public void eventReceived(    UMOEventContext context,    Object o) throws Exception {
      eventCount++;
    }
  }
;
  bean2.setEventCallback(callback);
  context.publishEvent(event);
  Thread.sleep(2000);
  assertEquals(1,eventCount);
}
