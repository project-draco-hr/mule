{
  Collection<Extension> capableExtensions=extensionManager.getExtensionsCapableOf(XmlCapability.class);
  if (CollectionUtils.isEmpty(capableExtensions)) {
    throw new IllegalArgumentException(String.format("Could not find any extensions supporting XML capabilities. Can't process namespace %s",namespace));
  }
  for (  Extension extension : capableExtensions) {
    XmlCapability capability=extension.getCapabilities(XmlCapability.class).iterator().next();
    if (namespace.equals(capability.getSchemaLocation())) {
      return extension;
    }
  }
  throw new IllegalArgumentException(String.format("Could not find extension associated to namespace %s",namespace));
}
