{
  this.lockFactory=getEndpoint().getMuleContext().getLockFactory();
  boolean synchronousProcessing=false;
  if (getFlowConstruct() instanceof Flow) {
    synchronousProcessing=((Flow)getFlowConstruct()).getProcessingStrategy() instanceof SynchronousProcessingStrategy;
  }
  this.poolOnPrimaryInstanceOnly=Boolean.valueOf(System.getProperty(MULE_TRANSPORT_FILE_SINGLEPOLLINSTANCE,"false")) || !synchronousProcessing;
  ObjectStoreManager objectStoreManager=getEndpoint().getMuleContext().getRegistry().get(MuleProperties.OBJECT_STORE_MANAGER);
  filesBeingProcessingObjectStore=objectStoreManager.getObjectStore(getEndpoint().getName(),false,1000,60000,20000);
}
