{
  HttpResponseBuilder httpResponseBuilder=createHttpResponseBuilder();
  Map<String,String> headers=new HashMap<String,String>();
  headers.put(HttpConstants.HEADER_EXPIRES,"#[now]");
  httpResponseBuilder.setHeaders(headers);
  Date now=new Date();
  when(mockExpressionManager.parse("Expires",mockMuleMessage)).thenReturn("Expires");
  when(mockExpressionManager.isExpression("#[now]")).thenReturn(true);
  when(mockExpressionManager.evaluate("#[now]",mockMuleMessage)).thenReturn(now);
  HttpResponse httpResponse=new HttpResponse();
  httpResponseBuilder.setHeaders(httpResponse,mockMuleMessage);
  SimpleDateFormat httpDateFormatter=new SimpleDateFormat(HttpConstants.DATE_FORMAT_RFC822,Locale.US);
  httpDateFormatter.setTimeZone(TimeZone.getTimeZone("GMT"));
  validateHeader(httpResponse.getHeaders(),HttpConstants.HEADER_EXPIRES,httpDateFormatter.format(now));
}
