{
  MuleEvent result;
  if (messagingExceptionHandler != null) {
    result=messagingExceptionHandler.handleException(exception,exception.getEvent());
  }
 else {
    result=flow.getExceptionListener().handleException(exception,exception.getEvent());
  }
  exception.setProcessedEvent(result);
  if (!exception.handled()) {
    delegate.processExceptionReplyTo(exception,replyTo);
  }
 else {
    try {
      delegate.processReplyTo(exception.getEvent(),exception.getEvent().getMessage(),replyTo);
    }
 catch (    MuleException e) {
      delegate.processExceptionReplyTo(new MessagingException(exception.getEvent(),e),replyTo);
    }
  }
}
