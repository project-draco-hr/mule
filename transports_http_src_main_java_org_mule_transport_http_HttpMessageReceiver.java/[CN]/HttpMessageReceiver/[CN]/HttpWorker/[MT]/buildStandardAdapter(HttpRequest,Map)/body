{
  final RequestLine requestLine=request.getRequestLine();
  sendExpect100(headers,requestLine);
  Object body=request.getBody();
  if (body == null) {
    body=requestLine.getUri();
  }
 else {
    if (!endpoint.isSynchronous()) {
      logger.debug("Reading HTTP POST InputStream into byte[] for asynchronous messaging.");
      body=new ByteArrayInputStream(IOUtils.toByteArray((InputStream)body));
    }
  }
  return connector.getMessageAdapter(new Object[]{body,headers});
}
