{
  String encoding=null;
  if (src instanceof MessageAdapter) {
    encoding=((MessageAdapter)src).getEncoding();
  }
  if (encoding == null && endpoint != null) {
    encoding=endpoint.getEncoding();
  }
 else   if (encoding == null) {
    encoding=System.getProperty(MuleProperties.MULE_ENCODING_SYSTEM_PROPERTY);
  }
  return encoding;
}
