{
  try {
    try {
      if (!folder.isOpen()) {
        folder.open(Folder.READ_WRITE);
      }
    }
 catch (    Exception e) {
    }
    int count=folder.getMessageCount();
    if (count > 0) {
      Message[] messages=folder.getMessages();
      MessageCountEvent event=new MessageCountEvent(folder,MessageCountEvent.ADDED,true,messages);
      messagesAdded(event);
    }
 else     if (count == -1) {
      throw new MessagingException("Cannot monitor folder: " + folder.getFullName() + " as folder is closed");
    }
    folder.close(true);
  }
 catch (  MessagingException e) {
    handleException("Failed to read messages from folder: " + folder.getFullName(),e);
  }
}
