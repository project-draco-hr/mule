{
  Class factoryClass;
  try {
    factoryClass=ClassUtils.loadClass(factoryClassName,getClass());
  }
 catch (  ClassNotFoundException e) {
    if (MuleNamespaceHandler.TRANSACTION_COLLECTION_FACTORY_CLASSNAME.equals(factoryClassName)) {
      throw new UnsupportedOperationException("Multi-transaction support is an EE-only feature. " + "Please consider upgrading to Mule EE.");
    }
 else {
      throw new MuleRuntimeException(MessageFactory.createStaticMessage("Failed to load factory class " + factoryClassName),e);
    }
  }
  commonInit(factoryClass);
  MuleDefinitionParser factoryParser=getDelegate(1);
  factoryParser.registerPreProcessor(new BlockAttribute(new String[]{FACTORY_CLASS,FACTORY_REF}));
}
