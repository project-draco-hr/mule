{
  logger.error("Failed to process admin request: " + e.getMessage(),e);
  if (result == null) {
    result=new MuleMessage(NullPayload.getInstance(),(Map)null);
  }
  result.setExceptionPayload(new ExceptionPayload(e));
  try {
    ByteArrayOutputStream out=new ByteArrayOutputStream();
    wireFormat.write(out,result,getEncoding());
    return out.toString(getEncoding());
  }
 catch (  Exception e1) {
    logger.error("Failed to format message, using direct string (details at debug level): " + e1.getMessage());
    logger.debug(e1.toString(),e1);
    return e.getMessage();
  }
}
