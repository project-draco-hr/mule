{
  UMOMessage result=null;
  try {
    UMOImmutableEndpoint endpoint=context.getManagementContext().getRegistry().lookupOutboundEndpoint(action.getResourceIdentifier(),MuleServer.getManagementContext());
    long timeout=MapUtils.getLongValue(action.getProperties(),MuleProperties.MULE_EVENT_TIMEOUT_PROPERTY,getSynchronousEventTimeout());
    result=endpoint.getConnector().receive(action.getResourceIdentifier(),timeout);
    if (result != null) {
      UMOTransformer trans=((AbstractConnector)endpoint.getConnector()).getDefaultInboundTransformer();
      if (trans != null) {
        Object payload=trans.transform(result.getPayload());
        result=new MuleMessage(payload,result);
      }
      ByteArrayOutputStream out=new ByteArrayOutputStream();
      wireFormat.write(out,result,getEncoding());
      return out.toByteArray();
    }
 else {
      return null;
    }
  }
 catch (  Exception e) {
    return handleException(result,e);
  }
}
