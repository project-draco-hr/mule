{
  MessagingException messagingException=new FlowRunner(muleContext,"transformationErrorFlow").withPayload(new InputStream(){
    @Override public int read() throws IOException {
      throw new IOException();
    }
  }
).runExpectingException();
  assertThat(messagingException.getEvent().getError().get().getErrorType().getIdentifier(),is("TRANSFORMATION"));
}
