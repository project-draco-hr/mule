{
  for (Enumeration e=ring.aliases(); e.hasMoreElements(); ) {
    String aliasId=(String)e.nextElement();
    KeyBundle bundle=ring.getKeyBundle(aliasId);
    if (bundle != null) {
      for (Iterator users=bundle.getPrincipals(); users.hasNext(); ) {
        Principal princ=(Principal)users.next();
        System.out.println("aliasId:" + aliasId + ", user:"+ princ.toString());
        if (princ.toString().equals(principal)) {
          return bundle;
        }
      }
    }
  }
  throw new Exception("KeyBundle not found for " + principal);
}
