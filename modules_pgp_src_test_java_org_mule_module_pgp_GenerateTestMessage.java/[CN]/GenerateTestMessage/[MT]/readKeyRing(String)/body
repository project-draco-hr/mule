{
  ExtendedKeyStore ring=null;
  try {
    FileInputStream in=new FileInputStream(filename);
    ring=(ExtendedKeyStore)ExtendedKeyStore.getInstance("OpenPGP/KeyRing");
    ring.load(in,null);
    in.close();
  }
 catch (  IOException ioe) {
    System.err.println("IOException... You did remember to run the " + "GenerateAndWriteKey example first, right?");
    ioe.printStackTrace();
    System.exit(-1);
  }
catch (  NoSuchAlgorithmException nsae) {
    System.err.println("Cannot find the OpenPGP KeyRing. " + "This usually means that the Cryptix OpenPGP provider is not " + "installed correctly.");
    nsae.printStackTrace();
    System.exit(-1);
  }
catch (  KeyStoreException kse) {
    System.err.println("Reading keyring failed.");
    kse.printStackTrace();
    System.exit(-1);
  }
catch (  CertificateException ce) {
    System.err.println("Reading keyring failed.");
    ce.printStackTrace();
    System.exit(-1);
  }
  return ring;
}
