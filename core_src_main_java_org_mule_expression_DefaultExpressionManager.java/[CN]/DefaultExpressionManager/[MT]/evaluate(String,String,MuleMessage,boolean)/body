{
  ExpressionEvaluator extractor=(ExpressionEvaluator)evaluators.get(evaluator);
  if (extractor == null) {
    throw new IllegalArgumentException(CoreMessages.expressionEvaluatorNotRegistered(evaluator).getMessage());
  }
  Object result=extractor.evaluate(expression,message);
  if (failIfNull && (result == null)) {
    throw new RequiredValueException(CoreMessages.expressionEvaluatorReturnedNull(evaluator,expression));
  }
  if (logger.isDebugEnabled()) {
    logger.debug(MessageFormat.format("Result of expression: {0}:{1} is: {2}",evaluator,expression,result));
  }
  return result;
}
