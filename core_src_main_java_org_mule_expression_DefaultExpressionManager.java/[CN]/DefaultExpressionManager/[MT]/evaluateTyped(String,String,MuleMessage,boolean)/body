{
  if (evaluator == null) {
    return expressionLanguage.evaluateTyped(expression,message);
  }
  ExpressionEvaluator extractor=getExpressionEvaluator(evaluator);
  TypedValue result=extractor.evaluateTyped(expression,message);
  checkRequiredValue(expression,evaluator,failIfNull,result.getValue());
  return result;
}
