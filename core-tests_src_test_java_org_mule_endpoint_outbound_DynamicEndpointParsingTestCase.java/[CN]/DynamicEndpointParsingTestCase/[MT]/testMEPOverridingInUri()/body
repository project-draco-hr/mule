{
  OutboundEndpoint endpoint=createEndpoint("test://#[header:host]:#[header:port]",MessageExchangePattern.ONE_WAY);
  assertTrue(endpoint instanceof DynamicOutboundEndpoint);
  MuleEvent event=getTestEvent("test");
  event.getMessage().setOutboundProperty("port",12345);
  event.getMessage().setOutboundProperty("host","localhost");
  MuleEvent response=endpoint.process(event);
  assertSame(VoidMuleEvent.getInstance(),response);
  endpoint=createRequestResponseEndpoint("test://#[header:host]:#[header:port]?exchangePattern=REQUEST_RESPONSE");
  assertTrue(endpoint instanceof DynamicOutboundEndpoint);
  event=getTestEvent("test");
  event.getMessage().setOutboundProperty("port",12345);
  event.getMessage().setOutboundProperty("host","localhost");
  response=endpoint.process(event);
  assertNotNull(response);
  assertEquals(MessageExchangePattern.REQUEST_RESPONSE,endpoint.getExchangePattern());
}
