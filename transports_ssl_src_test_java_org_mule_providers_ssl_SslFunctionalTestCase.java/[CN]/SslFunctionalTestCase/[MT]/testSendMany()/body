{
  MuleClient client=new MuleClient();
  Map props=new HashMap();
  for (int i=0; i < NUM_MESSAGES; ++i) {
    UMOMessage result=client.send("sendManyEndpoint",TEST_MESSAGE,props);
    assertEquals(TEST_MESSAGE + " Received Async",result.getPayloadAsString());
  }
  UMOModel model=managementContext.getRegistry().lookupModel("main");
  SedaComponent seda=(SedaComponent)model.getComponent("testComponent2");
  assertNotNull("Null service",seda);
  FunctionalTestComponent ftc=(FunctionalTestComponent)seda.getInstance();
  assertNotNull("Null FTC",ftc);
  ResponseWriterCallback rwc=(ResponseWriterCallback)ftc.getEventCallback();
  assertNotNull("Null RWC",rwc);
  assertEquals(NUM_MESSAGES,rwc.getCallbackCount());
}
