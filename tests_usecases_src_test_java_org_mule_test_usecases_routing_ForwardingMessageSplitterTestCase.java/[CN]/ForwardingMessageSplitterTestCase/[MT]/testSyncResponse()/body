{
  MuleClient client=new MuleClient();
  List payload=new ArrayList();
  payload.add("hello");
  payload.add(Integer.valueOf(3));
  payload.add(new Exception());
  client.send("vm://in.queue",payload,null);
  UMOMessage m=client.receive("vm://component.1",2000);
  assertNotNull(m);
  assertTrue(m.getPayload() instanceof String);
  m=client.receive("vm://component.2",2000);
  assertNotNull(m);
  assertTrue(m.getPayload() instanceof Integer);
  m=client.receive("vm://error.queue",2000);
  assertNotNull(m);
  assertTrue(m.getPayload() instanceof Exception);
}
