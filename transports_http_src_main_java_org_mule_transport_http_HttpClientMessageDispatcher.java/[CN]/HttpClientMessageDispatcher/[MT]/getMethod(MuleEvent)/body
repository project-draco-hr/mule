{
  client.getHttpConnectionManager().getParams().setConnectionTimeout(endpoint.getResponseTimeout());
  client.getHttpConnectionManager().getParams().setSoTimeout(endpoint.getResponseTimeout());
  MuleMessage msg=event.getMessage();
  setPropertyFromEndpoint(event,msg,HttpConnector.HTTP_CUSTOM_HEADERS_MAP_PROPERTY);
  HttpMethod httpMethod;
  Object body=event.getMessage().getPayload();
  if (body instanceof HttpMethod) {
    httpMethod=(HttpMethod)body;
  }
 else {
    httpMethod=(HttpMethod)sendTransformer.transform(msg);
  }
  httpMethod.setFollowRedirects("true".equalsIgnoreCase((String)endpoint.getProperty("followRedirects")));
  return httpMethod;
}
