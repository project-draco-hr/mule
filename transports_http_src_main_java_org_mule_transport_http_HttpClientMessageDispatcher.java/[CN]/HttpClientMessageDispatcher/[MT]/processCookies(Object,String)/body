{
  if (cookieObject instanceof Cookie[]) {
    Cookie[] cookies=(Cookie[])cookieObject;
    if (cookies != null && cookies.length > 0) {
      client.getParams().setCookiePolicy(CookieHelper.getCookiePolicy(policy));
      client.getState().addCookies(cookies);
    }
  }
 else   if (cookieObject instanceof Map) {
    client.getParams().setCookiePolicy(CookiePolicy.RFC_2109);
    String host=this.getEndpoint().getEndpointURI().getHost();
    String path=this.getEndpoint().getEndpointURI().getPath();
    Map cookieMap=(Map)cookieObject;
    Iterator keyIter=cookieMap.keySet().iterator();
    while (keyIter.hasNext()) {
      String key=(String)keyIter.next();
      String value=(String)cookieMap.get(key);
      Cookie cookie=new Cookie(host,key,value,path,null,false);
      client.getState().addCookie(cookie);
    }
  }
 else   if (cookieObject != null) {
    throw new IllegalArgumentException("Invalid cookies " + cookieObject);
  }
}
