{
  if (cookieObject instanceof Cookie[]) {
    Cookie[] cookies=(Cookie[])cookieObject;
    if (cookies != null && cookies.length > 0) {
      client.getParams().setCookiePolicy(CookieHelper.getCookiePolicy(policy));
      for (      Cookie cookie : cookies) {
        cookie.setDomain(endpoint.getEndpointURI().getHost());
        if (StringUtils.isNotBlank(endpoint.getEndpointURI().getPath())) {
          cookie.setPath(endpoint.getEndpointURI().getPath());
        }
        cookie.setSecure(endpoint.getEndpointURI().getScheme().equalsIgnoreCase("https"));
        client.getState().addCookie(cookie);
      }
    }
  }
 else   if (cookieObject instanceof Map) {
    client.getParams().setCookiePolicy(CookiePolicy.RFC_2109);
    String host=this.getEndpoint().getEndpointURI().getHost();
    String path=this.getEndpoint().getEndpointURI().getPath();
    Map cookieMap=(Map)cookieObject;
    Iterator keyIter=cookieMap.keySet().iterator();
    while (keyIter.hasNext()) {
      String key=(String)keyIter.next();
      String cookieValue=(String)cookieMap.get(key);
      String value=event.getMuleContext().getExpressionManager().parse(cookieValue,event.getMessage());
      Cookie cookie=new Cookie(host,key,value,path,null,false);
      client.getState().addCookie(cookie);
    }
  }
 else   if (cookieObject != null) {
    throw new IllegalArgumentException("Invalid cookies " + cookieObject);
  }
}
