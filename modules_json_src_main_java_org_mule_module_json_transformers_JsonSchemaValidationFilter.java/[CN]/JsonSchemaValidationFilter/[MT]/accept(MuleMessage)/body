{
  String jsonString=null;
  try {
    if (isReturnResult()) {
      TransformerInputs transformerInputs=new TransformerInputs(null,msg.getPayload());
      Writer jsonWriter=new StringWriter();
      if (transformerInputs.getInputStream() != null) {
        jsonWriter=new StringWriter();
        IOUtils.copy(transformerInputs.getInputStream(),jsonWriter,msg.getEncoding());
      }
 else {
        IOUtils.copy(transformerInputs.getReader(),jsonWriter);
      }
      jsonString=jsonWriter.toString();
      msg.setPayload(jsonString);
    }
    String xmlString=(String)jToX.transform(msg.getPayload(),msg.getEncoding());
    MuleMessage xmlMessage=new DefaultMuleMessage(xmlString,msg,msg.getMuleContext());
    boolean accepted=super.accept(xmlMessage);
    if (jsonString != null) {
      msg.setPayload(jsonString);
    }
    return accepted;
  }
 catch (  Exception ex) {
    return false;
  }
}
