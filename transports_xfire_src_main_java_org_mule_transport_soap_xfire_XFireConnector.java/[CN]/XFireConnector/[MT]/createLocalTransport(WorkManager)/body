{
  if (transportClass == null) {
    transport=new MuleLocalTransport(wm);
  }
 else {
    try {
      Class transportClazz=ClassUtils.loadClass(transportClass,this.getClass());
      try {
        Constructor constructor=transportClazz.getConstructor(new Class[]{WorkManager.class});
        transport=(Transport)constructor.newInstance(new Object[]{wm});
      }
 catch (      NoSuchMethodException ne) {
        if (logger.isDebugEnabled()) {
          logger.debug(ne.getCause());
        }
      }
      if (transport == null) {
        Constructor constructor=transportClazz.getConstructor(null);
        transport=(Transport)constructor.newInstance(null);
      }
    }
 catch (    Exception e) {
      throw new MuleRuntimeException(CoreMessages.failedToLoad("xfire service transport"),e);
    }
  }
}
