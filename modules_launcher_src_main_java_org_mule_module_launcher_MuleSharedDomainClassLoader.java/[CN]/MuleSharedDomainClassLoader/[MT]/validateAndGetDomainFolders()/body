{
  File oldDomainDir=new File(MuleContainerBootstrapUtils.getMuleHome(),OLD_DOMAIN_LIBRARY_FOLDER + File.separator + getArtifactName());
  if (oldDomainDir.exists()) {
    if (!oldDomainDir.canRead()) {
      throw new IllegalArgumentException(String.format("Shared ClassLoader Domain '%s' is not accessible",getArtifactName()));
    }
    domainLibraryFolder=oldDomainDir;
    domainDir=oldDomainDir;
    return;
  }
  File newDomainDir=new File(MuleContainerBootstrapUtils.getMuleDomainsDir() + File.separator + getArtifactName());
  if (!newDomainDir.exists()) {
    throw new IllegalArgumentException(String.format("Domain '%s' is not accessible",getArtifactName()));
  }
  if (!newDomainDir.canRead()) {
    throw new IllegalArgumentException(String.format("Domain '%s' is not accessible",getArtifactName()));
  }
  domainDir=newDomainDir;
  domainLibraryFolder=new File(newDomainDir,DOMAIN_LIBRARY_FOLDER);
  logger.info(String.format("Using domain dir %s for domain %s",domainDir.getAbsolutePath(),getArtifactName()));
}
