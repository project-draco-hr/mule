{
  if (artifactClassLoaderHolder == null) {
    artifactClassLoaderHolder=createClassLoaderTestRunner(clazz);
  }
  final Class<?> isolatedTestClass=getTestClass(clazz);
  final Class<? extends Annotation> runnerDelegateToClass=(Class<? extends Annotation>)artifactClassLoaderHolder.loadClassWithApplicationClassLoader(RunnerDelegateTo.class.getName());
  final AnnotatedBuilder annotatedBuilder=new AnnotatedBuilder(builder);
  delegate=annotatedBuilder.buildRunner(getAnnotationAttributeFrom(isolatedTestClass,runnerDelegateToClass,"value"),isolatedTestClass);
  if (!pluginClassLoadersInjected) {
    injectPluginsClassLoaders(artifactClassLoaderHolder,isolatedTestClass);
    pluginClassLoadersInjected=true;
  }
}
