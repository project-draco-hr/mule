{
  try {
    XFire xfire=getXfire();
    String wsdlUrl=endpoint.getEndpointURI().getAddress();
    String serviceName=endpoint.getEndpointURI().getAddress();
    if (endpoint.getProperty(WSDL_URL_PROPERTY) != null && StringUtils.isNotBlank(endpoint.getProperty(WSDL_URL_PROPERTY).toString())) {
      wsdlUrl=(String)endpoint.getProperty(WSDL_URL_PROPERTY);
    }
    if (serviceName.indexOf("?") > -1) {
      serviceName=serviceName.substring(0,serviceName.lastIndexOf('?'));
    }
    Service service=xfire.getServiceRegistry().getService(new QName(serviceName));
    if (service == null) {
      service=new Client(new URL(wsdlUrl)).getService();
      service.setName(new QName(serviceName));
      xfire.getServiceRegistry().register(service);
    }
    return createXFireWsdlClient(endpoint,service,xfire,wsdlUrl);
  }
 catch (  Exception ex) {
    connectable.disconnect();
    throw ex;
  }
}
