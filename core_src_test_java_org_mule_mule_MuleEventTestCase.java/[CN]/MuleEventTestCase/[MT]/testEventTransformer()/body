{
  String data="Test Data";
  Endpoint endpoint=getTestOutboundEndpoint("Test");
  endpoint.setTransformers(CollectionUtils.singletonList(new TestEventTransformer()));
  MuleEvent event=getTestEvent(data,endpoint);
  RequestContext.setEvent(event);
  assertEquals("MuleEvent data should equal " + data,data,event.getMessage().getPayload());
  assertEquals("MuleEvent data should equal " + data,data,event.getMessageAsString());
  assertEquals("MuleEvent data should equal 'Transformed Test Data'","Transformed Test Data",event.transformMessage());
  assertEquals("MuleEvent data should be a byte array 28 bytes in length",21,event.transformMessageToBytes().length);
}
