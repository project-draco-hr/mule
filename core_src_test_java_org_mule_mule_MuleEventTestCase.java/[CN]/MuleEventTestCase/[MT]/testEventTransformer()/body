{
  String data="Test Data";
  UMOEndpoint endpoint=getTestEndpoint("Test",UMOEndpoint.ENDPOINT_TYPE_SENDER);
  endpoint.setTransformers(CollectionUtils.singletonList(new TestEventTransformer()));
  UMOEvent event=getTestEvent(data,endpoint);
  RequestContext.setEvent(event);
  assertEquals("Event data should equal " + data,data,event.getMessage().getPayload());
  assertEquals("Event data should equal " + data,data,event.getMessageAsString());
  assertEquals("Event data should equal 'Transformed Test Data'","Transformed Test Data",event.getTransformedMessage());
  assertEquals("Event data should be a byte array 28 bytes in length",21,event.getTransformedMessageAsBytes().length);
}
