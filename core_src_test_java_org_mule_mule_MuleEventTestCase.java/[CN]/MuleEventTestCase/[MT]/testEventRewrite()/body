{
  String data="Test Data";
  Endpoint endpoint=getTestEndpoint("Test",Endpoint.ENDPOINT_TYPE_SENDER);
  endpoint.setTransformers(CollectionUtils.singletonList(new TestEventTransformer()));
  DefaultMuleEvent event=new DefaultMuleEvent(new DefaultMuleMessage(data),endpoint,getTestSession(getTestComponent("apple",Apple.class)),true,new ResponseOutputStream(System.out));
  assertNotNull(event.getId());
  assertNotNull(event.getSession());
  assertNotNull(event.getEndpoint());
  assertNotNull(event.getOutputStream());
  assertNotNull(event.getMessage());
  assertEquals(data,event.getMessageAsString());
  MuleEvent event2=new DefaultMuleEvent(new DefaultMuleMessage("New Data"),event);
  assertNotNull(event2.getId());
  assertEquals(event.getId(),event2.getId());
  assertNotNull(event2.getSession());
  assertNotNull(event2.getEndpoint());
  assertNotNull(event2.getOutputStream());
  assertNotNull(event2.getMessage());
  assertEquals("New Data",event2.getMessageAsString());
}
