{
  String data="Test Data";
  ImmutableEndpoint endpoint=getTestOutboundEndpoint("Test",CollectionUtils.singletonList(new TestEventTransformer()));
  DefaultMuleEvent event=new DefaultMuleEvent(new DefaultMuleMessage(data),endpoint,getTestSession(getTestService("apple",Apple.class),muleContext),true,new ResponseOutputStream(System.out));
  assertNotNull(event.getId());
  assertNotNull(event.getSession());
  assertNotNull(event.getEndpoint());
  assertNotNull(event.getOutputStream());
  assertNotNull(event.getMessage());
  assertEquals(data,event.getMessageAsString());
  MuleEvent event2=new DefaultMuleEvent(new DefaultMuleMessage("New Data"),event);
  assertNotNull(event2.getId());
  assertEquals(event.getId(),event2.getId());
  assertNotNull(event2.getSession());
  assertNotNull(event2.getEndpoint());
  assertNotNull(event2.getOutputStream());
  assertNotNull(event2.getMessage());
  assertEquals("New Data",event2.getMessageAsString());
}
