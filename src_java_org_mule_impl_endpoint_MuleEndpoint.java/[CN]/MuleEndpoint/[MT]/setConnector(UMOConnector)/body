{
  if (connector != null && endpointUri != null && !endpointUri.getFullScheme().toLowerCase().startsWith(connector.getProtocol().toLowerCase())) {
    throw new IllegalArgumentException("Endpoint scheme must be compatible with the connector scheme. Connector is: " + connector.getProtocol() + ", endpoint is: "+ endpointUri);
  }
  this.connector=connector;
}
