{
  addExplodedAppFromResource("/empty-app.zip","1");
  addExplodedAppFromResource("/empty-app.zip","2");
  addExplodedAppFromResource("/empty-app.zip","3");
  Map<String,Object> startupOptions=new HashMap<String,Object>();
  startupOptions.put("app","3:1:2");
  StartupContext.get().setStartupOptions(startupOptions);
  deploymentService.start();
  assertDeploymentSuccess(deploymentListener,"1");
  assertDeploymentSuccess(deploymentListener,"2");
  assertDeploymentSuccess(deploymentListener,"3");
  assertAppsDir(NONE,new String[]{"1","2","3"},true);
  List<Application> applications=deploymentService.getApplications();
  assertNotNull(applications);
  assertEquals(3,applications.size());
  assertEquals("3",applications.get(0).getAppName());
  assertEquals("1",applications.get(1).getAppName());
  assertEquals("2",applications.get(2).getAppName());
}
