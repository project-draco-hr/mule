{
  deploymentService.start();
  addPackedDomainFromResource("/incompleteDomain.zip");
  assertDeploymentFailure(domainDeploymentListener,"incompleteDomain");
  addPackedDomainFromResource("/dummy-domain.zip");
  assertDeploymentSuccess(domainDeploymentListener,"dummy-domain");
  addPackedDomainFromResource("/empty-domain.zip","incompleteDomain.zip");
  assertDeploymentSuccess(domainDeploymentListener,"incompleteDomain");
  assertEquals("Failed domain still appears as zombie after a successful redeploy",0,deploymentService.getZombieDomains().size());
}
