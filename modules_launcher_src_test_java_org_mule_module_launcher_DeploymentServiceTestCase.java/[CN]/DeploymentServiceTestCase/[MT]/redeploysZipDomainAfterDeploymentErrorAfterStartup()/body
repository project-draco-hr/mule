{
  deploymentService.start();
  addPackedDomainFromResource(incompleteDomainDescriptor.zipPath);
  assertDeploymentFailure(domainDeploymentListener,incompleteDomainDescriptor.id);
  addPackedDomainFromResource(DeploymentServiceTestCase.dummyDomainDescriptor.zipPath);
  assertDeploymentSuccess(domainDeploymentListener,dummyDomainDescriptor.id);
  addPackedDomainFromResource(emptyDomainDescriptor.zipPath,incompleteDomainDescriptor.targetPath);
  assertDeploymentSuccess(domainDeploymentListener,incompleteDomainDescriptor.id);
  assertEquals("Failed domain still appears as zombie after a successful redeploy",0,deploymentService.getZombieDomains().size());
}
