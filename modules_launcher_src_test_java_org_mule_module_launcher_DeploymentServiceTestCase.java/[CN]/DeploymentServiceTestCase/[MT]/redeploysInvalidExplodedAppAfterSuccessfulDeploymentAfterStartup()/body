{
  deploymentService.start();
  addExplodedAppFromResource(dummyAppDescriptor.zipPath,dummyAppDescriptor.id);
  assertApplicationDeploymentSuccess(applicationDeploymentListener,dummyAppDescriptor.id);
  assertAppsDir(NONE,new String[]{dummyAppDescriptor.id},true);
  reset(applicationDeploymentListener);
  File originalConfigFile=new File(appsDir + dummyAppDescriptor.path,MULE_CONFIG_XML_FILE);
  URL url=getClass().getResource(brokenDomainDescriptor.configFilePath);
  File newConfigFile=new File(url.toURI());
  FileUtils.copyFile(newConfigFile,originalConfigFile);
  assertDeploymentFailure(applicationDeploymentListener,dummyAppDescriptor.id);
  assertStatus(dummyAppDescriptor.id,ApplicationStatus.DEPLOYMENT_FAILED);
}
