{
  addPackedDomainFromResource("/dummy-domain.zip");
  deploymentService.start();
  assertDeploymentSuccess(domainDeploymentListener,"dummy-domain");
  assertDomainDir(NONE,new String[]{"dummy-domain"},true);
  assertEquals("Domain has not been properly registered with Mule",1,deploymentService.getDomains().size());
  reset(domainDeploymentListener);
  addPackedDomainFromResource("/dummy-domain.zip");
  assertUndeploymentSuccess(domainDeploymentListener,"dummy-domain");
  assertDeploymentSuccess(domainDeploymentListener,"dummy-domain");
  assertEquals("Domain has not been properly registered with Mule",1,deploymentService.getDomains().size());
  assertDomainDir(NONE,new String[]{"dummy-domain"},true);
}
