{
  Action deployArtifact=new Action(){
    @Override public void perform() throws Exception {
      if (useExplodedMode) {
        addExplodedDomainFromResource(waitDomainDescriptor.zipPath);
      }
 else {
        addPackedDomainFromResource(waitDomainDescriptor.zipPath);
      }
    }
  }
;
  Action verifyAnchorFileDoesNotExists=new Action(){
    @Override public void perform() throws Exception {
      assertDomainAnchorFileDoesNotExists(waitDomainDescriptor.id);
    }
  }
;
  Action verifyDeploymentSuccessful=new Action(){
    @Override public void perform() throws Exception {
      assertDeploymentSuccess(domainDeploymentListener,waitDomainDescriptor.id);
    }
  }
;
  Action verifyAnchorFileExists=new Action(){
    @Override public void perform() throws Exception {
      assertDomainAnchorFileExists(waitDomainDescriptor.id);
    }
  }
;
  deploysArtifactAndVerifyAnchorFileCreatedWhenDeploymentEnds(deployArtifact,verifyAnchorFileDoesNotExists,verifyDeploymentSuccessful,verifyAnchorFileExists);
}
