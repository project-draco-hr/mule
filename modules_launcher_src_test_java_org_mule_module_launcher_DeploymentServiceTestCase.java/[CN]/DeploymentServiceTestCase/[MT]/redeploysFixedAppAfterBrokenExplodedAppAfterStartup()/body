{
  deploymentService.start();
  addExplodedAppFromResource(INCOMPLETE_APP_ZIP_PATH,INCOMPLETE_APP);
  assertDeploymentFailure(applicationDeploymentListener,INCOMPLETE_APP);
  reset(applicationDeploymentListener);
  File originalConfigFile=new File(appsDir + INCOMPLETE_APP_PATH,MULE_CONFIG_XML_FILE);
  URL url=getClass().getResource(EMPTY_CONFIG_XML_FILE_PATH);
  File newConfigFile=new File(url.toURI());
  FileUtils.copyFile(newConfigFile,originalConfigFile);
  assertDeploymentSuccess(applicationDeploymentListener,INCOMPLETE_APP);
  addPackedAppFromResource(DUMMY_APP_ZIP_PATH);
  assertDeploymentSuccess(applicationDeploymentListener,DUMMY_APP);
  assertAppFolderIsMaintained(INCOMPLETE_APP);
}
