{
  deploymentService.start();
  addPackedDomainFromResource(DeploymentServiceTestCase.DUMMY_DOMAIN_ZIP_PATH);
  assertDeploymentSuccess(domainDeploymentListener,DUMMY_DOMAIN);
  assertDomainDir(NONE,new String[]{DUMMY_DOMAIN},true);
  assertEquals("Domain has not been properly registered with Mule",1,deploymentService.getDomains().size());
  reset(domainDeploymentListener);
  addPackedDomainFromResource(DeploymentServiceTestCase.DUMMY_DOMAIN_ZIP_PATH);
  assertUndeploymentSuccess(domainDeploymentListener,DUMMY_DOMAIN);
  assertDeploymentSuccess(domainDeploymentListener,DUMMY_DOMAIN);
  assertEquals("Domain has not been properly registered with Mule",1,deploymentService.getDomains().size());
  assertDomainDir(NONE,new String[]{DUMMY_DOMAIN},true);
}
