{
  Action deployArtifact=new Action(){
    @Override public void perform() throws Exception {
      if (useExplodedMode) {
        addExplodedAppFromResource(waitAppDescriptor.zipPath);
      }
 else {
        addPackedAppFromResource(waitAppDescriptor.zipPath);
      }
    }
  }
;
  Action verifyAnchorFileDoesNotExists=new Action(){
    @Override public void perform() throws Exception {
      assertApplicationAnchorFileDoesNotExists(waitAppDescriptor.id);
    }
  }
;
  Action verifyDeploymentSuccessful=new Action(){
    @Override public void perform() throws Exception {
      assertDeploymentSuccess(applicationDeploymentListener,waitAppDescriptor.id);
    }
  }
;
  Action verifyAnchorFileExists=new Action(){
    @Override public void perform() throws Exception {
      assertApplicationAnchorFileExists(waitAppDescriptor.id);
    }
  }
;
  deploysArtifactAndVerifyAnchorFileCreatedWhenDeploymentEnds(deployArtifact,verifyAnchorFileDoesNotExists,verifyDeploymentSuccessful,verifyAnchorFileExists);
}
