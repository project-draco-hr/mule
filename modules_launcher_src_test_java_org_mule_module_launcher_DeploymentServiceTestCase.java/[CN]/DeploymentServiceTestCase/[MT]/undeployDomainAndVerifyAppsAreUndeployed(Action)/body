{
  deploymentService.start();
  addPackedDomainFromResource(DUMMY_DOMAIN_ZIP_PATH);
  assertDeploymentSuccess(domainDeploymentListener,DUMMY_DOMAIN);
  addPackedAppFromResource(DUMMY_DOMAIN_APP1_ZIP_PATH);
  assertDeploymentSuccess(applicationDeploymentListener,DUMMY_DOMAIN_APP1);
  addPackedAppFromResource(DUMMY_DOMAIN_APP2_ZIP_PATH);
  assertDeploymentSuccess(applicationDeploymentListener,DUMMY_DOMAIN_APP2);
  undeployAction.perform();
  assertDeploymentSuccess(applicationDeploymentListener,DUMMY_DOMAIN_APP1);
  assertDeploymentSuccess(applicationDeploymentListener,DUMMY_DOMAIN_APP2);
  assertUndeploymentSuccess(domainDeploymentListener,DUMMY_DOMAIN);
}
