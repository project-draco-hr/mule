{
  addPackedDomainFromResource(dummyDomainDescriptor.zipPath);
  File dummyDomainFile=new File(DeploymentServiceTestCase.dummyDomainDescriptor.zipPath);
  long firstFileTimestamp=dummyDomainFile.lastModified();
  addPackedAppFromResource(dummyDomainApp1Descriptor.zipPath);
  deploymentService.start();
  assertDeploymentSuccess(domainDeploymentListener,dummyDomainDescriptor.id);
  assertApplicationDeploymentSuccess(applicationDeploymentListener,dummyDomainApp1Descriptor.id);
  reset(domainDeploymentListener);
  reset(applicationDeploymentListener);
  addPackedDomainFromResource(dummyDomainDescriptor.zipPath);
  alterTimestampIfNeeded(dummyDomainFile,firstFileTimestamp);
  assertUndeploymentSuccess(applicationDeploymentListener,dummyDomainApp1Descriptor.id);
  assertUndeploymentSuccess(domainDeploymentListener,dummyDomainDescriptor.id);
  assertDeploymentSuccess(domainDeploymentListener,dummyDomainDescriptor.id);
  assertApplicationDeploymentSuccess(applicationDeploymentListener,dummyDomainApp1Descriptor.id);
}
