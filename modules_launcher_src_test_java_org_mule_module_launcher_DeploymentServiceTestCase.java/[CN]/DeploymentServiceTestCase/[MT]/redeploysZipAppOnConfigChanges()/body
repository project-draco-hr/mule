{
  addPackedAppFromResource(DUMMY_APP_ZIP_PATH);
  deploymentService.start();
  assertDeploymentSuccess(applicationDeploymentListener,DUMMY_APP);
  assertAppsDir(NONE,new String[]{DUMMY_APP},true);
  assertEquals("Application has not been properly registered with Mule",1,deploymentService.getApplications().size());
  reset(applicationDeploymentListener);
  File configFile=new File(appsDir + DUMMY_APP_PATH,MULE_CONFIG_XML_FILE);
  configFile.setLastModified(configFile.lastModified() + 1000);
  assertUndeploymentSuccess(applicationDeploymentListener,DUMMY_APP);
  assertDeploymentSuccess(applicationDeploymentListener,DUMMY_APP);
  assertEquals("Application has not been properly registered with Mule",1,deploymentService.getApplications().size());
  assertAppsDir(NONE,new String[]{DUMMY_APP},true);
}
