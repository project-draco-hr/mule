{
  addPackedAppFromBuilder(dummyAppDescriptorFileBuilder);
  deploymentService.start();
  assertApplicationDeploymentSuccess(applicationDeploymentListener,dummyAppDescriptorFileBuilder.getId());
  assertAppsDir(NONE,new String[]{dummyAppDescriptorFileBuilder.getId()},true);
  assertEquals("Application has not been properly registered with Mule",1,deploymentService.getApplications().size());
  reset(applicationDeploymentListener);
  File configFile=new File(appsDir + "/" + dummyAppDescriptorFileBuilder.getDeployedPath(),MULE_CONFIG_XML_FILE);
  configFile.setLastModified(configFile.lastModified() + FILE_TIMESTAMP_PRECISION_MILLIS);
  assertUndeploymentSuccess(applicationDeploymentListener,dummyAppDescriptorFileBuilder.getId());
  assertApplicationDeploymentSuccess(applicationDeploymentListener,dummyAppDescriptorFileBuilder.getId());
  assertEquals("Application has not been properly registered with Mule",1,deploymentService.getApplications().size());
  assertAppsDir(NONE,new String[]{dummyAppDescriptorFileBuilder.getId()},true);
}
