{
  addExplodedAppFromResource(incompleteAppDescriptor.zipPath,incompleteAppDescriptor.id);
  deploymentService.start();
  assertDeploymentFailure(applicationDeploymentListener,incompleteAppDescriptor.id);
  reset(applicationDeploymentListener);
  File originalConfigFile=new File(appsDir + incompleteAppDescriptor.path,MULE_CONFIG_XML_FILE);
  URL url=getClass().getResource(emptyDomainDescriptor.configFilePath);
  File newConfigFile=new File(url.toURI());
  FileUtils.copyFile(newConfigFile,originalConfigFile);
  assertDeploymentSuccess(applicationDeploymentListener,incompleteAppDescriptor.id);
  addPackedAppFromResource(dummyAppDescriptor.zipPath);
  assertDeploymentSuccess(applicationDeploymentListener,dummyAppDescriptor.id);
  assertAppFolderIsMaintained(incompleteAppDescriptor.id);
}
