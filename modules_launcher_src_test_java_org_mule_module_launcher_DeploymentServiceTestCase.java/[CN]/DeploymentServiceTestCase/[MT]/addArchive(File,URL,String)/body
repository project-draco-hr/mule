{
  ReentrantLock lock=deploymentService.getLock();
  lock.lock();
  try {
    final String tempFileName=new File((targetFile == null ? url.getFile() : targetFile) + ".part").getName();
    final File tempFile=new File(outputDir,tempFileName);
    FileUtils.copyURLToFile(url,tempFile);
    tempFile.renameTo(new File(StringUtils.removeEnd(tempFile.getAbsolutePath(),".part")));
  }
  finally {
    lock.unlock();
  }
}
