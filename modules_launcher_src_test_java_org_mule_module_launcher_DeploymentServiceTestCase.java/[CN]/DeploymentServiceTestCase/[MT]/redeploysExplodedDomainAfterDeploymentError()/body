{
  deploymentService.start();
  addPackedDomainFromResource(INCOMPLETE_DOMAIN_ZIP_PATH);
  assertDeploymentFailure(domainDeploymentListener,INCOMPLETE_DOMAIN);
  addPackedDomainFromResource(DeploymentServiceTestCase.DUMMY_DOMAIN_ZIP_PATH);
  assertDeploymentSuccess(domainDeploymentListener,DUMMY_DOMAIN);
  addExplodedDomainFromResource(EMPTY_DOMAIN_ZIP_PATH,INCOMPLETE_DOMAIN);
  assertDeploymentSuccess(domainDeploymentListener,INCOMPLETE_DOMAIN);
  assertEquals("Failed domain still appears as zombie after a successful redeploy",0,deploymentService.getZombieDomains().size());
}
