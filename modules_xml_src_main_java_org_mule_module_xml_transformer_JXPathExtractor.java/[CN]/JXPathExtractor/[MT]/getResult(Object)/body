{
  Object result=null;
  if (StringUtils.contains(OUTPUT_TYPE_VALUE,outputType) || outputType == null) {
    if (value instanceof Node) {
      result=((Node)value).getText();
    }
 else {
      result=value.toString();
    }
  }
 else   if (StringUtils.contains(OUTPUT_TYPE_XML,outputType)) {
    if (value instanceof Node) {
      result=((Node)value).asXML();
    }
 else {
      throw new IllegalStateException("XPath expression output must be a Node to output as XML. Expression type was: " + value.getClass());
    }
  }
 else   if (StringUtils.contains(OUTPUT_TYPE_NODE,outputType)) {
    result=value;
  }
  return result;
}
