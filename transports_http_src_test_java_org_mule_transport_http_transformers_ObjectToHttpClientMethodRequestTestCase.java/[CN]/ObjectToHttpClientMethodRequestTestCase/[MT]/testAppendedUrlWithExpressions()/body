{
  MuleMessage message=setupRequestContext("http://mycompany.com/test?fruits=#[header:fruit1],#[header:fruit2]&correlationID=#[message:correlationId]");
  message.setPayload(NullPayload.getInstance());
  message.setCorrelationId("1234");
  message.setProperty("fruit1","apple");
  message.setProperty("fruit2","orange");
  ObjectToHttpClientMethodRequest transformer=new ObjectToHttpClientMethodRequest();
  transformer.setMuleContext(muleContext);
  transformer.initialise();
  Object response=transformer.transform(message);
  assertTrue(response instanceof HttpMethod);
  HttpMethod httpMethod=(HttpMethod)response;
  assertEquals("fruits=apple,orange&correlationID=1234",httpMethod.getQueryString());
}
