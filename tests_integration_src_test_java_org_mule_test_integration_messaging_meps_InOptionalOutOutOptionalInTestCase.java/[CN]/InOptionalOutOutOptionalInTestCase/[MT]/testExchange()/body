{
  MuleClient client=muleContext.getClient();
  MuleMessage result=client.send("inboundEndpoint","some data",null);
  assertNotNull(result);
  assertEquals(NullPayload.getInstance(),result.getPayload());
  assertEquals("Received",result.getInboundProperty("externalApp"));
  Map<String,Object> props=new HashMap<String,Object>();
  props.put("foo","bar");
  result=client.send("inboundEndpoint","some data",props);
  assertNotNull(result);
  assertEquals("bar header received",result.getPayload());
  assertEquals("Received",result.getInboundProperty("externalApp"));
}
