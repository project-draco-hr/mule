{
  MuleClient client=new MuleClient(muleContext);
  MuleMessage result=client.send("inboundEndpoint","some data",null);
  assertNotNull(result);
  assertEquals(NullPayload.getInstance(),result.getPayload());
  assertEquals("Received",result.getProperty("externalApp",PropertyScope.INBOUND));
  Map props=new HashMap();
  props.put("foo","bar");
  result=client.send("inboundEndpoint","some data",props);
  assertNotNull(result);
  assertEquals("bar header received",result.getPayload());
  assertEquals("Received",result.getProperty("externalApp",PropertyScope.INBOUND));
}
