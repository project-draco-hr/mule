{
  final FlowConstruct flow=getFlowConstruct(flowName);
  assertTrue(flow instanceof Flow);
  final Flow simpleFlow=(Flow)flow;
  final List<MessageProcessor> processors=simpleFlow.getMessageProcessors();
  assertEquals(1,processors.size());
  final MessageProcessor firstMP=processors.get(0);
  assertEquals(IdempotentMessageFilter.class,firstMP.getClass());
  return (IdempotentMessageFilter)firstMP;
}
