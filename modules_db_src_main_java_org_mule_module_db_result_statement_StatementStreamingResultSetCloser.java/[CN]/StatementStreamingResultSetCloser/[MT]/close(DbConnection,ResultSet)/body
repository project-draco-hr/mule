{
  Object connectionLock=getTrackedConnectionLock(connection);
synchronized (connectionLock) {
    checkValidConnectionLock(connection,connectionLock);
    Set<ResultSet> resultSets=getConnectionResultSets(connection,resultSet);
    super.close(connection,resultSet);
    if (resultSets.size() == 0) {
      releaseResources(connection,connectionLock);
    }
  }
}
