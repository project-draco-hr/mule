{
  MessagePropertiesTransformer transformer=(MessagePropertiesTransformer)muleContext.getRegistry().lookupTransformer("renamePropertyWithDataType");
  transformer.setMuleContext(muleContext);
  DefaultMuleMessage msg=new DefaultMuleMessage(TEST_MESSAGE,muleContext);
  DefaultMuleMessage transformed=(DefaultMuleMessage)transformer.transform(msg);
  assertThat(FOO_VALUE,equalTo(transformed.getOutboundProperty(BAR_PROPERTY)));
  assertThat(transformed.getPropertyDataType(BAR_PROPERTY,PropertyScope.OUTBOUND),like(String.class,TEXT_BAZ_MIME_TYPE,StandardCharsets.UTF_16BE.name()));
}
