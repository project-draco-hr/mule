{
  if (message instanceof HttpServletRequest) {
    setPayload((HttpServletRequest)message);
    if (request.getParameterMap() != null) {
      properties.putAll(request.getParameterMap());
    }
    String key;
    for (Enumeration e=request.getAttributeNames(); e.hasMoreElements(); ) {
      key=(String)e.nextElement();
      properties.put(key,request.getAttribute(key));
    }
    for (Enumeration e=request.getHeaderNames(); e.hasMoreElements(); ) {
      key=(String)e.nextElement();
      properties.put(key,request.getHeader(key));
    }
  }
 else {
    throw new MessageTypeNotSupportedException(message,getClass());
  }
}
