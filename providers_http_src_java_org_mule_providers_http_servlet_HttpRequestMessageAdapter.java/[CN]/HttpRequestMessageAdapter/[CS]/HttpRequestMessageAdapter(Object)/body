{
  if (message instanceof HttpServletRequest) {
    setPayload((HttpServletRequest)message);
    final Map parameterMap=request.getParameterMap();
    if (parameterMap != null && parameterMap.size() > 0) {
      properties.putAll(parameterMap);
    }
    String key;
    for (Enumeration e=request.getAttributeNames(); e.hasMoreElements(); ) {
      key=(String)e.nextElement();
      properties.put(key,request.getAttribute(key));
    }
    for (Enumeration e=request.getHeaderNames(); e.hasMoreElements(); ) {
      key=(String)e.nextElement();
      properties.put(key,request.getHeader(key));
    }
  }
 else {
    throw new MessageTypeNotSupportedException(message,getClass());
  }
}
