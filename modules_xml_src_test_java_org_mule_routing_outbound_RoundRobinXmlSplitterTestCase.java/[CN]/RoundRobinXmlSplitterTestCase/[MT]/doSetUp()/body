{
  endpoint1=getTestOutboundEndpoint("Test1Endpoint","test://endpointUri.1");
  endpoint2=getTestOutboundEndpoint("Test2Endpoint","test://endpointUri.2");
  endpoint3=getTestOutboundEndpoint("Test3Endpoint","test://endpointUri.3");
  endpoint4=getTestOutboundEndpoint("Test4Endpoint","test://endpointUri.4?synchronous=true");
  endpoint5=getTestOutboundEndpoint("Test5Endpoint","test://endpointUri.5?synchronous=true");
  endpoint6=getTestOutboundEndpoint("Test6Endpoint","test://endpointUri.6?synchronous=true");
  asyncXmlSplitter=new XmlMessageSplitter();
  asyncXmlSplitter.setValidateSchema(true);
  asyncXmlSplitter.setExternalSchemaLocation("purchase-order.xsd");
  asyncXmlSplitter.setMuleContext(muleContext);
  Map namespaces=new HashMap();
  namespaces.put("e","http://www.example.com");
  asyncXmlSplitter.setSplitExpression("/e:purchaseOrder/e:items/e:item");
  asyncXmlSplitter.setNamespaces(namespaces);
  asyncXmlSplitter.addEndpoint(endpoint1);
  asyncXmlSplitter.addEndpoint(endpoint2);
  asyncXmlSplitter.addEndpoint(endpoint3);
  syncXmlSplitter=new XmlMessageSplitter();
  syncXmlSplitter.setMuleContext(muleContext);
  syncXmlSplitter.setValidateSchema(true);
  syncXmlSplitter.setExternalSchemaLocation("purchase-order.xsd");
  syncXmlSplitter.setSplitExpression("/e:purchaseOrder/e:items/e:item");
  syncXmlSplitter.setNamespaces(namespaces);
  syncXmlSplitter.addEndpoint(endpoint4);
  syncXmlSplitter.addEndpoint(endpoint5);
  syncXmlSplitter.addEndpoint(endpoint6);
}
