{
  jmsSession=session;
  try {
    try {
      if (jmsSession.getTransacted() == false) {
        throw new IllegalTransactionStateException("Jms session is not transacted.  Check the endpoint config");
      }
    }
 catch (    JMSException e) {
      throw new IllegalTransactionStateException("Failed to read Jms session transacted property: " + e.getMessage(),e);
    }
  }
 catch (  IllegalTransactionStateException e) {
    throw e;
  }
catch (  UMOException e) {
    throw new IllegalTransactionStateException("Unable to obtain Jms session: " + e.getMessage(),e);
  }
}
