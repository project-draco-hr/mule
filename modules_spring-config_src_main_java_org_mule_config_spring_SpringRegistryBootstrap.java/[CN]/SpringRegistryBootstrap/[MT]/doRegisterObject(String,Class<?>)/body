{
  BeanDefinitionBuilder builder;
  if (BootstrapObjectFactory.class.isAssignableFrom(type)) {
    builder=BeanDefinitionBuilder.rootBeanDefinition(BootstrapObjectFactoryBean.class);
    builder.addConstructorArgValue(ClassUtils.instanciateClass(type));
  }
 else {
    builder=BeanDefinitionBuilder.rootBeanDefinition(type);
  }
  doRegisterObject(key,builder);
}
