{
  try {
    flowRunner("dataSourcePooling").withPayload(TEST_MESSAGE).asynchronously().run();
    flowRunner("dataSourcePooling").withPayload(TEST_MESSAGE).asynchronously().run();
    MuleClient client=muleContext.getClient();
    MuleMessage muleMessage=client.request("test://connectionError",RECEIVE_TIMEOUT).getRight().get();
    assertThat(muleMessage.getPayload(),is(instanceOf(MessagingException.class)));
  }
  finally {
    connectionLatch.countDown();
  }
}
