{
  if (securityFilter != null) {
    securityFilter.setEndpoint(endpoint);
  }
  if (endpoint instanceof InboundEndpoint) {
    return new InboundSecurityFilterMessageProcessor((InboundEndpoint)endpoint,securityFilter);
  }
 else   if (endpoint instanceof OutboundEndpoint) {
    return new OutboundSecurityFilterMessageProcessor((OutboundEndpoint)endpoint,securityFilter);
  }
 else {
    return null;
  }
}
