{
  AbstractFlowConstruct f=(AbstractFlowConstruct)muleContext.getRegistry().lookupFlowConstruct(flowName);
  assertEquals("stopped",f.getInitialState());
  assertFalse(f.isStarted());
  assertTrue(f.isStopped());
  doListenerTests(endpointName,0,true);
  f.start();
  assertTrue(f.isStarted());
  assertFalse(f.isStopped());
  doListenerTests(endpointName,1,true);
}
