{
  super(connector,component,endpoint,frequency);
  this.session=session;
  if (endpoint.getConnector() instanceof JmsConnector) {
    this.connector=(JmsConnector)endpoint.getConnector();
  }
 else {
    throw new InitialisationException("The endpoint configured for this XA Message Receiver is not a JmsConnector");
  }
  if (endpoint.getEndpointURI() == null) {
    throw new InitialisationException("The endpoint endpointUri cannot be null when listening");
  }
  this.consumer=consumer;
  this.connector.setDisposeDispatcherOnCompletion(true);
}
