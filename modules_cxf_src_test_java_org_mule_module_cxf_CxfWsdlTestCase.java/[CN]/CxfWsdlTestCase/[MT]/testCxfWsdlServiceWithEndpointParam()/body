{
  EndpointBuilder endpointBuilder=new EndpointURIEndpointBuilder(TEST_URL_NOWSDL,muleContext);
  endpointBuilder.setProperty("wsdlUrl",TEST_URL_WSDL);
  OutboundEndpoint endpoint=muleContext.getEndpointFactory().getOutboundEndpoint(endpointBuilder);
  MuleMessage message=getTestMuleMessage("test1");
  MuleEvent event=new DefaultMuleEvent(message,endpoint.getExchangePattern(),(FlowConstruct)null);
  MuleMessage reply=endpoint.process(event).getMessage();
  assertNotNull(reply);
  Document response=(Document)reply.getPayload();
  assertNotNull(response);
  XMLAssert.assertXpathEvaluatesTo("test1","//*[namespace-uri()='http://applications.external.tck.mule.org' and local-name()='key']",response);
}
