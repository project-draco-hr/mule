{
  StringBuffer buf=new StringBuffer();
  if (context == null) {
    buf.append("Registered authentication is set to ").append(filter.getClass().getName());
    buf.append(" but there was no security context on the session.");
  }
 else {
    buf.append("User authentication failed for: " + context.getAuthentication().getPrincipal());
  }
  buf.append("Failed to ");
  buf.append((endpoint.getType().equals(UMOEndpoint.ENDPOINT_TYPE_RECEIVER) ? "receive" : "dispatch"));
  buf.append(" via endpoint ").append(endpoint.getEndpointURI());
  return buf.toString();
}
