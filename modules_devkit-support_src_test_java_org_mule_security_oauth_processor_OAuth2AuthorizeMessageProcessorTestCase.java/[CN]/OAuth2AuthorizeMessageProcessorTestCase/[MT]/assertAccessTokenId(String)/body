{
  this.initCallbackFactoryMock();
  this.processor.setOauthCallback(null);
  this.processor.setCallbackFactory(callbackFactory);
  this.processor.start();
  this.doProcess("");
  ArgumentCaptor<FetchAccessTokenMessageProcessor> captor=ArgumentCaptor.forClass(FetchAccessTokenMessageProcessor.class);
  Mockito.verify(this.callbackFactory).createCallback(Mockito.any(OAuth2Manager.class),Mockito.anyString(),captor.capture(),Mockito.any(MessageProcessor.class),Mockito.any(MuleContext.class),Mockito.any(FlowConstruct.class));
  FetchAccessTokenMessageProcessor processor=captor.getValue();
  Assert.assertEquals(processor.getAccessTokenId(),accessTokenId);
}
