{
  ErrorType errorType;
  if (AnnotatedObject.class.isAssignableFrom(messageProcessor.getClass())) {
    ComponentIdentifier componentIdentifier=(ComponentIdentifier)((AnnotatedObject)messageProcessor).getAnnotation(ComponentIdentifier.ANNOTATION_NAME);
    errorType=errorTypeLocator.lookupComponentErrorType(componentIdentifier,exception);
  }
 else {
    errorType=errorTypeLocator.lookupErrorType(exception);
  }
  return errorType;
}
