{
  MetadataResult<ComponentMetadataDescriptor> metadata=getMetadata(flow,query);
  assertThat(metadata.isSuccess(),is(true));
  assertThat(metadata.get().getContentMetadata().isPresent(),is(true));
  assertThat(metadata.get().getContentMetadata().get().isSuccess(),is(true));
  return metadata.get().getContentMetadata().get().get();
}
