{
  MetadataResult<ComponentMetadataDescriptor> result=getMetadata(ECHO_ACCOUNT_FLOW,ECHO_ACCOUNT);
  MetadataType type=result.get().getOutputMetadata().get().getPayloadMetadata().get().getType();
  Collection<ObjectFieldType> operationFields=toObjectType(type).getFields();
  assertThat(operationFields,hasSize(1));
  ObjectType echoType=toObjectType(operationFields.iterator().next().getValue());
  Collection<ObjectFieldType> echoFields=echoType.getFields();
  assertThat(echoFields,hasSize(1));
  ObjectFieldType accountField=echoFields.iterator().next();
  assertThat(accountField.getKey().getName().getLocalPart(),is("account"));
  ObjectType objectType=toObjectType(accountField.getValue());
  assertThat(objectType.getFields(),hasSize(4));
}
