{
  final DataHandler attachmentValue=new DataHandler(ATTACHMENT_VALUE,TEXT.toString());
  Map<String,DataHandler> outboundAttachments=singletonMap(ATTACHMENT_KEY,attachmentValue);
  MuleMessage copy=new DefaultMuleMessageBuilder(new DefaultMuleMessageBuilder().payload(TEST_PAYLOAD).outboundAttachments(outboundAttachments).build()).build();
  assertThat(copy.getOutboundAttachment(ATTACHMENT_KEY),equalTo(attachmentValue));
  assertThat(copy.getOutboundAttachmentNames(),hasSize(1));
  assertThat(copy.getOutboundAttachmentNames(),hasItem(ATTACHMENT_KEY));
}
