{
  InternalMessage message=createTestMessage();
  InternalMessage copy=new DefaultMessageBuilder(message).payload(NEW_PAYLOAD).build();
  assertThat(copy.getPayload().getValue(),equalTo(NEW_PAYLOAD));
  assertThat(copy.getPayload().getDataType().getType(),equalTo(String.class));
  assertThat(copy.getPayload().getDataType().getMediaType(),is(TEXT));
}
