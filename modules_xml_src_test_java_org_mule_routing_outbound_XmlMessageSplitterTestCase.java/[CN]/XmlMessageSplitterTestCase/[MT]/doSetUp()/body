{
  endpoint1=getTestOutboundEndpoint("Test1Endpoint","test://endpointUri.1");
  endpoint2=getTestOutboundEndpoint("Test2Endpoint","test://endpointUri.2");
  endpoint3=getTestOutboundEndpoint("Test3Endpoint","test://endpointUri.3");
  endpoint4=getTestOutboundEndpoint("Test1Endpoint","test://endpointUri.1?synchronous=true");
  endpoint5=getTestOutboundEndpoint("Test2Endpoint","test://endpointUri.2?synchronous=true");
  endpoint6=getTestOutboundEndpoint("Test3Endpoint","test://endpointUri.3?synchronous=true");
  syncXmlSplitter=new XmlMessageSplitter();
  syncXmlSplitter.setValidateSchema(true);
  syncXmlSplitter.setExternalSchemaLocation("purchase-order.xsd");
  Map namespaces=new HashMap();
  namespaces.put("e","http://www.example.com");
  syncXmlSplitter.setSplitExpression("/e:purchaseOrder/e:items/e:item");
  syncXmlSplitter.setNamespaces(namespaces);
  syncXmlSplitter.addEndpoint(endpoint4);
  syncXmlSplitter.addEndpoint(endpoint5);
  syncXmlSplitter.addEndpoint(endpoint6);
  asyncXmlSplitter=new XmlMessageSplitter();
  asyncXmlSplitter.setValidateSchema(true);
  asyncXmlSplitter.setExternalSchemaLocation("purchase-order.xsd");
  asyncXmlSplitter.setSplitExpression("/e:purchaseOrder/e:items/e:item");
  asyncXmlSplitter.setNamespaces(namespaces);
  asyncXmlSplitter.addEndpoint(endpoint1);
  asyncXmlSplitter.addEndpoint(endpoint2);
  asyncXmlSplitter.addEndpoint(endpoint3);
}
