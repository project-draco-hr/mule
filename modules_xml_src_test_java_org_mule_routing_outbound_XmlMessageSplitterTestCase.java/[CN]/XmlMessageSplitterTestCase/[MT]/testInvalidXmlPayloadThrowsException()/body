{
  Mock session=MuleTestUtils.getMockSession();
  session.matchAndReturn("getFlowConstruct",getTestService());
  XmlMessageSplitter splitter=new XmlMessageSplitter();
  MuleMessage message=new DefaultMuleMessage("This is not XML.",muleContext);
  try {
    splitter.route(new OutboundRoutingTestEvent(message,(MuleSession)session.proxy(),muleContext));
    fail("No exception thrown.");
  }
 catch (  IllegalArgumentException iaex) {
    assertTrue("Wrong exception message.",iaex.getMessage().startsWith("Failed to initialise the payload: "));
  }
}
