{
  FileObject file=mock(FileObject.class);
  when(processingEnvironment.getFiler().createResource(SOURCE_OUTPUT,EMPTY,RESOURCE_PATH)).thenReturn(file);
  OutputStream out=mock(OutputStream.class,RETURNS_DEEP_STUBS);
  when(file.openOutputStream()).thenReturn(out);
  generator.generateFor(extensionModel);
  verify(out).write(RESOURCE_CONTENT);
  verify(out).flush();
}
