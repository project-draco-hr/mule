{
  Class[] interfaces;
  List ifaces=null;
  Map localProperties=(Map)properties.get();
  if (null != localProperties) {
    ifaces=(List)localProperties.get(SoapConstants.SERVICE_INTERFACES);
  }
  if (ifaces == null || ifaces.size() == 0) {
    final Class implementationClass;
    if (service.getComponent() instanceof JavaComponent) {
      try {
        implementationClass=((JavaComponent)service.getComponent()).getObjectType();
      }
 catch (      Exception e) {
        throw new ClassNotFoundException("Unable to retrieve class from service factory",e);
      }
    }
 else {
      throw new ClassNotFoundException("Unable to retrieve class from service factory");
    }
    final List intfList=ClassUtils.getAllInterfaces(implementationClass);
    interfaces=(Class[])intfList.toArray(new Class[intfList.size()]);
  }
 else {
    interfaces=new Class[ifaces.size()];
    for (int i=0; i < ifaces.size(); i++) {
      String iface=(String)ifaces.get(i);
      interfaces[i]=ClassUtils.loadClass(iface,AxisServiceProxy.class);
    }
  }
  interfaces=removeInterface(interfaces,Callable.class);
  interfaces=removeInterface(interfaces,Disposable.class);
  interfaces=removeInterface(interfaces,Initialisable.class);
  return interfaces;
}
