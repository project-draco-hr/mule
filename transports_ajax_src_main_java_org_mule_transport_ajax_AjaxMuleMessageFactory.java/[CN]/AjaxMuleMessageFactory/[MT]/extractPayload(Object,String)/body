{
  if (transportMessage instanceof Map<?,?>) {
    return extractPayloadFromMap((Map<?,?>)transportMessage);
  }
 else   if (filter.accept(transportMessage)) {
    return extractJsonPayload(transportMessage);
  }
 else {
    return transportMessage;
  }
}
