{
  SingleTransformerSession sts=new SingleTransformerSession(trans);
  assertTrue(!sts.isInSession());
  sts.begin();
  assertTrue(sts.isInSession());
  Object result=sts.transform(TEST_DATA);
  assertTrue(sts.isInSession());
  assertEquals(TEST_DATA,new String(roundtripTrans.transform(result).toString()));
  sts.rollback();
  assertEquals(TEST_DATA,sts.getData());
  assertNotNull(sts.getTransformer());
  result=sts.transform(TEST_DATA);
  assertTrue(sts.isInSession());
  assertEquals(TEST_DATA,new String(roundtripTrans.transform(result).toString()));
  sts.commit();
  assertEquals(result,sts.getData());
  assertTrue(!sts.isInSession());
}
