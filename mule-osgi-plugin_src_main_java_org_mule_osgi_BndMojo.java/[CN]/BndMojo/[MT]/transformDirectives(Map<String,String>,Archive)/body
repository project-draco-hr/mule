{
  Map<String,String> transformedInstructions=new HashMap<String,String>();
  for (  Map.Entry<String,String> e : originalInstructions.entrySet()) {
    String key=(String)e.getKey();
    if (key.startsWith("_")) {
      key="-" + key.substring(1);
    }
    String value=(String)e.getValue();
    if (null == value) {
      value="";
    }
 else {
      value=value.replaceAll("[\r\n]","");
      value=value.replaceAll("\\$\\{version\\}",archive.getVersion());
    }
    transformedInstructions.put(key,value);
  }
  return transformedInstructions;
}
