{
  Timeout timeout=new Timeout(timeoutMillis);
  boolean doCheck=true;
  if (startWithDelay) {
    doCheck=false;
  }
  while (true) {
    if (doCheck && probe.isSatisfied()) {
      return true;
    }
 else     if (timeout.hasTimedOut()) {
      return false;
    }
 else {
      waitFor(pollDelayMillis);
    }
    doCheck=true;
  }
}
