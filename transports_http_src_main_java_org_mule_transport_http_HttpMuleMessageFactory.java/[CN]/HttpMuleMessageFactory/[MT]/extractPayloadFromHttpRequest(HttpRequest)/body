{
  Object body=null;
  if (httpRequest.getContentType().contains("multipart/")) {
    MultiPartInputStream in=new MultiPartInputStream(httpRequest.getBody(),httpRequest.getContentType(),null);
    parts=in.getParts();
    for (    Part part : parts) {
      if (part.getName().equals("payload")) {
        body=part.getInputStream();
        break;
      }
    }
    if (body == null) {
      throw new IllegalArgumentException("todo");
    }
  }
 else {
    body=httpRequest.getBody();
    if (body == null) {
      body=httpRequest.getRequestLine().getUri();
    }
 else {
      if (!exchangePattern.hasResponse()) {
        log.debug("Reading HTTP POST InputStream into byte[] for asynchronous messaging.");
        body=IOUtils.toByteArray((InputStream)body);
      }
    }
  }
  return body;
}
