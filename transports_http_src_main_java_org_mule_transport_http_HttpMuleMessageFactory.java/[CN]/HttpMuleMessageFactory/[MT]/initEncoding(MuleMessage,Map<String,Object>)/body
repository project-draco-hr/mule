{
  Object contentType=headers.get(HttpConstants.HEADER_CONTENT_TYPE);
  if (contentType != null) {
    Header contentTypeHeader=new Header(HttpConstants.HEADER_CONTENT_TYPE,contentType.toString());
    HeaderElement values[]=contentTypeHeader.getElements();
    if (values.length == 1) {
      NameValuePair param=values[0].getParameterByName("charset");
      if (param != null) {
        message.setEncoding(param.getValue());
      }
    }
  }
}
