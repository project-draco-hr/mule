{
  MessageFilter router=new MessageFilter();
  StringTokenizer st=new StringTokenizer(((ExpressionFilter)annotation).value(),"AND,OR",true);
  Filter f=new ExpressionFilterParser().parseFilterString(((ExpressionFilter)annotation).value());
  while (st.hasMoreTokens()) {
    String s=st.nextToken();
    if (s.equals("AND")) {
      f=new AndFilter(f);
    }
 else     if (s.equals("OR")) {
      f=new OrFilter(f);
    }
 else     if (f instanceof AndFilter) {
      ((AndFilter)f).getFilters().add(new org.mule.routing.filters.ExpressionFilter(s));
    }
 else     if (f instanceof OrFilter) {
      ((OrFilter)f).getFilters().add(new org.mule.routing.filters.ExpressionFilter(s));
    }
 else     if (f == null) {
      f=new org.mule.routing.filters.ExpressionFilter(s);
    }
 else {
      throw new DefaultMuleException("Expression Filter is malformed. IF this is a nested filter make sure each expression is separated by either 'AND' or 'OR'");
    }
  }
  router.setFilter(f);
  return null;
}
