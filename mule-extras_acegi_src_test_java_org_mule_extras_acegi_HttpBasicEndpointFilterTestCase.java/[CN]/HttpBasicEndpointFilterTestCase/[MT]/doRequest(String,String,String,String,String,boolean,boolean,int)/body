{
  HttpClient client=new HttpClient();
  client.getState().setAuthenticationPreemptive(preemtive);
  client.getState().setCredentials(realm,host,new UsernamePasswordCredentials(user,pass));
  GetMethod get=new GetMethod(url);
  get.setDoAuthentication(handshake);
  try {
    int status=client.executeMethod(get);
    assertEquals(result,status);
    System.out.println(status + "\n" + get.getResponseBodyAsString());
  }
  finally {
    get.releaseConnection();
  }
}
