{
  HttpClient client=new HttpClient();
  client.getParams().setAuthenticationPreemptive(preemtive);
  client.getState().setCredentials(new AuthScope(host,-1,realm),new UsernamePasswordCredentials(user,pass));
  GetMethod get=new GetMethod(url);
  get.setDoAuthentication(handshake);
  try {
    int status=client.executeMethod(get);
    assertEquals(result,status);
    System.out.println(status + SystemUtils.LINE_SEPARATOR + get.getResponseBodyAsString());
  }
  finally {
    get.releaseConnection();
  }
}
