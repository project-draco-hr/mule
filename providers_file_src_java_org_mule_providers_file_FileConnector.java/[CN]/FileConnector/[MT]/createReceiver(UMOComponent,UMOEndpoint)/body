{
  String readDir=endpoint.getEndpointURI().getAddress();
  long polling=this.pollingFrequency;
  String moveTo=moveToDirectoryName;
  Map props=endpoint.getProperties();
  if (props != null) {
    String move=(String)props.get(PROPERTY_MOVE_TO_DIRECTORY);
    if (move != null) {
      moveTo=move;
    }
    String tempPolling=(String)props.get(PROPERTY_POLLING_FREQUENCY);
    if (tempPolling != null) {
      polling=Long.parseLong(tempPolling);
    }
    String tempFileAge=(String)props.get(PROPERTY_FILE_AGE);
    if (tempFileAge != null) {
      try {
        setFileAge(Long.parseLong(tempFileAge));
      }
 catch (      Exception ex1) {
      }
    }
  }
  if (polling <= 0) {
    polling=DEFAULT_POLLING_FREQUENCY;
  }
  if (logger.isDebugEnabled()) {
    logger.debug("set polling frequency to: " + polling);
  }
  try {
    return serviceDescriptor.createMessageReceiver(this,component,endpoint,new Object[]{readDir,moveTo,moveToPattern,new Long(polling)});
  }
 catch (  Exception e) {
    throw new InitialisationException(new Message(Messages.FAILED_TO_CREATE_X_WITH_X,"Message Receiver",serviceDescriptor.getMessageReceiver()),e,this);
  }
}
