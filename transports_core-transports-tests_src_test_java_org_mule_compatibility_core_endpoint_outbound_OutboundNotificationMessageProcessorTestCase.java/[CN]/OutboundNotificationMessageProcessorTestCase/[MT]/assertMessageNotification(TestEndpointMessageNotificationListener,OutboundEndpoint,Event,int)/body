{
  assertThat(listener.latch.await(RECEIVE_TIMEOUT,TimeUnit.MILLISECONDS),is(true));
  assertThat(listener.messageNotification.getAction(),equalTo(action));
  assertThat(listener.messageNotification.getEndpoint(),equalTo(endpoint.getEndpointURI().getUri().toString()));
  assertThat(listener.messageNotification.getSource(),instanceOf(InternalMessage.class));
  assertThat(listener.messageNotification.getSource().getPayload().getValue(),equalTo(event.getMessage().getPayload().getValue()));
}
