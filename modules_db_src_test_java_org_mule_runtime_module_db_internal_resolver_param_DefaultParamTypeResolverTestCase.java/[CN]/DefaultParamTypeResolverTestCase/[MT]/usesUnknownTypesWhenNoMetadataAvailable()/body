{
  QueryTemplate queryTemplate=new QueryTemplate(SQL_TEXT,QueryType.SELECT,Collections.<QueryParam>singletonList(new DefaultInputQueryParam(1,UnknownDbType.getInstance(),"7","param1")));
  when(metadataParamTypeResolver.getParameterTypes(connection,queryTemplate)).thenThrow(new SQLException("Error"));
  Map<Integer,DbType> parameterTypes=paramTypeResolver.getParameterTypes(connection,queryTemplate);
  assertThat(1,equalTo(parameterTypes.size()));
  assertThat(UnknownDbType.getInstance(),equalTo(parameterTypes.get(1)));
}
