{
  if (transformer != null) {
    try {
      Object payload=transformer.transform(message.getPayload());
      message=new DefaultMuleMessage(payload,message,muleContext);
    }
 catch (    TransformerException e) {
      throw new RoutingException(CoreMessages.transformFailedBeforeFilter(),message,endpoints.get(0),e);
    }
  }
  return message;
}
