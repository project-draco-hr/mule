{
  logger.info("Starting discovery of extensions");
  List<Extension> discovered=extensionDiscoverer.discover(classLoader);
  logger.info("Discovered {} extensions",discovered.size());
  ImmutableList.Builder<Extension> accepted=ImmutableList.builder();
  for (  Extension extension : discovered) {
    if (registerExtension(extension)) {
      accepted.add(extension);
    }
  }
  return accepted.build();
}
