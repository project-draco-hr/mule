{
  MuleMessage muleMessage=super.createMessageFromSource(message);
  String path=muleMessage.getInboundProperty(HttpConnector.HTTP_REQUEST_PROPERTY);
  int i=path.indexOf('?');
  if (i > -1) {
    path=path.substring(0,i);
  }
  muleMessage.setProperty(HttpConnector.HTTP_REQUEST_PATH_PROPERTY,path,PropertyScope.INBOUND);
  if (logger.isDebugEnabled()) {
    logger.debug(muleMessage.getInboundProperty(HttpConnector.HTTP_REQUEST_PROPERTY));
  }
  String contextPath=HttpConnector.normalizeUrl(getInboundEndpoint().getEndpointURI().getPath());
  muleMessage.setProperty(HttpConnector.HTTP_CONTEXT_PATH_PROPERTY,contextPath,PropertyScope.INBOUND);
  muleMessage.setProperty(HttpConnector.HTTP_CONTEXT_URI_PROPERTY,getInboundEndpoint().getEndpointURI().getAddress(),PropertyScope.INBOUND);
  muleMessage.setProperty(HttpConnector.HTTP_RELATIVE_PATH_PROPERTY,processRelativePath(contextPath,path),PropertyScope.INBOUND);
  processRemoteAddresses(muleMessage);
  return muleMessage;
}
