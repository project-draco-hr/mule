{
  if (!failureResponseSentToClient) {
    String temp=ExceptionHelper.getErrorMapping(getConnector().getProtocol(),exception.getClass(),getMuleContext());
    int httpStatus=Integer.valueOf(temp);
    try {
      sendFailureResponseToClient(httpStatus,exception.getMessage());
    }
 catch (    Exception e) {
      logger.warn("Exception sending http response after error: " + e.getMessage());
      if (logger.isDebugEnabled()) {
        logger.debug(e);
      }
    }
  }
}
