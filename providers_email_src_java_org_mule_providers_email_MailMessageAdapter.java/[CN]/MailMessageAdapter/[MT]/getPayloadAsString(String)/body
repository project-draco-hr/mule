{
  if (contentBuffer == null) {
    String contentType=messagePart.getContentType();
    if (contentType.startsWith("text/")) {
      InputStream is=messagePart.getInputStream();
      BufferedReader reader=new BufferedReader(new InputStreamReader(is));
      StringBuffer buffer=new StringBuffer();
      String line=reader.readLine();
      buffer.append(line);
      while (line != null) {
        line=reader.readLine();
        buffer.append(line);
      }
      contentBuffer=buffer.toString().getBytes();
    }
 else {
      contentBuffer=getPayloadAsBytes();
    }
  }
  return new String(contentBuffer,encoding);
}
