{
  ExpressionManager expressionManager=event.getMuleContext().getExpressionManager();
  Object[] args=new Object[expressions.length];
  try {
    for (int i=0; i < args.length; i++) {
      Object arg=expressionManager.evaluate(expressions[i],event.getMessage());
      if (arg instanceof MuleMessage) {
        arg=((MuleMessage)arg).getPayload();
      }
      if (!(method.getParameterTypes()[i].isAssignableFrom(arg.getClass()))) {
        DataType<?> source=DataTypeFactory.create(arg.getClass());
        DataType<?> target=DataTypeFactory.create(method.getParameterTypes()[i]);
        Transformer t=event.getMuleContext().getRegistry().lookupTransformer(source,target);
        arg=t.transform(args[i]);
      }
      args[i]=arg;
    }
    return args;
  }
 catch (  TransformerException e) {
    throw new MessagingException(event,e);
  }
}
