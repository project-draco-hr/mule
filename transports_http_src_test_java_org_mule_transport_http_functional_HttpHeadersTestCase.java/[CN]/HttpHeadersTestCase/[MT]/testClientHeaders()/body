{
  MuleClient client=new MuleClient();
  client.dispatch("clientEndpoint2",null,null);
  MuleMessage result=client.request("vm://out",5000);
  String contentTypeProperty=result.getAdapter().getStringProperty(HttpConstants.HEADER_CONTENT_TYPE,null);
  assertNotNull(contentTypeProperty);
  assertEquals("application/xml",contentTypeProperty);
  String contentDispositionProperty=result.getAdapter().getStringProperty(HttpConstants.HEADER_CONTENT_DISPOSITION,null);
  assertNotNull(contentDispositionProperty);
  assertEquals("attachment; filename=foo.zip",contentDispositionProperty);
  assertNotNull(result.getAdapter().getProperty("X-Test"));
  assertEquals("foo",result.getAdapter().getProperty("X-Test"));
}
