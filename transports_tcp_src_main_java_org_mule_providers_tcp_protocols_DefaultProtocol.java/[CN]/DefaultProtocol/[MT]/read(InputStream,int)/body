{
  ByteArrayOutputStream baos=new ByteArrayOutputStream(bufferSize);
  try {
    copy(is,baos,limit);
  }
  finally {
    baos.flush();
    baos.close();
  }
  return nullEmptyArray(baos.toByteArray());
}
