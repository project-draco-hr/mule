{
  if (callback == null) {
    throw new IllegalArgumentException(CoreMessages.objectIsNull("EventCorrelatorCallback").getMessage());
  }
  if (messageInfoMapping == null) {
    throw new IllegalArgumentException(CoreMessages.objectIsNull("MessageInfoMapping").getMessage());
  }
  if (muleContext == null) {
    throw new IllegalArgumentException(CoreMessages.objectIsNull("MuleContext").getMessage());
  }
  this.callback=callback;
  this.messageInfoMapping=messageInfoMapping;
  this.muleContext=muleContext;
  this.timeoutMessageProcessor=timeoutMessageProcessor;
  this.persistentStores=persistentStores;
  this.storePrefix=storePrefix;
  name=String.format("%s%s.event.correlator",ThreadNameHelper.getPrefix(muleContext),flowConstruct.getName());
  ObjectStoreManager objectStoreManager=muleContext.getRegistry().get(MuleProperties.OBJECT_STORE_MANAGER);
  expiredAndDispatchedGroups=(ListableObjectStore<Long>)objectStoreManager.getObjectStore(storePrefix + ".expiredAndDispatchedGroups",persistentStores);
  processedGroups=(ListableObjectStore<Long>)objectStoreManager.getObjectStore(storePrefix + ".processedGroups",persistentStores,MAX_PROCESSED_GROUPS,-1,1000);
  eventGroups=(ListableObjectStore<EventGroup>)objectStoreManager.getObjectStore(storePrefix + ".eventGroups",persistentStores);
  this.flowConstruct=flowConstruct;
}
