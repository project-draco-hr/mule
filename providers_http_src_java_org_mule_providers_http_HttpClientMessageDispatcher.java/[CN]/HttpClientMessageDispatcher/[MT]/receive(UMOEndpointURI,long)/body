{
  if (endpointUri == null)   return null;
  HttpMethod httpMethod=new GetMethod(endpointUri.getAddress());
  HttpConnection connection=null;
  try {
    connection=getConnection(endpointUri.getUri());
    if (connection.isProxied() && connection.isSecure()) {
      httpMethod=new ConnectMethod(httpMethod);
    }
    httpMethod.setDoAuthentication(true);
    if (endpointUri.getUserInfo() != null) {
      StringBuffer header=new StringBuffer();
      header.append("Basic ");
      header.append(new BASE64Encoder().encode(endpointUri.getUserInfo().getBytes()));
      httpMethod.addRequestHeader(HttpConstants.HEADER_AUTHORIZATION,header.toString());
    }
    httpMethod.execute(state,connection);
    if (httpMethod.getStatusCode() == HttpStatus.SC_OK) {
      return (UMOMessage)receiveTransformer.transform(httpMethod);
    }
 else {
      throw new ReceiveException(new Message("http",3,httpMethod.getStatusLine().toString()),endpointUri,timeout);
    }
  }
 catch (  ReceiveException e) {
    throw e;
  }
catch (  Exception e) {
    throw new ReceiveException(endpointUri,timeout,e);
  }
 finally {
    if (httpMethod != null)     httpMethod.releaseConnection();
  }
}
