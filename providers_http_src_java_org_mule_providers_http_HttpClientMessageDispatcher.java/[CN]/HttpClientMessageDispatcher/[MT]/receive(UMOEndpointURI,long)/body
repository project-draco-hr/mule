{
  if (endpointUri == null) {
    return null;
  }
  HttpMethod httpMethod=new GetMethod(endpointUri.getAddress());
  httpMethod.setDoAuthentication(true);
  if (endpointUri.getUserInfo() != null) {
    StringBuffer header=new StringBuffer(64);
    header.append("Basic ");
    header.append(new String(Base64.encodeBase64(endpointUri.getUserInfo().getBytes())));
    httpMethod.addRequestHeader(HttpConstants.HEADER_AUTHORIZATION,header.toString());
  }
  try {
    HttpClient client=new HttpClient();
    client.executeMethod(httpMethod);
    if (httpMethod.getStatusCode() == HttpStatus.SC_OK) {
      return (UMOMessage)receiveTransformer.transform(httpMethod);
    }
 else {
      throw new ReceiveException(new Message("http",3,httpMethod.getStatusLine().toString()),endpointUri,timeout);
    }
  }
 catch (  ReceiveException e) {
    throw e;
  }
catch (  Exception e) {
    throw new ReceiveException(endpointUri,timeout,e);
  }
 finally {
    httpMethod.releaseConnection();
  }
}
