{
  Protocol protocol=Protocol.getProtocol(uri.getScheme().toLowerCase());
  String host=uri.getHost();
  int port=uri.getPort();
  HostConfiguration config=new HostConfiguration();
  config.setHost(host,port,protocol);
  if (!Utility.isEmpty(connector.getProxyHostname())) {
    config.setProxy(connector.getProxyHostname(),connector.getProxyPort());
  }
  return config;
}
