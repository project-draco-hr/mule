{
  HttpMethod httpMethod=execute(event,false);
  try {
    Properties h=new Properties();
    Header[] headers=httpMethod.getRequestHeaders();
    for (int i=0; i < headers.length; i++) {
      h.setProperty(headers[i].getName(),headers[i].getValue());
    }
    String status=String.valueOf(httpMethod.getStatusCode());
    h.setProperty(HttpConnector.HTTP_STATUS_PROPERTY,status);
    logger.debug("Http response is: " + status);
    return new MuleMessage(httpMethod.getResponseBodyAsString(),h);
  }
 catch (  Exception e) {
    throw new DispatchException(event.getMessage(),event.getEndpoint(),e);
  }
 finally {
    if (httpMethod != null)     httpMethod.releaseConnection();
  }
}
