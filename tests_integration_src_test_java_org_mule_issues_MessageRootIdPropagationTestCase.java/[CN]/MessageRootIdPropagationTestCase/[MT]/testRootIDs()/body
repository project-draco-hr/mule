{
  RootIDGatherer.initialize();
  MuleClient client=muleContext.getClient();
  DefaultMuleMessage msg=new DefaultMuleMessage("Hello",muleContext);
  msg.setOutboundProperty("where","client");
  RootIDGatherer.process(msg);
  client.send("vm://vmin",msg);
  Thread.sleep(1000);
  assertEquals(6,RootIDGatherer.getMessageCount());
  assertEquals(1,RootIDGatherer.getIds().size());
}
