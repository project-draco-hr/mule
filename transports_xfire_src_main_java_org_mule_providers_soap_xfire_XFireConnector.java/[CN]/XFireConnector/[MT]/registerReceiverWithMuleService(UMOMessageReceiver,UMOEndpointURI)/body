{
  SedaComponent c=new SedaComponent();
  c.setName(XFIRE_SERVICE_COMPONENT_NAME + receiver.getComponent().getName());
  c.setModel(muleContext.getRegistry().lookupSystemModel());
  XFireServiceComponent svcComponent=new XFireServiceComponent(((XFireMessageReceiver)receiver));
  svcComponent.setXfire(xfire);
  svcComponent.setTransport(transport);
  svcComponent.initialise();
  SingletonObjectFactory of=new SingletonObjectFactory(svcComponent);
  of.setComponent(c);
  of.initialise();
  c.setServiceFactory(of);
  if (c.getProperties().get(XFIRE_PROPERTY) == null) {
    c.getProperties().put(XFIRE_PROPERTY,xfire);
  }
  if (serviceTransport != null && c.getProperties().get(XFIRE_TRANSPORT) == null) {
    c.getProperties().put(XFIRE_TRANSPORT,serviceTransport);
  }
  String serviceName=receiver.getComponent().getName();
  String endpoint=receiver.getEndpointURI().getAddress();
  String scheme=ep.getScheme().toLowerCase();
  boolean sync=receiver.getEndpoint().isSynchronous();
  if (scheme.equals("http") || scheme.equals("https") || scheme.equals("ssl")|| scheme.equals("tcp")|| scheme.equals("servlet")) {
    endpoint+="/" + serviceName;
    receiver.getEndpoint().getProperties().put(HttpConnector.HTTP_METHOD_PROPERTY,"POST");
    receiver.getEndpoint().getProperties().put(HttpConstants.HEADER_CONTENT_TYPE,"text/xml");
  }
  UMOEndpointBuilder serviceEndpointbuilder=new EndpointURIEndpointBuilder(endpoint,muleContext);
  serviceEndpointbuilder.setSynchronous(sync);
  serviceEndpointbuilder.setName(ep.getScheme() + ":" + serviceName);
  serviceEndpointbuilder.setTransformers(receiver.getEndpoint().getTransformers());
  serviceEndpointbuilder.setResponseTransformers(receiver.getEndpoint().getResponseTransformers());
  serviceEndpointbuilder.setFilter(receiver.getEndpoint().getFilter());
  serviceEndpointbuilder.setSecurityFilter(receiver.getEndpoint().getSecurityFilter());
  UMOEndpointBuilder receiverEndpointBuilder=new EndpointURIEndpointBuilder(receiver.getEndpoint(),muleContext);
  receiverEndpointBuilder.setTransformers(TransformerUtils.UNDEFINED);
  receiverEndpointBuilder.setResponseTransformers(TransformerUtils.UNDEFINED);
  receiverEndpointBuilder.setFilter(null);
  receiverEndpointBuilder.setSecurityFilter(null);
  UMOImmutableEndpoint serviceEndpoint=muleContext.getRegistry().lookupEndpointFactory().getInboundEndpoint(serviceEndpointbuilder);
  UMOImmutableEndpoint receiverEndpoint=muleContext.getRegistry().lookupEndpointFactory().getInboundEndpoint(receiverEndpointBuilder);
  receiver.setEndpoint(receiverEndpoint);
  c.setInboundRouter(new InboundRouterCollection());
  c.getInboundRouter().addEndpoint(serviceEndpoint);
  components.add(c);
}
