{
  AndFilter filter=new AndFilter();
  assertEquals(0,filter.getFilters().size());
  assertFalse(filter.accept(new DefaultMuleMessage("foo")));
  filter.getFilters().add(new EqualsFilter("foo"));
  assertTrue(filter.accept(new DefaultMuleMessage("foo")));
  filter.getFilters().add(new EqualsFilter("foo"));
  assertFalse(filter.accept(new DefaultMuleMessage("bar")));
  assertTrue(filter.accept(new DefaultMuleMessage("foo")));
  WildcardFilter left=new WildcardFilter("blah.blah.*");
  WildcardFilter right=new WildcardFilter("blah.*");
  filter=new AndFilter(left,right);
  assertEquals(2,filter.getFilters().size());
  assertTrue(filter.accept(new DefaultMuleMessage("blah.blah.blah")));
  assertTrue(right.accept(new DefaultMuleMessage("blah.blah")));
  assertTrue(!left.accept(new DefaultMuleMessage("blah.blah")));
  assertTrue(!filter.accept(new DefaultMuleMessage("blah.blah")));
  filter=new AndFilter();
  filter.getFilters().add(left);
  filter.getFilters().add(right);
  assertTrue(filter.accept(new DefaultMuleMessage("blah.blah.blah")));
  assertTrue(!filter.accept(new DefaultMuleMessage("blah.blah")));
}
