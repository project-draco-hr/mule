{
  ArtifactClassLoaderFilterFactory classLoaderFilterFactory=new ArtifactClassLoaderFilterFactory();
  ArtifactPluginDescriptorFactory artifactPluginDescriptorFactory=new ArtifactPluginDescriptorFactory(classLoaderFilterFactory);
  ArtifactPluginDescriptorLoader artifactPluginDescriptorLoader=new ArtifactPluginDescriptorLoader(artifactPluginDescriptorFactory);
  TestEmptyApplicationPluginRepository applicationPluginRepository=new TestEmptyApplicationPluginRepository();
  ApplicationDescriptorFactory applicationDescriptorFactory=new ApplicationDescriptorFactory(artifactPluginDescriptorLoader,applicationPluginRepository);
  ArtifactPluginClassLoaderFactory artifactPluginClassLoaderFactory=new ArtifactPluginClassLoaderFactory();
  DefaultArtifactPluginFactory applicationPluginFactory=new DefaultArtifactPluginFactory(artifactPluginClassLoaderFactory);
  ApplicationClassLoaderBuilderFactory applicationClassLoaderBuilderFactory=new ApplicationClassLoaderBuilderFactory(applicationClassLoaderFactory,applicationPluginRepository,applicationPluginFactory);
  return new TestApplicationFactory(applicationClassLoaderBuilderFactory,applicationDescriptorFactory,applicationPluginRepository,domainManager,serviceRepository);
}
