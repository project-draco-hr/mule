{
  MuleMessage response=flowRunner(FLOW_NAME).withPayload(TEST_PAYLOAD).run().getMessage();
  assertThat(response.getPayload().toString(),is(TEST_PAYLOAD));
  MuleMessage message=muleContext.getClient().request("test://out",RECEIVE_TIMEOUT).getRight().get();
  assertThat(message.getOutboundProperty(PROCESSOR_THREAD),is(Thread.currentThread().getName()));
}
