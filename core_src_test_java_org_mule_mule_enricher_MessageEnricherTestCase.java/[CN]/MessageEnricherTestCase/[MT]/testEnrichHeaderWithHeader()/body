{
  MessageEnricher enricher=new MessageEnricher();
  enricher.setMuleContext(muleContext);
  enricher.addEnrichExpressionPair(new EnrichExpressionPair("#[header:header1]","#[header:myHeader]"));
  enricher.setEnrichmentMessageProcessor(new MessageProcessor(){
    public MuleEvent process(    MuleEvent event) throws MuleException {
      event.getMessage().setOutboundProperty("header1","test");
      return event;
    }
  }
);
  MuleMessage result=enricher.process(getTestEvent("")).getMessage();
  assertEquals("test",result.getOutboundProperty("myHeader"));
  assertEquals("",result.getPayload());
}
