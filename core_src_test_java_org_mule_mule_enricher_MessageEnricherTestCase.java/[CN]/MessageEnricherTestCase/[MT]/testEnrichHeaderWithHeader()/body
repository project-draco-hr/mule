{
  MessageEnricher enricher=new MessageEnricher();
  enricher.setEnricherExpression("header:myHeader");
  enricher.setEvaluatorExpression("header:header1");
  enricher.setEnrichmentMessageProcessor(new MessageProcessor(){
    public MuleEvent process(    MuleEvent event) throws MuleException {
      event.getMessage().setProperty("header1","test");
      return event;
    }
  }
);
  assertEquals("test",enricher.process(getTestEvent("")).getMessage().getProperty("myHeader"));
}
