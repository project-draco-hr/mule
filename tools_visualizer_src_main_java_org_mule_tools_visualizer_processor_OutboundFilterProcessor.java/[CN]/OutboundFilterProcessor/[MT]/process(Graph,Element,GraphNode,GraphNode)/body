{
  Element filter=endpoint.getChild(MuleTag.ELEMENT_FILTER);
  if (filter == null) {
    filter=endpoint.getChild(MuleTag.ELEMENT_LEFT_FILTER);
  }
  if (filter == null) {
    filter=endpoint.getChild(MuleTag.ELEMENT_RIGHT_FILTER);
  }
  if (filter != null) {
    GraphNode filterNode=graph.addNode();
    filterNode.getInfo().setHeader(filter.getAttributeValue(MuleTag.ATTRIBUTE_CLASS_NAME));
    filterNode.getInfo().setFillColor(ColorRegistry.COLOR_FILTER);
    StringBuffer caption=new StringBuffer();
    appendProperties(filter,caption);
    filterNode.getInfo().setCaption(caption.toString());
    process(graph,filter,filterNode,parent);
    addEdge(graph,filterNode,endpointNode,"out",isTwoWay(endpoint));
  }
 else {
    addEdge(graph,parent,endpointNode,"filters on",isTwoWay(endpoint));
  }
}
