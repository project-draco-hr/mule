{
  AssertionMessageProcessor asp=createAssertionMessageProcessor();
  asp.setFlowConstruct(flowConstruct);
  asp.setExpression(TRUE_EXPRESSION);
  asp.start();
  asp.process(mockEvent);
  asp.process(mockEvent);
  asp.setExpression(FALSE_EXPRESSION);
  asp.process(mockEvent);
  asp.setExpression(TRUE_EXPRESSION);
  asp.process(mockEvent);
  assertTrue(asp.expressionFailed());
  assertFalse(asp.countFailOrNullEvent());
}
