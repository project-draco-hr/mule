{
  notifications=new Vector(5);
  MuleManager.getInstance().registerListener(this);
  MuleClient client=new MuleClient();
  HashMap props=new HashMap();
  props.put(MuleProperties.MULE_USER_PROPERTY,"alan");
  props.put(MuleProperties.MULE_METHOD_PROPERTY,"sayHello");
  props.put(myProperty,myProperty);
  UMOMessage reply=client.send("xfire:http://localhost:10181/services/TestComponent?method=onReceive",new MuleMessage(new Object[]{"Test String"}),props);
  assertNotNull(reply);
  assertNotNull(reply.getPayload());
  assertEquals(reply.getPayloadAsString(),"Test String Received");
  UMOMessage msgNotification=(UMOMessage)notifications.get(0);
  assertEquals(msgNotification.getProperty(MuleProperties.MULE_USER_PROPERTY),"alan");
  assertNull(msgNotification.getProperty(MuleProperties.MULE_IGNORE_METHOD_PROPERTY));
  assertEquals(msgNotification.getProperty(myProperty),myProperty);
}
