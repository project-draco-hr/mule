{
  Object payload=new Object[]{"Test String"};
  String myProperty="myProperty";
  managementContext.registerListener(this);
  MuleClient client=new MuleClient();
  HashMap props=new HashMap();
  props.put(MuleProperties.MULE_USER_PROPERTY,"alan");
  props.put(MuleProperties.MULE_METHOD_PROPERTY,"sayHello");
  props.put(myProperty,myProperty);
  UMOMessage reply=client.send("xfire:" + endpointAddress,payload,props);
  assertNotNull(reply);
  assertNotNull(reply.getPayload());
  assertEquals("Test String Received",reply.getPayloadAsString());
  latch.await(20000,TimeUnit.MILLISECONDS);
  assertNotNull(notificationMsg);
  assertEquals("alan",notificationMsg.getProperty(MuleProperties.MULE_USER_PROPERTY));
  assertNull(notificationMsg.getProperty(MuleProperties.MULE_IGNORE_METHOD_PROPERTY));
  assertEquals(myProperty,notificationMsg.getProperty(myProperty));
}
