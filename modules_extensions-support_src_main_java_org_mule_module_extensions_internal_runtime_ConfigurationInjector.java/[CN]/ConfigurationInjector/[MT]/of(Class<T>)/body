{
  Set<Field> fields=getFieldsAnnotatedWith(injectableType,WithConfig.class);
  ConfigurationInjector<C,T> injector=new ConfigurationInjector<>();
  if (CollectionUtils.isEmpty(fields)) {
    injector.delegate=new NullDelegate<>();
  }
 else {
    checkArgument(fields.size() == 1,String.format("Type %s has more than one field annotated with %s",injectableType.getName(),WithConfig.class.getName()));
    injector.delegate=new FieldInjector<>(fields.iterator().next());
  }
  return injector;
}
