{
  final Latch exceptionStrategyCalledLatch=new Latch();
  muleContext.registerListener(new ExceptionNotificationListener<ExceptionNotification>(){
    @Override public void onNotification(    ExceptionNotification notification){
      exceptionStrategyCalledLatch.release();
    }
  }
);
  Flow flow=(Flow)getFlowConstruct("retryExhausted");
  flow.process(getTestEvent("message"));
  if (!exceptionStrategyCalledLatch.await(10000,TimeUnit.MILLISECONDS)) {
    fail("exception strategy was not executed");
  }
}
