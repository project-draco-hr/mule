{
  SslConnector connector=new SslConnector(muleContext);
  connector.setSslHandshakeTimeout(1000);
  Map<String,Serializable> properties=Collections.emptyMap();
  InboundEndpoint endpoint=mock(InboundEndpoint.class);
  when(endpoint.getProperties()).thenReturn(properties);
  when(endpoint.getConnector()).thenReturn(connector);
  when(endpoint.getEncoding()).thenReturn(getDefaultEncoding(muleContext));
  when(endpoint.getMuleContext()).thenReturn(muleContext);
  return new SslMessageReceiver(connector,mock(Flow.class),endpoint);
}
