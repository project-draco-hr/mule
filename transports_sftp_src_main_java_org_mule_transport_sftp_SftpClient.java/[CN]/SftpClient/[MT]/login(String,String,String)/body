{
  if (!new File(identityFile).exists()) {
    throw new IOException("IdentityFile '" + identityFile + "' not found");
  }
  try {
    if (passphrase == null || "".equals(passphrase)) {
      jsch.addIdentity(new File(identityFile).getAbsolutePath());
    }
 else {
      jsch.addIdentity(new File(identityFile).getAbsolutePath(),passphrase);
    }
    Properties hash=new Properties();
    hash.put(STRICT_HOST_KEY_CHECKING,"no");
    session=jsch.getSession(user,host);
    session.setConfig(hash);
    session.setPort(port);
    session.connect();
    Channel channel=session.openChannel(CHANNEL_SFTP);
    channel.connect();
    channelSftp=(ChannelSftp)channel;
    setHome(channelSftp.pwd());
  }
 catch (  JSchException e) {
    logAndThrowLoginError(user,e);
  }
catch (  SftpException e) {
    logAndThrowLoginError(user,e);
  }
}
