{
  exception.expect(MetadataResolvingException.class);
  exception.expectMessage(is("MetadataKey used for Metadata resolution must only have one child per level. Key 'USA' has [SFO, NY] as children."));
  final MetadataKey invalidMetadataKey=newKey(AMERICA,CONTINENT).withChild(newKey(USA,COUNTRY).withChild(newKey(SFO,CITY)).withChild(newKey(NY,CITY))).build();
  setParameters(continentParam,countryParam,cityParam);
  setMetadataKeyIdModelProperty(LocationKey.class);
  keyIdObjectResolver=new MetadataKeyIdObjectResolver(componentModel,getMetadataKeyParts(componentModel));
  keyIdObjectResolver.resolve(invalidMetadataKey);
}
