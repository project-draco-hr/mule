{
  if (outboundEndpoint == null) {
    throw new FlowConstructInvalidException(MessageFactory.createStaticMessage("outboundEndpoint can't be null"));
  }
  final String wsAddress=outboundEndpoint.getAddress();
  if (outboundEndpoint instanceof DynamicOutboundEndpoint) {
    wsdlAddressProvider=new WsdlAddressProvider(){
      public String get(      final MuleEvent event){
        final String resolvedWsAddress=event.getMuleContext().getExpressionManager().parse(wsAddress,event.getMessage(),true);
        return makeWsdlAddress(resolvedWsAddress);
      }
    }
;
    logger.info("Using dynamic WSDL with service address: " + wsAddress);
  }
 else {
    final String wsdlAddress=makeWsdlAddress(wsAddress);
    wsdlAddressProvider=new WsdlAddressProvider(){
      public String get(      final MuleEvent event){
        return wsdlAddress;
      }
    }
;
    logger.info("Setting WSDL address to: " + wsdlAddress);
  }
}
