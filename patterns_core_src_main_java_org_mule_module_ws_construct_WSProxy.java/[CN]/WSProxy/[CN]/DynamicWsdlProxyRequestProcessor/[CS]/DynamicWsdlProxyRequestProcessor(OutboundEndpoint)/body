{
  if (outboundEndpoint == null) {
    throw new FlowConstructInvalidException(MessageFactory.createStaticMessage("outboundEndpoint can't be null"));
  }
  final String wsAddress=outboundEndpoint.getAddress();
  if (outboundEndpoint instanceof DynamicOutboundEndpoint) {
    wsdlAddressProvider=new WsdlAddressProvider(){
      public String get(      final MuleEvent event){
        final String resolvedWsAddress=event.getMuleContext().getExpressionManager().parse(wsAddress,event,true);
        return makeWsdlOrXSDAddress(resolvedWsAddress,event.getMessage());
      }
    }
;
    logger.info("Using dynamic WSDL with service address: " + wsAddress);
  }
 else {
    wsdlAddressProvider=new WsdlAddressProvider(){
      public String get(      final MuleEvent event){
        return makeWsdlOrXSDAddress(wsAddress,event.getMessage());
      }
    }
;
    logger.info("Setting WSDL address for: " + wsAddress);
  }
}
