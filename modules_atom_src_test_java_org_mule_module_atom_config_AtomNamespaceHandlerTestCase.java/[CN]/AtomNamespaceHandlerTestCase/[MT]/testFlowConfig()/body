{
  Flow flowConstruct=muleContext.getRegistry().lookupObject("flowTest");
  assertNotNull(flowConstruct);
  assertTrue(flowConstruct.getMessageSource() instanceof InboundEndpoint);
  InboundEndpoint ep=((InboundEndpoint)flowConstruct.getMessageSource());
  assertEquals(3,ep.getMessageProcessors().size());
  MessageProcessor mp=ep.getMessageProcessors().get(0);
  assertTrue(mp instanceof FeedSplitter);
  mp=ep.getMessageProcessors().get(1);
  assertTrue(mp instanceof MessageFilter);
  SimpleDateFormat sdf=new SimpleDateFormat("yyyy-MM-dd");
  assertEquals(sdf.parse("2009-10-01"),((EntryLastUpdatedFilter)((MessageFilter)mp).getFilter()).getLastUpdate());
}
