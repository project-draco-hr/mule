{
  if (dataSource instanceof BitronixXaDataSourceWrapper) {
    return;
  }
  if (dataSource instanceof XADataSource) {
    if (muleContext.getTransactionManager() instanceof TransactionManagerWrapper) {
      logger.info(String.format("No pool defined for XADataSource in connector %s. A default pool will be created. " + "To customize define a bti:xa-data-source-pool element in your config and assign it to " + "the connector.",getName()));
      BitronixXaDataSourceBuilder builder=new BitronixXaDataSourceBuilder();
      builder.setName(getName());
      builder.setDataSource((XADataSource)dataSource);
      this.dataSource=builder.build(muleContext);
    }
 else {
      this.dataSource=new DataSourceWrapper((XADataSource)dataSource);
    }
  }
}
