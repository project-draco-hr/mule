{
  if (rulesEngine == null) {
    try {
      rulesEngine=muleContext.getRegistry().lookupObject(RulesEngine.class);
    }
 catch (    Exception e) {
      throw new InitialisationException(e,this);
    }
  }
  if (rulesEngine == null) {
    throw new InitialisationException(MessageFactory.createStaticMessage("The rulesEngine property must be set for this component."),this);
  }
  if (rulesEngine instanceof Initialisable) {
    ((Initialisable)rulesEngine).initialise();
  }
  rules=new Rules(rulesEngine,resource,null,entryPoint,initialFacts,stateless,cepMode,flowConstruct,muleContext);
  rulesEngine.setMessageService(rules);
  rules.initialise();
  super.doInitialise();
}
