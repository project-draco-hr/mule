{
  try {
    this.file=message;
    this.message=(byte[])transformer.transform(message);
    properties.put(FileConnector.PROPERTY_ORIGINAL_FILENAME,this.file.getName());
    properties.put(FileConnector.PROPERTY_DIRECTORY,this.file.getAbsolutePath());
  }
 catch (  TransformerException e) {
    throw new MessageException("Failed to read file: " + file.getAbsolutePath() + ". "+ e.getMessage(),e);
  }
}
