{
  boolean customSource=false;
  Object oldPayload=null;
  HttpEntity entity;
  if (!StringUtils.isEmpty(requester.getSource()) && !(DEFAULT_PAYLOAD_EXPRESSION.equals(requester.getSource()))) {
    Object newPayload=muleContext.getExpressionManager().evaluate(requester.getSource(),muleEvent);
    oldPayload=muleEvent.getMessage().getPayload();
    muleEvent.getMessage().setPayload(newPayload);
    customSource=true;
  }
  if (isEmptyBody(muleEvent,resolvedMethod)) {
    entity=new EmptyHttpEntity();
  }
 else {
    entity=createRequestEntityFromPayload(requestBuilder,muleEvent);
  }
  if (customSource) {
    muleEvent.getMessage().setPayload(oldPayload);
  }
  return entity;
}
