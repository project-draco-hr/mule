{
  ConnectionManagementType managementType=getManagementType(connectionProvider);
  if (managementType == POOLING) {
    return pooling(connectionProvider);
  }
  if (managementType == CACHED) {
    return cached(connectionProvider);
  }
 else   if (managementType == NONE) {
    return withoutManagement(connectionProvider);
  }
 else {
    throw new IllegalArgumentException("Unknown management type: " + managementType);
  }
}
