{
  when(operationContext.getConfiguration().getValue()).thenReturn(config);
  when(operationContext.getConfiguration().getConnectionProvider()).thenReturn(Optional.of(connectionProvider));
  when(operationContext.getVariable(CONNECTION_PARAM)).thenReturn(null);
  when(operationContext.getTransactionConfig()).thenReturn(empty());
  connectionProvider.setUsername(USER);
  connectionProvider.setPassword(PASSWORD);
  ConnectionManager connectionManager=muleContext.getRegistry().lookupObject(ConnectionManager.class);
  connectionManager.bind(config,connectionProvider);
  interceptor=new ConnectionInterceptor();
  muleContext.getInjector().inject(interceptor);
}
