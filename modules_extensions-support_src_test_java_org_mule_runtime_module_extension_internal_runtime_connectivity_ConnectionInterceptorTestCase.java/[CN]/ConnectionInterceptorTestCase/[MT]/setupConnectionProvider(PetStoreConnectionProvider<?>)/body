{
  this.connectionProvider=spy(aConnectionProvider);
  when(configurationInstance.getConnectionProvider()).thenReturn(Optional.of(connectionProvider));
  connectionProvider.setUsername(USER);
  connectionProvider.setPassword(PASSWORD);
  ConnectionManager connectionManager=muleContext.getRegistry().lookupObject(ConnectionManager.class);
  connectionManager.bind(config,connectionProvider);
}
