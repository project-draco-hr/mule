{
  CopyOnWriteCaseInsensitiveMap<String,Object> original=createTestMap();
  original.put("extra","value");
  original.put("extra2","value");
  Map<String,Object> copyOnWriteMap=serializeAndDeserialize(original);
  original.remove("extra");
  copyOnWriteMap.remove("extra2");
  assertMapContents(original);
  assertEquals(3,original.size());
  assertFalse(original.containsKey("extra"));
  assertTrue(original.containsKey("extra2"));
  assertMapContents(copyOnWriteMap);
  assertEquals(3,copyOnWriteMap.size());
  assertTrue(copyOnWriteMap.containsKey("extra"));
  assertFalse(copyOnWriteMap.containsKey("extra2"));
}
