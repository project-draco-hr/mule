{
  CopyOnWriteCaseInsensitiveMap<String,Object> original=createTestMap();
  Map<String,Object> copyOnWriteMap=new CopyOnWriteCaseInsensitiveMap<String,Object>(original);
  Map<String,String> extrasMap=new HashMap<String,String>();
  extrasMap.put("extra1","val");
  extrasMap.put("extra2","val");
  extrasMap.put("extra3","val");
  copyOnWriteMap.putAll(extrasMap);
  assertMapContents(original);
  assertEquals(2,original.size());
  assertFalse(original.containsKey("extra1"));
  assertFalse(original.containsKey("extra2"));
  assertFalse(original.containsKey("extra3"));
  assertMapContents(copyOnWriteMap);
  assertEquals(5,copyOnWriteMap.size());
  assertTrue(copyOnWriteMap.containsKey("extra1"));
  assertTrue(copyOnWriteMap.containsKey("extra2"));
  assertTrue(copyOnWriteMap.containsKey("extra3"));
}
