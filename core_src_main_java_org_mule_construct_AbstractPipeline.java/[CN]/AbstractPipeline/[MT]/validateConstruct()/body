{
  super.validateConstruct();
  boolean userConfiguredProcessingStrategy=!(processingStrategy instanceof DefaultFlowProcessingStrategy);
  boolean userConfiguredAsyncProcessingStrategy=processingStrategy instanceof AsynchronousProcessingStrategy && userConfiguredProcessingStrategy;
  boolean redeliveryHandlerConfigured=isRedeliveryPolicyConfigured();
  if (userConfiguredAsyncProcessingStrategy && (!isMessageSourceCompatibleWithAsync(messageSource) || (redeliveryHandlerConfigured))) {
    throw new FlowConstructInvalidException(CoreMessages.createStaticMessage("One of the inbound endpoint configured on this Flow is not compatible with an asynchronous processing strategy.  Either because it is request-response, has a transaction defined, or messaging redelivered is configured."),this);
  }
  if (!userConfiguredProcessingStrategy && redeliveryHandlerConfigured) {
    setProcessingStrategy(new SynchronousProcessingStrategy());
    if (logger.isWarnEnabled()) {
      logger.warn("Using message redelivery and rollback-exception-strategy requires synchronous processing strategy. Processing strategy re-configured to synchronous");
    }
  }
}
