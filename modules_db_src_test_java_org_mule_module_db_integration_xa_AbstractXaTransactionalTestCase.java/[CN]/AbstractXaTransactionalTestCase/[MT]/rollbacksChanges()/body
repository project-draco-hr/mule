{
  MessagingException e=flowRunner("jdbcRollback").transactionally(ACTION_ALWAYS_BEGIN,new XaTransactionFactory()).runExpectingException();
  assertThat(e.getCause(),instanceOf(IllegalStateException.class));
  List<Map<String,String>> result=selectData("select * from PLANET where POSITION=4",getDefaultDataSource());
  assertRecords(result,new Record(new Field("NAME",MARS.getName()),new Field("POSITION",4)));
}
