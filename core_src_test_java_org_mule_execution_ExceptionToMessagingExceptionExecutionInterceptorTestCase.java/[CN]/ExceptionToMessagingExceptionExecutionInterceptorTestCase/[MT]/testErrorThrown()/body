{
  Error error=new Error();
  Mockito.when(mockMessageProcessor.process(mockMuleEvent)).thenThrow(error);
  try {
    cut.execute(mockMessageProcessor,mockMuleEvent);
    fail("Exception should be thrown");
  }
 catch (  MessagingException e) {
    assertThat((Error)e.getCause(),is(error));
  }
}
