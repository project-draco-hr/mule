{
  UMOTransaction oldTx=(UMOTransaction)transactions.get();
  if (oldTx != null && !oldTx.equals(transaction)) {
    throw new IllegalTransactionStateException(new Message(Messages.TX_CANT_UNBIND));
  }
  transactions.set(null);
  decrementCounter();
}
