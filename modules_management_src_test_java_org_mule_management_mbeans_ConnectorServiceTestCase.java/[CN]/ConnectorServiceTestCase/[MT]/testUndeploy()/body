{
  final Connector connector=new TestConnector(muleContext);
  connector.setName("TEST_CONNECTOR");
  muleContext.getRegistry().registerConnector(connector);
  muleContext.start();
  domainName=jmxSupport.getDomainName(muleContext);
  final String query=domainName + ":*";
  final ObjectName objectName=jmxSupport.getObjectName(query);
  Set<ObjectInstance> mbeans=mBeanServer.queryMBeans(objectName,null);
  assertEquals("Unexpected number of components registered in the domain.",7,mbeans.size());
  muleContext.dispose();
  mbeans=mBeanServer.queryMBeans(objectName,null);
  assertEquals("There should be no MBeans left in the domain",0,mbeans.size());
}
