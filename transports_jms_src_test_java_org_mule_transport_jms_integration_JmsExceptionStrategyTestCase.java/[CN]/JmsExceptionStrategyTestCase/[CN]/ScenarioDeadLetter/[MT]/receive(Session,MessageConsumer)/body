{
  Message message=consumer.receive(TIMEOUT);
  assertNotNull(message);
  assertTrue("Message should be ObjectMessage but is " + message.getClass(),message instanceof ObjectMessage);
  Object obj=((ObjectMessage)message).getObject();
  assertTrue(obj instanceof ExceptionMessage);
  assertEquals(DEFAULT_INPUT_MESSAGE,((ExceptionMessage)obj).getPayload());
  String dest=message.getStringProperty(MuleProperties.MULE_ENDPOINT_PROPERTY);
  assertNotNull(dest);
  assertEquals("jms://" + DEADLETTER_QUEUE_NAME,dest);
  applyTransaction(session);
  return message;
}
