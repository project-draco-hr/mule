{
  URIBuilder uri=new URIBuilder("test://bar?aname=avalue&aname=bvalue&aname=cvalue",muleContext);
  EndpointURI endpointURI=uri.getEndpoint();
  assertEquals("test://bar?aname=avalue&aname=bvalue&aname=cvalue",endpointURI.getUri().toString());
  Map<String,String> tq=new HashMap<String,String>();
  tq.put("aname","zvalue");
  tq.put("dname","dvalue");
  uri=new URIBuilder("test://bar?aname=avalue&aname=bvalue&aname=cvalue",muleContext);
  uri.setQueryMap(tq);
  endpointURI=uri.getEndpoint();
  assertEquals("test://bar?aname=zvalue&aname=bvalue&aname=cvalue&dname=dvalue",endpointURI.getUri().toString());
}
