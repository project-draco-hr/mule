{
  MuleEvent event=buildEvent("nestedFlowInvocations");
  String flowName=ROOT_FLOW_NAME;
  PipelineMessageNotification pipelineNotification=buildPipelineNotification(event,flowName);
  assertThat(getContextInfo(event),is(""));
  manager.onPipelineNotificationStart(pipelineNotification);
  manager.onMessageProcessorNotificationPreInvoke(buildProcessorNotification(event,mock(MessageProcessor.class),NESTED_FLOW_NAME + "_ref"));
  PipelineMessageNotification pipelineNotificationNested=buildPipelineNotification(event,NESTED_FLOW_NAME);
  manager.onPipelineNotificationStart(pipelineNotificationNested);
  String rootEntry="at " + flowName + "("+ NESTED_FLOW_NAME+ "_ref @ "+ APP_ID+ ")";
  assertThat(getContextInfo(event),is("at " + NESTED_FLOW_NAME + System.lineSeparator()+ rootEntry));
  manager.onPipelineNotificationComplete(pipelineNotificationNested);
  assertThat(getContextInfo(event),is(rootEntry));
  manager.onPipelineNotificationComplete(pipelineNotification);
  assertThat(getContextInfo(event),is(""));
}
