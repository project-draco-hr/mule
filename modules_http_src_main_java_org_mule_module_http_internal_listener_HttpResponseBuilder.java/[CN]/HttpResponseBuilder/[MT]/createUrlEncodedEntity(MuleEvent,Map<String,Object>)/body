{
  final Map<String,Object> mapPayload=payload;
  HttpEntity entity=new EmptyHttpEntity();
  if (!mapPayload.isEmpty()) {
    String encodedBody;
    if (mapPayload instanceof ParameterMap) {
      encodedBody=HttpParser.encodeString(event.getEncoding(),((ParameterMap)mapPayload).toCollectionMap());
    }
 else {
      encodedBody=HttpParser.encodeString(event.getEncoding(),mapPayload);
    }
    entity=new ByteArrayHttpEntity(encodedBody.getBytes());
  }
  return entity;
}
