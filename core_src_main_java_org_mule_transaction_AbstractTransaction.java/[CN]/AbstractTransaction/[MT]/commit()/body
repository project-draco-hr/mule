{
  try {
    logger.debug("Committing transaction");
    if (isRollbackOnly()) {
      throw new IllegalTransactionStateException(new Message(Messages.TX_MARKED_FOR_ROLLBACK));
    }
    doCommit();
  }
  finally {
    TransactionCoordination.getInstance().unbindTransaction(this);
  }
}
