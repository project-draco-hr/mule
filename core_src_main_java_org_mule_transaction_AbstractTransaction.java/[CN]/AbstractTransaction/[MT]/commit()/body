{
  try {
    logger.debug("Committing transaction");
    if (isRollbackOnly()) {
      throw new IllegalTransactionStateException(CoreMessages.transactionMarkedForRollback());
    }
    doCommit();
  }
  finally {
    TransactionCoordination.getInstance().unbindTransaction(this);
  }
}
