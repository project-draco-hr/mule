{
  if (value == null || value instanceof NullPayload && transformer.isAllowNullReturn()) {
    return;
  }
  if (transformer.getReturnDataType() != null) {
{
      if (transformer.getReturnDataType() != null) {
        DataType<?> dt=DataTypeFactory.create(value.getClass());
        if (!transformer.getReturnDataType().isCompatibleWith(dt)) {
          throw new TransformerException(CoreMessages.transformUnexpectedType(dt,transformer.getReturnDataType()),transformer);
        }
      }
    }
    if (logger.isDebugEnabled()) {
      logger.debug("The transformed value is of expected type. Type is: " + ClassUtils.getSimpleName(value.getClass()));
    }
  }
}
