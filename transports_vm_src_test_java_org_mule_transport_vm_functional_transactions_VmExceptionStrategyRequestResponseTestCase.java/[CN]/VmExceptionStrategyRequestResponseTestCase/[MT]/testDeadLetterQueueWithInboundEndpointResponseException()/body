{
  MuleClient muleClient=muleContext.getClient();
  MuleMessage response=muleClient.send("vm://in2",ORIGINAL_MESSAGE,null);
  assertThat(response,IsNull.<Object>notNullValue());
  assertThat(response.getPayload(),IsInstanceOf.instanceOf(NullPayload.class));
  assertThat(response.getExceptionPayload(),IsNull.<Object>notNullValue());
  assertThat(response.getExceptionPayload(),IsInstanceOf.instanceOf(DefaultExceptionPayload.class));
  assertThat(muleClient.request("vm://out2",TINY_TIMEOUT),IsNull.<Object>nullValue());
  if (!outboundComponentLatch.await(TINY_TIMEOUT,TimeUnit.MILLISECONDS)) {
    fail("outbound component not reached");
  }
}
