{
  Comparable<Number> newValue;
  if (StringUtils.isEmpty(options.getPattern())) {
    newValue=(Comparable<Number>)validateWithoutPattern(options.getValue(),new Locale(options.getLocale()));
  }
 else {
    newValue=(Comparable<Number>)validateWithPattern(options.getValue(),options.getPattern(),new Locale(options.getLocale()));
  }
  if (newValue == null) {
    errorMessage=getMessages().invalidNumberType(options.getValue(),getNumberType());
    return fail();
  }
  if (options.getMinValue() != null) {
    if (newValue.compareTo(options.getMinValue()) < 0) {
      errorMessage=getMessages().lowerThan(newValue,options.getMinValue());
      return fail();
    }
  }
  if (options.getMaxValue() != null) {
    if (newValue.compareTo(options.getMaxValue()) > 0) {
      errorMessage=getMessages().greaterThan(newValue,options.getMaxValue());
      return fail();
    }
  }
  return ok();
}
