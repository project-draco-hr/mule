{
  DefaultMuleContext context=(DefaultMuleContext)new DefaultMuleContextFactory().createMuleContext(new TestServicesConfigurationBuilder(),new DefaultsConfigurationBuilder());
  TransactionManagerFactoryBean txMgrFB=new TransactionManagerFactoryBean();
  txMgrFB.setMuleContext(context);
  txMgrFB.setTxManagerFactory(new TestTransactionManagerFactory());
  TransactionManager txMgr=mock(TransactionManager.class);
  txMgrFB.setCustomTxManager(txMgr);
  TransactionManager transactionManager=txMgrFB.getObject();
  assertThat(transactionManager,not(nullValue()));
  assertThat(transactionManager,not(sameInstance(txMgr)));
}
