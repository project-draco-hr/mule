{
  Map<String,Object> properties=new HashMap<String,Object>();
  String username="testUsername";
  String password="testPassword";
  strategy.setUsername(username);
  strategy.setPassword(password);
  strategy.setPasswordType(TEXT);
  strategy.apply(properties,null);
  assertEquals(username,properties.get(USER));
  assertEquals("PasswordText",properties.get(PASSWORD_TYPE));
  CallbackHandler handler=(CallbackHandler)properties.get(PW_CALLBACK_REF);
  WSPasswordCallback passwordCallback=new WSPasswordCallback(username,USERNAME_TOKEN);
  handler.handle(new Callback[]{passwordCallback});
  assertEquals(password,passwordCallback.getPassword());
}
