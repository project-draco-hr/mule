{
  Map<String,Object> properties=new HashMap<String,Object>();
  String username="testUsername";
  String password="testPassword";
  strategy.setUsername(username);
  strategy.setPassword(password);
  strategy.setPasswordType(PasswordType.TEXT);
  strategy.apply(properties);
  assertEquals(username,properties.get(WSHandlerConstants.USER));
  assertEquals("PasswordText",properties.get(WSHandlerConstants.PASSWORD_TYPE));
  CallbackHandler handler=(CallbackHandler)properties.get(WSHandlerConstants.PW_CALLBACK_REF);
  WSPasswordCallback passwordCallback=new WSPasswordCallback(username,1);
  handler.handle(new Callback[]{passwordCallback});
  assertEquals(password,passwordCallback.getPassword());
}
