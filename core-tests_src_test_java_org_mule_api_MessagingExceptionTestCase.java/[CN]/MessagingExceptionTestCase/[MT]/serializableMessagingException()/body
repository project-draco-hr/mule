{
  TestSerializableMessageProcessor processor=new TestSerializableMessageProcessor();
  processor.setValue(value);
  MessagingException e=new MessagingException(MessageFactory.createStaticMessage(message),getTestEvent(""),processor);
  e=SerializationTestUtils.testException(e,muleContext);
  assertThat(e.getMessage(),containsString(message));
  assertThat(e.getFailingMessageProcessor(),not(nullValue()));
  assertThat(e.getFailingMessageProcessor(),instanceOf(TestSerializableMessageProcessor.class));
  assertThat(((TestSerializableMessageProcessor)e.getFailingMessageProcessor()).getValue(),is(value));
}
