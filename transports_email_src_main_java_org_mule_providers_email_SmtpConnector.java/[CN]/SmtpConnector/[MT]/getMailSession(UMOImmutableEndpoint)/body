{
  UMOEndpointURI uri=endpoint.getEndpointURI();
  String host=uri.getHost();
  if (host == null) {
    host=this.getHost();
  }
  int port=uri.getPort();
  if (port == -1) {
    port=this.getPort();
  }
  String username=uri.getUsername();
  if (StringUtils.isBlank(username)) {
    username=this.getUsername();
  }
  String password=uri.getPassword();
  if (StringUtils.isBlank(password)) {
    password=this.getPassword();
  }
  return this.getMailSession(new URLName(this.getProtocol(),host,port,null,username,password));
}
