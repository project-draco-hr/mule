{
  MuleException e=ExceptionHelper.getRootMuleException(this);
  if (!e.equals(this)) {
    return getMessage();
  }
  StringBuilder buf=new StringBuilder(1024);
  buf.append(SystemUtils.LINE_SEPARATOR).append(StringUtils.repeat('*',80)).append(SystemUtils.LINE_SEPARATOR);
  buf.append("Message               : ").append(message).append(SystemUtils.LINE_SEPARATOR);
  Map info=ExceptionHelper.getExceptionInfo(this);
  for (  Map.Entry entry : (Set<Map.Entry>)info.entrySet()) {
    String s=(String)entry.getKey();
    int pad=22 - s.length();
    buf.append(s);
    if (pad > 0) {
      buf.append(StringUtils.repeat(' ',pad));
    }
    buf.append(": ");
    buf.append((entry.getValue() == null ? "null" : entry.getValue().toString().replaceAll(SystemUtils.LINE_SEPARATOR,SystemUtils.LINE_SEPARATOR + StringUtils.repeat(' ',24)))).append(SystemUtils.LINE_SEPARATOR);
  }
  buf.append(StringUtils.repeat('*',80)).append(SystemUtils.LINE_SEPARATOR);
  buf.append(CoreMessages.exceptionStackIs()).append(SystemUtils.LINE_SEPARATOR);
  buf.append(StringUtils.abbreviate(ExceptionHelper.getExceptionStack(this),5000));
  buf.append(StringUtils.repeat('*',80)).append(SystemUtils.LINE_SEPARATOR);
  buf.append(CoreMessages.rootStackTrace()).append(SystemUtils.LINE_SEPARATOR);
  Throwable root=ExceptionHelper.getRootException(this);
  StringWriter w=new StringWriter();
  PrintWriter p=new PrintWriter(w);
  root.printStackTrace(p);
  buf.append(StringUtils.abbreviate(w.toString(),5000)).append(SystemUtils.LINE_SEPARATOR);
  buf.append(StringUtils.repeat('*',80)).append(SystemUtils.LINE_SEPARATOR);
  return buf.toString();
}
