{
  MuleException e=ExceptionHelper.getRootMuleException(this);
  if (!e.equals(this)) {
    return getMessage();
  }
  StringBuilder buf=new StringBuilder(1024);
  buf.append(SystemUtils.LINE_SEPARATOR).append(StringUtils.repeat('*',80)).append(SystemUtils.LINE_SEPARATOR);
  buf.append("Message               : ").append(message).append(SystemUtils.LINE_SEPARATOR);
  buf.append("Code                  : ").append("MULE_ERROR-").append(getExceptionCode() + getMessageCode()).append(SystemUtils.LINE_SEPARATOR);
  buf.append(StringUtils.repeat('-',80)).append(SystemUtils.LINE_SEPARATOR);
  buf.append(CoreMessages.exceptionStackIs()).append(SystemUtils.LINE_SEPARATOR);
  buf.append(StringUtils.abbreviate(ExceptionHelper.getExceptionStack(this),5000));
  buf.append(StringUtils.repeat('-',80)).append(SystemUtils.LINE_SEPARATOR);
  buf.append(CoreMessages.rootStackTrace()).append(SystemUtils.LINE_SEPARATOR);
  Throwable root=ExceptionHelper.getRootException(this);
  Throwable rootSummary=ExceptionHelper.summarise(root,3);
  StringWriter w=new StringWriter();
  PrintWriter p=new PrintWriter(w);
  rootSummary.printStackTrace(p);
  buf.append(StringUtils.abbreviate(w.toString(),5000));
  buf.append("    + " + root.getStackTrace().length + " more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything)").append(SystemUtils.LINE_SEPARATOR);
  buf.append(StringUtils.repeat('*',80)).append(SystemUtils.LINE_SEPARATOR);
  return buf.toString();
}
