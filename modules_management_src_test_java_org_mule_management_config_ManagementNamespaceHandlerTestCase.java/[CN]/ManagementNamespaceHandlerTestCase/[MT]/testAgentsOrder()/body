{
  Registry registry=RegistryContext.getRegistry();
  SpringRegistry springRegistry=(SpringRegistry)registry.getParent();
  assertNotNull(springRegistry);
  Collection agents=springRegistry.lookupObjects(Agent.class);
  assertEquals(agents.size(),8);
  Iterator iter=agents.iterator();
  assertTrue(iter.next() instanceof JmxAgent);
  assertTrue(iter.next() instanceof Log4jAgent);
  assertTrue(iter.next() instanceof Mx4jAgent);
  assertTrue(iter.next() instanceof TestAgent);
  assertTrue(iter.next() instanceof JmxServerNotificationAgent);
  Log4jNotificationLoggerAgent log4jAgent=(Log4jNotificationLoggerAgent)iter.next();
  assertEquals(log4jAgent.getName(),"log4JNotificationAgent");
  log4jAgent=(Log4jNotificationLoggerAgent)iter.next();
  assertEquals(log4jAgent.getName(),"chainsawNotificationAgent");
  assertTrue(iter.next() instanceof EndpointNotificationLoggerAgent);
}
