{
  Map<String,String> connectionProperties=getConnectionProperties();
  if (DRIVER_CLASS_NAME.equals(getDriverClassName())) {
    connectionProperties.put("generateSimpleParameterMetadata","true");
  }
  if (connectionProperties.isEmpty()) {
    return url;
  }
  StringBuilder effectiveUrl=new StringBuilder(url);
  if (getUri(url).getQuery() == null) {
    effectiveUrl.append("?");
  }
 else {
    effectiveUrl.append("&");
  }
  return effectiveUrl.append(buildQueryParams(connectionProperties)).toString();
}
