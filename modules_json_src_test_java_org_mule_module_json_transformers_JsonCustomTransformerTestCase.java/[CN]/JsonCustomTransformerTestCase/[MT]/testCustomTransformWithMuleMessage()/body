{
  ByteArrayInputStream in=new ByteArrayInputStream(EMAIL_JSON.getBytes());
  DefaultMuleMessage message=new DefaultMuleMessage(in,muleContext);
  message.setInboundProperty("foo","fooValue");
  EmailAddress emailAddress=getPayload(message,new SimpleDataType<EmailAddress>(EmailAddress.class));
  assertNotNull(emailAddress);
  assertEquals("home",emailAddress.getType());
  assertEquals("john.doe@gmail.com",emailAddress.getAddress());
}
