{
  MetadataResult<ComponentMetadataDescriptor> result=getMetadata(UPLOAD_ATTACHMENT,UPLOAD_ATTACHMENT);
  MetadataType message=result.get().getInputMetadata().get().getParameterMetadata(MESSAGE_PARAM).get().getType();
  MetadataType body=getMessageBuilderFieldType(message,BODY_FIELD);
  assertThat(body,is(instanceOf(NullType.class)));
  ObjectType attachments=toObjectType(getMessageBuilderFieldType(message,ATTACHMENTS_FIELD));
  Collection<ObjectFieldType> attachmentFields=attachments.getFields();
  assertThat(attachmentFields,hasSize(1));
  assertThat(attachmentFields.iterator().next().getKey().getName().getLocalPart(),is("attachment"));
}
