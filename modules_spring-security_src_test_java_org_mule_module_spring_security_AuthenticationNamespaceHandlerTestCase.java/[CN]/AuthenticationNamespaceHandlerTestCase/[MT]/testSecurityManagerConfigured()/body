{
  MuleSecurityManager securityManager=(MuleSecurityManager)muleContext.getRegistry().lookupObject(MuleProperties.OBJECT_SECURITY_MANAGER);
  assertNotNull(securityManager);
  Collection providers=securityManager.getProviders();
  assertEquals(2,providers.size());
  Iterator providersIterator=providers.iterator();
  SecurityProvider provider=(SecurityProvider)providersIterator.next();
  assertEquals(SpringProviderAdapter.class,provider.getClass());
  assertEquals(UserAndPasswordAuthenticationProvider.class,((SpringProviderAdapter)provider).getAuthenticationProvider().getClass());
  provider=(SecurityProvider)providersIterator.next();
  assertEquals(SpringProviderAdapter.class,provider.getClass());
  assertEquals(PreAuthenticatedAuthenticationProvider.class,((SpringProviderAdapter)provider).getAuthenticationProvider().getClass());
}
