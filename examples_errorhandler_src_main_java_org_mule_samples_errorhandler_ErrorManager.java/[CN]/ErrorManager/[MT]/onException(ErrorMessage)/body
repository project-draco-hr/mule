{
  Class eClass=null;
  ExceptionHandler eh=null;
  try {
    eClass=msg.getException().toException().getClass();
    eh=getHandler(eClass);
    eh.onException(msg);
  }
 catch (  Exception e) {
    logger.error(e);
    if (eh instanceof DefaultHandler) {
      logger.error(LocaleMessage.defaultFatalHandling(FatalHandler.class));
      handleFatal(e);
    }
 else     if (eh instanceof FatalHandler) {
      logger.fatal(LocaleMessage.fatalHandling(e));
      MuleServer.getManagementContext().dispose();
      System.exit(-1);
    }
 else {
      logger.error(LocaleMessage.defaultHandling(DefaultHandler.class,eh,e));
      handleDefault(msg,e);
    }
  }
}
