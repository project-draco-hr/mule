{
  Class eClass=null;
  ExceptionHandler eh=null;
  try {
    eClass=msg.getException().toException().getClass();
    eh=getHandler(eClass);
    eh.onException(msg);
  }
 catch (  Exception e) {
    logger.error(LocaleMessage.getString(LocaleMessage.HANDLER_FAILURE,(eh != null ? (eh.getClass().getName() + " : " + e) : "null")));
    if (eh instanceof DefaultHandler) {
      logger.error(LocaleMessage.getString(LocaleMessage.DEFAULT_FATAL_HANDLING,FatalHandler.class.getName()));
      handleFatal(e);
    }
 else     if (eh instanceof FatalHandler) {
      logger.fatal(LocaleMessage.getString(LocaleMessage.FATAL_HANDLING,e));
    }
 else {
      logger.error(LocaleMessage.getString(LocaleMessage.DEFAULT_HANDLING,DefaultHandler.class.getName(),(eh != null ? (eh.getClass().getName() + " : " + e) : "null")));
      handleDefault(msg,e);
    }
  }
}
