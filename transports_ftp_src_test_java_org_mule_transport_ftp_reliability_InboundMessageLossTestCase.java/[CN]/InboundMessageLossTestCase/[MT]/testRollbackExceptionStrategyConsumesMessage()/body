{
  final CountDownLatch exceptionStrategyLatch=new CountDownLatch(4);
  muleContext.registerListener(new ExceptionNotificationListener<ExceptionNotification>(){
    @Override public void onNotification(    ExceptionNotification notification){
      exceptionStrategyLatch.countDown();
    }
  }
);
  createFileOnFtpServer("rollbackOnException/test1");
  if (!exceptionStrategyLatch.await(RECEIVE_TIMEOUT,TimeUnit.MILLISECONDS)) {
    fail("message should be redelivered");
  }
  prober.check(new Probe(){
    @Override public boolean isSatisfied(){
      return !fileExists("commitOnException/test1");
    }
    @Override public String describeFailure(){
      return "File should be gone";
    }
  }
);
}
