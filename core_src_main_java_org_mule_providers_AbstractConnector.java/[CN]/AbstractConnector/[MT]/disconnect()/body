{
  startOnConnect.set(isStarted());
  fireNotification(new ConnectionNotification(this,getConnectEventId(),ConnectionNotification.CONNECTION_DISCONNECTED));
  connected.set(false);
  try {
    doDisconnect();
  }
  finally {
    stop();
  }
  logger.info("Disconnected: " + getConnectionDescription());
}
