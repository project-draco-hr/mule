{
  DataType dataType=resolveDataType(value,operationContext);
  if (value instanceof MuleMessage) {
    MuleMessage outputMessage=(MuleMessage)value;
    return new DefaultMuleMessage(outputMessage.getPayload(),dataType,resolveAttributes(outputMessage,operationContext),muleContext);
  }
 else {
    return new DefaultMuleMessage(value,dataType,operationContext.getEvent().getMessage().getAttributes(),muleContext);
  }
}
