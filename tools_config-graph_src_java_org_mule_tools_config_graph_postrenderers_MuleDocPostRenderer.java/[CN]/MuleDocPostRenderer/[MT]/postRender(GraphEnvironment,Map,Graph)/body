{
  try {
    VelocityContext velocityContext=new VelocityContext();
    for (Iterator iter=context.keySet().iterator(); iter.hasNext(); ) {
      String key=(String)iter.next();
      String value=(String)context.get(key);
      velocityContext.put(key,value);
    }
    velocityContext.put("graph",graph);
    Template t=ve.getTemplate(template);
    File file=new File(context.get("htmlFileName").toString());
    FileWriter writer=new FileWriter(file);
    env.log("generating " + file);
    t.merge(velocityContext,writer);
    writer.flush();
    writer.close();
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
}
