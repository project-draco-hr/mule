{
  Object service=muleContext.getRegistry().lookupObject("Test");
  assertNotNull(service);
  InboundEndpoint endpoint;
  if (variant.equals(ConfigVariant.FLOW)) {
    endpoint=(InboundEndpoint)((Flow)service).getMessageSource();
  }
 else {
    List endpoints=((ServiceCompositeMessageSource)((Service)service).getMessageSource()).getEndpoints();
    assertEquals(1,endpoints.size());
    endpoint=(InboundEndpoint)endpoints.get(0);
  }
  Filter filter=endpoint.getFilter();
  assertNotNull(filter);
  assertTrue(filter instanceof FilenameRegexFilter);
  final FilenameRegexFilter f=(FilenameRegexFilter)filter;
  assertEquals(false,f.isCaseSensitive());
  assertEquals("(^SemDirector_Report-\\d)(.*)(tab$)",f.getPattern());
}
