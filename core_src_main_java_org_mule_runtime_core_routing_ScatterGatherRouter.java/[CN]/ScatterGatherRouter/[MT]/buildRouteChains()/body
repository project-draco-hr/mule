{
  Preconditions.checkState(routes.size() > 1,"At least 2 routes are required for ScatterGather");
  routeChains=new ArrayList<MessageProcessor>(routes.size());
  for (  MessageProcessor route : routes) {
    if (route instanceof MessageProcessorChain) {
      routeChains.add(route);
    }
 else {
      routeChains.add(new DefaultMessageProcessorChainBuilder().chain(route).build());
    }
  }
}
