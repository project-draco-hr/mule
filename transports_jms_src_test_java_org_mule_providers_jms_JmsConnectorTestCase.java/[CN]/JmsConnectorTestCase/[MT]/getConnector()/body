{
  if (connector == null) {
    connector=new JmsConnector();
    connector.setName("TestConnector");
    connector.setSpecification(JmsConstants.JMS_SPECIFICATION_11);
    Mock connectionFactory=new Mock(ConnectionFactory.class);
    Mock connection=new Mock(Connection.class);
    connectionFactory.expectAndReturn("createConnection",connection.proxy());
    connection.expect("setExceptionListener",C.isA(ExceptionListener.class));
    connection.expect("close");
    connection.expect("start");
    connection.expect("stop");
    connection.expect("stop");
    connection.expect("setClientID","mule.TestConnector");
    connector.setConnectionFactory((ConnectionFactory)connectionFactory.proxy());
    connector.initialise();
  }
  return connector;
}
