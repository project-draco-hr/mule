{
  JmsConnector newConnector=new JmsConnector();
  newConnector.setName("TestConnector");
  newConnector.setSpecification(JmsConstants.JMS_SPECIFICATION_11);
  Mock connectionFactory=new Mock(ConnectionFactory.class);
  Mock connection=new Mock(Connection.class);
  connectionFactory.expectAndReturn("createConnection",connection.proxy());
  connection.expect("setExceptionListener",C.isA(ExceptionListener.class));
  connection.expect("close");
  connection.expect("start");
  connection.expect("stop");
  connection.expect("stop");
  connection.expect("setClientID","mule.TestConnector");
  newConnector.setConnectionFactory(new SingletonObjectFactory(connectionFactory.proxy()));
  return newConnector;
}
