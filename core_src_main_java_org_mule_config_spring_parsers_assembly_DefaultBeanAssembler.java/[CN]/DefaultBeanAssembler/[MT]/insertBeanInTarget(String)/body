{
  logger.debug("insert " + bean.getBeanDefinition().getBeanClassName() + " -> "+ target.getBeanClassName());
  assertTargetPresent();
  String beanClass=bean.getBeanDefinition().getBeanClassName();
  PropertyValues pvs=bean.getRawBeanDefinition().getPropertyValues();
  String newName=bestGuessName(targetConfig,oldName,target.getBeanClassName());
  PropertyValue pv=target.getPropertyValues().getPropertyValue(newName);
  if (!targetConfig.isIgnored(oldName)) {
    if (ChildMapEntryDefinitionParser.KeyValuePair.class.getName().equals(beanClass)) {
      if (pv == null) {
        pv=new PropertyValue(newName,new ManagedMap());
      }
      ((Map)pv.getValue()).put(pvs.getPropertyValue(ChildMapEntryDefinitionParser.KEY).getValue(),pvs.getPropertyValue(ChildMapEntryDefinitionParser.VALUE).getValue());
    }
 else     if (targetConfig.isCollection(oldName) || ChildListEntryDefinitionParser.ListEntry.class.getName().equals(beanClass)) {
      if (pv == null) {
        pv=new PropertyValue(newName,new ManagedList());
      }
      List list=(List)pv.getValue();
      if (ChildListEntryDefinitionParser.ListEntry.class.getName().equals(beanClass)) {
        list.add(pvs.getPropertyValue(ChildListEntryDefinitionParser.VALUE).getValue());
      }
 else {
        list.add(bean.getBeanDefinition());
      }
    }
 else {
      pv=new PropertyValue(newName,bean.getBeanDefinition());
    }
    target.getPropertyValues().addPropertyValue(pv);
  }
}
