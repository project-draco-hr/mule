{
  logger.debug("insert " + bean.getBeanDefinition().getBeanClassName() + " -> "+ target.getBeanClassName());
  assertTargetPresent();
  String newName=bestGuessName(targetConfig,oldName,target.getBeanClassName());
  Object source=bean.getBeanDefinition().getSource();
  PropertyValue pv=target.getPropertyValues().getPropertyValue(newName);
  if (!targetConfig.isIgnored(oldName)) {
    if (ChildMapEntryDefinitionParser.KeyValuePair.class.getName().equals(bean.getBeanDefinition().getBeanClassName())) {
      if (pv == null) {
        pv=new PropertyValue(newName,new ManagedMap());
      }
      PropertyValues pvs=bean.getRawBeanDefinition().getPropertyValues();
      ((Map)pv.getValue()).put(pvs.getPropertyValue(ChildMapEntryDefinitionParser.KEY).getValue(),pvs.getPropertyValue(ChildMapEntryDefinitionParser.VALUE).getValue());
    }
 else     if (targetConfig.isCollection(oldName) || source instanceof ChildListEntryDefinitionParser.ListEntry) {
      if (pv == null) {
        pv=new PropertyValue(newName,new ManagedList());
      }
      List list=(List)pv.getValue();
      if (source instanceof ChildListEntryDefinitionParser.ListEntry) {
        ChildListEntryDefinitionParser.ListEntry entry=(ChildListEntryDefinitionParser.ListEntry)source;
        list.add(entry.getProxiedObject());
      }
 else {
        list.add(bean.getBeanDefinition());
      }
    }
 else {
      pv=new PropertyValue(newName,bean.getBeanDefinition());
    }
    target.getPropertyValues().addPropertyValue(pv);
  }
}
