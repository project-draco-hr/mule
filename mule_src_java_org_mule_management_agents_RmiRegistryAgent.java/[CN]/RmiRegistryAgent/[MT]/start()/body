{
  URI uri=null;
  try {
    uri=new URI(serverUri);
  }
 catch (  URISyntaxException e) {
    e.printStackTrace();
  }
  if (rmiRegistry == null) {
    try {
      if (createRegistry) {
        try {
          rmiRegistry=LocateRegistry.createRegistry(uri.getPort());
        }
 catch (        ExportException e) {
          logger.info("Registery on " + serverUri + " already bound. Attempting to use that instead");
          rmiRegistry=LocateRegistry.getRegistry(uri.getHost(),uri.getPort());
        }
      }
 else {
        rmiRegistry=LocateRegistry.getRegistry(uri.getHost(),uri.getPort());
      }
    }
 catch (    RemoteException e) {
      throw new InitialisationException(e,this);
    }
  }
}
