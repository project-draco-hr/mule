{
  ObjectType message=getMessageBuilderType(ECHO_FLOW,ECHO);
  MetadataType body=getMessageBuilderFieldType(message,BODY_FIELD);
  Collection<ObjectFieldType> fields=toObjectType(body).getFields();
  assertThat(fields,hasSize(1));
  ObjectFieldType operationField=fields.iterator().next();
  assertThat(operationField.getKey().getName().getLocalPart(),is(ECHO));
  Collection<ObjectFieldType> operationParams=toObjectType(operationField.getValue()).getFields();
  assertThat(operationParams,hasSize(1));
  ObjectFieldType field=operationParams.iterator().next();
  assertThat(field.getKey().getName().getLocalPart(),is("text"));
  assertThat(field.getValue(),is(instanceOf(StringType.class)));
}
