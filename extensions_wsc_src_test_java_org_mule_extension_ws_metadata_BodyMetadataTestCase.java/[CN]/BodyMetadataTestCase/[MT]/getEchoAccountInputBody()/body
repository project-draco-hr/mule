{
  ObjectType message=getMessageBuilderType(ECHO_ACCOUNT_FLOW,ECHO_ACCOUNT);
  MetadataType body=getMessageBuilderFieldType(message,BODY_FIELD);
  Collection<ObjectFieldType> fields=toObjectType(body).getFields();
  assertThat(fields,hasSize(1));
  ObjectFieldType operationField=fields.iterator().next();
  assertThat(operationField.getKey().getName().getLocalPart(),is(ECHO_ACCOUNT));
  Collection<ObjectFieldType> operationParams=toObjectType(operationField.getValue()).getFields();
  assertThat(operationParams,hasSize(2));
  Iterator<ObjectFieldType> iterator=operationParams.iterator();
  ObjectFieldType accountField=iterator.next();
  assertThat(accountField.getKey().getName().getLocalPart(),is("account"));
  ObjectType accountType=toObjectType(accountField.getValue());
  Collection<ObjectFieldType> accountFields=accountType.getFields();
  assertThat(accountFields,hasSize(4));
  ObjectFieldType name=iterator.next();
  assertThat(name.getKey().getName().getLocalPart(),is("name"));
  assertThat(name.getValue(),is(instanceOf(StringType.class)));
}
