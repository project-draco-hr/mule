{
  when(context.getInitParameter(MuleXmlBuilderContextListener.INIT_PARAMETER_MULE_CONFIG)).thenReturn("org/mule/config/builders/mule-config.xml");
  when(context.getInitParameter(MuleXmlBuilderContextListener.INIT_PARAMETER_MULE_APP_CONFIG)).thenReturn("org/mule/config/builders/mule-app-ppp.properties");
  when(context.getAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE)).thenReturn(null);
  listener.initialize(context);
  verify(context).getInitParameter(MuleXmlBuilderContextListener.INIT_PARAMETER_MULE_CONFIG);
  verify(context).getAttribute(WebApplicationContext.ROOT_WEB_APPLICATION_CONTEXT_ATTRIBUTE);
  assertTrue(listener.muleContext.getConfiguration().getWorkingDirectory().endsWith("target/.appTmp2"));
}
