{
  FileOutputStream fos=new FileOutputStream(new File(muleContext.getConfiguration().getWorkingDirectory(),"sample-feed.atom"));
  String feed=loadResourceAsString("sample-feed.atom");
  fos.write(feed.getBytes("UTF-8"));
  fos.close();
  final EntryReceiver component=(EntryReceiver)getComponent("feedSplitterConsumer");
  PollingProber prober=new PollingProber(10000,100);
  prober.check(new Probe(){
    @Override public boolean isSatisfied(){
      return component.getCount() == 25;
    }
    @Override public String describeFailure(){
      return "Component did not process the expected number of feeds";
    }
  }
);
}
