{
synchronized (folderLock) {
    if (folder == null) {
      throw new IllegalArgumentException("Mail folder cannot be null");
    }
    this.folder=folder;
    if (!this.folder.isOpen()) {
      try {
        this.folder.open(Folder.READ_WRITE);
      }
 catch (      MessagingException e) {
        logger.warn("Failed to open folder: " + folder.getFullName(),e);
      }
    }
  }
}
