{
  SessionDetails session=castConnector().getSessionDetails(endpoint);
  Store store=session.newStore();
  store.connect();
  folder=store.getFolder(castConnector().getMailboxFolder());
  if (castConnector().getMoveToFolder() != null) {
    moveToFolder=store.getFolder(castConnector().getMoveToFolder());
    moveToFolder.open(Folder.READ_WRITE);
  }
  if (StringUtils.isEmpty(backupFolder)) {
    this.backupFolder=getEndpoint().getMuleContext().getConfiguration().getWorkingDirectory() + "/mail/" + folder.getName();
  }
  if (backupFolder != null && !this.backupFolder.endsWith(File.separator)) {
    this.backupFolder+=File.separator;
  }
}
