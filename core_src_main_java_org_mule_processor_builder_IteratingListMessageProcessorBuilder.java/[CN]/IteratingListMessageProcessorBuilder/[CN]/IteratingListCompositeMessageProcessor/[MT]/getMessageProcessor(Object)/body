{
  if (processor instanceof MessageProcessor) {
    return (MessageProcessor)processor;
  }
 else   if (processor instanceof MessageProcessorBuilder) {
    return ((MessageProcessorBuilder)processor).build();
  }
 else {
    throw new IllegalArgumentException("MessageProcessorBuilder should only have MessageProcessor's or MessageProcessorBuilder's configured");
  }
}
