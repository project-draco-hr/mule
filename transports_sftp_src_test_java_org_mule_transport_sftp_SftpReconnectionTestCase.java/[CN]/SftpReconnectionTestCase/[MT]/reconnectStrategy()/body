{
  ConnectionListener connectionSuccessfulListener=new ConnectionListener(muleContext);
  verifyReconnectionKicksIn();
  startUpSftpEndpoint();
  connectionSuccessfulListener.waitUntilNotificationsAreReceived();
  verifySftpFlowIsRunning();
  stopSftpServerAndClient();
  verifyReconnectionKicksIn();
  connectionSuccessfulListener.reset();
  startUpSftpEndpoint();
  connectionSuccessfulListener.waitUntilNotificationsAreReceived();
  verifySftpFlowIsRunning();
}
