{
  MuleMessage message=new DefaultMuleMessage("data",muleContext);
  MuleEvent event=new DefaultMuleEvent(message,MessageExchangePattern.ONE_WAY,getTestFlow());
  Object nonSerializable=new Object();
  event.getSession().setProperty("key","value");
  message.setProperty("key2",nonSerializable,PropertyScope.SESSION);
  assertEquals(2,message.getPropertyNames(PropertyScope.SESSION).size());
  assertEquals("value",message.getProperty("key",PropertyScope.SESSION));
  assertEquals(nonSerializable,message.getProperty("key2",PropertyScope.SESSION));
  assertNull(message.getProperty("key",PropertyScope.INVOCATION));
  assertNull(message.getProperty("key",PropertyScope.INBOUND));
  assertNull(message.getProperty("key",PropertyScope.OUTBOUND));
}
