{
  Object payload=Collections.emptySet();
  Flow fc=getTestFlow();
  MuleSession session=getTestSession(fc,muleContext);
  MuleMessage toSplit=MuleMessage.builder().payload(payload).build();
  CollectionSplitter splitter=new CollectionSplitter();
  splitter.setMuleContext(muleContext);
  DefaultMuleEvent event=new DefaultMuleEvent(create(fc),toSplit,fc,session);
  DefaultMuleEventEndpointUtils.populateFieldsFromInboundEndpoint(event,getTestInboundEndpoint("ep"));
  assertSame(VoidMuleEvent.getInstance(),splitter.process(event));
}
