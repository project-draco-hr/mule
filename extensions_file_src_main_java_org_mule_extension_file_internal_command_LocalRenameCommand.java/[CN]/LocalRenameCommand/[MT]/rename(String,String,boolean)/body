{
  Path source=resolveExistingPath(filePath);
  Path target=source.getParent().resolve(newName);
  if (Files.exists(target) && !overwrite) {
    throw new IllegalArgumentException(format("'%s' cannot be renamed because '%s' already exists",source,target));
  }
  try {
    Files.move(source,target,ATOMIC_MOVE,REPLACE_EXISTING);
  }
 catch (  Exception e) {
    throw exception(format("Exception was found renaming '%s' to '%s'",source,newName),e);
  }
}
