{
  try {
    initRMI();
    if (connectorServerUrl == null) {
      return;
    }
    logger.info("Creating and starting JMX agent connector Server");
    JMXServiceURL url=new JMXServiceURL(connectorServerUrl);
    if (connectorServerProperties == null) {
      connectorServerProperties=new HashMap<String,Object>(DEFAULT_CONNECTOR_SERVER_PROPERTIES);
    }
    if (!credentials.isEmpty()) {
      connectorServerProperties.put(JMXConnectorServer.AUTHENTICATOR,this.getJmxAuthenticator());
    }
    connectorServer=JMXConnectorServerFactory.newJMXConnectorServer(url,connectorServerProperties,mBeanServer);
    connectorServer.start();
  }
 catch (  ExportException e) {
    throw new JmxManagementException(CoreMessages.failedToStart("Jmx Agent"),e);
  }
catch (  Exception e) {
    throw new JmxManagementException(CoreMessages.failedToStart("Jmx Agent"),e);
  }
}
