{
  @SuppressWarnings("unchecked") Hashtable<Object,Object> socketFactoryOptions=getOptions();
  if (timeout > 0) {
    if (socketFactoryOptions == null) {
      socketFactoryOptions=new Hashtable<Object,Object>();
    }
    socketFactoryOptions.put(DefaultSocketFactory.CONNECT_TIMEOUT,Integer.toString(timeout));
  }
  SocketFactory factory=SocketFactoryFactory.getFactory(protocol,socketFactoryOptions);
  if (factory == null) {
    throw new IOException(Messages.getMessage("noSocketFactory",protocol));
  }
  Socket sock=null;
  try {
    sock=factory.create(host,port,otherHeaders,useFullURL);
  }
 catch (  Exception e) {
    Thread.sleep(1000);
    try {
      sock=factory.create(host,port,otherHeaders,useFullURL);
    }
 catch (    Exception e1) {
      log.fatal("Axis client Failed: connect on socket: " + host + ":"+ port,e);
      throw e;
    }
  }
  if (timeout > 0) {
    sock.setSoTimeout(timeout);
  }
  sockHolder.setSocket(sock);
}
