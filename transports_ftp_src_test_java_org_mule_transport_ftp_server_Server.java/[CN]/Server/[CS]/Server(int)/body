{
  this.port=port;
  FtpServerFactory serverFactory=new FtpServerFactory();
  ListenerFactory factory=new ListenerFactory();
  factory.setPort(port);
  serverFactory.addListener("default",factory.createListener());
  factory.setIdleTimeout(60000);
  PropertiesUserManagerFactory userManagerFactory=new PropertiesUserManagerFactory();
  URL usersFile=IOUtils.getResourceAsUrl("users.properties",getClass());
  if (usersFile == null) {
    throw new IOException("users.properties file not found in the classpath");
  }
  userManagerFactory.setFile(new File(usersFile.getFile()));
  serverFactory.setUserManager(userManagerFactory.createUserManager());
  server=serverFactory.createServer();
  server.start();
}
