{
  makeArchiveTmpFolderReadOnly();
  makeArchiveReadOnly();
  try {
    executeBaseTest(INBOUND_ENDPOINT4,"vm://test.upload4",FILE4_TXT,SEND_SIZE,"receiving4",TIMEOUT,"sftp");
    fail("Expected error");
  }
 catch (  Exception e) {
    assertNotNull(e);
    assertTrue(e instanceof IOException);
    assertEquals("Destination folder is not writeable: " + archiveCanonicalPath + File.separatorChar+ TMP_RECEIVING,e.getMessage());
  }
  assertFilesInEndpoint(INBOUND_ENDPOINT4,FILE4_TXT);
  assertFilesInLocalFilesystem(archive,new String[]{TMP_RECEIVING,TMP_SENDING});
}
