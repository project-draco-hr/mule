{
  MuleClient client=new MuleClient(muleContext);
  client.send(getDispatchAsyncComplexEndpoint1(),new Person("Betty","Rubble"),null);
  MuleMessage result=client.request(getDispatchAsyncComplexEndpoint2(),RECEIVE_TIMEOUT);
  assertNotNull(result);
  assertTrue("Did not receive a Person but: " + result.getPayload().getClass(),result.getPayload() instanceof Person);
  assertEquals("Betty",((Person)result.getPayload()).getFirstName());
  assertEquals("Rubble",((Person)result.getPayload()).getLastName());
}
