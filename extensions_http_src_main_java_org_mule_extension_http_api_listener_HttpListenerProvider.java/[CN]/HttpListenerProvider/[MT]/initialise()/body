{
  initialiseIfNeeded(connectionManager);
  if (port == null) {
    port=protocol.getDefaultPort();
  }
  if (protocol.equals(HTTP) && tlsContext != null) {
    throw new InitialisationException(CoreMessages.createStaticMessage("TlsContext cannot be configured with protocol HTTP. " + "If you defined a tls:context element in your listener-config then you must set protocol=\"HTTPS\""),this);
  }
  if (protocol.equals(HTTPS) && tlsContext == null) {
    throw new InitialisationException(CoreMessages.createStaticMessage("Configured protocol is HTTPS but there's no TlsContext configured"),this);
  }
  if (tlsContext != null && !tlsContext.isKeyStoreConfigured()) {
    throw new InitialisationException(CoreMessages.createStaticMessage("KeyStore must be configured for server side SSL"),this);
  }
  if (tlsContext != null) {
    initialiseIfNeeded(tlsContext);
  }
  verifyConnectionsParameters();
}
