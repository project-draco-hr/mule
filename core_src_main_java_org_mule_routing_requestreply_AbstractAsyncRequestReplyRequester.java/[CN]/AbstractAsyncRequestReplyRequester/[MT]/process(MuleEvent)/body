{
  if (replyMessageSource == null) {
    return processNext(event);
  }
 else {
    locks.put(getAsyncReplyCorrelationId(event),new Latch());
    sendAsyncRequest(event);
    MuleEvent resultEvent=receiveAsyncReply(event);
    if (resultEvent != null) {
      event.getSession().merge(resultEvent.getSession());
      resultEvent=org.mule.RequestContext.setEvent(new DefaultMuleEvent(resultEvent.getMessage(),event));
    }
    return resultEvent;
  }
}
