{
  super.initialise();
  if (getSchemaObject() == null) {
    if (schemaLocations == null) {
      throw new InitialisationException(CoreMessages.objectIsNull("schemaFile"),this);
    }
    String[] split=StringUtils.split(schemaLocations,",");
    Source[] schemas=new Source[split.length];
    for (int i=0; i < split.length; i++) {
      String loc=split[i].trim();
      InputStream schemaStream;
      try {
        schemaStream=loadSchemaStream(loc);
      }
 catch (      IOException e) {
        throw new InitialisationException(e,this);
      }
      if (schemaStream == null) {
        throw new InitialisationException(CoreMessages.failedToLoad(loc),this);
      }
      schemas[i]=new StreamSource(schemaStream);
    }
    SchemaFactory schemaFactory=SchemaFactory.newInstance(getSchemaLanguage());
    if (logger.isInfoEnabled()) {
      logger.info("Schema factory implementation: " + schemaFactory);
    }
    if (this.errorHandler != null) {
      schemaFactory.setErrorHandler(this.errorHandler);
    }
    if (this.resourceResolver != null) {
      schemaFactory.setResourceResolver(this.resourceResolver);
    }
    Schema schema;
    try {
      schema=schemaFactory.newSchema(schemas);
    }
 catch (    SAXException e) {
      throw new InitialisationException(e,this);
    }
    setSchemaObject(schema);
  }
  if (getSchemaObject() == null) {
    throw new InitialisationException(CoreMessages.objectIsNull("schemaObject"),this);
  }
}
