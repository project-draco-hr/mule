{
  if (!handleException && request.getReplyToHandler() instanceof NonBlockingReplyToHandler) {
    request=new DefaultMuleEvent(request,request.getFlowConstruct(),null,null,true);
  }
  muleContext.getNotificationManager().fireNotification(new ExceptionStrategyNotification(request,ExceptionStrategyNotification.PROCESS_START));
  fireNotification(exception);
  logException(exception,request);
  processStatistics(request);
  request.setMessage(MuleMessage.builder(request.getMessage()).exceptionPayload(new DefaultExceptionPayload(exception)).build());
  markExceptionAsHandledIfRequired(exception);
  return beforeRouting(exception,request);
}
