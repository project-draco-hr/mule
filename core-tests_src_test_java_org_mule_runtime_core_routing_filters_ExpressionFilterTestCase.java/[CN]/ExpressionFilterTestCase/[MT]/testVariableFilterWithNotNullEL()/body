{
  ExpressionFilter filter=new ExpressionFilter("flowVars['foo']!=null");
  filter.setMuleContext(muleContext);
  MuleEvent event=getTestEvent("blah");
  assertTrue(!filter.accept(event,mock(MuleEvent.Builder.class)));
  event=MuleEvent.builder(event).message(removeProperty(event.getMessage())).build();
  assertTrue(!filter.accept(event,mock(MuleEvent.Builder.class)));
  event=MuleEvent.builder(event).addFlowVariable("foo","car").build();
  assertTrue(filter.accept(event,mock(MuleEvent.Builder.class)));
}
