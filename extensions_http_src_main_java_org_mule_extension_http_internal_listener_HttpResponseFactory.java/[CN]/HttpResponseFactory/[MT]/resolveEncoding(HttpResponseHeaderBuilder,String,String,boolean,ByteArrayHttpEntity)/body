{
  if (responseStreaming == ALWAYS || (responseStreaming == AUTO && existingContentLength == null && CHUNKED.equals(existingTransferEncoding))) {
    if (supportsTransferEncoding) {
      setupChunkedEncoding(httpResponseHeaderBuilder);
    }
  }
 else {
    setupContentLengthEncoding(httpResponseHeaderBuilder,byteArrayHttpEntity.getContent().length);
  }
}
