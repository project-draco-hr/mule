{
  lifecycleManager.checkPhase(Initialisable.PHASE_NAME);
  if (getNotificationManager() == null) {
    throw new NullPointerException(CoreMessages.objectIsNull(MuleProperties.OBJECT_NOTIFICATION_MANAGER).getMessage());
  }
  if (workManager == null) {
    throw new NullPointerException(CoreMessages.objectIsNull("workManager").getMessage());
  }
  try {
    registryBroker=createRegistryBroker();
    muleRegistryHelper=createRegistryHelper(registryBroker);
    registryBroker.initialise();
    directories=new Directories(FileUtils.newFile(getConfiguration().getWorkingDirectory()));
    workManager.start();
    getNotificationManager().start(workManager);
    fireNotification(new MuleContextNotification(this,MuleContextNotification.CONTEXT_INITIALISING));
    directories.createDirectories();
    lifecycleManager.firePhase(this,Initialisable.PHASE_NAME);
    fireNotification(new MuleContextNotification(this,MuleContextNotification.CONTEXT_INITIALISED));
  }
 catch (  Exception e) {
    throw new InitialisationException(e,this);
  }
  return LifecycleTransitionResult.OK;
}
