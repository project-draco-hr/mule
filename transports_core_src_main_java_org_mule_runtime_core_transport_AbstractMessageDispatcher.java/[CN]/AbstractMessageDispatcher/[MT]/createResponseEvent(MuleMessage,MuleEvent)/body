{
  if (resultMessage != null) {
    resultMessage.setMessageRootId(requestEvent.getMessage().getMessageRootId());
    resultMessage.setEncoding(resultMessage.getEncoding());
    MuleSession storedSession=connector.getSessionHandler().retrieveSessionInfoFromMessage(resultMessage);
    requestEvent.getSession().merge(storedSession);
    MuleEvent resultEvent=new DefaultMuleEvent(resultMessage,requestEvent);
    OptimizedRequestContext.unsafeSetEvent(resultEvent);
    return resultEvent;
  }
 else {
    return null;
  }
}
