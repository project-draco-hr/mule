{
  DbConfigResolver dbConfigResolver=mock(DbConfigResolver.class);
  DbConfig dbConfig=mock(DbConfig.class);
  when(dbConfigResolver.resolve(muleEvent)).thenReturn(dbConfig);
  MuleRegistry registry=mock(MuleRegistry.class);
  Collection<DbConfigResolver> foundDbConfigResolvers=new ArrayList<>();
  foundDbConfigResolvers.add(dbConfigResolver);
  when(registry.lookupObjects(DbConfigResolver.class)).thenReturn(foundDbConfigResolvers);
  DefaultDbConfigResolver defaultDbConfigResolver=new DefaultDbConfigResolver(registry);
  DbConfig resolvedDbConfig=defaultDbConfigResolver.resolve(muleEvent);
  assertThat(dbConfig,sameInstance(resolvedDbConfig));
}
