{
  DbConfig dbConfig=mock(DbConfig.class);
  TestResult expectedTestResult=mock(TestResult.class);
  when(dbConfig.test()).thenReturn(expectedTestResult);
  DbConfigResolver dbConfigResolver=mock(DbConfigResolver.class);
  when(dbConfigResolver.resolve(null)).thenReturn(dbConfig);
  MuleRegistry registry=createMockRegistry(dbConfigResolver);
  DefaultDbConfigResolver defaultDbConfigResolver=new DefaultDbConfigResolver(registry);
  final TestResult testResult=defaultDbConfigResolver.test();
  assertThat(testResult,is(expectedTestResult));
}
