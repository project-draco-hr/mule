{
  String resourcePath=systemId;
  if (systemId.indexOf(BASE_RESOURCE_PATH) > 0) {
    resourcePath=systemId.substring(systemId.lastIndexOf(BASE_RESOURCE_PATH));
  }
 else {
    resourcePath=BASE_RESOURCE_PATH + resourcePath.substring(resourcePath.lastIndexOf("/"));
  }
  URL resource=this.resourceLoader.getResource(resourcePath);
  if (resource != null) {
    InputSource source=new InputSource(resource.openStream());
    source.setPublicId(publicId);
    source.setSystemId(resourcePath);
    if (logger.isDebugEnabled()) {
      logger.debug("Found XML entity [" + systemId + "]: "+ resource);
    }
    return source;
  }
  return null;
}
