{
  doThrow(runtimeException).when(completionHandler).onCompletion(event,exceptionCallback);
  template.sendResponseToClient(event,responseCompletionCallback);
  verify(completionHandler,never()).onFailure(any(Exception.class));
  verify(responseCompletionCallback).responseSentWithFailure(runtimeException,event);
}
