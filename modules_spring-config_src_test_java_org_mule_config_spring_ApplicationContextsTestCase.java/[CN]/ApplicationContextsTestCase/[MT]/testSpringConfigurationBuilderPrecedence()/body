{
  MuleContext muleContext=new DefaultMuleContextFactory().createMuleContext();
  ApplicationContext appContext=new ClassPathXmlApplicationContext("application-context.xml");
  ConfigurationBuilder builder=new SpringConfigurationBuilder(appContext);
  builder.configure(muleContext);
  appContext=new ClassPathXmlApplicationContext("application-context-2.xml");
  builder=new SpringConfigurationBuilder(appContext);
  builder.configure(muleContext);
  muleContext.start();
  Object orange=muleContext.getRegistry().lookupObject("orange");
  assertNotNull(orange);
  assertTrue(orange instanceof Orange);
  assertEquals("Tropicana",((Orange)orange).getBrand());
}
