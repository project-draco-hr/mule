{
  MuleContext muleContext=new DefaultMuleContextFactory().createMuleContext();
  ApplicationContext appContext=new ClassPathXmlApplicationContext("application-context.xml");
  SpringXmlConfigurationBuilder builder=new SpringXmlConfigurationBuilder("mule-config.xml");
  builder.setParentContext(appContext);
  builder.configure(muleContext);
  muleContext.start();
  Object orange=muleContext.getRegistry().lookupObject("orange");
  assertNotNull(orange);
  assertTrue(orange instanceof Orange);
  assertEquals("Pirulo",((Orange)orange).getBrand());
}
