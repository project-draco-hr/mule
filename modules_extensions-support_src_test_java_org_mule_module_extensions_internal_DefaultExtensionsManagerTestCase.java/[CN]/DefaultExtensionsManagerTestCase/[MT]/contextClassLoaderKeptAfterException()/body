{
  when(discoverer.discover(same(classLoader))).thenThrow(RuntimeException.class);
  try {
    discover();
    fail("was expecting an exception");
  }
 catch (  RuntimeException e) {
    assertThat(classLoader,sameInstance(Thread.currentThread().getContextClassLoader()));
  }
}
