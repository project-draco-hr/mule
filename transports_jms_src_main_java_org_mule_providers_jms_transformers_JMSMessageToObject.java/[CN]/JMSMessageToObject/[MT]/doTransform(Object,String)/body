{
  try {
    if (logger.isDebugEnabled()) {
      logger.debug("Source object is " + ClassUtils.getSimpleName(src.getClass()));
    }
    Object result=transformFromMessage((Message)src);
    if (returnClass != null) {
      if (returnClass.equals(byte[].class) && result instanceof String) {
        result=result.toString().getBytes(encoding);
      }
 else       if (returnClass.equals(String.class) && result instanceof byte[]) {
        result=new String((byte[])result,encoding);
      }
    }
    if (logger.isDebugEnabled()) {
      logger.debug("Resulting object is " + ClassUtils.getSimpleName(result.getClass()));
    }
    return result;
  }
 catch (  Exception e) {
    throw new TransformerException(this,e);
  }
}
