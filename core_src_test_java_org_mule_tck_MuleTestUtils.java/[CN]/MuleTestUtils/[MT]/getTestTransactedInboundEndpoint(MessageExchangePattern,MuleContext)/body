{
  return (InboundEndpoint)getTestEndpoint(null,null,null,null,null,context,new EndpointSource(){
    public ImmutableEndpoint getEndpoint(    EndpointBuilder builder) throws MuleException {
      builder.setExchangePattern(mep);
      TransactionConfig txConfig=new MuleTransactionConfig();
      txConfig.setAction(TransactionConfig.ACTION_BEGIN_OR_JOIN);
      txConfig.setFactory(new TestTransactionFactory());
      builder.setTransactionConfig(txConfig);
      return context.getRegistry().lookupEndpointFactory().getInboundEndpoint(builder);
    }
  }
,null);
}
