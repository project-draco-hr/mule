{
  SedaModel model=new SedaModel();
  model.setMuleContext(context);
  context.getLifecycleManager().applyCompletedPhases(model);
  Service service=new SedaService();
  service.setName(name);
  service.setMuleContext(context);
  ObjectFactory of=new SingletonObjectFactory(clazz,props);
  of.initialise();
  final DefaultJavaComponent component=new DefaultJavaComponent(of);
  component.setMuleContext(context);
  service.setComponent(component);
  service.setModel(model);
  if (initialize) {
    context.getRegistry().registerService(service);
    OutboundRouter router=new OutboundPassThroughRouter();
    service.getOutboundRouter().addRouter(router);
  }
  return service;
}
