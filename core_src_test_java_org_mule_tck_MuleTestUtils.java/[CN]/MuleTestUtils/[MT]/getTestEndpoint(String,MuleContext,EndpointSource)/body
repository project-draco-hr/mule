{
  Map props=new HashMap();
  props.put("name",name);
  props.put("endpointURI",new MuleEndpointURI("test://test"));
  props.put("connector","testConnector");
  AbstractConnector connector=(AbstractConnector)ClassUtils.loadClass("org.mule.tck.testmodels.mule.TestConnector",AbstractMuleTestCase.class).newInstance();
  connector.setName("testConnector");
  connector.setMuleContext(context);
  context.applyLifecycle(connector);
  EndpointBuilder endpointBuilder=new EndpointURIEndpointBuilder("test://test",context);
  endpointBuilder.setConnector(connector);
  endpointBuilder.setName(name);
  return source.getEndpoint(endpointBuilder);
}
