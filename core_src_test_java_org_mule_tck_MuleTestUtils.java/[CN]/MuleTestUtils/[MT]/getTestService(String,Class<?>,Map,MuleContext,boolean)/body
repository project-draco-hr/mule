{
  SedaModel model=new SedaModel();
  model.setMuleContext(context);
  context.getLifecycleManager().applyCompletedPhases(model);
  Service service=new SedaService();
  service.setName(name);
  ObjectFactory of=new SingletonObjectFactory(clazz,props);
  of.initialise();
  service.setComponent(new DefaultJavaComponent(of));
  service.setModel(model);
  service.setMuleContext(context);
  if (initialize) {
    context.getRegistry().registerService(service);
    OutboundRouter router=new OutboundPassThroughRouter();
    service.getOutboundRouter().addRouter(router);
  }
  return service;
}
