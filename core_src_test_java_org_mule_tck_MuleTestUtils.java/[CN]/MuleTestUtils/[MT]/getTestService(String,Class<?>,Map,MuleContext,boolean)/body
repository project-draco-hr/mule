{
  Service service=context.getRegistry().get(name);
  if (service != null) {
    return service;
  }
  final SedaModel model=new SedaModel();
  model.setMuleContext(context);
  context.getRegistry().applyLifecycle(model);
  service=new SedaService(context);
  service.setName(name);
  final SingletonObjectFactory of=new SingletonObjectFactory(clazz,props);
  of.initialise();
  final JavaComponent component=new DefaultJavaComponent(of);
  ((MuleContextAware)component).setMuleContext(context);
  service.setComponent(component);
  service.setModel(model);
  if (initialize) {
    context.getRegistry().registerService(service);
  }
  return service;
}
