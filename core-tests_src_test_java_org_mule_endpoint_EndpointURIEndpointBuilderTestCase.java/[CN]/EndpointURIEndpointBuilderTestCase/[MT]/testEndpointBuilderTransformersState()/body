{
  muleContext.getRegistry().registerObject("tran1",new StringAppendTransformer("1"));
  muleContext.getRegistry().registerObject("tran2",new StringAppendTransformer("2"));
  String uri="test://address?transformers=tran1&responseTransformers=tran2";
  EndpointBuilder endpointBuilder=new EndpointURIEndpointBuilder(uri,muleContext);
  endpointBuilder.setTransformers(java.util.Collections.<Transformer>singletonList(new StringAppendTransformer("3")));
  endpointBuilder.setResponseTransformers(java.util.Collections.<Transformer>singletonList(new StringAppendTransformer("4")));
  InboundEndpoint endpoint=endpointBuilder.buildInboundEndpoint();
  assertEquals(2,endpoint.getMessageProcessors().size());
  assertEquals(2,endpoint.getResponseMessageProcessors().size());
  endpoint=endpointBuilder.buildInboundEndpoint();
  assertEquals(2,endpoint.getMessageProcessors().size());
  assertEquals(2,endpoint.getResponseMessageProcessors().size());
}
