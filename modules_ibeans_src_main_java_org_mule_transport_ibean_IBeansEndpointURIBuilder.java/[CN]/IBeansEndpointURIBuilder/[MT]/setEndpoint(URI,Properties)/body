{
  super.setEndpoint(uri,props);
  int i=address.indexOf(".");
  if (i == -1) {
    throw new MalformedEndpointException(uri.toString());
  }
  String ibean=address.substring(0,i);
  String method=address.substring(i + 1);
  IBeanHolder holder=muleContext.getRegistry().lookupObject(ibean);
  if (holder == null) {
    throw new MalformedEndpointException(IBeansMessages.ibeanNotRegistered(ibean),uri.toString());
  }
  boolean match=false;
  Method[] methods=holder.getIbeanClass().getMethods();
  for (int j=0; j < methods.length; j++) {
    Method m=methods[j];
    if (m.getName().equals(method)) {
      if (m.isAnnotationPresent(Call.class) || m.isAnnotationPresent(Template.class)) {
        match=true;
        break;
      }
 else {
        throw new MalformedEndpointException(IBeansMessages.ibeanMethodFoundButNotValid(ibean,method),uri.toString());
      }
    }
  }
  if (!match) {
    throw new MalformedEndpointException(IBeansMessages.ibeanMethodNotFound(ibean,method),uri.toString());
  }
}
