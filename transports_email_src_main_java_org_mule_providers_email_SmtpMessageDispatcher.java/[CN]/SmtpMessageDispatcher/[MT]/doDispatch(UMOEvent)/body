{
  try {
    Object data=event.getTransformedMessage();
    if (!(data instanceof Message)) {
      throw new DispatchException(new org.mule.config.i18n.Message(Messages.TRANSFORM_X_UNEXPECTED_TYPE_X,data.getClass().getName(),Message.class.getName()),event.getMessage(),event.getEndpoint());
    }
 else {
      sendMailMessage((Message)data);
    }
  }
 catch (  Exception e) {
    connector.handleException(e);
  }
}
