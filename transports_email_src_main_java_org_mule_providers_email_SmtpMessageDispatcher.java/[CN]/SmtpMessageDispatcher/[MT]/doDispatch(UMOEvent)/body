{
  try {
    Object data=event.getTransformedMessage();
    if (!(data instanceof Message)) {
      throw new DispatchException(CoreMessages.transformUnexpectedType(data.getClass(),Message.class),event.getMessage(),event.getEndpoint());
    }
 else {
      sendMailMessage((Message)data);
    }
  }
 catch (  Exception e) {
    connector.handleException(e);
  }
}
