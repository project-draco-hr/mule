{
  if (transport == null) {
    try {
      transport=castConnector().getSessionDetails(endpoint).newTransport();
      UMOEndpointURI uri=endpoint.getEndpointURI();
      transport.connect(uri.getHost(),uri.getPort(),uri.getUser(),uri.getPassword());
    }
 catch (    Exception e) {
      throw new EndpointException(org.mule.config.i18n.MessageFactory.createStaticMessage("Unable to connect to mail transport."),e);
    }
  }
}
