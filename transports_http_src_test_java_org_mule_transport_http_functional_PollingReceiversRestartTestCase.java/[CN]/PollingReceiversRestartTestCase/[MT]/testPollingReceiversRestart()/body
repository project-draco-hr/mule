{
  muleContext.start();
  Object ftc=getComponent("Test");
  assertTrue("FunctionalTestComponent expected",ftc instanceof FunctionalTestComponent2);
  AtomicInteger pollCounter=new AtomicInteger(0);
  ((FunctionalTestComponent2)ftc).setEventCallback(new CounterCallback(pollCounter));
  Thread.sleep(WAIT_TIME);
  muleContext.stop();
  assertTrue("No polls performed",pollCounter.get() > 0);
  muleContext.start();
  pollCounter.set(0);
  ((FunctionalTestComponent2)ftc).setEventCallback(new CounterCallback(pollCounter));
  Thread.sleep(WAIT_TIME);
  muleContext.dispose();
  assertTrue("No polls performed",pollCounter.get() > 0);
}
