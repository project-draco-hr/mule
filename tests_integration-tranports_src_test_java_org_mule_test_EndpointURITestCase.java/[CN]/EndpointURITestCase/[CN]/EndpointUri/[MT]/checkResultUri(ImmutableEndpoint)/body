{
  String epUri;
  if (ep instanceof DynamicOutboundEndpoint) {
    Flow flow=getTestFlow();
    epUri=muleContext.getExpressionManager().parse(ep.getAddress(),new DefaultMuleEvent(DefaultMessageContext.create(flow,TEST_CONNECTOR),message,flow),flow,true);
  }
 else {
    epUri=ep.getAddress();
  }
  assertEquals(resultUri,epUri);
}
