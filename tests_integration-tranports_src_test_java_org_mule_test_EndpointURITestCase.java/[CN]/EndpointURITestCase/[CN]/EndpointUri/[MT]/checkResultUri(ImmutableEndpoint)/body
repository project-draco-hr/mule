{
  String epUri;
  if (ep instanceof DynamicOutboundEndpoint) {
    Flow flow=getTestFlow();
    epUri=muleContext.getExpressionLanguage().parse(ep.getAddress(),MuleEvent.builder(DefaultMessageContext.create(flow,TEST_CONNECTOR)).message(message).flow(flow).build(),flow);
  }
 else {
    epUri=ep.getAddress();
  }
  assertEquals(resultUri,epUri);
}
