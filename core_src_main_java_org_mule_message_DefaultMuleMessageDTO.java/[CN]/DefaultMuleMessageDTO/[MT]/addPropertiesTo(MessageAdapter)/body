{
  String prefix;
  int i;
  for (  String s : properties.keySet()) {
    i=s.indexOf("#");
    prefix=s.substring(0,i);
    if (prefix.equals(PropertyScope.INBOUND.getScope())) {
      message.setProperty(s.substring(i + 1),getProperty(s),PropertyScope.INBOUND);
    }
 else     if (prefix.equals(PropertyScope.OUTBOUND.getScope())) {
      message.setProperty(s.substring(i + 1),getProperty(s),PropertyScope.OUTBOUND);
    }
 else     if (prefix.equals(PropertyScope.SESSION.getScope())) {
      message.setProperty(s.substring(i + 1),getProperty(s),PropertyScope.SESSION);
    }
 else {
      message.setProperty(s.substring(i + 1),getProperty(s),PropertyScope.INVOCATION);
    }
  }
  message.setReplyTo(getReplyTo());
}
