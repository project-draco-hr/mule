{
  TestConverter converter1=new TransformerBuilder().from(dataTypeC).to(dataTypeD).returning(new D()).boundTo(muleContext).buildConverter(1);
  TestConverter converter2=new TransformerBuilder().from(dataTypeB).to(dataTypeC).returning(new C()).boundTo(muleContext).buildConverter(1);
  when(conversionResolver.resolve(Mockito.any(DataType.class),Mockito.anyList())).thenReturn(converter2);
  DefaultMuleMessage message=new DefaultMuleMessage(new B(),muleContext);
  message.applyTransformers(null,converter1);
  assertTrue(message.getPayload() instanceof D);
  assertTrue(converter1.wasExecuted());
  assertTrue(converter2.wasExecuted());
}
