{
  int n=name.lastIndexOf('/');
  if (n > 0)   name=name.substring(0,n);
  if (name.length() == 0)   name=".";
  try {
    Properties p=new Properties();
    p.load(in);
    return replaceAll(p,"\\$\\{\\.\\}",name);
  }
 catch (  Exception e) {
    error("Error during loading properties file: " + name + ", error:"+ e);
    return new Properties();
  }
}
