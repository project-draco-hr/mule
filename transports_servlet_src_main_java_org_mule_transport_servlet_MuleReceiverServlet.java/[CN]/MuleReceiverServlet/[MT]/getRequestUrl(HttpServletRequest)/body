{
  StringBuffer url=new StringBuffer();
  url.append(httpServletRequest.getScheme());
  url.append("://");
  url.append(httpServletRequest.getServerName());
  url.append(":");
  url.append(httpServletRequest.getServerPort());
  url.append(httpServletRequest.getServletPath());
  String pathInfo=httpServletRequest.getPathInfo();
  if (pathInfo != null) {
    url.append(pathInfo);
  }
  String queryString=httpServletRequest.getQueryString();
  if (queryString != null) {
    url.append("?");
    url.append(queryString);
  }
  return url.toString();
}
