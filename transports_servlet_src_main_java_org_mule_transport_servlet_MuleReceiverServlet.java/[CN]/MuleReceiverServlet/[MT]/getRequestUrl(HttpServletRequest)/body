{
  StringBuffer url=new StringBuffer();
  url.append(connector.getProtocol().toLowerCase());
  url.append(":");
  url.append(httpServletRequest.getScheme());
  url.append("://");
  url.append(httpServletRequest.getServerName());
  url.append(":");
  url.append(httpServletRequest.getServerPort());
  url.append("/");
  url.append(getReceiverName(httpServletRequest));
  if (httpServletRequest.getQueryString() != null) {
    url.append("?");
    url.append(httpServletRequest.getQueryString());
  }
  return url.toString();
}
