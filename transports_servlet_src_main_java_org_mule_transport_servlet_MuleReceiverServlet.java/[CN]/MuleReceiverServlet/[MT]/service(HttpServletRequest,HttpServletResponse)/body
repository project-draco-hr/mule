{
  try {
    MessageReceiver receiver=getReceiverForURI(request);
    MuleMessage requestMessage=new DefaultMuleMessage(new HttpRequestMessageAdapter(request),muleContext);
    requestMessage.setProperty(HttpConnector.HTTP_METHOD_PROPERTY,request.getMethod());
    setupRequestMessage(request,requestMessage,receiver);
    MuleMessage result=routeMessage(receiver,requestMessage,request);
    writeResponse(response,result);
  }
 catch (  Exception e) {
    handleException(e,ServletMessages.failedToProcessRequest().getMessage(),response);
  }
}
