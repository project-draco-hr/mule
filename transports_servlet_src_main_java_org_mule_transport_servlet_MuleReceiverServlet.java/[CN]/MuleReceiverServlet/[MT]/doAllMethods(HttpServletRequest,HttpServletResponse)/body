{
  try {
    if (this.useCachedHttpServletRequest) {
      request=new CachedHttpServletRequest(request);
    }
    MessageReceiver receiver=getReceiverForURI(request);
    MuleMessage requestMessage=receiver.createMuleMessage(request);
    requestMessage.setProperty(HttpConnector.HTTP_METHOD_PROPERTY,request.getMethod(),PropertyScope.INBOUND);
    setupRequestMessage(request,requestMessage,receiver);
    MuleEvent event=routeMessage(receiver,requestMessage,request);
    MuleMessage result=event == null ? null : event.getMessage();
    writeResponse(response,result);
  }
 catch (  Exception e) {
    handleException(e,ServletMessages.failedToProcessRequest().getMessage(),response);
  }
}
