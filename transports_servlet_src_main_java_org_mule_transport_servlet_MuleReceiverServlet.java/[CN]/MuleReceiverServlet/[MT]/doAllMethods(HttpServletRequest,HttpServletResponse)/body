{
  try {
    MessageReceiver receiver=getReceiverForURI(request);
    MuleMessage requestMessage=receiver.createMuleMessage(request);
    requestMessage.setProperty(HttpConnector.HTTP_METHOD_PROPERTY,request.getMethod(),PropertyScope.INBOUND);
    setupRequestMessage(request,requestMessage,receiver);
    MuleMessage result=routeMessage(receiver,requestMessage,request);
    writeResponse(response,result);
  }
 catch (  Exception e) {
    handleException(e,ServletMessages.failedToProcessRequest().getMessage(),response);
  }
}
