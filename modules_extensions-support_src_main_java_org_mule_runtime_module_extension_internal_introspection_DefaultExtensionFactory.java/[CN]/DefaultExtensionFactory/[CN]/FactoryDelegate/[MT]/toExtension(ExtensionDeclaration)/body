{
  validateMuleVersion(extensionDeclaration);
  ValueHolder<RuntimeExtensionModel> extensionModelValueHolder=new ValueHolder<>();
  RuntimeExtensionModel extensionModel=new ImmutableRuntimeExtensionModel(extensionDeclaration.getName(),extensionDeclaration.getDescription(),extensionDeclaration.getVersion(),extensionDeclaration.getVendor(),extensionDeclaration.getCategory(),extensionDeclaration.getMinMuleVersion(),sortConfigurations(toConfigurations(extensionDeclaration.getConfigurations(),extensionModelValueHolder)),toOperations(extensionDeclaration.getOperations()),toConnectionProviders(extensionDeclaration.getConnectionProviders()),toMessageSources(extensionDeclaration.getMessageSources()),extensionDeclaration.getModelProperties(),extensionDeclaration.getExceptionEnricherFactory());
  extensionModelValueHolder.set(extensionModel);
  return extensionModel;
}
