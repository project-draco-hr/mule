{
  if (contentBuffer == null) {
    String contentType=messagePart.getContentType();
    if (contentType.startsWith("text/")) {
      getPayloadAsString();
    }
 else {
      InputStream is=messagePart.getInputStream();
      if (!(is instanceof BufferedInputStream)) {
        is=new BufferedInputStream(is);
      }
      ByteArrayOutputStream baos=new ByteArrayOutputStream(32768);
      IOUtils.copy(is,baos);
      contentBuffer=baos.toByteArray();
    }
  }
  return contentBuffer;
}
