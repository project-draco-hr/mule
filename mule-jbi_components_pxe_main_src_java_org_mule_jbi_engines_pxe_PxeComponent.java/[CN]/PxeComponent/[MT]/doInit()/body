{
  super.doInit();
  this.server=this.context.getMBeanServer();
  InitialContext ctx=new InitialContext();
  ctx.rebind("PxeTransactionManager",this.context.getTransactionManager());
  ctx.close();
  ObjectName modBpelEventLogger=new ObjectName("fivesight.pxe:mod=BpelLogger");
  this.server.createMBean(ModBpelEventLogger.class.getName(),modBpelEventLogger);
  this.server.invoke(modBpelEventLogger,"start",new Object[0],new String[0]);
  ObjectName modJdbcDS=new ObjectName("fivesight.pxe:mod=PxeDB");
  this.server.createMBean(ModJdbcDS.class.getName(),modJdbcDS);
  this.server.setAttribute(modJdbcDS,new Attribute("DataSourceName","pxe-ds"));
  this.server.setAttribute(modJdbcDS,new Attribute("TransactionManagerName","PxeTransactionManager"));
  this.server.setAttribute(modJdbcDS,new Attribute("Driver","org.hsqldb.jdbcDriver"));
  this.server.setAttribute(modJdbcDS,new Attribute("Username","sa"));
  this.server.setAttribute(modJdbcDS,new Attribute("Password",""));
  this.server.setAttribute(modJdbcDS,new Attribute("Url","jdbc:hsqldb:" + new File(this.context.getWorkspaceRoot()).getCanonicalFile().toURI() + "hsqldb/pxeDb"));
  this.server.setAttribute(modJdbcDS,new Attribute("PoolMax",new Integer(10)));
  this.server.setAttribute(modJdbcDS,new Attribute("PoolMin",new Integer(5)));
  this.server.invoke(modJdbcDS,"start",new Object[0],new String[0]);
  ObjectName modHibernateDAO=new ObjectName("fivesight.pxe:mod=HibernateDAO");
  this.server.createMBean(ModHibernateDAO.class.getName(),modHibernateDAO);
  this.server.setAttribute(modHibernateDAO,new Attribute("BpelStateStoreConnectionFactory","bpel_sscf"));
  this.server.setAttribute(modHibernateDAO,new Attribute("StateStoreConnectionFactory","sscf"));
  this.server.setAttribute(modHibernateDAO,new Attribute("TransactionManager","PxeTransactionManager"));
  this.server.setAttribute(modHibernateDAO,new Attribute("DataSource","pxe-ds"));
  this.server.setAttribute(modHibernateDAO,new Attribute("HibernateProperties",Thread.currentThread().getContextClassLoader().getResource("hibernate.properties").toString()));
  this.server.invoke(modHibernateDAO,"start",new Object[0],new String[0]);
  ObjectName modSPBpel=new ObjectName("fivesight.pxe:mod=ServiceProvider,name=Bpel");
  this.server.createMBean(ModSvcProvider.class.getName(),modSPBpel);
  this.server.setAttribute(modSPBpel,new Attribute("JndiName","BpelSP"));
  this.server.setAttribute(modSPBpel,new Attribute("TransactionManagerName","PxeTransactionManager"));
  this.server.setAttribute(modSPBpel,new Attribute("ProviderClass",BpelServiceProvider.class.getName()));
  this.server.setAttribute(modSPBpel,new Attribute("ProviderURI","uri:bpelProvider"));
  this.server.setAttribute(modSPBpel,new Attribute("ProviderProperties","stateStoreConnectionFactory=bpel_sscf"));
  this.server.invoke(modSPBpel,"start",new Object[0],new String[0]);
  ObjectName modSPJbi=new ObjectName("fivesight.pxe:mod=ServiceProvider,name=Jbi");
  this.server.createMBean(ModSvcProvider.class.getName(),modSPJbi);
  this.server.setAttribute(modSPJbi,new Attribute("JndiName","JbiSP"));
  this.server.setAttribute(modSPJbi,new Attribute("TransactionManagerName","PxeTransactionManager"));
  this.server.setAttribute(modSPJbi,new Attribute("ProviderClass",JbiAdapter.class.getName()));
  this.server.setAttribute(modSPJbi,new Attribute("ProviderURI","uri:protocoladapter.jbi"));
  this.server.invoke(modSPJbi,"start",new Object[0],new String[0]);
  ObjectName modSfwk=new ObjectName("fivesight.pxe:mod=PXE");
  this.server.createMBean(ModSfwk.class.getName(),modSfwk);
  this.server.setAttribute(modSfwk,new Attribute("DomainId","mule-jbi"));
  this.server.setAttribute(modSfwk,new Attribute("TransactionManager","PxeTransactionManager"));
  this.server.setAttribute(modSfwk,new Attribute("DAOConnectionFactory","sscf"));
  this.server.setAttribute(modSfwk,new Attribute("SvcProviderJndiBindings","BpelSP,JbiSP"));
  this.server.invoke(modSfwk,"start",new Object[0],new String[0]);
  this.names=new ObjectName[]{modBpelEventLogger,modJdbcDS,modHibernateDAO,modSPBpel,modSPJbi,modSfwk};
}
