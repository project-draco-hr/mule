{
  MessageAdapter messageAdapter=createAndCheckMessageAdapter();
  DefaultMuleMessage muleMessage=new DefaultMuleMessage(messageAdapter);
  byte[] serializedMessage=SerializationUtils.serialize(muleMessage);
  DefaultMuleMessage readMessage=(DefaultMuleMessage)SerializationUtils.deserialize(serializedMessage);
  assertNotNull(readMessage.getAdapter());
  assertTrue(readMessage.getAdapter() instanceof DefaultMessageAdapter);
  DefaultMessageAdapter readAdapter=(DefaultMessageAdapter)readMessage.getAdapter();
  byte[] payload=(byte[])readAdapter.getPayload();
  assertEquals(PAYLOAD,new String(payload));
  assertEquals(STRING_PROPERTY_VALUE,readAdapter.getProperty(STRING_PROPERTY_KEY));
  doAdditionalAssertions(readAdapter);
}
