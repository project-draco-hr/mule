{
  String expr=getFullExpression();
  if (delegateFilter != null) {
    boolean result=delegateFilter.accept(message);
    if (logger.isDebugEnabled()) {
      logger.debug("Result of expression filter: " + expr + " is: "+ result);
    }
    return result;
  }
  Object result=muleContext.getExpressionManager().evaluate(expr,message);
  if (result == null) {
    return nullReturnsTrue;
  }
 else   if (result instanceof Boolean) {
    return ((Boolean)result).booleanValue();
  }
 else   if (result instanceof String) {
    return ((String)result).toLowerCase().equals(TRUE);
  }
 else {
    logger.warn("Expression: " + expr + ", returned an non-boolean result. Returning: "+ !nullReturnsTrue);
    return !nullReturnsTrue;
  }
}
