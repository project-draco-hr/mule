{
  String expr=getFullExpression();
  if (delegateFilter != null) {
    boolean result=delegateFilter.accept(message);
    if (logger.isDebugEnabled()) {
      logger.debug(MessageFormat.format("Result of expression filter: {0} is: {1}",expr,result));
    }
    return result;
  }
  ClassLoader originalContextClassLoader=Thread.currentThread().getContextClassLoader();
  try {
    Thread.currentThread().setContextClassLoader(expressionEvaluationClassLoader);
    return muleContext.getExpressionManager().evaluateBoolean(expr,message,nullReturnsTrue,!nullReturnsTrue);
  }
  finally {
    Thread.currentThread().setContextClassLoader(originalContextClassLoader);
  }
}
