{
  if (config.getEvaluator() == null) {
    return config.getExpression();
  }
  if (fullExpression == null) {
    if (config.getEvaluator().equals("header")) {
      delegateFilter=new MessagePropertyFilter(config.getExpression());
    }
 else     if (config.getEvaluator().equals("variable")) {
      delegateFilter=new MessagePropertyFilter(PropertyScope.INVOCATION_NAME + ":" + config.getExpression());
    }
 else     if (config.getEvaluator().equals(RegexExpressionEvaluator.NAME)) {
      delegateFilter=new RegExFilter(config.getExpression());
    }
 else     if (config.getEvaluator().equals(WilcardExpressionEvaluator.NAME)) {
      delegateFilter=new WildcardFilter(config.getExpression());
    }
 else     if (config.getEvaluator().equals(PayloadTypeExpressionEvaluator.NAME)) {
      try {
        delegateFilter=new PayloadTypeFilter(config.getExpression());
      }
 catch (      ClassNotFoundException e) {
        IllegalArgumentException iae=new IllegalArgumentException();
        iae.initCause(e);
        throw iae;
      }
    }
 else     if (config.getEvaluator().equals(ExceptionTypeExpressionEvaluator.NAME)) {
      try {
        if (StringUtils.isEmpty(config.getExpression())) {
          delegateFilter=new ExceptionTypeFilter();
        }
 else {
          delegateFilter=new ExceptionTypeFilter(config.getExpression());
        }
      }
 catch (      ClassNotFoundException e) {
        IllegalArgumentException iae=new IllegalArgumentException();
        iae.initCause(e);
        throw iae;
      }
    }
 else {
      fullExpression=config.getFullExpression(muleContext.getExpressionManager());
    }
  }
  if (delegateFilter instanceof MuleContextAware) {
    ((MuleContextAware)delegateFilter).setMuleContext(muleContext);
  }
  return fullExpression;
}
