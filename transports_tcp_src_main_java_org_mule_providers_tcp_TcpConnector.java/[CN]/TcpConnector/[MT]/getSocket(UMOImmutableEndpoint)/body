{
  Socket socket;
synchronized (dispatcherSockets) {
    socket=(Socket)dispatcherSockets.remove(endpoint.getEndpointURI().getAddress());
  }
  if (socket == null) {
    socket=initSocket(endpoint.getEndpointURI().getUri());
  }
 else   if (!socket.isConnected() || socket.isClosed()) {
    logger.debug("The current socket connection for this endpoint is closed. Creating new connection");
    socket=initSocket(endpoint.getEndpointURI().getUri());
  }
  return socket;
}
