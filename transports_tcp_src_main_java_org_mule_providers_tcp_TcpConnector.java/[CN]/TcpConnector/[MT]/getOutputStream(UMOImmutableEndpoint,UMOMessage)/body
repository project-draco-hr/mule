{
  try {
    Socket socket=getSocket(endpoint);
    if (socket == null) {
      throw new IllegalStateException("could not get socket for endpoint: " + endpoint.getEndpointURI().getAddress());
    }
    return new DataOutputStream(new BufferedOutputStream(socket.getOutputStream()));
  }
 catch (  IOException e) {
    throw new DispatchException(message,endpoint);
  }
catch (  URISyntaxException e) {
    throw new DispatchException(message,endpoint);
  }
}
