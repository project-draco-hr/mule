{
  RequestContext.setEvent(null);
  try {
    MuleSession session=new DefaultMuleSession(getMuleContext());
    MuleMessage originalMessage=event.getMessage();
    MuleMessage tapMessage=new DefaultMuleMessage(originalMessage.getPayload(),originalMessage.getAdapter());
    tap.dispatch(new DefaultMuleEvent(tapMessage,tap,session,false));
  }
 catch (  MessagingException e) {
    throw e;
  }
catch (  MuleException e) {
    throw new DispatchException(event.getMessage(),tap,e);
  }
  return super.process(event);
}
