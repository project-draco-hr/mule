{
  final ClassLoader ccl=Thread.currentThread().getContextClassLoader();
  LoggerRepository repository=repos.get(ccl);
  if (repository == null) {
    final RootLogger root=new RootLogger(Level.DEBUG);
    repository=new Hierarchy(root);
    repos.put(ccl,repository);
    try {
      RollingFileAppender appender=new RollingFileAppender(new PatternLayout("%d - %m%n"),"proggy_log" + ccl.hashCode() + ".txt",true);
      appender.setMaxBackupIndex(1);
      appender.setMaximumFileSize(1000000);
      root.addAppender(appender);
    }
 catch (    IOException e) {
      e.printStackTrace();
    }
  }
  return repository;
}
