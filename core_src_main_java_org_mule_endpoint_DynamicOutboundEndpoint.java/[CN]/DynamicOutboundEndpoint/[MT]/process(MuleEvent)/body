{
  if (event.getEndpoint() == null || !event.getEndpoint().equals(this)) {
    event=new DefaultMuleEvent(event.getMessage(),this,event.getSession());
  }
  final EndpointURI uri=getEndpointURIForMessage(event);
  builder.setURIBuilder(new URIBuilder(uri));
  endpoint=builder.buildOutboundEndpoint();
  final OutboundEndpoint outboundEndpoint=new DynamicURIOutboundEndpoint(endpoint,uri);
  return outboundEndpoint.process(event);
}
