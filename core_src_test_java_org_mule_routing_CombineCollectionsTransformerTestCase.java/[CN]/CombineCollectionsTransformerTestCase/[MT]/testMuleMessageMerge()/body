{
  MuleEvent event=getTestEvent("hello");
  ArrayList<Object> payload=new ArrayList<Object>();
  payload.add(Arrays.asList("1","2","3"));
  payload.add("4");
  payload.add(Arrays.asList("5","6","7"));
  event.getMessage().setPayload(payload);
  MuleEvent response=merger.process(event);
  assertFalse(response.getMessage() instanceof MuleMessageCollection);
  assertTrue(response.getMessage().getPayload() instanceof List);
  assertEquals(7,((List)response.getMessage().getPayload()).size());
}
