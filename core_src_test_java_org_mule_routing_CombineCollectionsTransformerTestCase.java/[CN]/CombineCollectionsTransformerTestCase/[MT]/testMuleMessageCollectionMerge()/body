{
  MuleEvent event=getTestEvent("hello");
  DefaultMessageCollection collection=new DefaultMessageCollection(muleContext);
  collection.addMessage(new DefaultMuleMessage(Arrays.asList("1","2","3"),muleContext));
  collection.addMessage(new DefaultMuleMessage("4",muleContext));
  collection.addMessage(new DefaultMuleMessage(Arrays.asList("5","6","7"),muleContext));
  event=new DefaultMuleEvent(collection,event);
  MuleEvent response=merger.process(event);
  assertFalse(response.getMessage() instanceof MuleMessageCollection);
  assertTrue(response.getMessage().getPayload() instanceof List);
  assertEquals(7,((List)response.getMessage().getPayload()).size());
}
