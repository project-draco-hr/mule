{
  if (!getCurrentState().equals(SHUTDOWN) && !getCurrentState().equals(UNKNOWN)) {
    throw new JBIException("Illegal status: " + getCurrentState());
  }
  if (this.units.size() > 0) {
    throw new JBIException("Component has service units deployed");
  }
  Library[] libraries=getLibraries();
  for (int i=0; i < libraries.length; i++) {
    libraries[i].removeComponent(this);
  }
  Directories.deleteDir(getInstallRoot());
  Directories.deleteDir(getWorkspaceRoot());
  getRegistry().removeComponent(this);
  setCurrentState(UNKNOWN);
}
