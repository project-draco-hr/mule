{
  if (!getCurrentState().equals(UNKNOWN) && !getCurrentState().equals(INITIALIZED)) {
    throw new JBIException("Illegal status: " + getCurrentState());
  }
  if (!isTransient) {
    createComponent();
    initComponent();
  }
  if (getStateAtShutdown().equals(RUNNING)) {
    start();
  }
  Unit[] units=getUnits();
  for (int i=0; i < units.length; i++) {
    getComponent().getServiceUnitManager().deploy(units[i].getName(),units[i].getInstallRoot());
    if (units[i].getStateAtShutdown().equals(RUNNING)) {
      units[i].start();
    }
  }
}
