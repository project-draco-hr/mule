{
  byte[] bytes;
  if (src instanceof InputStream) {
    bytes=IOUtils.toByteArray((InputStream)src);
  }
 else   if (src instanceof byte[]) {
    bytes=(byte[])src;
  }
 else {
    bytes=(byte[])super.doTransform(src,encoding);
  }
  try {
    return new String(bytes,encoding);
  }
 catch (  UnsupportedEncodingException uee) {
    throw new TransformerException(this,uee);
  }
}
