{
  HttpRequestMessageAdapter messageAdapter=(HttpRequestMessageAdapter)message.getAdapter();
  Map<String,String> parameters=messageAdapter.getRequestParameters();
  String author=parameters.get("author");
  String title=parameters.get("title");
  String price=parameters.get("price");
  if (StringUtils.isBlank(author)) {
    throw new TransformerException(MessageFactory.createStaticMessage("Missing author field"));
  }
  if (StringUtils.isBlank(title)) {
    throw new TransformerException(MessageFactory.createStaticMessage("Missing title field"));
  }
  if (StringUtils.isBlank(price)) {
    throw new TransformerException(MessageFactory.createStaticMessage("Missing price field"));
  }
  return new Book(author,title,Double.parseDouble(price));
}
