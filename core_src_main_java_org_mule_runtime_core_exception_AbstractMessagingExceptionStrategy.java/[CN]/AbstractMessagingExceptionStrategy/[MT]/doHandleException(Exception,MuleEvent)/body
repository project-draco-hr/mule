{
  FlowConstructStatistics statistics=flowConstruct.getStatistics();
  if (statistics != null && statistics.isEnabled()) {
    statistics.incExecutionError();
  }
  defaultHandler(ex);
  MuleEvent result;
  if (isRollback(ex)) {
    logger.debug("Rolling back transaction");
    rollback(ex);
    logger.debug("Routing exception message");
    result=routeException(event,flowConstruct,ex);
  }
 else {
    logger.debug("Routing exception message");
    result=routeException(event,flowConstruct,ex);
  }
  closeStream(event.getMessage());
  if (stopMessageProcessing) {
    stopFlow();
  }
  return result;
}
