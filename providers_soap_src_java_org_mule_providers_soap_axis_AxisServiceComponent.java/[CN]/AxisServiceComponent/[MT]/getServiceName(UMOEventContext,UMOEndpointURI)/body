{
  String serviceName=endpointUri.getPath();
  if (serviceName == null || serviceName.length() == 0) {
    serviceName=getSoapAction(context);
    serviceName=serviceName.replaceAll("\"","");
    int i=serviceName.indexOf("/",serviceName.indexOf("//"));
    if (i < -1) {
      serviceName=serviceName.substring(i + 2);
    }
  }
  int i=serviceName.lastIndexOf("/");
  if (i > -1) {
    serviceName=serviceName.substring(i);
  }
  i=serviceName.lastIndexOf("?");
  if (i > -1) {
    serviceName=serviceName.substring(0,i);
  }
  return serviceName;
}
