{
  if (logger.isDebugEnabled()) {
    logger.debug("initialising key manager factory from keystore data");
  }
  KeyStore tempKeyStore;
  try {
    tempKeyStore=KeyStore.getInstance(keystoreType);
    InputStream is=IOUtils.getResourceAsStream(keyStoreName,getClass());
    if (null == is) {
      throw new FileNotFoundException(CoreMessages.cannotLoadFromClasspath("Keystore: " + keyStoreName).getMessage());
    }
    tempKeyStore.load(is,keyStorePassword.toCharArray());
  }
 catch (  Exception e) {
    throw new CreateException(CoreMessages.failedToLoad("KeyStore: " + keyStoreName),e,this);
  }
  try {
    keyManagerFactory=KeyManagerFactory.getInstance(getKeyManagerAlgorithm());
    keyManagerFactory.init(tempKeyStore,keyPassword.toCharArray());
  }
 catch (  Exception e) {
    throw new CreateException(CoreMessages.failedToLoad("Key Manager"),e,this);
  }
}
