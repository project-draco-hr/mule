{
  MessagePropertiesTransformer transformer=(MessagePropertiesTransformer)muleContext.getRegistry().lookupTransformer("testTransformer");
  transformer.setMuleContext(muleContext);
  assertNotNull(transformer);
  assertNotNull(transformer.getAddProperties());
  assertNotNull(transformer.getDeleteProperties());
  assertEquals(2,transformer.getAddProperties().size());
  assertEquals(2,transformer.getDeleteProperties().size());
  assertEquals(1,transformer.getRenameProperties().size());
  assertTrue(transformer.isOverwrite());
  assertEquals("text/baz;charset=UTF-16BE",transformer.getAddProperties().get("Content-Type"));
  assertEquals("value",transformer.getAddProperties().get("key"));
  assertEquals("test-property1",transformer.getDeleteProperties().get(0));
  assertEquals("test-property2",transformer.getDeleteProperties().get(1));
  assertEquals("Faz",transformer.getRenameProperties().get("Foo"));
  assertEquals(PropertyScope.OUTBOUND,transformer.getScope());
}
