{
  endpointsCache.clear();
  for (Iterator iterator=router.getRouters().iterator(); iterator.hasNext(); ) {
    OutboundRouter r=(OutboundRouter)iterator.next();
    for (    MessageProcessor mp : r.getTargets()) {
      if (mp instanceof ImmutableEndpoint) {
        ImmutableEndpoint endpoint=(ImmutableEndpoint)mp;
        endpointsCache.put(endpoint.getEndpointURI().getAddress(),endpoint);
      }
    }
  }
}
