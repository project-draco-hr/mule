{
  if (src instanceof Node) {
    return (Document)src;
  }
 else   if (src instanceof org.dom4j.Document) {
    org.dom4j.Document dom4j=(org.dom4j.Document)src;
    DOMDocument dom=new DOMDocument();
    dom.setDocument(dom4j);
    return dom;
  }
 else   if (src instanceof OutputHandler) {
    OutputHandler handler=((OutputHandler)src);
    ByteArrayOutputStream output=new ByteArrayOutputStream();
    handler.write(RequestContext.getEvent(),output);
    InputStream stream=new ByteArrayInputStream(output.toByteArray());
    return getDocumentBuilderFactory().newDocumentBuilder().parse(stream);
  }
 else   if (src instanceof byte[]) {
    ByteArrayInputStream stream=new ByteArrayInputStream((byte[])src);
    return getDocumentBuilderFactory().newDocumentBuilder().parse(stream);
  }
 else   if (src instanceof InputStream) {
    return getDocumentBuilderFactory().newDocumentBuilder().parse((InputStream)src);
  }
 else   if (src instanceof String) {
    return getDocumentBuilderFactory().newDocumentBuilder().parse(new InputSource(new StringReader((String)src)));
  }
 else   if (src instanceof XMLStreamReader) {
    XMLStreamReader xsr=(XMLStreamReader)src;
    if (!xsr.isStartElement() && xsr.getEventType() != XMLStreamConstants.START_DOCUMENT) {
      xsr.nextTag();
    }
    return getDocumentBuilderFactory().newDocumentBuilder().parse(new InputSource());
  }
 else   if (src instanceof DelayedResult) {
    DelayedResult result=((DelayedResult)src);
    DOMResult domResult=new DOMResult();
    result.write(domResult);
    return domResult.getNode();
  }
 else {
    return (Node)xmlToDom.transform(src);
  }
}
