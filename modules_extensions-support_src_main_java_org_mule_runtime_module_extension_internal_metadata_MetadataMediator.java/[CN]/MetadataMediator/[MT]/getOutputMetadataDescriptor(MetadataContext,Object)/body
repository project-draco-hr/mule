{
  MetadataResult<MetadataType> outputMetadataResult=getOutputMetadata(context,key);
  MetadataResult<MetadataType> attributesMetadataResult=getOutputAttributesMetadata(context,key);
  MetadataResult<TypeMetadataDescriptor> outputDescriptor=toTypeMetadataDescriptorResult(outputMetadataResult);
  MetadataResult<TypeMetadataDescriptor> attributesDescriptor=toTypeMetadataDescriptorResult(attributesMetadataResult);
  OutputMetadataDescriptor descriptor=outputDescriptor().withReturnType(outputDescriptor).withAttributesType(attributesDescriptor).build();
  if (!outputMetadataResult.isSuccess() || !attributesMetadataResult.isSuccess()) {
    return mergeFailures(descriptor,outputMetadataResult,attributesMetadataResult);
  }
  return success(descriptor);
}
