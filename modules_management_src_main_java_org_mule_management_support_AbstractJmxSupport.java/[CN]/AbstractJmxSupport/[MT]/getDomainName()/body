{
  String domain=DEFAULT_JMX_DOMAIN_PREFIX;
  String instanceId=StringUtils.defaultString(MuleManager.getInstance().getId());
  if (instanceId.length() > 0) {
    domain+="." + instanceId;
  }
  JmxRegistrationContext ctx=JmxRegistrationContext.getCurrent();
  String resolvedDomain=ctx.getResolvedDomain();
  if (StringUtils.isBlank(resolvedDomain)) {
    domain=resolveDomainClash(domain);
    ctx.setResolvedDomain(domain);
  }
  return domain;
}
