{
  Object result=null;
  Object payload=message;
  if (message instanceof MessageAdapter) {
    payload=((MessageAdapter)message).getPayload();
  }
  Document dom4jDoc;
  try {
    dom4jDoc=XMLUtils.toDocument(payload);
  }
 catch (  Exception e) {
    logger.error(e);
    return null;
  }
  if (dom4jDoc != null) {
    result=dom4jDoc.valueOf(name);
  }
 else {
    JXPathContext context=JXPathContext.newContext(payload);
    try {
      result=context.getValue(name);
    }
 catch (    Exception e) {
    }
  }
  return result;
}
