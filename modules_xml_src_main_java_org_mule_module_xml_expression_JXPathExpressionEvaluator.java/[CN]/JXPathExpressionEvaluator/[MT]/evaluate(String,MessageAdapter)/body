{
  Object result;
  Object payload=message.getPayload();
  JXPathContext context=JXPathContext.newContext(message.getPayload());
  if (namespaceManager != null) {
    addNamespaces(namespaceManager,context);
  }
  Document doc;
  try {
    doc=XMLUtils.toDocument(payload);
  }
 catch (  Exception e) {
    logger.error(e);
    return null;
  }
  if (doc != null) {
    result=doc.valueOf(name);
  }
 else {
    result=context.getValue(name);
  }
  return result;
}
