{
  if (purgeQueuesOnTearDown) {
    purge(getInboundQueueName());
    purge(getOutboundQueueName());
    purgeTopics();
  }
  super.doTearDown();
  Transaction tx=TransactionCoordination.getInstance().getTransaction();
  if (tx != null) {
    TransactionCoordination.getInstance().unbindTransaction(tx);
    log.warn("Transaction was active when this test ended");
  }
}
