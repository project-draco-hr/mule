{
  this.managementContext=managementContext;
  if (!initialised.get()) {
    initialising.set(true);
    fireSystemEvent(new ManagerNotification(id,null,null,ManagerNotification.MANAGER_INITIALISNG));
    if (id == null) {
      logger.warn("No unique id has been set on this manager");
    }
    try {
      try {
        TransactionalQueueManager queueMgr=new TransactionalQueueManager();
        QueuePersistenceStrategy ps=new CachingPersistenceStrategy(new MemoryPersistenceStrategy());
        queueMgr.setPersistenceStrategy(ps);
      }
 catch (      Exception e) {
        throw new InitialisationException(new Message(Messages.INITIALISATION_FAILURE_X,"QueueManager"),e);
      }
      getContainerContext().initialise();
      initialiseObjectsOfType(UMOConnector.class,-1,-1);
      initialiseObjectsOfType(UMOEndpoint.class,-1,-1);
      initialiseAgents();
      initialiseObjectsOfType(UMOModel.class,-1,-1);
    }
 catch (    InitialisationException e) {
      throw e;
    }
catch (    Exception e) {
      throw new InitialisationException(e,this);
    }
 finally {
      initialised.set(true);
      initialising.set(false);
      fireSystemEvent(new ManagerNotification(id,null,null,ManagerNotification.MANAGER_INITIALISED));
    }
  }
}
