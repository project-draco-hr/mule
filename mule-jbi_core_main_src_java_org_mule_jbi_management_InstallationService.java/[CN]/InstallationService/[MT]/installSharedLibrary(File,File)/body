{
  URL jbiUrl=new URL("jar","",file.toURL().toString() + "!/" + JBI_DESCRIPTOR);
  Jbi jbi=JbiDocument.Factory.parse(jbiUrl).getJbi();
  if (jbi.getVersion().doubleValue() != 1.0) {
    throw new JBIException("version attribute should be '1.0'");
  }
  if (!jbi.isSetSharedLibrary()) {
    throw new JBIException("shared-library should be set");
  }
  String name=jbi.getSharedLibrary().getIdentification().getName();
  if (this.container.getRegistry().getLibrary(name) != null) {
    throw new JBIException("Shared library is already installed");
  }
  File installDir=Directories.getLibraryInstallDir(this.container.getWorkingDir(),name);
  Library lib=this.container.getRegistry().addLibrary(name);
  lib.setInstallRoot(installDir.getAbsolutePath());
  IOUtils.unzip(file,installDir);
  lib.install();
  return name;
}
