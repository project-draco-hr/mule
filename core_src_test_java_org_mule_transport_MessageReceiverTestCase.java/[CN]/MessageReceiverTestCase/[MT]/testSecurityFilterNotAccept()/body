{
  receiver=createTestMessageReceiver(null,new TestSecurityFilter(false),false,null);
  MuleMessage result=receiver.routeMessage(inMessage);
  assertMessageNotSent();
  assertNotNull(result);
  assertEquals(SECURITY_EXCEPTION_MESSAGE,result.getPayloadAsString());
  assertNotNull(result.getExceptionPayload());
  assertTrue(result.getExceptionPayload().getException() instanceof TestSecurityFilter.FakeUnauthorisedException);
}
