{
  when(serviceRegistry.lookupProviders(Describer.class,getClass().getClassLoader())).thenReturn(Arrays.asList(describer));
  when(describer.describe()).thenReturn(descriptor);
  when(extensionFactory.createFrom(descriptor)).thenReturn(extensionModel);
  List<ExtensionModel> extensionModels=discoverer.discover(getClass().getClassLoader());
  assertThat(extensionModels,hasSize(1));
  assertThat(extensionModels.get(0),is(sameInstance(extensionModel)));
  verify(serviceRegistry).lookupProviders(Describer.class,getClass().getClassLoader());
  verify(describer).describe();
  verify(extensionFactory).createFrom(descriptor);
}
