{
  when(serviceRegistry.lookupProviders(Describer.class,getClass().getClassLoader())).thenReturn(Arrays.asList(describer));
  when(describer.describe()).thenReturn(descriptor);
  when(extensionFactory.createFrom(descriptor)).thenReturn(extension);
  List<Extension> extensions=discoverer.discover(getClass().getClassLoader());
  assertThat(extensions,hasSize(1));
  assertThat(extensions.get(0),is(sameInstance(extension)));
  verify(serviceRegistry).lookupProviders(Describer.class,getClass().getClassLoader());
  verify(describer).describe();
  verify(extensionFactory).createFrom(descriptor);
}
