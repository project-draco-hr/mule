{
  Flow flow=(Flow)getFlowConstruct("nestedTransactionalFail");
  Event event=Event.builder(DefaultEventContext.create(flow,TEST_CONNECTOR)).message(InternalMessage.of("message")).build();
  try {
    flow.process(event);
  }
 catch (  Exception e) {
  }
  InternalMessage message1=muleContext.getClient().request("vm://out1?connector=vmConnector1",1000).getRight().get();
  assertThat(muleContext.getClient().request("vm://out2?connector=vmConnector1",1000).getRight().isPresent(),is(false));
  assertThat(message1,notNullValue());
}
