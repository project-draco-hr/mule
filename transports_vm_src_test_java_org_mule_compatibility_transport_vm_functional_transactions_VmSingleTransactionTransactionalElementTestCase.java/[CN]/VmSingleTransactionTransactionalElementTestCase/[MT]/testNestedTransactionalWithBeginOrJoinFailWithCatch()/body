{
  Flow flow=(Flow)getFlowConstruct("nestedTransactionalWithBeginOrJoinFailWithCatch");
  MuleEvent event=getTestEvent("message",flow);
  flow.process(event);
  MuleMessage message1=muleContext.getClient().request("vm://out1?connector=vmConnector1",1000).getRight().get();
  MuleMessage message2=muleContext.getClient().request("vm://out2?connector=vmConnector1",1000).getRight().get();
  assertThat(message1,notNullValue());
  assertThat(message2,notNullValue());
}
