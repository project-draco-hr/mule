{
  if (parentContext != null && domainContext != null) {
    throw new IllegalStateException("An application with a web xml context and domain resources is not supported");
  }
  if (parentContext != null) {
    createRegistryWithParentContext(muleContext,applicationContext,parentContext);
  }
 else   if (domainContext != null) {
    createRegistryWithParentContext(muleContext,applicationContext,domainContext);
  }
 else {
    registry=new SpringRegistry(applicationContext,muleContext);
  }
  muleContext.addRegistry(registry);
  registry.initialise();
}
