{
  MuleEvent lastEventCreated=mock(MuleEvent.class,Answers.RETURNS_DEEP_STUBS.get());
  handleMessagingExceptionStrategy.setMessageProcessors(asList(createChagingEventMessageProcessor(mock(MuleEvent.class)),createChagingEventMessageProcessor(lastEventCreated)));
  handleMessagingExceptionStrategy.initialise();
  MuleEvent exceptionHandlingResult=handleMessagingExceptionStrategy.handleException(mockException,mockMuleEvent);
  assertThat(exceptionHandlingResult,Is.is(lastEventCreated));
}
