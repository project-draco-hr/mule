{
  Transaction currentTransaction=TransactionCoordination.getInstance().getTransaction();
  if (currentTransaction != null) {
    TransactionCoordination.getInstance().unbindTransaction(currentTransaction);
  }
  handleMessagingExceptionStrategy=new HandleMessagingExceptionStrategy(mockMuleContext);
  when(mockMuleContext.getRegistry().lookupObject(MuleProperties.OBJECT_MULE_STREAM_CLOSER_SERVICE)).thenReturn(mockStreamCloserService);
  when(mockMuleEvent.getMessage()).thenReturn(mockMuleMessage);
}
