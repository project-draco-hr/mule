{
  MuleEvent responseEvent=runFlow("all",getAllEvent(INVALID_EMAIL,INVALID_CREDIT_CARD_NUMBER,false));
  assertThat(responseEvent.getMessage().getPayload(),is(instanceOf(ValidationResult.class)));
  MultipleValidationResult result=(MultipleValidationResult)responseEvent.getMessage().getPayload();
  assertThat(result.isError(),is(true));
  String expectedMessage=Joiner.on('\n').join(messages.invalidCreditCard(INVALID_CREDIT_CARD_NUMBER,CreditCardType.MASTERCARD),messages.invalidEmail(INVALID_EMAIL));
  assertThat(result.getMessage(),is(expectedMessage));
  for (  ValidationResult failedValidationResult : result.getFailedValidationResults()) {
    assertThat(failedValidationResult.isError(),is(true));
  }
}
