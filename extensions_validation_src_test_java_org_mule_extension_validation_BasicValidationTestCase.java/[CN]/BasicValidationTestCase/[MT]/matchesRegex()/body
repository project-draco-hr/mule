{
  final String regex="[tT]rue";
  MuleEvent event=getTestEvent("true");
  event.setFlowVariable("regexp",regex);
  event.setFlowVariable("caseSensitive",false);
  assertValid("matchesRegex",event);
  String testValue="TRUE";
  event.getMessage().setPayload(testValue);
  assertValid("matchesRegex",event);
  event.setFlowVariable("caseSensitive",true);
  assertInvalid("matchesRegex",event,messages.regexDoesNotMatch(testValue,regex));
  testValue="tTrue";
  event.getMessage().setPayload(testValue);
  assertInvalid("matchesRegex",event,messages.regexDoesNotMatch(testValue,regex));
}
