{
  TransactionManager txManager=MuleServer.getManagementContext().getTransactionManager();
  try {
    Transaction tx=txManager.getTransaction();
    if (tx == null) {
      throw new TransactionException(MessageFactory.createStaticMessage("XATransaction is null"));
    }
    return tx.enlistResource(resource);
  }
 catch (  RollbackException e) {
    throw new TransactionException(e);
  }
catch (  SystemException e) {
    throw new TransactionException(e);
  }
}
