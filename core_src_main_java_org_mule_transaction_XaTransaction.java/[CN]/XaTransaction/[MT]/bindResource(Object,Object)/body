{
  if (resources.containsKey(key)) {
    throw new IllegalTransactionStateException(CoreMessages.transactionResourceAlreadyListedForKey(key));
  }
  resources.put(key,resource);
}
