{
  Object serviceFlow=muleContext.getRegistry().lookupObject("TestComponent5");
  if (serviceFlow instanceof Service) {
    assertNotNull(serviceFlow);
    OutboundRouterCollection outboundRouter=(OutboundRouterCollection)((Service)serviceFlow).getOutboundMessageProcessor();
    assertNotNull(outboundRouter);
    assertEquals(1,outboundRouter.getRoutes().size());
    OutboundRouter router=(OutboundRouter)outboundRouter.getRoutes().get(0);
    assertEquals(1,router.getRoutes().size());
    ImmutableEndpoint endpoint=(ImmutableEndpoint)router.getRoutes().get(0);
    assertEquals(TcpConnector.TCP,endpoint.getConnector().getProtocol().toLowerCase());
    assertEquals("tcp://localhost:45431",endpoint.getEndpointURI().getAddress());
    assertTrue(endpoint instanceof OutboundEndpoint);
  }
 else   if (serviceFlow instanceof Flow) {
    assertNotNull(serviceFlow);
    List<MessageProcessor> messageProcessors=((Flow)serviceFlow).getMessageProcessors();
    assertNotNull(messageProcessors);
    ImmutableEndpoint endpoint=(ImmutableEndpoint)messageProcessors.get(1);
    assertEquals(TcpConnector.TCP,endpoint.getConnector().getProtocol().toLowerCase());
    assertEquals("tcp://localhost:45431",endpoint.getEndpointURI().getAddress());
    assertTrue(endpoint instanceof OutboundEndpoint);
  }
 else {
    fail("Unexpected Object");
  }
}
