{
  Service service=muleContext.getRegistry().lookupService("TestComponent3");
  assertNotNull(service);
  OutboundRouterCollection outboundRouter=service.getOutboundRouter();
  assertNotNull(outboundRouter);
  assertEquals(2,outboundRouter.getRouters().size());
  OutboundRouter router1=(OutboundRouter)outboundRouter.getRouters().get(0);
  assertEquals(1,router1.getTargets().size());
  ImmutableEndpoint endpoint=(ImmutableEndpoint)router1.getTargets().get(0);
  assertEquals("tcp",endpoint.getConnector().getProtocol().toLowerCase());
  assertEquals("tcp://localhost:60201",endpoint.getEndpointURI().getAddress());
  assertTrue(endpoint instanceof OutboundEndpoint);
  OutboundRouter router2=(OutboundRouter)outboundRouter.getRouters().get(1);
  assertEquals(2,router2.getTargets().size());
  endpoint=(ImmutableEndpoint)router2.getTargets().get(0);
  assertEquals("udp",endpoint.getConnector().getProtocol().toLowerCase());
  assertEquals("udp://localhost:56731",endpoint.getEndpointURI().getAddress());
  assertTrue(endpoint instanceof OutboundEndpoint);
  endpoint=(ImmutableEndpoint)router2.getTargets().get(1);
  assertEquals("test",endpoint.getConnector().getProtocol().toLowerCase());
  assertEquals("test.queue2",endpoint.getEndpointURI().getAddress());
  assertFalse(endpoint.getTransformers().isEmpty());
  assertTrue(endpoint instanceof OutboundEndpoint);
}
