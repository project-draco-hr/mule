{
  testWithSystemProperty(JdbcConnector.USE_DISPATCHER_POOL_SYSTEM_PROPERTY,"true",new TestCallback(){
    @Override public void run() throws Exception {
      JdbcConnector jdbcConnector=(JdbcConnector)createConnector();
      jdbcConnector.initialise();
      jdbcConnector.start();
      OutboundEndpoint endpoint=muleContext.getEndpointFactory().getOutboundEndpoint("jdbc://test");
      jdbcConnector.createDispatcherMessageProcessor(endpoint);
      assertThat(jdbcConnector.borrowDispatcher(endpoint),not(jdbcConnector.borrowDispatcher(endpoint)));
    }
  }
);
}
