{
  out.defaultWriteObject();
  if (serializedData != null) {
    Object serviceName=serializedData.get("serviceName");
    if (serviceName != null) {
      out.writeObject(serviceName);
    }
  }
 else {
    if (getFlowConstruct() != null) {
      out.writeObject(getFlowConstruct() != null ? getFlowConstruct().getName() : "null");
    }
  }
  for (  Map.Entry<String,Object> entry : flowVariables.entrySet()) {
    Object value=entry.getValue();
    if (value != null && !(value instanceof Serializable)) {
      String message=String.format("Unable to serialize the flow variable %s, which is of type %s ",entry.getKey(),value);
      logger.error(message);
      throw new IOException(message);
    }
  }
}
