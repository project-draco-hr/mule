{
  this.message=message;
  if (message instanceof DefaultMuleMessage) {
    for (    String name : message.getInvocationPropertyNames()) {
      setFlowVariable(name,message.getInvocationProperty(name));
    }
    ((DefaultMuleMessage)message).setInvocationProperties(flowVariables);
    if (session instanceof DefaultMuleSession) {
      ((DefaultMuleMessage)message).setSessionProperties(((DefaultMuleSession)session).getProperties());
    }
  }
}
