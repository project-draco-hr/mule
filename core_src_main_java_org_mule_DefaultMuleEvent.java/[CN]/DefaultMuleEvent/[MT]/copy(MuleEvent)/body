{
  MuleMessage messageCopy=(MuleMessage)((ThreadSafeAccess)event.getMessage()).newThreadCopy();
  DefaultMuleEvent eventCopy=new DefaultMuleEvent(messageCopy,event,new DefaultMuleSession(event.getSession()));
  eventCopy.flowVariables=new CopyOnWriteCaseInsensitiveMap<String,Object>(((DefaultMuleEvent)event).flowVariables);
  ((DefaultMuleMessage)messageCopy).setInvocationProperties(eventCopy.flowVariables);
  ((DefaultMuleMessage)messageCopy).resetAccessControl();
  return eventCopy;
}
