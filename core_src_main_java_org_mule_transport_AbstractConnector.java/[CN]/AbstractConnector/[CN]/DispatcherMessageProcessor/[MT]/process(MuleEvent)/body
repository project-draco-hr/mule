{
  MessageDispatcher dispatcher=null;
  try {
    dispatcher=getDispatcher(endpoint);
    if (notificationMessageProcessor == null) {
      notificationMessageProcessor=new OutboundNotificationMessageProcessor(endpoint);
    }
    EndpointMessageNotification beginNotification=notificationMessageProcessor.createBeginNotification(event);
    MuleEvent result=dispatcher.process(event);
    notificationMessageProcessor.dispatchNotification(beginNotification);
    notificationMessageProcessor.process(result != null ? result : event);
    return result;
  }
 catch (  DispatchException dex) {
    throw dex;
  }
catch (  MuleException ex) {
    throw new DispatchException(event,endpoint,ex);
  }
 finally {
    returnDispatcher(endpoint,dispatcher);
  }
}
