{
  MessageDispatcher dispatcher=null;
  try {
    dispatcher=borrowDispatcher(endpoint);
    boolean fireNotification=event.isNotificationsEnabled();
    EndpointMessageNotification beginNotification=null;
    if (fireNotification) {
      if (notificationMessageProcessor == null) {
        notificationMessageProcessor=new OutboundNotificationMessageProcessor(endpoint);
      }
      beginNotification=notificationMessageProcessor.createBeginNotification(event);
    }
    MuleEvent result=dispatcher.process(event);
    if (fireNotification) {
      notificationMessageProcessor.dispatchNotification(beginNotification);
      notificationMessageProcessor.process((result != null && !VoidMuleEvent.getInstance().equals(result)) ? result : event);
    }
    return result;
  }
 catch (  DispatchException dex) {
    throw dex;
  }
catch (  MuleException ex) {
    throw new DispatchException(event,endpoint,ex);
  }
 finally {
    returnDispatcher(endpoint,dispatcher);
  }
}
