{
  if (isConnected() && exception instanceof ConnectException && !(retryPolicyTemplate instanceof NoRetryPolicyTemplate)) {
    logger.info("Exception caught is a ConnectException, attempting to reconnect...");
    try {
      try {
        disconnect();
      }
 catch (      Exception de) {
        logger.error(de);
      }
      if (exceptionListener != null) {
        exceptionListener.exceptionThrown(exception);
      }
 else {
        throw new MuleRuntimeException(CoreMessages.exceptionOnConnectorNotExceptionListener(this.getName()),exception);
      }
      Map info=new HashMap();
      if (exception instanceof ReceiverConnectException) {
        info.put("failedReceiver",((ConnectException)exception).getComponent());
      }
 else       if (exception instanceof DispatcherConnectException) {
        info.put("failedDispatcher",((ConnectException)exception).getComponent());
      }
      retryPolicyTemplate.setMetaInfo(info);
      connect();
    }
 catch (    Exception e) {
      if (exceptionListener == null) {
        throw new MuleRuntimeException(CoreMessages.exceptionOnConnectorNotExceptionListener(this.getName()),e);
      }
 else {
        exceptionListener.exceptionThrown(e);
      }
    }
  }
 else {
    if (exceptionListener != null) {
      exceptionListener.exceptionThrown(exception);
    }
 else {
      throw new MuleRuntimeException(CoreMessages.exceptionOnConnectorNotExceptionListener(this.getName()),exception);
    }
  }
}
