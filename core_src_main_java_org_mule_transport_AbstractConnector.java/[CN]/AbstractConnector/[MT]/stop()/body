{
  lifecycleManager.fireStopPhase(new LifecycleCallback<Connector>(){
    public void onTransition(    String phaseName,    Connector object) throws MuleException {
      shutdownScheduler();
      doStop();
      if (receivers != null) {
        for (        MessageReceiver receiver : receivers.values()) {
          if (logger.isDebugEnabled()) {
            logger.debug("Stopping receiver on endpoint: " + receiver.getEndpoint().getEndpointURI());
          }
          receiver.stop();
        }
      }
      if (isConnected()) {
        try {
          disconnect();
        }
 catch (        Exception e) {
          logger.error("Failed to disconnect: " + e.getMessage(),e);
        }
      }
      disposeWorkManagers();
      clearDispatchers();
      clearRequesters();
      scheduler=null;
    }
  }
);
}
