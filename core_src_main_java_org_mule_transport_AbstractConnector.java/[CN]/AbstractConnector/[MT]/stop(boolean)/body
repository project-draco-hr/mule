{
  lifecycleManager.checkPhase(Stoppable.PHASE_NAME);
  shutdownScheduler();
  if (disposeWorkManagers) {
    disposeWorkManagers();
  }
  lifecycleManager.fireLifecycle(Stoppable.PHASE_NAME);
  if (receivers != null) {
    for (    MessageReceiver receiver : receivers.values()) {
      if (logger.isDebugEnabled()) {
        logger.debug("Stopping receiver on endpoint: " + receiver.getEndpoint().getEndpointURI());
      }
      receiver.stop();
    }
  }
  this.clearDispatchers();
  this.clearRequesters();
  if (this.isConnected()) {
    try {
      this.disconnect();
    }
 catch (    Exception e) {
      logger.error("Failed to disconnect: " + e.getMessage(),e);
    }
  }
  scheduler=null;
}
