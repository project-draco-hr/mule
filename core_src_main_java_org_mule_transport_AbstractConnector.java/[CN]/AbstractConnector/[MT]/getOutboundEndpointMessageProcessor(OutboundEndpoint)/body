{
  MessageProcessor processor=(MessageProcessor)outboundEndpointMessageProcessors.get(endpoint);
  if (processor == null) {
    processor=createOutboundEndpointMessageProcessor(endpoint);
    MessageProcessor concurrentlyAddedProcessor=(MessageProcessor)outboundEndpointMessageProcessors.putIfAbsent(endpoint,processor);
    if (concurrentlyAddedProcessor != null) {
      return concurrentlyAddedProcessor;
    }
  }
  return processor;
}
