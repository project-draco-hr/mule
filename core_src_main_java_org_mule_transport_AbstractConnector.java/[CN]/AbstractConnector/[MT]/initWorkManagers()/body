{
  if (receiverWorkManager.get() == null) {
    ThreadingProfile tp=getReceiverThreadingProfile();
    if (tp == null) {
      throw new ConfigurationException(MessageFactory.createStaticMessage("No ReceiverThreadingProfile has been configured"));
    }
    WorkManager newWorkManager=tp.createWorkManager(getName() + ".receiver");
    if (receiverWorkManager.compareAndSet(null,newWorkManager)) {
      newWorkManager.start();
    }
  }
  if (dispatcherWorkManager.get() == null) {
    WorkManager newWorkManager=this.getDispatcherThreadingProfile().createWorkManager(getName() + ".dispatcher");
    if (dispatcherWorkManager.compareAndSet(null,newWorkManager)) {
      newWorkManager.start();
    }
  }
}
