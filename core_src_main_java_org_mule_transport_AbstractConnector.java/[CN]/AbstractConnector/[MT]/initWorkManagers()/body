{
  final boolean containerMode=muleContext.getConfiguration().isContainerMode();
  final String id=muleContext.getConfiguration().getId();
  if (receiverWorkManager.get() == null) {
    final String threadPrefix=containerMode ? String.format("[%s].%s.receiver",id,getName()) : String.format("%s.receiver",getName());
    WorkManager newWorkManager=this.getReceiverThreadingProfile().createWorkManager(threadPrefix,muleContext.getConfiguration().getShutdownTimeout());
    if (receiverWorkManager.compareAndSet(null,newWorkManager)) {
      newWorkManager.start();
    }
  }
  if (dispatcherWorkManager.get() == null) {
    ThreadingProfile dispatcherThreadingProfile=this.getDispatcherThreadingProfile();
    if (dispatcherThreadingProfile.getMuleContext() == null) {
      dispatcherThreadingProfile.setMuleContext(muleContext);
    }
    final String threadPrefix=containerMode ? String.format("[%s].%s.dispatcher",id,getName()) : String.format("%s.dispatcher",getName());
    WorkManager newWorkManager=dispatcherThreadingProfile.createWorkManager(threadPrefix,muleContext.getConfiguration().getShutdownTimeout());
    if (dispatcherWorkManager.compareAndSet(null,newWorkManager)) {
      newWorkManager.start();
    }
  }
  if (requesterWorkManager.get() == null) {
    final String threadPrefix=containerMode ? String.format("[%s].%s.requester",id,getName()) : String.format("%s.requester",getName());
    WorkManager newWorkManager=this.getRequesterThreadingProfile().createWorkManager(threadPrefix,muleContext.getConfiguration().getShutdownTimeout());
    if (requesterWorkManager.compareAndSet(null,newWorkManager)) {
      newWorkManager.start();
    }
  }
}
