{
  Object payload=NullPayload.getInstance();
  DataType dataType=DataType.fromType(NullPayload.class);
  MuleMessage<InputStream,ListenerFileAttributes> message;
  if (attributes.getEventType().equals(DELETE.name())) {
    attributes=new DeletedFileAttributes(path);
  }
 else   if (!attributes.isDirectory()) {
    dataType=fileSystem.getFileMessageDataType(INPUT_STREAM,attributes);
    payload=new FileInputStream(path,new NullPathLock());
  }
  message=new DefaultMuleMessage(payload,dataType,attributes);
  return message;
}
