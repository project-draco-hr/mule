{
  final String resolvedListenerPath=listenerPath.getResolvedPath();
  propertiesMap.put(HttpConstants.RequestProperties.HTTP_METHOD_PROPERTY,method);
  final String path=extractPath(uri);
  final String rawQueryString=extractQueryParams(uri);
  final ParameterMap queryParams=decodeQueryString(rawQueryString);
  propertiesMap.put(HttpConstants.RequestProperties.HTTP_QUERY_PARAMS,queryParams == null ? new HashMap<>() : queryParams.toImmutableParameterMap());
  propertiesMap.put(HttpConstants.RequestProperties.HTTP_QUERY_STRING,rawQueryString);
  propertiesMap.put(HttpConstants.RequestProperties.HTTP_REQUEST_PATH_PROPERTY,path);
  propertiesMap.put(HttpConstants.RequestProperties.HTTP_VERSION_PROPERTY,protocol);
  propertiesMap.put(HttpConstants.RequestProperties.HTTP_REQUEST_URI,uri);
  propertiesMap.put(HttpConstants.RequestProperties.HTTP_REMOTE_ADDRESS,remoteHostAddress);
  propertiesMap.put(HttpConstants.RequestProperties.HTTP_URI_PARAMS,decodeUriParams(resolvedListenerPath,path));
  propertiesMap.put(HttpConstants.RequestProperties.HTTP_LISTENER_PATH,resolvedListenerPath);
  propertiesMap.put(HttpConstants.RequestProperties.HTTP_RELATIVE_PATH,listenerPath.getRelativePath(path));
  propertiesMap.put(HttpConstants.RequestProperties.HTTP_SCHEME,scheme);
  if (clientCertificate != null) {
    propertiesMap.put(HttpConstants.RequestProperties.HTTP_CLIENT_CERTIFICATE,clientCertificate);
  }
}
