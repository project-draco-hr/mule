{
  PoolingProfile poolingProfile;
  if (connectionProvider instanceof ConnectionProviderWrapper) {
    poolingProfile=((ConnectionProviderWrapper)connectionProvider).getPoolingProfile().orElse(getDefaultPoolingProfile());
  }
 else {
    poolingProfile=getDefaultPoolingProfile();
  }
  ConnectionHandlingStrategyFactory<Connection> connectionHandlingStrategyFactory;
  connectionHandlingStrategyFactory=new DefaultConnectionHandlingStrategyFactory<>(connectionProvider,poolingProfile,muleContext);
  return (ConnectionHandlingStrategyAdapter<Connection>)connectionProvider.getHandlingStrategy(connectionHandlingStrategyFactory);
}
