{
  PartitionedPersistentObjectStore partitionedStore=new PartitionedPersistentObjectStore(muleContext);
  partitionedStore.open();
  muleContext.getRegistry().registerObject(MuleProperties.OBJECT_STORE_DEFAULT_PERSISTENT_NAME,partitionedStore);
  ObjectStoreManager manager=muleContext.getRegistry().lookupObject(MuleProperties.OBJECT_STORE_MANAGER);
  ListableObjectStore store=manager.getObjectStore("persistencePart2",true);
  assertTrue(store instanceof ObjectStorePartition);
  ObjectStore baseStore=((ObjectStorePartition)store).getBaseStore();
  assertTrue(baseStore instanceof PartitionedPersistentObjectStore);
  assertSame(baseStore,muleContext.getRegistry().lookupObject(MuleProperties.OBJECT_STORE_DEFAULT_PERSISTENT_NAME));
  testObjectStore(store);
  testObjectStoreExpiry(manager.getObjectStore("persistenceExpPart2",true,-1,1000,200));
}
