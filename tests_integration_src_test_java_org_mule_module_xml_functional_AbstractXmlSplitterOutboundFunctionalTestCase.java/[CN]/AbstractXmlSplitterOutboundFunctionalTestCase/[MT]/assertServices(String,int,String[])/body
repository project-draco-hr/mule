{
  List remaining=new LinkedList(Arrays.asList(services));
  while (remaining.size() > 0) {
    MuleClient client=new MuleClient(muleContext);
    MuleMessage response=client.request(prefix + index,TIMEOUT);
    assertNotNull(response);
    assertNotNull(response.getPayload());
    assertTrue(response.getPayload().getClass().getName(),response.getPayload() instanceof Document);
    Document document=(Document)response.getPayload();
    assertEquals("service",document.getRootElement().getName());
    Element element=document.getRootElement();
    String name=element.attributeValue(NAME);
    assertTrue(name,remaining.contains(name));
    int size=remaining.size();
    remaining.remove(name);
    assertEquals(size,remaining.size() + 1);
  }
}
