{
  Map<String,Object> props=new HashMap<String,Object>();
  props.put(HttpConnector.HTTP_METHOD_PROPERTY,"GET");
  MuleClient client=new MuleClient(muleContext);
  MuleMessage result=client.send("http://ross:ross@localhost:" + HTTP_PORT + "/services/mycomponent?method=echo","test",props);
  String status=result.getProperty(HttpConnector.HTTP_STATUS_PROPERTY,PropertyScope.INBOUND);
  assertEquals(401,new Integer(status).intValue());
  MessagingExceptionHandler exceptionListener=muleContext.getRegistry().lookupService("mycomponent").getExceptionListener();
  assertTrue(exceptionListener instanceof UnitTestExceptionStrategy);
  UnitTestExceptionStrategy utExStrat=(UnitTestExceptionStrategy)exceptionListener;
  assertEquals(1,utExStrat.getMessagingExceptions().size());
  assertNotNull(result);
}
