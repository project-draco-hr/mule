{
  final List<ArtifactPluginDescriptor> pluginDescriptors=createPluginDescriptors(fooPlugin);
  fooPlugin.setPluginDependencies(singleton("bar"));
  expectedException.expect(PluginResolutionError.class);
  expectedException.expectMessage(createResolutionErrorMessage(singletonList(fooPlugin),emptyList()));
  dependenciesResolver.resolve(pluginDescriptors);
}
