{
  final long startTime=System.currentTimeMillis();
  final ProcessingTime time=event.getProcessingTime();
  MuleEvent responseEvent=event;
  final ReplyToHandler originalReplyToHandler=event.getReplyToHandler();
  responseEvent=new DefaultMuleEvent(event,new ResponseReplyToHandler(originalReplyToHandler,time,startTime));
  setCurrentEvent(responseEvent);
  try {
    responseEvent=processNext(processRequest(responseEvent));
    if (!(responseEvent instanceof NonBlockingVoidMuleEvent)) {
      responseEvent=processResponse(responseEvent,event);
    }
  }
 catch (  Exception exception) {
    last(responseEvent,time,startTime,true);
    throw exception;
  }
  return responseEvent;
}
