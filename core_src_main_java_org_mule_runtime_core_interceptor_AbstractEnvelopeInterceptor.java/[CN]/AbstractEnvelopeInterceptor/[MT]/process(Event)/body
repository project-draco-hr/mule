{
  long startTime=System.currentTimeMillis();
  ProcessingTime time=((CoreEventContext)event.getContext()).getProcessingTime();
  boolean exceptionWasThrown=true;
  Event resultEvent=event;
  try {
    resultEvent=after(processNext(before(resultEvent)));
    exceptionWasThrown=false;
  }
  finally {
    resultEvent=last(resultEvent,time,startTime,exceptionWasThrown);
  }
  return resultEvent;
}
