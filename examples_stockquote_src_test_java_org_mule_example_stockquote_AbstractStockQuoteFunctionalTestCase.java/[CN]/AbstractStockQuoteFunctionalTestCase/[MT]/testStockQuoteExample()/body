{
  MuleClient client=new MuleClient();
  MuleMessage response=client.send("vm://stockquote","CSCO",null);
  if (null == response) {
    fail("No response message.");
  }
 else {
    if (null == response.getExceptionPayload()) {
      String text=response.getPayloadAsString();
      assertNotNull("Null response",text);
      assertTrue("Stock quote should contain \"Cisco\": " + text,StringUtils.contains(text,"Cisco"));
      if (Locale.getDefault().getISO3Language().equalsIgnoreCase("eng")) {
        assertTrue("Stock quote should start with \"StockQuote[\":" + text,text.startsWith("StockQuote["));
      }
      logger.debug("**********");
      logger.debug(response.getPayload());
      logger.debug(response.getPayloadAsString());
      logger.debug("**********");
    }
 else {
      fail("Exception occurred: " + response.getExceptionPayload());
    }
  }
}
