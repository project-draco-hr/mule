{
  return new AbstractRequestResponseMessageProcessor(){
    private Object propertyValue;
    @Override protected Event processRequest(    Event event) throws MuleException {
      propertyValue=getFlowVariableOrNull(propertyName,event);
      event=Event.builder(event).removeVariable(propertyName).build();
      return super.processRequest(event);
    }
    @Override protected Event processResponse(    Event response,    final Event request) throws MuleException {
      if (propertyValue != null) {
        response=Event.builder(response).addVariable(propertyName,propertyValue).build();
      }
      return super.processResponse(response,request);
    }
  }
;
}
