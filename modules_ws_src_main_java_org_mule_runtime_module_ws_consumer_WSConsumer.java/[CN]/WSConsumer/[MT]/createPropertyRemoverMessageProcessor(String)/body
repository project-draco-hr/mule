{
  return new AbstractRequestResponseMessageProcessor(){
    private Object propertyValue;
    @Override protected MuleEvent processRequest(    MuleEvent event) throws MuleException {
      propertyValue=getFlowVariableOrNull(propertyName,event);
      event=MuleEvent.builder(event).removeFlowVariable(propertyName).build();
      return super.processRequest(event);
    }
    @Override protected MuleEvent processResponse(    MuleEvent response,    final MuleEvent request) throws MuleException {
      if (propertyValue != null) {
        response=MuleEvent.builder(response).addFlowVariable(propertyName,propertyValue).build();
      }
      return super.processResponse(response,request);
    }
  }
;
}
