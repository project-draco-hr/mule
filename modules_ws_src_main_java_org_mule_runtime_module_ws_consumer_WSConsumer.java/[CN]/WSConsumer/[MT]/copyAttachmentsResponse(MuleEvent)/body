{
  MuleMessage message=event.getMessage();
  if (event.getFlowVariable(CxfConstants.ATTACHMENTS) != null) {
    Collection<Attachment> attachments=event.getFlowVariable(CxfConstants.ATTACHMENTS);
    for (    Attachment attachment : attachments) {
      try {
        ((DefaultMuleMessage)message).addInboundAttachment(attachment.getId(),attachment.getDataHandler());
      }
 catch (      Exception e) {
        throw new MessagingException(CoreMessages.createStaticMessage("Could not set inbound attachment %s",attachment.getId()),event,e,this);
      }
    }
  }
}
