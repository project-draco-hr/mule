{
  final Collection<String> payload=new ArrayList<String>();
  payload.add("julio");
  payload.add("sosa");
  MuleMessage result=client.send("vm://input-1",payload,null);
  assertTrue(result.getPayload() instanceof Collection);
  Collection<?> resultPayload=(Collection<?>)result.getPayload();
  assertEquals(2,resultPayload.size());
  assertSame(payload,resultPayload);
  MuleMessage out=client.request("vm://out",getTestTimeoutSecs());
  assertTrue(out.getPayload() instanceof String);
  assertEquals("julio",out.getPayload());
  out=client.request("vm://out",getTestTimeoutSecs());
  assertTrue(out.getPayload() instanceof String);
  assertEquals("sosa",out.getPayload());
}
