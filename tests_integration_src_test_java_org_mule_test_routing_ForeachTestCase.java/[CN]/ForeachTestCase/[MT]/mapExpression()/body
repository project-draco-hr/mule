{
  final Collection<String> names=new ArrayList<String>();
  names.add("Sergei");
  names.add("Vasilievich");
  names.add("Rachmaninoff");
  Map<String,Object> props=new HashMap<String,Object>();
  props.put("names",names);
  MuleMessage message=new DefaultMuleMessage("message payload",props,muleContext);
  MuleMessage result=flowRunner("map-expression-config").withPayload("message payload").withInboundProperties(props).run().getMessage();
  assertThat(result.getPayload(),instanceOf(String.class));
  assertThat(((Collection<?>)message.getOutboundProperty("names")),hasSize(names.size()));
  assertThat(result.getOutboundProperty("totalMessages"),is(names.size()));
}
