{
  final Map<String,String> payload=new HashMap<>();
  payload.put("name","david");
  payload.put("surname","bowie");
  InternalMessage result=flowRunner("map-config").withPayload(payload).run().getMessage();
  assertThat(result.getPayload().getValue(),instanceOf(Map.class));
  Map<?,?> resultPayload=(Map<?,?>)result.getPayload().getValue();
  assertThat(resultPayload.entrySet(),hasSize(payload.size()));
  assertThat(result.getOutboundProperty("totalMessages"),is(payload.size()));
  assertSame(payload,resultPayload);
}
