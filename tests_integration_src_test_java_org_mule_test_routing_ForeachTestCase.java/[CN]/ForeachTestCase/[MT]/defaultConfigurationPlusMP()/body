{
  final Collection<String> payload=new ArrayList<>();
  payload.add("syd");
  payload.add("barrett");
  MuleMessage result=flowRunner("minimal-config-plus-mp").withPayload(payload).run().getMessage();
  assertThat(result.getPayload(),instanceOf(Collection.class));
  Collection<?> resultPayload=(Collection<?>)result.getPayload();
  assertThat(resultPayload,hasSize(3));
  assertSame(payload,resultPayload);
  MuleMessage out=client.request("test://out",getTestTimeoutSecs());
  assertThat(out.getPayload(),instanceOf(String.class));
  assertThat(out.getPayload(),is("syd"));
  out=client.request("test://out",getTestTimeoutSecs());
  assertThat(out.getPayload(),instanceOf(String.class));
  assertThat(out.getPayload(),is("barrett"));
}
