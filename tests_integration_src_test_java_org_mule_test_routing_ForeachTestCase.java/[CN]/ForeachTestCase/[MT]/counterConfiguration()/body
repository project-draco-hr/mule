{
  final Collection<String> payload=new ArrayList<String>();
  payload.add("wolfgang");
  payload.add("amadeus");
  payload.add("mozart");
  MuleMessage parent=new DefaultMuleMessage(payload,muleContext);
  MuleMessage result=client.send("vm://input-6",parent);
  assertTrue(result.getPayload() instanceof Collection);
  Collection<?> resultPayload=(Collection<?>)result.getPayload();
  assertEquals(3,resultPayload.size());
  assertSame(payload,resultPayload);
  assertEquals(result.getInboundProperty("msg-last-index"),3);
}
