{
  if (securityManager == null) {
    securityManager=managementContext.getSecurityManager();
  }
  if (securityManager == null) {
    throw new InitialisationException(CoreMessages.authSecurityManagerNotSet(),this);
  }
  if (endpoint == null) {
    throw new InitialisationException(CoreMessages.objectIsNull("Endpoint"),this);
  }
  if (securityProviders != null) {
    UMOSecurityManager localManager=new MuleSecurityManager();
    String[] sp=StringUtils.splitAndTrim(securityProviders,",");
    for (int i=0; i < sp.length; i++) {
      UMOSecurityProvider provider=securityManager.getProvider(sp[i]);
      if (provider != null) {
        localManager.addProvider(provider);
      }
 else {
        throw new InitialisationException(CoreMessages.objectNotRegisteredWithManager("Security Provider '" + sp[i] + "'"),this);
      }
    }
    securityManager=localManager;
  }
  if (endpoint.getType().equals(UMOEndpoint.ENDPOINT_TYPE_RECEIVER)) {
    inbound=true;
  }
 else   if (endpoint.getType().equals(UMOEndpoint.ENDPOINT_TYPE_SENDER)) {
    inbound=false;
  }
 else {
    throw new InitialisationException(CoreMessages.authEndpointTypeForFilterMustBe(UMOEndpoint.ENDPOINT_TYPE_SENDER + " or " + UMOEndpoint.ENDPOINT_TYPE_RECEIVER,endpoint.getType()),this);
  }
  doInitialise();
}
