{
  if (ENDPOINT_TYPE_RECEIVER.equals(type)) {
    logger.debug("Endpont type is \"receiver\", building inbound endpoint");
    return muleContext.getRegistry().lookupEndpointFactory().getInboundEndpoint(this);
  }
 else   if (ENDPOINT_TYPE_SENDER.equals(type)) {
    logger.debug("Endpont type is \"sender\", building inbound endpoint");
    return muleContext.getRegistry().lookupEndpointFactory().getOutboundEndpoint(this);
  }
 else {
    throw new IllegalArgumentException("The endpoint type: " + type + "is not recognized.");
  }
}
