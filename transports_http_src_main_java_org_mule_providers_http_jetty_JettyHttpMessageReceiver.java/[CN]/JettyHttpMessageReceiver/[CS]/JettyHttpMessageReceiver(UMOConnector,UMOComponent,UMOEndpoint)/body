{
  super(connector,component,endpoint);
  if ("rest".equals(endpoint.getEndpointURI().getScheme())) {
    ServletConnector scon=(ServletConnector)RegistryContext.getRegistry().lookupConnector(JETTY_SERVLET_CONNECTOR_NAME);
    if (scon != null) {
      throw new InitialisationException(HttpMessages.noServletConnectorFound(JETTY_SERVLET_CONNECTOR_NAME),this);
    }
    scon=new ServletConnector();
    scon.setName(JETTY_SERVLET_CONNECTOR_NAME);
    scon.setServletUrl(endpoint.getEndpointURI().getAddress());
    try {
      RegistryContext.getRegistry().registerConnector(scon);
      String path=endpoint.getEndpointURI().getPath();
      if (StringUtils.isEmpty(path)) {
        path="/";
      }
      UMOEndpoint ep=new MuleEndpoint("servlet://" + path.substring(1),true);
      ep.setTransformer(endpoint.getTransformer());
      scon.registerListener(component,ep);
    }
 catch (    Exception e) {
      throw new InitialisationException(e,this);
    }
  }
}
