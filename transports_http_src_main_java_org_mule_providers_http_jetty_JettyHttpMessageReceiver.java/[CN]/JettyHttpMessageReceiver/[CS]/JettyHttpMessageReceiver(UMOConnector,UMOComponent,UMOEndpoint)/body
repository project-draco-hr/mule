{
  super(connector,component,endpoint);
  if ("rest".equals(endpoint.getEndpointURI().getScheme())) {
    try {
      ServletConnector scon=(ServletConnector)MuleManager.getRegistry().lookupConnector(JETTY_SERVLET_CONNECTOR_NAME);
      if (scon != null) {
        throw new InitialisationException(new Message("http",10),this);
      }
      scon=new ServletConnector();
      scon.setName(JETTY_SERVLET_CONNECTOR_NAME);
      scon.setServletUrl(endpoint.getEndpointURI().getAddress());
      MuleManager.getRegistry().registerConnector(scon);
      String path=endpoint.getEndpointURI().getPath();
      if (StringUtils.isEmpty(path)) {
        path="/";
      }
      UMOEndpoint ep=new MuleEndpoint("servlet://" + path.substring(1),true);
      scon.registerListener(component,ep);
    }
 catch (    Exception e) {
      throw new InitialisationException(e,this);
    }
  }
}
