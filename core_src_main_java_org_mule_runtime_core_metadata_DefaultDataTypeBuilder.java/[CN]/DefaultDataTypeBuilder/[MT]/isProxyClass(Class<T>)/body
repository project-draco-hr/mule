{
  String typeName=type.getName();
  ProxyIndicator indicator=proxyClassCache.get(typeName);
  if (indicator != null) {
    Class classInMap=indicator.getTargetClass();
    if (classInMap == type) {
      return indicator.isProxy();
    }
 else     if (classInMap != null) {
      return Proxy.isProxyClass(type);
    }
  }
  boolean isProxy=Proxy.isProxyClass(type);
  proxyClassCache.put(typeName,new ProxyIndicator(type,isProxy));
  return isProxy;
}
