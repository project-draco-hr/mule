{
  Query query=createSelectQuery(STATIC_SQL_TEXT,new Object[]{"foo"});
  QueryParamResolver queryParamResolver=mock(QueryParamResolver.class);
  QueryResolver queryResolver=new ParametrizedQueryResolver(query,queryParamResolver);
  List<QueryParamValue> resolvedParams=Collections.singletonList(new QueryParamValue("param1","foo"));
  when(queryParamResolver.resolveParams(muleEvent,query.getParamValues())).thenReturn(resolvedParams);
  Query resolvedQuery=queryResolver.resolve(muleEvent);
  assertThat(query,not(sameInstance(resolvedQuery)));
  assertThat(query.getQueryTemplate(),sameInstance(resolvedQuery.getQueryTemplate()));
  assertThat(resolvedParams,sameInstance(resolvedQuery.getParamValues()));
  assertThat((String)resolvedParams.get(0).getValue(),equalTo("foo"));
}
