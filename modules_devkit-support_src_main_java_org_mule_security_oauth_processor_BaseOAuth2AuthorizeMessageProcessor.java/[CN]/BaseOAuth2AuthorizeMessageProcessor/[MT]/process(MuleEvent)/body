{
  try {
    OAuth2Manager<OAuth2Adapter> moduleObject=this.getOAuthManager();
    String transformedAuthorizationUrl=this.toString(event,this.getAuthorizationUrl());
    String transformedAccessTokenUrl=this.toString(event,this.getAccessTokenUrl());
    moduleObject.getDefaultUnauthorizedConnector().setAccessTokenUrl(transformedAccessTokenUrl);
    String location=moduleObject.buildAuthorizeUrl(this.getExtraParameters(event,moduleObject),transformedAuthorizationUrl,this.getOauthCallback().getUrl());
    event.getMessage().setOutboundProperty("http.status","302");
    event.getMessage().setOutboundProperty("Location",location);
    return event;
  }
 catch (  Exception e) {
    throw new MessagingException(CoreMessages.failedToInvoke("authorize"),event,e);
  }
}
