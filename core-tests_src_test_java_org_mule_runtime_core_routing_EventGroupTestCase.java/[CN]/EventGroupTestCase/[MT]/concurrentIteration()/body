{
  EventGroup eg=new EventGroup(UUID.getUUID(),muleContext);
  eg.initEventsStore(objectStore);
  assertFalse(eg.iterator().hasNext());
  eg.addEvent(eventBuilder().message(InternalMessage.of("foo1")).build());
  eg.addEvent(eventBuilder().message(InternalMessage.of("foo2")).build());
  assertTrue(eg.iterator().hasNext());
  Iterator<Event> i=eg.iterator();
  assertNotNull(i.next());
  eg.addEvent(eventBuilder().message(InternalMessage.of("foo3")).build());
  assertNotNull(i.next());
  eg.addEvent(eventBuilder().message(InternalMessage.of("foo4")).build());
  assertFalse(i.hasNext());
  assertEquals(4,eg.size());
}
