{
  muleContext=mock(MuleContext.class,RETURNS_DEEP_STUBS);
  when(muleContext.getConfiguration().getId()).thenReturn("myApp");
  tx=new DbTransaction(muleContext);
  connection=mock(Connection.class);
  when(connection.getAutoCommit()).thenReturn(false);
  tx.bindResource(mock(DataSource.class),connection);
}
