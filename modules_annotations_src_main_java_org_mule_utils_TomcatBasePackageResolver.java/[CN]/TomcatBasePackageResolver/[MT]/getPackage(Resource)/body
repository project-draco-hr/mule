{
  if (this.basePackage != null)   return this.basePackage;
  basePackage=super.getPackage(resource);
  if (resource.getFilename().startsWith(basePackage)) {
    return basePackage;
  }
 else {
    String catalinaHome=System.getProperty("catalina.home");
    if (catalinaHome.endsWith("/target/tomcat")) {
      basePackage=catalinaHome.substring(0,catalinaHome.lastIndexOf("tomcat")) + "classes/";
    }
 else {
      throw new IllegalStateException("Cannot find base scanning package for annotations");
    }
  }
  return basePackage;
}
