{
  UMOManager manager=MuleManager.getInstance();
  Object impl=descriptor.getImplementation();
  Object component=null;
  if (impl instanceof ContainerKeyPair) {
    component=manager.getContainerContext().getComponent(impl);
    if (descriptor.isSingleton()) {
      descriptor.setImplementation(component);
    }
  }
 else {
    component=impl;
  }
  try {
    BeanUtils.populate(component,descriptor.getProperties());
  }
 catch (  Exception e) {
    throw new InitialisationException(new Message(Messages.FAILED_TO_SET_PROPERTIES_ON_X,"Component '" + descriptor.getName() + "'"),e,descriptor);
  }
  descriptor.fireInitialisationCallbacks(component);
  return component;
}
