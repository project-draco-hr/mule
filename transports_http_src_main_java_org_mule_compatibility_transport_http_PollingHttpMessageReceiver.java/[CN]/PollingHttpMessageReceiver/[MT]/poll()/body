{
  MuleContext muleContext=getEndpoint().getMuleContext();
  if (outboundEndpoint == null) {
    EndpointBuilder endpointBuilder=new EndpointURIEndpointBuilder(endpoint);
    endpointBuilder.setMessageProcessors(emptyList());
    endpointBuilder.setResponseMessageProcessors(emptyList());
    endpointBuilder.setMessageProcessors(emptyList());
    endpointBuilder.setResponseMessageProcessors(emptyList());
    endpointBuilder.setExchangePattern(REQUEST_RESPONSE);
    outboundEndpoint=getEndpointFactory(muleContext).getOutboundEndpoint(endpointBuilder);
  }
  MutableMuleMessage request=new DefaultMuleMessage(StringUtils.EMPTY,outboundEndpoint.getProperties(),muleContext);
  if (etag != null && checkEtag) {
    request.setOutboundProperty(HEADER_IF_NONE_MATCH,etag);
  }
  request.setOutboundProperty(HTTP_METHOD_PROPERTY,"GET");
  MuleEvent event=new DefaultMuleEvent(request,outboundEndpoint.getExchangePattern(),flowConstruct);
  MuleEvent result=outboundEndpoint.process(event);
  MutableMuleMessage message=null;
  if (result != null && !VoidMuleEvent.getInstance().equals(result)) {
    message=(MutableMuleMessage)result.getMessage();
  }
  final int contentLength=message.getOutboundProperty(HEADER_CONTENT_LENGTH,-1);
  if (contentLength == 0 && discardEmptyContent) {
    if (logger.isDebugEnabled()) {
      logger.debug("Received empty message and ignoring from: " + endpoint.getEndpointURI());
    }
    return;
  }
  int status=message.getOutboundProperty(HTTP_STATUS_PROPERTY,0);
  etag=message.getOutboundProperty(HEADER_ETAG);
  if ((status != SC_NOT_MODIFIED || !checkEtag)) {
    routeMessage(message);
  }
}
