{
  ConnectionValidationResult validationResult=failure("oops",UNKNOWN,new Exception());
  when(testeableConnectionProvider.validate(connection)).thenReturn(validationResult);
  ConnectionValidationResult result=connectionManager.testConnectivity(testeableConnectionProvider);
  assertThat(result,is(sameInstance(validationResult)));
  verify(testeableConnectionProvider).connect();
  verify(testeableConnectionProvider).validate(connection);
  verify(testeableConnectionProvider).disconnect(connection);
}
