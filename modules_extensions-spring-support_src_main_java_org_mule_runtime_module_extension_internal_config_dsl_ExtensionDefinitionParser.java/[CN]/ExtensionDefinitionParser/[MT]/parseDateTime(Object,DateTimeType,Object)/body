{
  Class<?> type=getType(dataType);
  if (isExpression(value,parser)) {
    return new TypeSafeExpressionValueResolver((String)value,type);
  }
  if (type.equals(LocalDateTime.class)) {
    Date date=doParseDate(value,DATE_FORMAT,defaultValue);
    return new StaticValueResolver(LocalDateTime.ofInstant(date.toInstant(),ZoneId.systemDefault()));
  }
 else {
    Date date=doParseDate(value,CALENDAR_FORMAT,defaultValue);
    Calendar calendar=Calendar.getInstance();
    calendar.setTime(date);
    return new StaticValueResolver(calendar);
  }
}
