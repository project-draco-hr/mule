{
  if (value == null) {
    if (defaultValue == null) {
      return null;
    }
    value=defaultValue;
  }
  if (value instanceof String) {
    SimpleDateFormat format=new SimpleDateFormat(parseFormat);
    try {
      return format.parse((String)value);
    }
 catch (    ParseException e) {
      throw new IllegalArgumentException(format("Could not transform value '%s' into a Date using pattern '%s'",value,parseFormat));
    }
  }
  if (value instanceof Date) {
    return (Date)value;
  }
  throw new IllegalArgumentException(format("Could not transform value of type '%s' to Date",value != null ? value.getClass().getName() : "null"));
}
