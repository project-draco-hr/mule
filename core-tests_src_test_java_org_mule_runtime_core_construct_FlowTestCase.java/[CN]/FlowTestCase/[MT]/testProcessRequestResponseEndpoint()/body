{
  flow.initialise();
  flow.start();
  Event response=directInboundMessageSource.process(testEvent);
  assertEquals(TEST_PAYLOAD + "abcdef",response.getMessageAsString(muleContext));
  assertEquals(Thread.currentThread(),response.getVariable("thread").getValue());
  assertEquals(TEST_PAYLOAD + "abc",sensingMessageProcessor.event.getMessageAsString(muleContext));
  assertEquals(Thread.currentThread(),sensingMessageProcessor.event.getVariable("thread").getValue());
}
