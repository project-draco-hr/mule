{
  final Properties p=new Properties();
  p.load(new FileInputStream(descriptor));
  ApplicationDescriptor d=new ApplicationDescriptor();
  d.setEncoding(p.getProperty(PROPERTY_ENCODING));
  d.setConfigurationBuilder(p.getProperty(PROPERTY_CONFIG_BUILDER));
  d.setDomain(p.getProperty(PROPERTY_DOMAIN));
  d.setPackagesToScan(p.getProperty(PROPERTY_SCAN_PACKAGES));
  final String resProps=p.getProperty(PROPERTY_CONFIG_RESOURCES);
  String[] urls;
  if (StringUtils.isBlank(resProps)) {
    urls=new String[]{ApplicationDescriptor.DEFAULT_CONFIGURATION_RESOURCE};
  }
 else {
    urls=resProps.split(",");
  }
  d.setConfigResources(urls);
  d.setRedeploymentEnabled(BooleanUtils.toBoolean(p.getProperty(PROPERTY_REDEPLOYMENT_ENABLED,Boolean.TRUE.toString())));
  d.setPrivileged(BooleanUtils.toBoolean(p.getProperty(PROPERTY_PRIVILEGED,p.getProperty(PROPERTY_LEGACY_PRIVILEGED,Boolean.FALSE.toString()))));
  final String overrideString=p.getProperty(PROPERTY_LOADER_OVERRIDE);
  if (StringUtils.isNotBlank(overrideString)) {
    Set<String> values=new HashSet<String>();
    final String[] overrides=overrideString.split(",");
    Collections.addAll(values,overrides);
    d.setLoaderOverride(values);
  }
  return d;
}
