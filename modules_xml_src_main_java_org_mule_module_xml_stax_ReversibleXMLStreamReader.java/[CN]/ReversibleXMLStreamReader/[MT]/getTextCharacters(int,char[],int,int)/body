{
  if (mode == MODE_REPLAY) {
    char[] src=getText().toCharArray();
    if (sourceStart + length >= src.length) {
      length=src.length - sourceStart;
    }
    for (int i=0; i < length; i++) {
      target[targetStart + i]=src[i + sourceStart];
    }
    return length;
  }
 else {
    return super.getTextCharacters(sourceStart,target,targetStart,length);
  }
}
