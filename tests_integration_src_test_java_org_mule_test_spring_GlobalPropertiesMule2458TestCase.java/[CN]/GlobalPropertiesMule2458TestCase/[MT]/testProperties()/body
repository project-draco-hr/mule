{
  Object service=muleContext.getRegistry().lookupObject("service");
  assertNotNull(service);
  ImmutableEndpoint ep;
  if (variant.equals(ConfigVariant.FLOW)) {
    ep=(ImmutableEndpoint)((Flow)service).getMessageSource();
  }
 else {
    ep=((ServiceCompositeMessageSource)((Service)service).getMessageSource()).getEndpoints().get(0);
  }
  assertNotNull(ep);
  assertEquals("local",ep.getProperties().get("local"));
  assertEquals("global",ep.getProperties().get("global"));
  assertEquals("local",ep.getProperties().get("override-me"));
  assertEquals(3,ep.getProperties().size());
}
