{
  InboundEndpoint endpoint=createTestInboundEndpoint(null,null);
  MessageProcessor mp=new InboundExceptionDetailsMessageProcessor(endpoint.getConnector());
  MuleEvent event=createTestInboundEvent(endpoint,true);
  event.getMessage().setExceptionPayload(new DefaultExceptionPayload(new RuntimeException()));
  MuleEvent result=mp.process(event);
  assertNotNull(result);
  assertEquals(500,result.getMessage().getIntProperty("status",0));
}
