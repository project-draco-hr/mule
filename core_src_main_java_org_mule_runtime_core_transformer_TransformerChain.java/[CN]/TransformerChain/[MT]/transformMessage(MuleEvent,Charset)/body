{
  MuleMessage result=event.getMessage();
  Object temp=event.getMessage();
  Transformer lastTransformer=null;
  for (  Object element : transformers) {
    lastTransformer=(Transformer)element;
    temp=lastTransformer.transform(temp);
    if (temp instanceof MuleMessage) {
      result=(MuleMessage)temp;
    }
 else {
      result=MuleMessage.builder(event.getMessage()).payload(temp).build();
      event=MuleEvent.builder(event).message(result).build();
    }
  }
  if (lastTransformer != null && MuleMessage.class.isAssignableFrom(lastTransformer.getReturnDataType().getType())) {
    return result;
  }
 else {
    return result.getPayload();
  }
}
