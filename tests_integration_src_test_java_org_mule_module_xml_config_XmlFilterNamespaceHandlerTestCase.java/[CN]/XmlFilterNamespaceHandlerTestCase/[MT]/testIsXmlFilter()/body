{
  Object serviceFlow=null;
  serviceFlow=muleContext.getRegistry().lookupObject("test for xml");
  if (serviceFlow instanceof Service) {
    List routers=((OutboundRouterCollection)((Service)serviceFlow).getOutboundMessageProcessor()).getRoutes();
    assertEquals(2,routers.size());
    assertTrue(routers.get(0).getClass().getName(),routers.get(0) instanceof FilteringOutboundRouter);
    assertTrue(((FilteringOutboundRouter)routers.get(0)).getFilter() instanceof IsXmlFilter);
    assertTrue(routers.get(1).getClass().getName(),routers.get(1) instanceof FilteringOutboundRouter);
    assertTrue(((FilteringOutboundRouter)routers.get(1)).getFilter() instanceof NotFilter);
    assertTrue(((NotFilter)((FilteringOutboundRouter)routers.get(1)).getFilter()).getFilter() instanceof IsXmlFilter);
  }
 else   if (serviceFlow instanceof Flow) {
    List outEndpoints=new ArrayList(2);
    outEndpoints.add(((Flow)serviceFlow).getMessageProcessors().get(0));
    outEndpoints.add(((Flow)serviceFlow).getMessageProcessors().get(2));
    assertEquals(2,outEndpoints.size());
    assertTrue(outEndpoints.get(0).getClass().getName(),outEndpoints.get(0) instanceof MessageFilter);
    assertTrue(((MessageFilter)outEndpoints.get(0)).getFilter() instanceof IsXmlFilter);
    assertTrue(outEndpoints.get(1).getClass().getName(),outEndpoints.get(1) instanceof MessageFilter);
    assertTrue(((MessageFilter)outEndpoints.get(1)).getFilter() instanceof NotFilter);
    assertTrue(((NotFilter)((MessageFilter)outEndpoints.get(1)).getFilter()).getFilter() instanceof IsXmlFilter);
  }
 else {
    fail("Unexpected Object");
  }
}
