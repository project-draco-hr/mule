{
  MuleMessage request=new DefaultMuleMessage(requestPayload,(Map<String,Serializable>)null);
  MuleClient client=muleContext.getClient();
  latch=new CountDownLatch(1);
  registerExceptionNotificationListener();
  MuleMessage response=client.send("http://localhost:" + dynamicPort.getNumber() + "/testServiceWithException",request,HTTP_REQUEST_OPTIONS);
  assertNotNull(response);
  assertTrue(getPayloadAsString(response).contains("<faultstring>"));
  assertEquals(String.valueOf(INTERNAL_SERVER_ERROR.getStatusCode()),response.getInboundProperty(HTTP_STATUS_PROPERTY).toString());
  assertTrue(latch.await(3000,TimeUnit.MILLISECONDS));
}
