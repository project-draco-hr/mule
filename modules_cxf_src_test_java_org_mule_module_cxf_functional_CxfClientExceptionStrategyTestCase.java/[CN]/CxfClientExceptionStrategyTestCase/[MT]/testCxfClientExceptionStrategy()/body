{
  MuleMessage request=new DefaultMuleMessage("hello",(Map<String,Object>)null,muleContext);
  MuleClient client=new MuleClient(muleContext);
  client.dispatch("vm://helloClient",request);
  MuleMessage out=client.request("vm://out",org.mule.tck.FunctionalTestCase.RECEIVE_TIMEOUT);
  assertNotNull(out);
  assertTrue(out.getPayload() instanceof ExceptionMessage);
  assertTrue(((String)((ExceptionMessage)out.getPayload()).getPayload()).contains("APPEND"));
}
