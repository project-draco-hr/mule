{
  ProcessingStrategy processingStrategy=mock(ProcessingStrategy.class);
  ProcessingStrategyFactory processingStrategyFactory=mock(ProcessingStrategyFactory.class);
  when(processingStrategyFactory.create(any(MuleContext.class))).thenReturn(processingStrategy);
  createFlow();
  flow.setProcessingStrategyFactory(processingStrategyFactory);
  flow.initialise();
  assertThat(flow.getProcessingStrategy(),is(sameInstance(processingStrategy)));
}
