{
  CopyPropertiesTransformer copyPropertiesTransformer=createCopyPropertiesTransformer("MULE_*");
  when(mockMuleMessage.getInboundPropertyNames()).thenReturn(new HashSet<>(Arrays.asList("MULE_ID","MULE_CORRELATION_ID","SomeVar","MULE_GROUP_ID")));
  when(mockMuleMessage.getInboundProperty("MULE_ID")).thenReturn(PROPERTY_VALUE);
  when(mockMuleMessage.getInboundProperty("MULE_CORRELATION_ID")).thenReturn(PROPERTY_VALUE);
  when(mockMuleMessage.getInboundProperty("MULE_GROUP_ID")).thenReturn(PROPERTY_VALUE);
  when(mockMuleMessage.getInboundProperty("SomeVar")).thenReturn(PROPERTY_VALUE);
  when(mockMuleMessage.getPropertyDataType(anyString(),Matchers.<PropertyScope>anyObject())).thenReturn(PROPERTY_DATA_TYPE);
  copyPropertiesTransformer.transform(mockMuleMessage,ENCODING);
  verify(mockMuleMessage,times(0)).setOutboundProperty("SomeVar",PROPERTY_VALUE,PROPERTY_DATA_TYPE);
  verify(mockMuleMessage).setOutboundProperty("MULE_ID",PROPERTY_VALUE,PROPERTY_DATA_TYPE);
  verify(mockMuleMessage).setOutboundProperty("MULE_CORRELATION_ID",PROPERTY_VALUE,PROPERTY_DATA_TYPE);
  verify(mockMuleMessage).setOutboundProperty("MULE_GROUP_ID",PROPERTY_VALUE,PROPERTY_DATA_TYPE);
}
