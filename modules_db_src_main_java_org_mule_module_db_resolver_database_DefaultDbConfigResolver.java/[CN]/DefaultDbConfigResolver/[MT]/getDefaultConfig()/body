{
  Collection<DbConfig> dbConfigs=registry.lookupObjects(DbConfig.class);
  if (dbConfigs.size() == 0) {
    throw new UnresolvableDbConfigException("There is no database config defined");
  }
  if (dbConfigs.size() > 1) {
    StringBuilder stringBuilder=new StringBuilder();
    for (    DbConfig dbConfig : dbConfigs) {
      if (stringBuilder.length() != 0) {
        stringBuilder.append(", ");
      }
      stringBuilder.append(dbConfig.getName());
    }
    throw new UnresolvableDbConfigException("Database config must be explicitly defined using 'config-ref' attribute there are multiple database configs defined: " + stringBuilder);
  }
  return dbConfigs.iterator().next();
}
