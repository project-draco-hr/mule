{
  ClientPasswordCallback.setPassword("secret");
  MuleMessage request=new DefaultMuleMessage("UnknownPasswordEncoding",(Map<String,Object>)null,muleContext);
  MuleClient client=muleContext.getClient();
  MuleMessage received=client.send("vm://greetMe",request);
  assertNotNull(received);
  assertNotNull(received.getExceptionPayload());
  assertTrue(received.getExceptionPayload().getException().getCause() instanceof SOAPFaultException);
  assertTrue(((SOAPFaultException)received.getExceptionPayload().getException().getCause()).getMessage().contains("Security processing failed"));
}
