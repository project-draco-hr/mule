{
  if (muleContext != null && muleContext.getConfiguration().getDefaultEncoding() != null) {
    return Charset.forName(muleContext.getConfiguration().getDefaultEncoding());
  }
 else   if (System.getProperty(MULE_ENCODING_SYSTEM_PROPERTY) != null) {
    return Charset.forName(System.getProperty(MULE_ENCODING_SYSTEM_PROPERTY));
  }
 else {
    return Charset.defaultCharset();
  }
}
