{
  Stack<Path> fragments=new Stack<>();
  for (int i=directoryPath.getNameCount(); i >= 0; i--) {
    Path subPath=Paths.get("/").resolve(directoryPath.subpath(0,i));
    if (exists(config,subPath)) {
      break;
    }
    fragments.push(subPath);
  }
  while (!fragments.isEmpty()) {
    Path fragment=fragments.pop();
    client.mkdir(fragment.toString());
  }
}
