{
  Map props=new HashMap();
  props.put(HttpConnector.HTTP_METHOD_PROPERTY,"GET");
  MuleClient client=new MuleClient();
  UMOMessage result=client.send("http://localhost:" + HTTP_PORT + "/services/mycomponent?wsdl",null,props);
  assertNotNull(result);
  if (logger.isDebugEnabled()) {
    logger.debug(result.getPayloadAsString());
  }
  String location="http://localhost:" + HTTP_PORT + "/services/mycomponent?wsdl";
  location=location.substring(0,location.length() - 5);
  assertTrue(result.getStringProperty(HttpConstants.HEADER_CONTENT_TYPE,"").startsWith("text/xml"));
  if (logger.isDebugEnabled()) {
    logger.debug(result.getPayloadAsString());
  }
  Document document=DocumentHelper.parseText(result.getPayloadAsString());
  List nodes;
  nodes=document.selectNodes("//wsdl:definitions/wsdl:service");
  assertEquals(((Element)nodes.get(0)).attribute("name").getStringValue(),"mycomponent");
}
