{
  List<MuleEvent> eventList=new ArrayList<>();
  Iterator<MuleEvent> iter=null;
  FlowConstruct fc=null;
  MessageContext executionContext=null;
  try {
    iter=events.iterator(true);
  }
 catch (  ObjectStoreException e) {
    throw new AggregationException(events,null,e);
  }
  while (iter.hasNext()) {
    MuleEvent event=iter.next();
    eventList.add(event);
    executionContext=event.getContext();
    fc=event.getFlowConstruct();
  }
  return MuleEvent.builder(executionContext).message(MuleMessage.builder().payload(eventList).build()).exchangePattern(ONE_WAY).flow(fc).build();
}
