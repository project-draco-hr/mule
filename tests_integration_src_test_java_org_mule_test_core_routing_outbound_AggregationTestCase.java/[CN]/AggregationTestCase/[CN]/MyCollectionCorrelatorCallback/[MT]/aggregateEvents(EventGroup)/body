{
  List<Event> eventList=new ArrayList<>();
  Iterator<Event> iter=null;
  FlowConstruct fc=null;
  EventContext executionContext=null;
  try {
    iter=events.iterator(true);
  }
 catch (  ObjectStoreException e) {
    throw new AggregationException(events,null,e);
  }
  while (iter.hasNext()) {
    Event event=iter.next();
    eventList.add(event);
    executionContext=event.getContext();
    fc=event.getFlowConstruct();
  }
  return Event.builder(executionContext).message(InternalMessage.builder().payload(eventList).build()).exchangePattern(ONE_WAY).flow(fc).build();
}
