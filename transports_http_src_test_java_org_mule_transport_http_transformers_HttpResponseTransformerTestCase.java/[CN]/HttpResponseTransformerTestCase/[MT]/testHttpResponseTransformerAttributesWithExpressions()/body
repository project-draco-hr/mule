{
  HttpResponseTransformer httpResponseTransformer=createHttpResponseTransformer();
  Map<String,Object> properties=new HashMap<String,Object>();
  properties.put("version",HttpConstants.HTTP10);
  properties.put("status",HttpConstants.SC_INTERNAL_SERVER_ERROR);
  properties.put("contentType","text/html");
  DefaultMuleMessage muleMessage=new DefaultMuleMessage(HTTP_BODY,properties,muleContext);
  httpResponseTransformer.setVersion("#[header:version]");
  httpResponseTransformer.setStatus("#[header:status]");
  httpResponseTransformer.setContentType("#[header:contentType]");
  HttpResponse httpResponse=(HttpResponse)httpResponseTransformer.transformMessage(muleMessage,"UTF-8");
  assertEquals(HTTP_BODY,httpResponse.getBodyAsString());
  assertEquals(HttpConstants.HTTP10,httpResponse.getHttpVersion().toString());
  assertEquals(HttpConstants.SC_INTERNAL_SERVER_ERROR,httpResponse.getStatusCode());
  validateHeader(httpResponse.getHeaders(),"Content-Type","text/html");
}
