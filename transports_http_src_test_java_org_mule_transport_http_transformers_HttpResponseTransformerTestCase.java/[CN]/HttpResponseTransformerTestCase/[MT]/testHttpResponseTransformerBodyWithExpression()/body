{
  HttpResponseTransformer httpResponseTransformer=createHttpResponseTransformer();
  httpResponseTransformer.setBody(HTTP_BODY_WITH_EXPRESSION);
  DefaultMuleMessage muleMessage=new DefaultMuleMessage(HTTP_BODY,muleContext);
  when(mockExpressionManager.parse(HTTP_BODY_WITH_EXPRESSION,muleMessage)).thenReturn("<html><head></head><body><p>Hello John Galt</p></body></html>");
  HttpResponse httpResponse=(HttpResponse)httpResponseTransformer.transformMessage(muleMessage,"UTF-8");
  assertTrue(httpResponse.getBodyAsString().contains("Hello John Galt"));
}
