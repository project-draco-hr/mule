{
  HttpResponseTransformer httpResponseTransformer=createHttpResponseTransformer();
  DefaultMuleMessage muleMessage=new DefaultMuleMessage(HTTP_BODY,muleContext);
  httpResponseTransformer.setContentType("text/html");
  httpResponseTransformer.setVersion("1.0");
  httpResponseTransformer.setStatus("500");
  HttpResponse httpResponse=(HttpResponse)httpResponseTransformer.transformMessage(muleMessage,"UTF-8");
  assertEquals(HTTP_BODY,httpResponse.getBodyAsString());
  assertEquals(HttpConstants.HTTP10,httpResponse.getHttpVersion().toString());
  assertEquals(HttpConstants.SC_INTERNAL_SERVER_ERROR,httpResponse.getStatusCode());
  validateHeader(httpResponse.getHeaders(),"Content-Type","text/html");
}
