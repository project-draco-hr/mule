{
  Object payload=request.getPayload();
  if (payload instanceof Reader) {
    return (Reader)payload;
  }
 else   if (payload instanceof InputStream) {
    return new InputStreamReader((InputStream)payload);
  }
 else   if (payload instanceof byte[]) {
    return new InputStreamReader(new ByteArrayInputStream((byte[])payload));
  }
 else {
    try {
      return new StringReader(request.getPayloadAsString());
    }
 catch (    Exception e) {
      IOException e2=new IOException("Could not convert message to String.");
      e2.initCause(e);
      throw e2;
    }
  }
}
