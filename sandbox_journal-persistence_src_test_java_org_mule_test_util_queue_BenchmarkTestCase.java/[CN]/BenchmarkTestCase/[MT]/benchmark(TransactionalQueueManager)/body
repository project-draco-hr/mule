{
  logger.info("================================");
  logger.info("Running test: " + mgr.getPersistenceStrategy().getClass().getName());
  logger.info("================================");
  try {
    mgr.start();
    long t0=System.currentTimeMillis();
    Worker[] w=new Worker[WORKERS];
    for (int i=0; i < w.length; i++) {
      w[i]=new Worker(mgr,"queue" + i);
      w[i].setDaemon(true);
      w[i].start();
    }
    for (int i=0; i < w.length; i++) {
      w[i].join();
    }
    long t1=System.currentTimeMillis();
    logger.info("Time: " + (t1 - t0) + " ms");
    mgr.stop(AbstractResourceManager.SHUTDOWN_MODE_NORMAL);
  }
 catch (  Exception e) {
    e.printStackTrace();
    mgr.stop(AbstractResourceManager.SHUTDOWN_MODE_KILL);
    throw e;
  }
}
