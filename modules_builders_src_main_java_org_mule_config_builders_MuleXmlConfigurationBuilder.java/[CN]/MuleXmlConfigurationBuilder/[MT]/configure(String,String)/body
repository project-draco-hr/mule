{
  try {
    String[] resources=StringUtils.splitAndTrim(configResources,",");
    MuleManager.getConfiguration().setConfigResources(resources);
    ReaderResource[] readers=new ReaderResource[resources.length];
    for (int i=0; i < resources.length; i++) {
      InputStream is=loadConfig(resources[i].trim());
      readers[i]=new ReaderResource(resources[i].trim(),new InputStreamReader(is,configEncoding));
    }
    if (startupPropertiesFile != null) {
      return configure(readers,PropertiesUtils.loadProperties(startupPropertiesFile,getClass()));
    }
 else     return configure(readers,null);
  }
 catch (  Exception e) {
    throw new ConfigurationException(e);
  }
}
