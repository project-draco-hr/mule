{
  if (message instanceof File) {
    File file=(File)message;
    assertTrue(payload instanceof File);
    assertEquals(file,payload);
  }
 else   if (message instanceof FileInputStream) {
    byte[] messageBytes=null;
    byte[] payloadBytes=null;
    FileInputStream fis=(FileInputStream)message;
    FileInputStream payloadFis=(FileInputStream)payload;
    messageBytes=new byte[fis.available()];
    payloadBytes=new byte[payloadFis.available()];
    fis.read(messageBytes);
    payloadFis.read(payloadBytes);
    assertTrue(Arrays.equals(messageBytes,payloadBytes));
  }
 else {
    fail("FileMessageAdaptor supports File or FileInputStream");
  }
}
