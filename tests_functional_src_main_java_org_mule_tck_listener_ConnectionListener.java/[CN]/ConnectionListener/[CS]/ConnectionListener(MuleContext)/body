{
  try {
    muleContext.registerListener(new ConnectionNotificationListener<ConnectionNotification>(){
      @Override public void onNotification(      ConnectionNotification notification){
        if (notification.getAction() == expectedAction) {
          notificationReceivedLatch.countDown();
        }
      }
    }
);
  }
 catch (  NotificationException e) {
    throw new RuntimeException(e);
  }
}
