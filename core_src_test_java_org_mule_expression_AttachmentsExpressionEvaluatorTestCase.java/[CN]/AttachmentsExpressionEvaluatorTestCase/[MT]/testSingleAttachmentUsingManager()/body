{
  Object result=muleContext.getExpressionManager().evaluate("#[attachment:foo]",message);
  assertNotNull(result);
  assertTrue(result instanceof DataHandler);
  ByteArrayOutputStream baos=new ByteArrayOutputStream(4);
  ((DataHandler)result).writeTo(baos);
  assertEquals("foovalue",baos.toString());
  result=muleContext.getExpressionManager().evaluate("#[attachment:fool?]",message);
  assertNull(result);
  try {
    muleContext.getExpressionManager().evaluate("#[attachment:fool]",message);
    fail("Required value");
  }
 catch (  ExpressionRuntimeException e) {
  }
}
