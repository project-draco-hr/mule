{
  if (next == null) {
    return event;
  }
 else   if (event == null) {
    if (logger.isDebugEnabled()) {
      logger.trace("MuleEvent is null.  Next MessageProcessor '" + next.getClass().getName() + "' will not be invoked.");
    }
    return null;
  }
 else   if (VoidMuleEvent.getInstance().equals(event)) {
    return event;
  }
 else {
    if (logger.isTraceEnabled()) {
      logger.trace("Invoking next MessageProcessor: '" + next.getClass().getName() + "' ");
    }
    MessageProcessorExecutionTemplate executionTemplate=(!(next instanceof MessageProcessorChain)) ? messageProcessorExecutorWithNotifications : messageProcessorExecutorWithoutNotifications;
    try {
      return new ProcessorExecutorFactory().createProcessorExecutor(event,Collections.singletonList(next),executionTemplate,false).execute();
    }
 catch (    MessagingException e) {
      event.getSession().setValid(false);
      throw e;
    }
  }
}
