{
  try {
    Connector connector;
    String scheme=url.getSchemeMetaInfo();
    TransportServiceDescriptor sd=(TransportServiceDescriptor)RegistryContext.getRegistry().lookupServiceDescriptor(ServiceDescriptorFactory.PROVIDER_SERVICE_TYPE,scheme,null);
    if (sd == null) {
      throw new ServiceException(CoreMessages.noServiceTransportDescriptor(scheme));
    }
    connector=sd.createConnector();
    if (connector != null) {
      if (connector instanceof AbstractConnector) {
        ((AbstractConnector)connector).initialiseFromUrl(url);
      }
    }
 else {
      throw new TransportFactoryException(CoreMessages.objectNotSetInService("Connector",scheme));
    }
    connector.setName(ObjectNameHelper.getConnectorName(connector));
    return connector;
  }
 catch (  Exception e) {
    throw new TransportFactoryException(CoreMessages.failedToCreateObjectWith("Endpoint",url),e);
  }
}
