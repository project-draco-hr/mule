{
  Counter ct=CounterFactory.createCounter("testAverage",Type.NUMBER);
  Counter avg=CounterFactory.createCounter("testAverage.avg","testAverage",Type.AVERAGE);
  assertEquals("Default value",0.0,avg.nextValue(),delta);
  ct.setRawValue(10.0);
  assertEquals("First value",10.0,avg.nextValue(),delta);
  ct.setRawValue(12.0);
  assertEquals("Average",11.0,avg.nextValue(),delta);
  ct.setRawValue(18.0);
  assertEquals("Average",40.0 / 3.0,avg.nextValue(),delta);
  ct.setRawValue(16.0);
  assertEquals("Average",14.0,avg.nextValue(),delta);
}
