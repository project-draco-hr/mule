{
  List<Method> result=new ArrayList<>();
  if (ignoredMethodNames == null) {
    ignoredMethodNames=Collections.emptySet();
  }
  for (  Method method : implementation.getMethods()) {
    if (filter != null && filter.accept(method.getName())) {
      continue;
    }
    Class<?>[] methodParams=method.getParameterTypes();
    if (compare(methodParams,parameterTypes,matchOnObject)) {
      if (!ignoredMethodNames.contains(method.getName())) {
        String returnType=method.getReturnType().getName();
        if ((returnType.equals("void") && voidOk) || !returnType.equals("void")) {
          result.add(method);
        }
      }
    }
  }
  return result;
}
