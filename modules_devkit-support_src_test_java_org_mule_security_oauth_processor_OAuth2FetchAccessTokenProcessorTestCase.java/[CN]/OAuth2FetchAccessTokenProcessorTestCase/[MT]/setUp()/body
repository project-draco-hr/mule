{
  this.manager=Mockito.mock(OAuth2Manager.class,Mockito.RETURNS_DEEP_STUBS);
  this.processor=new OAuth2FetchAccessTokenMessageProcessor(this.manager,null);
  this.event=Mockito.mock(MuleEvent.class,Mockito.RETURNS_DEEP_STUBS);
  Mockito.when(event.getMessage().getInvocationProperty(OAuthProperties.VERIFIER)).thenReturn(verifier);
  Mockito.when(event.getMuleContext().getExpressionManager().parse(Mockito.anyString(),Mockito.any(MuleMessage.class))).thenAnswer(new Answer<String>(){
    @Override public String answer(    InvocationOnMock invocation) throws Throwable {
      return (String)invocation.getArguments()[0];
    }
  }
);
}
