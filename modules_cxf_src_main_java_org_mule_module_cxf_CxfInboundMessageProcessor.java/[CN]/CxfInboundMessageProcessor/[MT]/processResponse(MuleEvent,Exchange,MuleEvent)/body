{
  if (responseEvent == null || VoidMuleEvent.getInstance().equals(responseEvent) || !event.getExchangePattern().hasResponse()) {
    return null;
  }
  MuleMessage muleResMsg=responseEvent.getMessage();
  BindingOperationInfo binding=exchange.get(BindingOperationInfo.class);
  if (null != binding && null != binding.getOperationInfo() && binding.getOperationInfo().isOneWay()) {
    muleResMsg.setOutboundProperty(HTTP_STATUS_PROPERTY,SC_OK);
    muleResMsg.setPayload(NullPayload.getInstance());
  }
 else {
    muleResMsg.setPayload(getResponseOutputHandler(exchange),DataTypeFactory.XML_STRING);
  }
  Message faultMsg=exchange.getOutFaultMessage();
  if (faultMsg != null) {
    if (null != binding && null != binding.getOperationInfo() && binding.getOperationInfo().isOneWay()) {
      muleResMsg.setPayload(getResponseOutputHandler(exchange),DataTypeFactory.XML_STRING);
    }
    Exception ex=faultMsg.getContent(Exception.class);
    if (ex != null) {
      ExceptionPayload exceptionPayload=new DefaultExceptionPayload(ex);
      event.getMessage().setExceptionPayload(exceptionPayload);
      muleResMsg.setOutboundProperty(HTTP_STATUS_PROPERTY,SC_INTERNAL_SERVER_ERROR);
    }
  }
  return responseEvent;
}
