{
  Map<String,Serializable> inboundProperties=new HashMap<>();
  inboundProperties.put("AcquirerCountry","MyCountry");
  inboundProperties.put("Amount","4999");
  MuleMessage request=new DefaultMuleMessage(new Apple(),inboundProperties,null,null,muleContext);
  MuleClient client=muleContext.getClient();
  flowRunner("NestedChoice").withPayload(request).asynchronously().run();
  MuleMessage result=client.request("test://outChoice",RECEIVE_TIMEOUT);
  assertNotNull(result);
  assertEquals("ABC",getPayloadAsString(result));
}
