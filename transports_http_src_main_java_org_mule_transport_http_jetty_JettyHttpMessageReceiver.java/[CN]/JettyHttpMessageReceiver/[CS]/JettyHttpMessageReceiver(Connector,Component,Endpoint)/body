{
  super(connector,component,endpoint);
  if ("rest".equals(endpoint.getEndpointURI().getScheme())) {
    ServletConnector scon=(ServletConnector)RegistryContext.getRegistry().lookupConnector(JETTY_SERVLET_CONNECTOR_NAME);
    if (scon != null) {
      throw new CreateException(HttpMessages.noServletConnectorFound(JETTY_SERVLET_CONNECTOR_NAME),this);
    }
    scon=new ServletConnector();
    scon.setName(JETTY_SERVLET_CONNECTOR_NAME);
    scon.setServletUrl(endpoint.getEndpointURI().getAddress());
    try {
      MuleContext muleContext=MuleServer.getMuleContext();
      scon.setMuleContext(muleContext);
      muleContext.getRegistry().registerConnector(scon);
      String path=endpoint.getEndpointURI().getPath();
      if (StringUtils.isEmpty(path)) {
        path="/";
      }
      EndpointBuilder endpointBuilder=new EndpointURIEndpointBuilder("servlet://" + path.substring(1),connector.getMuleContext());
      endpointBuilder.setTransformers(endpoint.getTransformers());
      ImmutableEndpoint ep=connector.getMuleContext().getRegistry().lookupEndpointFactory().getInboundEndpoint(endpointBuilder);
      scon.registerListener(component,ep);
    }
 catch (    Exception e) {
      throw new CreateException(e,this);
    }
  }
}
