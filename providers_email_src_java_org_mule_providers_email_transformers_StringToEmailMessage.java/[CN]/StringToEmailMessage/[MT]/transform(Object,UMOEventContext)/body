{
  String contentType=(String)context.getProperty("contentType");
  if (contentType == null)   contentType="text/plain";
  try {
    Message msg=new MimeMessage((Session)endpoint.getConnector().getDispatcher("ANY").getDelegateSession());
    msg.setRecipients(Message.RecipientType.TO,inetToAddresses);
    msg.setSentDate(Calendar.getInstance().getTime());
    if (inetFromAddress != null) {
      msg.setFrom(inetFromAddress);
    }
    msg.setSubject(getSubject());
    setContent(src,msg,contentType,context);
    return msg;
  }
 catch (  Exception e) {
    throw new TransformerException(this,e);
  }
}
