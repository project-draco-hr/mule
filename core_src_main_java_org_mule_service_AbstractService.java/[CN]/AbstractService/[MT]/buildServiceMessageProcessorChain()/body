{
  ChainMessageProcessorBuilder builder=new ChainMessageProcessorBuilder();
  builder.chain(getServiceStartedAssertingMessageProcessor());
  addMessageProcessors(builder);
  serviceOnlyMessageProcessorChain=builder.build();
  builder.chainBefore(inboundRouter);
  messageProcessorChain=builder.build();
  if (messageProcessorChain instanceof FlowConstructAware) {
    ((FlowConstructAware)messageProcessorChain).setFlowConstruct(this);
  }
}
