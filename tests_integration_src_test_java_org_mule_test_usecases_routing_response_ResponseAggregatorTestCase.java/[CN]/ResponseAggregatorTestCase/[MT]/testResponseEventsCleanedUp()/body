{
  RelaxedAsyncReplyMP mp=new RelaxedAsyncReplyMP();
  try {
    MuleEvent event=getTestEvent("message1");
    final MuleMessage message=MuleMessage.builder(event.getMessage()).correlationId(event.getMessage().getUniqueId()).correlationGroupSize(1).build();
    SensingNullMessageProcessor listener=getSensingNullMessageProcessor();
    mp.setListener(listener);
    mp.setReplySource(listener.getMessageSource());
    mp.process(event);
    Map<String,MuleEvent> responseEvents=mp.getResponseEvents();
    assertTrue("Response events should be cleaned up.",responseEvents.isEmpty());
  }
  finally {
    mp.stop();
  }
}
