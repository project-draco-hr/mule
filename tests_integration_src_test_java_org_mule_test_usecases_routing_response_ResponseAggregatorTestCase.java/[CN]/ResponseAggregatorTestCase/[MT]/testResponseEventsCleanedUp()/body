{
  RelaxedAsyncReplyMP mp=new RelaxedAsyncReplyMP();
  try {
    MuleEvent event=getTestEvent("message1");
    final MutableMuleMessage message=(MutableMuleMessage)event.getMessage();
    final String id=message.getUniqueId();
    message.setCorrelationId(id);
    message.setCorrelationGroupSize(1);
    SensingNullMessageProcessor listener=getSensingNullMessageProcessor();
    mp.setListener(listener);
    mp.setReplySource(listener.getMessageSource());
    mp.process(event);
    Map<String,MuleEvent> responseEvents=mp.getResponseEvents();
    assertTrue("Response events should be cleaned up.",responseEvents.isEmpty());
  }
  finally {
    mp.stop();
  }
}
