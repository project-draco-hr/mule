{
  try {
    if (src instanceof InputStream) {
      return getStrategy().uncompressInputStream((InputStream)src);
    }
 else {
      byte[] buffer=getStrategy().uncompressByteArray((byte[])src);
      DataType<?> returnDataType=getReturnDataType();
      if (DataTypeFactory.STRING.equals(returnDataType)) {
        return new String(buffer,outputEncoding);
      }
 else       if (!DataTypeFactory.OBJECT.equals(returnDataType) && !DataTypeFactory.BYTE_ARRAY.equals(returnDataType)) {
        try {
          return muleContext.getObjectSerializer().deserialize(buffer);
        }
 catch (        SerializationException e) {
          throw new TransformerException(this,e);
        }
      }
 else {
        try {
          return muleContext.getObjectSerializer().deserialize(buffer);
        }
 catch (        SerializationException e) {
          return buffer;
        }
      }
    }
  }
 catch (  IOException e) {
    throw new TransformerException(MessageFactory.createStaticMessage("Failed to uncompress message."),this,e);
  }
}
