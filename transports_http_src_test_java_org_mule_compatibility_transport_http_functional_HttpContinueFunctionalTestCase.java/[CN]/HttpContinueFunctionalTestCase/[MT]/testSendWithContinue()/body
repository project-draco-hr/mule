{
  stopWatch=new StopWatch();
  MuleClient client=muleContext.getClient();
  HttpClientParams params=new HttpClientParams();
  params.setVersion(HttpVersion.HTTP_1_1);
  params.setBooleanParameter(HttpClientParams.USE_EXPECT_CONTINUE,true);
  Map<String,Serializable> props=new HashMap<>();
  props.put(HttpConnector.HTTP_PARAMS_PROPERTY,params);
  stopWatch.start();
  MuleMessage result=client.send("clientEndpoint",TEST_MESSAGE,props).getRight();
  stopWatch.stop();
  assertNotNull(result);
  assertEquals(TEST_MESSAGE + " Received",getPayloadAsString(result));
  if (stopWatch.getTime() > DEFAULT_HTTP_CLIENT_CONTINUE_WAIT) {
    fail("Server did not handle Expect=100-continue header properly,");
  }
}
