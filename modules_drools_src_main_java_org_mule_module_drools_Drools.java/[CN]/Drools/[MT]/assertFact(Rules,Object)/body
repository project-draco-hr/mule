{
  StatefulKnowledgeSession session=((DroolsSessionData)rules.getSessionData()).getSession();
  FactHandle handle=session.getFactHandle(fact);
  if (handle != null) {
    session.update(handle,fact);
    session.fireAllRules();
  }
 else {
    handle=session.insert(fact);
    session.fireAllRules();
  }
  return handle;
}
