{
  long options=0;
  if (allowAllSchemes) {
    options|=ALLOW_ALL_SCHEMES;
  }
  if (allowTwoSlashes) {
    options|=ALLOW_2_SLASHES;
  }
  if (allowLocalUrls) {
    options|=ALLOW_LOCAL_URLS;
  }
  if (noFragments) {
    options|=NO_FRAGMENTS;
  }
  org.apache.commons.validator.routines.UrlValidator validator=new org.apache.commons.validator.routines.UrlValidator(options);
  return validator.isValid(url) ? ok() : fail();
}
