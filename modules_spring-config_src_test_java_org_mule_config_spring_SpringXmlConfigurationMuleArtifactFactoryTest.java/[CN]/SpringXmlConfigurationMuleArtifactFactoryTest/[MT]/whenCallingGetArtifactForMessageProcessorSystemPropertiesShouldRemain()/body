{
  Properties properties=System.getProperties();
  SpringXmlConfigurationMuleArtifactFactory factoryTest=new SpringXmlConfigurationMuleArtifactFactory();
  XmlConfigurationCallback callback=Mockito.mock(XmlConfigurationCallback.class);
  HashMap<String,String> map=new HashMap<String,String>();
  map.put("test","test1");
  Mockito.when(callback.getEnvironmentProperties()).thenReturn(map);
  Mockito.when(callback.getPropertyPlaceholders()).thenReturn(new Element[]{});
  Element element=createElement("logger","http://www.mulesoft.org/schema/mule/core");
  factoryTest.getArtifactForMessageProcessor(element,callback);
  Assert.assertThat("System properties where modified",properties,CoreMatchers.is(System.getProperties()));
}
