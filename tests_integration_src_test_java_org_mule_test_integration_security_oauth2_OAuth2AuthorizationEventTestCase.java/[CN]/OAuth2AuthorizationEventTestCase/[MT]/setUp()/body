{
  this.objectFactory=Mockito.mock(KeyedPoolableObjectFactory.class);
  this.adapter=Mockito.mock(OAuth2Adapter.class,Mockito.withSettings().extraInterfaces(Initialisable.class,Startable.class,Stoppable.class,Disposable.class,MuleContextAware.class));
  this.message=new DefaultMuleMessage(payload,muleContext);
  this.event=Mockito.mock(MuleEvent.class);
  Mockito.when(this.event.getId()).thenReturn(eventId);
  Mockito.when(this.event.getMessage()).thenReturn(message);
  this.accessTokenObjectStore=new InMemoryObjectStore<Serializable>();
  this.manager=Mockito.spy(new TestOAuth2Manager(this.objectFactory,this.adapter));
  this.manager.setAccessTokenObjectStore(this.accessTokenObjectStore);
  this.manager.setMuleContext(muleContext);
}
