{
  String processId;
  Execution execution=processEngine.getExecutionService().findExecutionById((String)executionId);
  if (execution.getProcessInstance() != null) {
    processId=execution.getProcessInstance().getId();
  }
 else {
    processId=execution.getId();
  }
  if (variables != null && !variables.isEmpty()) {
    processEngine.getExecutionService().setVariables((String)executionId,variables);
  }
  processEngine.getExecutionService().signalExecutionById((String)executionId,(String)signalName,variables);
  ProcessInstance process=processEngine.getExecutionService().findProcessInstanceById(processId);
  if (process == null) {
    process=new EndedProcess(processId);
  }
  return process;
}
