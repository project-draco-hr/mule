{
  OutboundPassThroughRouter router=new OutboundPassThroughRouter();
  router.addEndpoint(createOutboundEndpoint());
  descriptor.getOutboundRouter().addRouter(router);
  descriptor.getInboundRouter().addEndpoint(createInboundEndpoint());
  HashMap props=new HashMap();
  props.put("eventCallback",callback);
  descriptor.setProperties(props);
  managementContext.getRegistry().registerConnector(connector);
  descriptor.setModelName("main");
  managementContext.getRegistry().registerService(descriptor);
  UMOModel model=managementContext.getRegistry().lookupModel("main");
  return model.getComponent(descriptor.getName());
}
