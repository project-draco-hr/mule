{
  OutboundPassThroughRouter router=new OutboundPassThroughRouter();
  router.addEndpoint(createOutboundEndpoint());
  descriptor.getOutboundRouter().addRouter(router);
  descriptor.getInboundRouter().addEndpoint(createInboundEndpoint());
  HashMap props=new HashMap();
  props.put("eventCallback",callback);
  descriptor.setProperties(props);
  MuleManager.getInstance().registerConnector(connector);
  UMOComponent component=MuleManager.getInstance().lookupModel("main").registerComponent(descriptor);
  descriptor.initialise();
  return component;
}
