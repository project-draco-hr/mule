{
  OutboundPassThroughRouter router=new OutboundPassThroughRouter();
  router.addEndpoint(createOutboundEndpoint());
  descriptor.getOutboundRouter().addRouter(router);
  descriptor.getInboundRouter().addEndpoint(createInboundEndpoint());
  HashMap props=new HashMap();
  props.put("eventCallback",callback);
  descriptor.setProperties(props);
  MuleManager.getRegistry().registerConnector(connector);
  UMOModel model=MuleManager.getRegistry().lookupModel("main");
  UMOComponent component=MuleManager.getRegistry().registerComponent(descriptor,model.getName());
  descriptor.initialise();
  return component;
}
