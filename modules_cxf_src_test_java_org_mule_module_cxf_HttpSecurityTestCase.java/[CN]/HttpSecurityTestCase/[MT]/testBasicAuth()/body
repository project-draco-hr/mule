{
  HttpClient client=new HttpClient();
  Credentials credentials=new UsernamePasswordCredentials("admin","admin");
  client.getState().setCredentials(AuthScope.ANY,credentials);
  client.getParams().setAuthenticationPreemptive(true);
  PostMethod method=new PostMethod("https://localhost:" + dynamicPort2.getNumber() + "/services/Echo");
  method.setDoAuthentication(true);
  StringRequestEntity requestEntity=new StringRequestEntity(soapRequest,"text/plain","UTF-8");
  method.setRequestEntity(requestEntity);
  int result=client.executeMethod(method);
  assertEquals(200,result);
  System.out.println(method.getResponseBodyAsString());
  credentials=new UsernamePasswordCredentials("admin","adminasd");
  client.getState().setCredentials(AuthScope.ANY,credentials);
  client.getParams().setAuthenticationPreemptive(true);
  result=client.executeMethod(method);
  assertEquals(401,result);
}
