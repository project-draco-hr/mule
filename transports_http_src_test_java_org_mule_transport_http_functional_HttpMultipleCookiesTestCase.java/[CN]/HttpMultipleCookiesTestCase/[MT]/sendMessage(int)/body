{
  HttpClient client2=new HttpClient();
  client2.getParams().setCookiePolicy(CookiePolicy.RFC_2109);
  HttpState state=new HttpState();
  Cookie cookie1=new Cookie("localhost","TheFirst","First","/",null,false);
  state.addCookie(cookie1);
  Cookie cookie2=new Cookie("localhost","TheSecond","Value2","/",null,false);
  state.addCookie(cookie2);
  Cookie cookie3=new Cookie("localhost","TheThird","Value3","/",null,false);
  state.addCookie(cookie3);
  client2.setState(state);
  PostMethod method=new PostMethod("http://localhost:" + port);
  client2.executeMethod(method);
  assertEquals(TEST_MESSAGE,method.getResponseBodyAsString());
  assertTrue("Cookies were not recieved",cookiesRecieved.get());
  for (  Cookie cookie : client2.getState().getCookies()) {
    logger.debug(cookie.getName() + " " + cookie.getValue());
  }
  assertEquals(6,client2.getState().getCookies().length);
}
