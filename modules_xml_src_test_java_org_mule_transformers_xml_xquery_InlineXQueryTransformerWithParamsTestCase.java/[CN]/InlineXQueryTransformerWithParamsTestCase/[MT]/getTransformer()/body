{
  XQueryTransformer transformer=new XQueryTransformer();
  transformer.setXquery("declare variable $document external;\n" + "declare variable $title external;\n" + "declare variable $rating external;\n"+ " <cd-listings title='{$title}' rating='{$rating}'>\n"+ "{\n"+ "    for $cd in $document/catalog/cd\n"+ "    return <cd-title>{data($cd/title)}</cd-title>\n"+ "} \n</cd-listings>");
  transformer.setReturnDataType(DataTypeFactory.create(String.class));
  Properties params=new Properties();
  params.setProperty("title","#[mule:message.header(ListTitle)]");
  params.setProperty("rating","#[mule:message.header(ListRating)]");
  transformer.setContextProperties(params);
  transformer.setMuleContext(muleContext);
  transformer.initialise();
  return transformer;
}
