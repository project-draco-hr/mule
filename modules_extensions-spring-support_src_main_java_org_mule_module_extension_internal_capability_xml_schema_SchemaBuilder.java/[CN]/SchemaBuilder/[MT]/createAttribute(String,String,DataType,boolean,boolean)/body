{
  final Attribute attribute=new Attribute();
  attribute.setUse(required ? SchemaConstants.USE_REQUIRED : SchemaConstants.USE_OPTIONAL);
  attribute.setAnnotation(createDocAnnotation(description));
  type.getQualifier().accept(new BaseDataQualifierVisitor(){
    @Override public void onEnum(){
      attribute.setName(name);
      attribute.setType(new QName(schema.getTargetNamespace(),type.getName() + SchemaConstants.ENUM_TYPE_SUFFIX));
      registeredEnums.add(type);
    }
    @Override protected void defaultOperation(){
      attribute.setName(name);
      attribute.setType(SchemaTypeConversion.convertType(type,dynamic));
    }
  }
);
  return attribute;
}
