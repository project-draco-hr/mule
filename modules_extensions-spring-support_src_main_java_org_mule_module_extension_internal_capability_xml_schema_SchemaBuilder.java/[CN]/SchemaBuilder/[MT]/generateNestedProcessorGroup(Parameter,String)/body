{
  QName ref=MULE_MESSAGE_PROCESSOR_OR_OUTBOUND_ENDPOINT_TYPE;
  TypeRestrictionCapability restrictionCapability=getSingleCapability(parameter,TypeRestrictionCapability.class);
  if (restrictionCapability != null) {
    ref=getSubstitutionGroup(restrictionCapability.getType());
    ref=new QName(ref.getNamespaceURI(),getGroupName(ref.getLocalPart()),ref.getPrefix());
  }
  GroupRef group=new GroupRef();
  group.setRef(ref);
  group.setMinOccurs(parameter.isRequired() ? BigInteger.ONE : BigInteger.ZERO);
  group.setMaxOccurs(maxOccurs);
  return group;
}
