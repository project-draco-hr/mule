{
  Element filter=endpoint.getChild(MuleTag.ELEMENT_FILTER);
  boolean conditional=false;
  if (filter == null) {
    filter=endpoint.getChild(MuleTag.ELEMENT_LEFT_FILTER);
    conditional=filter != null;
  }
  if (filter != null) {
    GraphNode filterNode=graph.addNode();
    filterNode.getInfo().setHeader(filter.getAttributeValue(MuleTag.ATTRIBUTE_CLASS_NAME));
    filterNode.getInfo().setFillColor(ColorRegistry.COLOR_FILTER);
    StringBuffer caption=new StringBuffer();
    appendProperties(filter,caption);
    filterNode.getInfo().setCaption(caption.toString());
    if (conditional) {
      filter=endpoint.getChild(MuleTag.ELEMENT_RIGHT_FILTER);
      GraphNode filterNode2=graph.addNode();
      filterNode2.getInfo().setHeader(filter.getAttributeValue(MuleTag.ATTRIBUTE_CLASS_NAME));
      filterNode2.getInfo().setFillColor(ColorRegistry.COLOR_FILTER);
      StringBuffer caption2=new StringBuffer();
      appendProperties(filter,caption2);
      filterNode2.getInfo().setCaption(caption2.toString());
      addEdge(graph,endpointNode,filterNode2,"filters on",isTwoWay(endpoint));
    }
    processInboundFilter(graph,filter,filterNode,parent);
    addEdge(graph,endpointNode,filterNode,"filters on",isTwoWay(endpoint));
  }
 else {
    addEdge(graph,endpointNode,parent,"in",isTwoWay(endpoint));
  }
}
