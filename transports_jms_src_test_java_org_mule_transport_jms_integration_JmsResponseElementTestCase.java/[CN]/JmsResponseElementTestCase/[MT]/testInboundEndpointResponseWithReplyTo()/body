{
  MuleClient client=muleContext.getClient();
  Map<String,Object> messageProperties=new HashMap<String,Object>();
  String replyToUri="jms://out2";
  messageProperties.put(MuleProperties.MULE_REPLY_TO_PROPERTY,replyToUri);
  client.dispatch("jms://out",MESSAGE,messageProperties);
  MuleMessage response=client.request(replyToUri,TIMEOUT);
  assertThat(response.getPayloadAsString(),is(EXPECTED_MODIFIED_MESSAGE));
  assertThat(response.getExceptionPayload(),IsNull.<Object>nullValue());
  response=client.request(replyToUri,TINY_TIMEOUT);
  assertThat(response,IsNull.<Object>nullValue());
}
