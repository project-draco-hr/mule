{
  MuleMessage okMessage=MuleMessage.builder().payload("OK").addOutboundProperty("id","1").build();
  DefaultMuleEvent newEvent=new DefaultMuleEvent(okMessage,flow,session);
  DefaultMuleEventEndpointUtils.populateFieldsFromInboundEndpoint(newEvent,inboundEndpoint);
  MuleEvent event=newEvent;
  try {
    event=idempotentMessageFilter.process(event);
  }
 catch (  Throwable e) {
    e.printStackTrace();
synchronized (errorHappenedInChildThreads) {
      errorHappenedInChildThreads=true;
    }
  }
  if (event != null) {
synchronized (processedEvents) {
      processedEvents++;
    }
  }
}
