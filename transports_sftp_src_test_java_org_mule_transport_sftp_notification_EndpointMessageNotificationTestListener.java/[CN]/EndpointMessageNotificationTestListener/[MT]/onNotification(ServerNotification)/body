{
  EndpointMessageNotification endpointNotification;
  if (notification instanceof EndpointMessageNotification) {
    endpointNotification=(EndpointMessageNotification)notification;
  }
 else {
    logger.debug("*** EndpointMessageNotificationTestListener RECEIVED UNKNOWN NOTIFICATION OF TYPE {}",notification.getClass().getName());
    return;
  }
  MuleMessage message=endpointNotification.getSource();
  String msgType=message.getPayload().getClass().getName();
  String correlationId;
  if (message.getPropertyNames(OUTBOUND).contains(MULE_CORRELATION_ID_PROPERTY)) {
    correlationId=message.getProperty(MULE_CORRELATION_ID_PROPERTY,OUTBOUND);
  }
 else {
    correlationId="?";
  }
  String endpointName=endpointNotification.getEndpoint();
  String action=notification.getActionName();
  String resourceId=notification.getResourceIdentifier();
  String timestamp=new Date(notification.getTimestamp()).toString();
  if (logger.isDebugEnabled()) {
    logger.debug("OnNotification: " + notification.EVENT_NAME + "\nTimestamp="+ timestamp+ "\nMsgType="+ msgType+ "\nAction="+ action+ "\nResourceId="+ resourceId+ "\nEndpointName="+ endpointName+ "\nCorrelationId="+ correlationId+ "");
  }
}
