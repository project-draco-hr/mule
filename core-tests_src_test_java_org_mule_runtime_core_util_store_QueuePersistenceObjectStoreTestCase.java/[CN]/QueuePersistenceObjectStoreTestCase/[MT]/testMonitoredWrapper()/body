{
  QueuePersistenceObjectStore<Serializable> store=getObjectStore();
  String id=UUID.getUUID();
  QueueKey key=new QueueKey(QUEUE_NAME,id);
  MuleMessage msg=MuleMessage.builder().payload("Hello").build();
  Flow flow=getTestFlow();
  MuleEvent event=new DefaultMuleEvent(create(flow),msg,ONE_WAY,flow);
  ListableObjectStore<Serializable> monitored=new MonitoredObjectStoreWrapper(store);
  monitored.store(key,event);
  MonitoredObjectStoreWrapper.StoredObject retrieved=(MonitoredObjectStoreWrapper.StoredObject)store.retrieve(key);
  Object item=retrieved.getItem();
  assertTrue(item instanceof MuleEvent);
  MuleEvent newEvent=(MuleEvent)item;
  MuleMessage newMessage=newEvent.getMessage();
  assertNotNull(newMessage);
  assertEquals("Hello",newMessage.getPayload());
}
