{
  QueuePersistenceObjectStore<Serializable> store=getObjectStore();
  String id=UUID.getUUID();
  QueueKey key=new QueueKey(QUEUE_NAME,id);
  InternalMessage msg=InternalMessage.builder().payload("Hello").build();
  Event event=eventBuilder().message(msg).exchangePattern(ONE_WAY).build();
  ListableObjectStore<Serializable> monitored=new MonitoredObjectStoreWrapper(store);
  monitored.store(key,event);
  MonitoredObjectStoreWrapper.StoredObject retrieved=(MonitoredObjectStoreWrapper.StoredObject)store.retrieve(key);
  Object item=retrieved.getItem();
  assertTrue(item instanceof Event);
  Event newEvent=(Event)item;
  InternalMessage newMessage=newEvent.getMessage();
  assertNotNull(newMessage);
  assertEquals("Hello",newMessage.getPayload().getValue());
}
