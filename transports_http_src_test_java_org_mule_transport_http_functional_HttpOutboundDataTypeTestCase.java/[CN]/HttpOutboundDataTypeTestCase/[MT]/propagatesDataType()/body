{
  LocalMuleClient client=muleContext.getClient();
  DefaultMuleMessage muleMessage=new DefaultMuleMessage(TEST_MESSAGE,muleContext);
  muleMessage.setOutboundProperty("Content-Type",MimeTypes.TEXT + "; charset=" + StandardCharsets.UTF_16.name());
  client.dispatch("vm://testInput",muleMessage);
  MuleMessage response=client.request("vm://testOutput",120000);
  assertThat(response.getDataType().getMimeType(),equalTo(MimeTypes.TEXT));
  assertThat(response.getDataType().getEncoding(),equalTo(StandardCharsets.UTF_16.name()));
  assertThat(response.getOutboundProperty(MuleProperties.MULE_ENCODING_PROPERTY),is(nullValue()));
  assertThat(response.getOutboundProperty(MuleProperties.CONTENT_TYPE_PROPERTY),is(nullValue()));
}
