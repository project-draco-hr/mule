{
  try {
    MessageContext ctxMessage=(MessageContext)context.getVariable("message");
    MuleMessage message=new DefaultMuleMessage(ctxMessage.getPayload(),muleContext);
    String evaluator="xpath-branch:";
    if (params.length != 1) {
      evaluator="xpath-node:";
      message=new DefaultMuleMessage(params[1],muleContext);
    }
    Object result=muleContext.getExpressionManager().evaluate(evaluator + params[0],message);
    ctxMessage.setPayload(message.getPayload());
    return result;
  }
 catch (  Exception e) {
    throw new RuntimeException(e);
  }
}
