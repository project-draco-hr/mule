{
  ArtifactClassLoader parent=domainRepository.getDomain(descriptor.getDomain()).getArtifactClassLoader();
  parent=getSharedLibClassLoader(descriptor,parent);
  final List<ApplicationPlugin> applicationPlugins=createApplicationPlugins(parent,descriptor.getPlugins());
  if (!applicationPlugins.isEmpty()) {
    parent=createCompositePluginClassLoader(parent,applicationPlugins);
  }
  final ArtifactClassLoader deploymentClassLoader=applicationClassLoaderFactory.create(parent,descriptor);
  DefaultMuleApplication delegate=new DefaultMuleApplication(descriptor,deploymentClassLoader,applicationPlugins,domainRepository);
  if (deploymentListener != null) {
    delegate.setDeploymentListener(deploymentListener);
  }
  return new ApplicationWrapper(delegate);
}
