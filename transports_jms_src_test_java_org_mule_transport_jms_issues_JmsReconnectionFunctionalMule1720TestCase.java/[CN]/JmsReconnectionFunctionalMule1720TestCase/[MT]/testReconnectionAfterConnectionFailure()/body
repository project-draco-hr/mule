{
  componentCallbackLatch=new Latch();
  EventCallback callback=new EventCallback(){
    public void eventReceived(    MuleEventContext context,    Object component) throws Exception {
      componentCallbackLatch.countDown();
    }
  }
;
  DefaultJavaComponent defaultComponent=(DefaultJavaComponent)muleContext.getRegistry().lookupService("InputPart").getComponent();
  FunctionalTestComponent testComponent=(FunctionalTestComponent)defaultComponent.getObjectFactory().getInstance();
  testComponent.setEventCallback(callback);
  send(super.scenarioNoTx);
  assertTrue(componentCallbackLatch.await(LOCK_WAIT,TimeUnit.MILLISECONDS));
  componentCallbackLatch=new Latch();
  simulateConnectionFailure();
  Thread.sleep(RECONNECTION_TIMEOUT);
  send(super.scenarioNoTx);
  assertTrue(componentCallbackLatch.await(LOCK_WAIT,TimeUnit.MILLISECONDS));
}
