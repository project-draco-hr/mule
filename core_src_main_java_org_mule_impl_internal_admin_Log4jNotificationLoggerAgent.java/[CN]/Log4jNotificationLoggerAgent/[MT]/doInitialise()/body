{
  if (logConfigFile != null) {
    if (logConfigFile.endsWith(".xml")) {
      DOMConfigurator.configure(logConfigFile);
    }
 else {
      PropertyConfigurator.configure(logConfigFile);
    }
  }
 else {
    try {
      eventLogger=Logger.getLogger(logName);
      if (logFile != null) {
        File f=FileUtils.newFile(logFile);
        if (!f.exists()) {
          FileUtils.createFile(logFile);
        }
        Appender file=new RollingFileAppender(new PatternLayout("%5p %m%n"),logFile,true);
        eventLogger.addAppender(file);
      }
    }
 catch (    IOException e) {
      throw new InitialisationException(CoreMessages.failedToLoad("Log4j configuration"),e,this);
    }
  }
}
