{
  when(mockEvent.isAllowNonBlocking()).thenReturn(false);
  when(mockEvent.getExchangePattern()).thenReturn(MessageExchangePattern.REQUEST_RESPONSE);
  ResponseAssertionMessageProcessor asp=createAssertionMessageProcessor();
  asp.setListener(new TestNonBlockingProcessor());
  asp.setFlowConstruct(flowConstruct);
  asp.setExpression(TRUE_EXPRESSION);
  asp.setResponseExpression(TRUE_EXPRESSION);
  asp.setCount(1);
  asp.setResponseCount(1);
  asp.setResponseSameThread(false);
  asp.start();
  asp.process(mockEvent);
  assertFalse(asp.expressionFailed());
  assertFalse(asp.responseExpressionFailed());
  assertFalse(asp.countFailOrNullEvent());
  assertFalse(asp.responseCountFailOrNullEvent());
}
