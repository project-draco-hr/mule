{
  DefaultMessageProcessorChainBuilder builder=new DefaultMessageProcessorChainBuilder(muleContext);
  builder.chain(new AppendingInterceptingMP("1"),new ReturnVoidMPInterceptongMP(),getAppendingMP("2"),getAppendingMP("3"),new AppendingInterceptingMP("4"),getAppendingMP("5"));
  assertThat(process(builder.build(),getTestEventUsingFlow("0")).getMessage().getPayload(),equalTo("0before1after1"));
  assertThat(threads,equalTo(1));
}
