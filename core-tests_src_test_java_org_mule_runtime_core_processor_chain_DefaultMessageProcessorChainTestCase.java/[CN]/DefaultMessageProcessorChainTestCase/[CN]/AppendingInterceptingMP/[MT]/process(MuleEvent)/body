{
  if (stopProcessing) {
    return event;
  }
  MuleEvent intermediateEvent=MuleEvent.builder(event).message(MuleMessage.builder().payload(event.getMessage().getPayload() + "before" + appendString).build()).build();
  MuleEvent result=processNext(intermediateEvent);
  if (result != null && !result.equals(VoidMuleEvent.getInstance()) && !result.equals(NonBlockingVoidMuleEvent.getInstance())) {
    return MuleEvent.builder(result).message(MuleMessage.builder().payload(result.getMessage().getPayload() + "after" + appendString).build()).build();
  }
 else {
    return result;
  }
}
