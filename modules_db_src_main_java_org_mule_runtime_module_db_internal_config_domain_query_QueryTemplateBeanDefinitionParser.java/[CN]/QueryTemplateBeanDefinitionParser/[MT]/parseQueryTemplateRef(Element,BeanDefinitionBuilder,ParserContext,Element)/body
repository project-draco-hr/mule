{
  String queryTemplateRef=template.getAttribute("name");
  element.removeChild(template);
  List<Element> params=DomUtils.getChildElementsByTagName(element,IN_PARAM_ELEMENT);
  List<BeanDefinition> paramList=QueryDefinitionParser.parseOverriddenTemplateParameters(params,nestedCtx);
  BeanDefinitionBuilder queryTemplateBuilder=BeanDefinitionBuilder.genericBeanDefinition(QueryTemplateFactoryBean.class);
  queryTemplateBuilder.addConstructorArgReference(queryTemplateRef);
  queryTemplateBuilder.addConstructorArgValue(paramList);
  builder.addConstructorArgValue(queryTemplateBuilder.getBeanDefinition());
}
