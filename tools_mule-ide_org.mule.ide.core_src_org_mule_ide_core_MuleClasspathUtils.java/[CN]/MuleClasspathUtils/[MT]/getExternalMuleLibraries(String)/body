{
  IPath basePath=new Path(location);
  IPath libPath=basePath.append("lib");
  IPath sourcePath=basePath.append("src").append("java");
  File externalRoot=libPath.toFile();
  if (!externalRoot.exists()) {
    throw new MuleModelException(MuleCorePlugin.getDefault().createErrorStatus("External Mule root is invalid",null));
  }
  List entries=new ArrayList();
  File[] members=externalRoot.listFiles();
  for (int i=0; i < members.length; i++) {
    File file=members[i];
    if (file.getPath().endsWith(".jar")) {
      IPath source=(isMuleJar(file.getName())) ? sourcePath : null;
      IClasspathEntry entry=JavaCore.newLibraryEntry(new Path(file.getPath()),source,null);
      entries.add(entry);
    }
  }
  IClasspathEntry entry=getMuleCoreLibraryEntry();
  if (entry != null) {
    entries.add(entry);
  }
  return (IClasspathEntry[])entries.toArray(new IClasspathEntry[entries.size()]);
}
