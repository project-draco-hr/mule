{
  ApplicationDescriptor descriptor=mock(ApplicationDescriptor.class);
  when(descriptor.getAbsoluteResourcePaths()).thenReturn(new String[]{});
  ApplicationClassLoaderFactory classLoaderFactory=mock(ApplicationClassLoaderFactory.class);
  when(classLoaderFactory.create(descriptor)).thenReturn(mock(ArtifactClassLoader.class));
  DefaultMuleApplication application=new DefaultMuleApplication(descriptor,classLoaderFactory,mock(Domain.class));
  application.install();
  assertThat(application.deploymentClassLoader,is(notNullValue()));
  application.dispose();
  assertThat(application.deploymentClassLoader,is(nullValue()));
}
