{
  super.doSetUp();
  ExpressionFilenameParser.resetCount();
  parser=new ExpressionFilenameParser();
  parser.setMuleContext(muleContext);
  Map<String,Serializable> inboundProperties=new HashMap<>();
  inboundProperties.put(FileConnector.PROPERTY_ORIGINAL_FILENAME,"originalName");
  inboundProperties.put(FileConnector.PROPERTY_FILENAME,"newName");
  message=MuleMessage.builder().payload("hello").inboundProperties(inboundProperties).addOutboundProperty("foo","bar").build();
  Flow flow=getTestFlow();
  event=new DefaultMuleEvent(DefaultMessageContext.create(flow,TEST_CONNECTOR),message,flow);
}
