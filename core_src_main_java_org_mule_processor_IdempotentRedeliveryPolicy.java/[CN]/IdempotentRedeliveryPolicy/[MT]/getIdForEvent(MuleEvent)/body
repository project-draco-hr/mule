{
  if (useSecureHash) {
    Object payload=event.getMessage().getPayload();
    byte[] bytes=(byte[])objectToByteArray.transform(payload);
    MessageDigest md=MessageDigest.getInstance(messageDigestAlgorithm);
    byte[] digestedBytes=md.digest(bytes);
    return (String)byteArrayToHexString.transform(digestedBytes);
  }
 else {
    return event.getMuleContext().getExpressionManager().parse(idExpression,event.getMessage(),true);
  }
}
