{
  logger.info("Rolling back transaction on endpoint: " + event.getEndpoint().getEndpointURI());
  UMOSession session=event.getSession();
  UMOTransaction trans=TransactionCoordination.getInstance().unbindTransaction();
  if (trans != null && trans.isRolledBack()) {
    throw new TransactionRollbackException("Transaction for session: " + session.getId() + " has already been rolled back");
  }
 else   if (trans == null) {
    throw new TransactionNotInProgressException("Cannot rollback transaction as there is no transaction in progress");
  }
 else {
    trans.rollback();
  }
}
