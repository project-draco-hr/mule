{
  QName resultType;
switch (getResultType()) {
case BOOLEAN:
    resultType=XPathConstants.BOOLEAN;
  break;
case NODE:
resultType=XPathConstants.NODE;
break;
case NODESET:
resultType=XPathConstants.NODESET;
break;
case NUMBER:
resultType=XPathConstants.NUMBER;
break;
default :
resultType=XPathConstants.STRING;
break;
}
try {
if (src instanceof InputSource) {
return xpath.evaluate(expression,(InputSource)src,resultType);
}
 else {
return xpath.evaluate(expression,src,resultType);
}
}
 catch (XPathExpressionException e) {
throw new TransformerException(this,e);
}
}
