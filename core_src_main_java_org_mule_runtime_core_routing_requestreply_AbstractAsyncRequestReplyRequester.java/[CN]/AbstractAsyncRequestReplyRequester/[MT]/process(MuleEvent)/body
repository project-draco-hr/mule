{
  if (replyMessageSource == null) {
    return processNext(event);
  }
 else {
    locks.put(getAsyncReplyCorrelationId(event),createEventLock());
    sendAsyncRequest(event);
    MuleEvent resultEvent=receiveAsyncReply(event);
    if (resultEvent != null) {
      if (resultEvent.getMessage().getInboundProperty(MuleProperties.MULE_SESSION_PROPERTY) != null) {
        event.getSession().merge(resultEvent.getSession());
      }
      resultEvent=org.mule.runtime.core.RequestContext.setEvent(new DefaultMuleEvent(resultEvent.getMessage(),event));
    }
    return resultEvent;
  }
}
