{
  if (UninitialisedTransformer.getInstance() == transformer.get()) {
    UMOTransformer newTransformer=null;
    if (connector instanceof AbstractConnector) {
      if (UMOEndpoint.ENDPOINT_TYPE_SENDER.equals(type)) {
        newTransformer=((AbstractConnector)connector).getDefaultOutboundTransformer();
      }
 else       if (UMOEndpoint.ENDPOINT_TYPE_SENDER_AND_RECEIVER.equals(type)) {
        newTransformer=((AbstractConnector)connector).getDefaultInboundTransformer();
      }
 else {
        newTransformer=((AbstractConnector)connector).getDefaultInboundTransformer();
      }
    }
    transformer.compareAndSet(UninitialisedTransformer.getInstance(),newTransformer);
    updateTransformerEndpoint();
  }
}
