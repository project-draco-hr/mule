{
  UMODescriptor descriptor=getDescriptor("testComponent",FunctionalTestComponent.class.getName());
  final CountDown countDown=new CountDown(2);
  EventCallback callback=new EventCallback(){
    public void eventReceived(    UMOEventContext context,    Object Component){
      callbackCalled=true;
      assertNull(context.getCurrentTransaction());
      countDown.release();
    }
  }
;
  initialiseComponent(descriptor,UMOTransactionConfig.ACTION_NONE,callback);
  addResultListener(getOutDest().getAddress(),countDown);
  MuleManager.getInstance().start();
  afterInitialise();
  send(DEFAULT_MESSAGE,false,Session.AUTO_ACKNOWLEDGE);
  countDown.attempt(LOCK_WAIT);
  assertTrue("Only " + (countDown.initialCount() - countDown.currentCount()) + " of "+ countDown.initialCount()+ " checkpoints hit",countDown.attempt(0));
  assertNotNull(currentMsg);
  assertTrue(currentMsg instanceof TextMessage);
  assertEquals(DEFAULT_MESSAGE + " Received",((TextMessage)currentMsg).getText());
  assertTrue(callbackCalled);
  assertNull(currentTx);
}
