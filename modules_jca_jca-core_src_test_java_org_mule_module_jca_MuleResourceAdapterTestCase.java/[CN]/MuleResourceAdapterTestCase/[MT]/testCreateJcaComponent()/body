{
  MessageEndpointFactory endpointFactory=new MockEndpointFactory();
  JcaModel jcaModel=resourceAdapter.getJcaModel("jca");
  MuleActivationSpec activationSpec=new MuleActivationSpec();
  activationSpec.setEndpoint("test://testEndpoint");
  ImmutableEndpoint endpoint=resourceAdapter.createMessageInflowEndpoint(activationSpec);
  Service service=resourceAdapter.createJcaService(endpointFactory,jcaModel,endpoint);
  assertNotNull(service);
  assertEquals("JcaService#" + endpointFactory.hashCode(),service.getName());
  assertNotNull(service);
  assertTrue(service instanceof JcaService);
  assertNotNull(((JcaService)service).workManager);
  testJcaService(service);
  testEndpoint(service);
  Endpoint endpoint2=(Endpoint)service.getInboundRouter().getEndpoints().get(0);
  assertEquals(endpoint,endpoint2);
  assertEquals(endpointFactory,service.getServiceFactory().getOrCreate());
}
