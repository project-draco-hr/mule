{
  ManagedConnection managedConnection=mock(ManagedConnection.class);
  final Object connection=new Object();
  when(managedConnection.getConnection()).thenReturn(connection);
  when(operationContext.getVariable(CONNECTION_PARAM)).thenReturn(managedConnection);
  assertThat(resolver.resolve(operationContext),is(sameInstance(connection)));
}
