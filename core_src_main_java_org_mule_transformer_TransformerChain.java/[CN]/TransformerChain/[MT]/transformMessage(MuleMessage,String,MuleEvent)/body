{
  MuleMessage result=message;
  Object temp=message;
  Transformer lastTransformer=null;
  for (Iterator iterator=transformers.iterator(); iterator.hasNext(); ) {
    lastTransformer=(Transformer)iterator.next();
    temp=callTransformer(lastTransformer,temp,event);
    if (temp instanceof MuleMessage) {
      result=(MuleMessage)temp;
    }
 else {
      result.setPayload(temp);
    }
  }
  if (lastTransformer != null && lastTransformer.getReturnClass().equals(MuleMessage.class)) {
    return result;
  }
 else {
    return result.getPayload();
  }
}
