{
  withForceConsoleLog(new Runnable(){
    @Override public void run(){
      contextConfigurer.update(context);
      ArgumentCaptor<ConsoleAppender> appenderCaptor=ArgumentCaptor.forClass(ConsoleAppender.class);
      verify(context.getConfiguration()).addAppender(appenderCaptor.capture());
      Appender forcedConsoleAppender=appenderCaptor.getValue();
      assertThat(forcedConsoleAppender,notNullValue());
      assertThat(forcedConsoleAppender.getName(),equalTo(FORCED_CONSOLE_APPENDER_NAME));
      assertThat(forcedConsoleAppender.isStarted(),is(true));
      LoggerConfig rootLogger=((AbstractConfiguration)context.getConfiguration()).getRootLogger();
      verify(rootLogger).addAppender(forcedConsoleAppender,Level.ALL,null);
    }
  }
);
}
