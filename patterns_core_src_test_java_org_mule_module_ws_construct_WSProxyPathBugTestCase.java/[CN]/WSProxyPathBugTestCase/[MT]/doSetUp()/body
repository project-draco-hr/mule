{
  super.doSetUp();
  MockitoAnnotations.initMocks(this);
  when(mockMuleMessage.getPayloadAsString()).thenReturn(OUTBOUND_ADDRESS);
  inboundEvent=getTestEvent(null,getTestInboundEndpoint("test-inbound",INBOUND_ADDRESS));
  when(mockWsdlEndpoint.request(inboundEvent.getTimeout())).thenReturn(mockMuleMessage);
  inboundEvent.getMessage().setProperty("http.request",INBOUND_ADDRESS + "?wsdl",PropertyScope.INBOUND);
  when(mockEndpointBuilder.buildInboundEndpoint()).thenReturn(mockWsdlEndpoint);
  testOutboundEndpoint=MuleTestUtils.getTestOutboundEndpoint(MessageExchangePattern.REQUEST_RESPONSE,muleContext,OUTBOUND_ADDRESS,null);
  proxy=new WSProxy("test-proxy",muleContext,directInboundMessageSource,testOutboundEndpoint,Collections.EMPTY_LIST,Collections.EMPTY_LIST);
}
