{
  T moduleObject=null;
  try {
    moduleObject=this.getOAuthManager();
    String transformedAuthorizationUrl=this.toString(event,this.authorizationUrl);
    String transformedAccessTokenUrl=this.toString(event,this.accessTokenUrl);
    moduleObject.setAccessTokenUrl(transformedAccessTokenUrl);
    String location=moduleObject.buildAuthorizeUrl(this.getExtraParameters(event,moduleObject),transformedAuthorizationUrl,oauthCallback.getUrl());
    event.getMessage().setOutboundProperty("http.status","302");
    event.getMessage().setOutboundProperty("Location",location);
    return event;
  }
 catch (  Exception e) {
    throw new MessagingException(CoreMessages.failedToInvoke("authorize"),event,e);
  }
}
