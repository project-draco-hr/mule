{
  Path source=resolveExistingPath(config,filePath);
  Path target=source.getParent().resolve(newName);
  if (exists(config,target) && !overwrite) {
    throw new IllegalArgumentException(format("'%s' cannot be renamed because '%s' already exists",source,target));
  }
  try {
    doRename(source.toString(),target.toString());
    LOGGER.debug("{} renamed to {}",filePath,newName);
  }
 catch (  Exception e) {
    throw exception(format("Exception was found renaming '%s' to '%s'",source,newName),e);
  }
}
