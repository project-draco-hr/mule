{
  UMOConnector connector=createConnector();
  UMOEndpoint endpoint=getTestEndpoint("test",UMOImmutableEndpoint.ENDPOINT_TYPE_SENDER);
  UMOComponent component=getTestComponent(descriptor);
  Mock event=getMockEvent();
  event.expect("setSynchronous",C.IS_FALSE);
  event.expectAndReturn("isSynchronous",false);
  event.expectAndReturn("getEndpoint",endpoint);
  event.expect("setProperty",C.ANY_ARGS);
  event.expectAndReturn("getProperties",new HashMap());
  event.expectAndReturn("getEndpoint",getTestEndpoint("test",UMOEndpoint.ENDPOINT_TYPE_SENDER));
  connector.registerListener(component,endpoint);
  connector.startConnector();
  connector.getDispatcher("dummy").dispatch((UMOEvent)event.proxy());
  Thread.sleep(1000);
  event.verify();
}
