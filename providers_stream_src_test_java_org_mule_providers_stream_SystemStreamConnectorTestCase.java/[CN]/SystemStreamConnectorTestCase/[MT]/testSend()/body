{
  UMOConnector connector=createConnector();
  UMOComponent component=getTestComponent(descriptor);
  UMOEndpoint endpoint=getTestEndpoint("test",UMOImmutableEndpoint.ENDPOINT_TYPE_SENDER);
  Mock event=getMockEvent();
  event.expectAndReturn("getMessage",new MuleMessage("Hello",null));
  event.expectAndReturn("getTransformedMessageAsBytes","Hello".getBytes());
  event.expect("setSynchronous",C.IS_TRUE);
  event.expectAndReturn("getEndpoint",endpoint);
  event.expect("setProperty",C.ANY_ARGS);
  connector.registerListener(component,endpoint);
  connector.start();
  connector.getDispatcher("dummy").send((UMOEvent)event.proxy());
  event.verify();
}
