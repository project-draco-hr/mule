{
  EndpointURIEndpointBuilder endpointBuilder=new EndpointURIEndpointBuilder(TEST_URI,muleContext);
  if (filter != null) {
    endpointBuilder.addMessageProcessor(new MessageFilter(filter));
  }
  if (securityFilter != null) {
    endpointBuilder.addMessageProcessor(new SecurityFilterMessageProcessor(securityFilter));
  }
  if (transformer != null) {
    endpointBuilder.setMessageProcessors(Collections.<MessageProcessor>singletonList(transformer));
  }
  if (responseTransformer != null) {
    endpointBuilder.setResponseMessageProcessors(Collections.<MessageProcessor>singletonList(responseTransformer));
  }
  endpointBuilder.setExchangePattern(exchangePattern);
  endpointBuilder.setTransactionConfig(txConfig);
  InboundEndpoint endpoint=endpointBuilder.buildInboundEndpoint();
  return endpoint;
}
