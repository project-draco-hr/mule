{
  if (axisDescriptor == null) {
    axisDescriptor=(MuleDescriptor)MuleManager.getInstance().getModel().getDescriptor(AXIS_SERVICE_COMPONENT_NAME);
    if (axisDescriptor == null) {
      axisDescriptor=createAxisDescriptor();
    }
 else {
      MuleManager.getInstance().getModel().unregisterComponent(axisDescriptor);
    }
    if (axisDescriptor.getProperties().get("axisServer") == null) {
      axisDescriptor.getProperties().put("axisServer",axisServer);
    }
    axisDescriptor.setContainerManaged(false);
  }
  String serviceName=receiver.getComponent().getDescriptor().getName();
  String endpoint=receiver.getEndpointURI().getAddress() + "/" + serviceName;
  String scheme=ep.getScheme().toLowerCase();
  boolean sync=receiver.getEndpoint().isSynchronous();
  if (scheme.equals("http") || scheme.equals("tcp")) {
    sync=true;
  }
  Map endpointCounters=(Map)axisDescriptor.getProperties().get(ENDPOINT_COUNTERS_PROPERTY);
  if (endpointCounters == null) {
    endpointCounters=new HashMap();
  }
  Integer count=(Integer)endpointCounters.get(endpoint);
  if (count == null)   count=Integer.valueOf(0);
  if (count.intValue() == 0) {
    UMOEndpoint serviceEndpoint=new MuleEndpoint(endpoint,true);
    serviceEndpoint.setSynchronous(sync);
    serviceEndpoint.setName(ep.getScheme() + ":" + serviceName);
    serviceEndpoint.setFilter(receiver.getEndpoint().getFilter());
    axisDescriptor.getInboundRouter().addEndpoint(serviceEndpoint);
  }
  count=Integer.valueOf(count.intValue() + 1);
  endpointCounters.put(endpoint,count);
  axisDescriptor.getProperties().put(ENDPOINT_COUNTERS_PROPERTY,endpointCounters);
}
