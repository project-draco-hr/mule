{
  VoipConsumer voipConsumer=null;
  int response=0;
  try {
    voipConsumer=new VoipConsumer("voip-broker-sync-config.xml");
    String msg="Welcome to the Mule Voip Services Provisioning Example." + " This example was published as part of a featured article on java.net" + " titled 'Service Provisioning Through ESB' (http://today.java.net/lpt/a/233).";
    System.out.println(StringMessageHelper.getBoilerPlate(msg,'*',70));
    while (response != 'q') {
      System.out.println("\n[1] make a service request");
      System.out.println("[q] quit");
      System.out.println("\nPlease make your selection: ");
      response=getSelection();
      if (response == '1') {
        logger.info("Sending Request...");
        voipConsumer.requestSend("vm://VoipBrokerRequests");
        logger.info("Request Completed.");
      }
 else       if (response == 'q') {
        System.out.println("Bye");
        System.exit(0);
      }
 else {
        System.out.println("That response is not recognised, try again:");
      }
    }
  }
 catch (  Exception e) {
    System.err.println(e.getMessage());
    e.printStackTrace(System.err);
    System.exit(1);
  }
}
