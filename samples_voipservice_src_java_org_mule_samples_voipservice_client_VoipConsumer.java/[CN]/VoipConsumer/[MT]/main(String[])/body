{
  VoipConsumer voipConsumer=null;
  int response=0;
  try {
    voipConsumer=new VoipConsumer("voip-broker-sync-config.xml");
    System.out.println(StringMessageHelper.getBoilerPlate("Welcome to the Mule Voip Services Provisioning Example. This examples was published" + "\nas a part of a featured article on java.net titled Service Provisioning Through ESB" + "\nhttp://today.java.net/pub/a/today/2005/10/18/service-provisioning-through-esb.html.",'*',90));
    while (response != 'q') {
      System.out.println("\n[1] make a service request");
      System.out.println("[q] quit");
      System.out.println("\nPlease make your selection: ");
      response=getSelection();
      if (response == '1') {
        logger.info("Sending Request...");
        voipConsumer.requestSend("vm://VoipBrokerRequests");
        logger.info("Request Completed.");
      }
 else       if (response == 'q') {
        System.out.println("Bye");
        System.exit(0);
      }
 else {
        System.out.println("That response is not recognised, try again:");
      }
    }
  }
 catch (  Exception e) {
    System.err.println(e.getMessage());
    e.printStackTrace(System.err);
    System.exit(1);
  }
}
