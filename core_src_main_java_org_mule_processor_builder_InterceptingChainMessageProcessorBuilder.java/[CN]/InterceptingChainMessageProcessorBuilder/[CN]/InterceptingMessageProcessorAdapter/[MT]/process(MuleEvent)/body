{
  if (logger.isTraceEnabled()) {
    logger.trace("Invoking adapted MessageProcessor '" + delegate.getClass().getName() + "'");
  }
  if (delegate instanceof OutboundEndpoint) {
    event=new DefaultMuleEvent(event.getMessage(),(OutboundEndpoint)delegate,event.getSession());
  }
  MuleEvent delegateResult=delegate.process(event);
  if (delegateResult != null) {
    return processNext(delegateResult);
  }
 else   if (event.getFlowConstruct() instanceof SimpleFlowConstruct) {
    return processNext(OptimizedRequestContext.criticalSetEvent(event));
  }
 else {
    return null;
  }
}
