{
  MuleClient client=muleContext.getClient();
  List<Object> results=new ArrayList<Object>();
  int number=1;
  Map<String,Object> props=new HashMap<String,Object>();
  for (int i=0; i < number; i++) {
    props.put("X-Message-Number",String.valueOf(i));
    MuleMessage msg=client.send(getRequestResponseEndpoint(),"Message " + i,props);
    assertNotNull(msg);
    results.add(msg.getPayload());
  }
  assertEquals(number,results.size());
  for (int i=0; i < number; i++) {
    assertEquals("Message " + i,results.get(i).toString());
  }
}
