{
  try {
    DefaultMuleClassPathConfig classPath=new DefaultMuleClassPathConfig(MuleBootstrap.lookupMuleHome(),MuleBootstrap.lookupMuleBase());
    final List urlsList=classPath.getURLs();
    ClassLoader parent=MuleBootstrapUtils.class.getClassLoader();
    URLClassLoader muleSystemCl=new URLClassLoader((URL[])urlsList.toArray(new URL[urlsList.size()]),parent);
    Thread.currentThread().setContextClassLoader(muleSystemCl);
    Class muleClass=Thread.currentThread().getContextClassLoader().loadClass("org.mule.MuleServer");
    Constructor c=muleClass.getConstructor(String[].class);
    mule=c.newInstance(new Object[]{args});
    Method startMethod=muleClass.getMethod("start",boolean.class,boolean.class);
    startMethod.invoke(mule,false,false);
    return null;
  }
 catch (  Exception e) {
    e.printStackTrace();
    return new Integer(1);
  }
}
