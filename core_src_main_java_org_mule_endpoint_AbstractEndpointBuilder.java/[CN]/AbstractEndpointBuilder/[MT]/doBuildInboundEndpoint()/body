{
  prepareToBuildEndpoint();
  EndpointURI endpointURI=uriBuilder.getEndpoint();
  endpointURI.initialise();
  Connector connector=getConnector();
  if (connector != null && !connector.supportsProtocol(endpointURI.getFullScheme())) {
    throw new IllegalArgumentException(CoreMessages.connectorSchemeIncompatibleWithEndpointScheme(connector.getProtocol(),endpointURI).getMessage());
  }
  List<Transformer> transformers=getInboundTransformers(connector,endpointURI);
  List<Transformer> responseTransformers=getInboundEndpointResponseTransformers(connector,endpointURI);
  checkInboundExchangePattern();
  return new DefaultInboundEndpoint(connector,endpointURI,transformers,responseTransformers,getName(endpointURI),getProperties(),getTransactionConfig(),getFilter(connector),getDefaultDeleteUnacceptedMessages(connector),getSecurityFilter(),messageExchangePattern,getResponseTimeout(connector),getInitialState(connector),getEndpointEncoding(connector),name,muleContext,getRetryPolicyTemplate(connector),getMessageProcessorsFactory(),messageProcessors,responseMessageProcessors);
}
