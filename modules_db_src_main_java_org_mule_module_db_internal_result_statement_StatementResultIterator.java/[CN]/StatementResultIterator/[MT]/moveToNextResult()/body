{
  if (connection.getMetaData().supportsMultipleOpenResults()) {
    statement.getMoreResults(Statement.KEEP_CURRENT_RESULT);
  }
 else {
    if (hasProcessedResultSet && resultSetHandler.requiresMultipleOpenedResults()) {
      throw new IllegalStateException("Database does not supports streaming of resultSets on stored procedures");
    }
 else {
      statement.getMoreResults();
    }
  }
}
