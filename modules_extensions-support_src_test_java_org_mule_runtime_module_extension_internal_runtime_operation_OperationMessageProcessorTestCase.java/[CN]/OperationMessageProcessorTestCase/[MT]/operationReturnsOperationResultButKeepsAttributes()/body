{
  Object payload=new Object();
  MediaType mediaType=ANY.withCharset(getDefaultEncoding(context));
  when(operationExecutor.execute(any(OperationContext.class))).thenReturn(OperationResult.builder().output(payload).mediaType(mediaType).build());
  event=MuleEvent.builder(event).message(MuleMessage.builder().payload("").attributes(mock(Attributes.class)).build()).build();
  MuleMessage message=messageProcessor.process(event).getMessage();
  assertThat(message,is(notNullValue()));
  assertThat(message.getPayload(),is(sameInstance(payload)));
  assertThat(message.getAttributes(),is(NULL_ATTRIBUTES));
  assertThat(message.getDataType().getMediaType(),equalTo(mediaType));
}
