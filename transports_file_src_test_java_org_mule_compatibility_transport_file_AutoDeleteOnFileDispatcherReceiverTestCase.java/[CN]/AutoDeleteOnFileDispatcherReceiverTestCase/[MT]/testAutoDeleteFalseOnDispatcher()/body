{
  ((FileConnector)connector).setAutoDelete(false);
  MuleEvent event=getTestEvent("TestData");
  setCurrentEvent(event);
  MuleMessage message=new DefaultMuleEventContext(event).requestEvent(getTestEndpointURI() + "/" + tempDirName+ "?connector=FileConnector",50000);
  assertNotNull(getPayloadAsString(message));
  File[] files=tempDir.listFiles();
  assertTrue(files.length > 0);
  for (int i=0; i < files.length; i++) {
    assertTrue(files[i].getName().equals(message.getInboundProperty(FileConnector.PROPERTY_ORIGINAL_FILENAME)));
    files[i].delete();
  }
}
