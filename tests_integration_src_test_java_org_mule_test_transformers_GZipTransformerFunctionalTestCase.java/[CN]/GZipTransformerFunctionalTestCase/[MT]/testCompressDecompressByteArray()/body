{
  byte[] testDataByteArray=TEST_DATA.getBytes();
  MuleClient client=muleContext.getClient();
  MuleEvent muleEvent=runFlow("compressInput",testDataByteArray);
  MuleMessage compressedResponse=muleEvent.getMessage();
  assertNotNull(compressedResponse);
  assertTrue(compressedResponse.getPayload() instanceof byte[]);
  muleEvent=runFlow("decompressInput",compressedResponse.getPayload());
  MuleMessage uncompressedResponse=muleEvent.getMessage();
  assertNotNull(uncompressedResponse);
  assertTrue(uncompressedResponse.getPayload() instanceof byte[]);
  String uncompressedStr=new String((byte[])uncompressedResponse.getPayload());
  assertEquals(TEST_DATA,uncompressedStr);
}
