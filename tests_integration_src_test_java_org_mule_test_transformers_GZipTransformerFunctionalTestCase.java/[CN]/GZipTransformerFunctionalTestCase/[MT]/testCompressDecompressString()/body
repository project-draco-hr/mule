{
  MuleClient client=muleContext.getClient();
  MuleEvent muleEvent=runFlow("compressInput",TEST_DATA);
  MuleMessage compressedResponse=muleEvent.getMessage();
  assertNotNull(compressedResponse);
  assertTrue(compressedResponse.getPayload() instanceof byte[]);
  byte[] bytes=new GZipCompression().uncompressByteArray((byte[])compressedResponse.getPayload());
  String clientUncompressed=new String(bytes,"UTF8");
  assertEquals(TEST_DATA,clientUncompressed);
  muleEvent=runFlow("decompressInputString",compressedResponse.getPayload());
  MuleMessage uncompressedResponse=muleEvent.getMessage();
  assertNotNull(uncompressedResponse);
  assertTrue(uncompressedResponse.getPayload() instanceof String);
  assertEquals(TEST_DATA,uncompressedResponse.getPayload());
}
