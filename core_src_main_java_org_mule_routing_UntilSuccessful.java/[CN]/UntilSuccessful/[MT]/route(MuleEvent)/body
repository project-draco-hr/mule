{
  try {
    ensurePayloadSerializable(event);
  }
 catch (  final Exception e) {
    throw new MessagingException(MessageFactory.createStaticMessage("Failed to prepare message for processing"),event,e);
  }
  try {
    scheduleForProcessing(event);
    if (ackExpression == null) {
      return null;
    }
    Object ackResponsePayload=muleContext.getExpressionManager().evaluate(ackExpression,event.getMessage());
    return new DefaultMuleEvent(new DefaultMuleMessage(ackResponsePayload,event.getMessage(),muleContext),event);
  }
 catch (  ObjectStoreException ose) {
    throw new MessagingException(MessageFactory.createStaticMessage("Failed to schedule the event for processing"),event,ose);
  }
}
