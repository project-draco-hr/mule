{
  try {
    XMLStreamReader xsr;
    if (payload instanceof StaxSource) {
      xsr=((StaxSource)payload).getXMLStreamReader();
    }
 else     if (payload instanceof Source) {
      xsr=getXMLInputFactory().createXMLStreamReader((Source)payload);
    }
 else     if (payload instanceof Document) {
      xsr=getXMLInputFactory().createXMLStreamReader(new DOMSource((Node)payload));
    }
 else     if (payload instanceof InputStream) {
      xsr=getXMLInputFactory().createXMLStreamReader((InputStream)payload);
    }
 else     if (payload instanceof String) {
      xsr=getXMLInputFactory().createXMLStreamReader(new StringReader((String)payload));
    }
 else     if (payload instanceof byte[]) {
      xsr=getXMLInputFactory().createXMLStreamReader(new ByteArrayInputStream((byte[])payload));
    }
 else {
      throw new TransformerException(MessageFactory.createStaticMessage("Unable to convert " + payload.getClass() + " to XMLStreamReader."));
    }
    if (reversible) {
      return new ReversibleXMLStreamReader(xsr);
    }
 else {
      return xsr;
    }
  }
 catch (  XMLStreamException e) {
    throw new TransformerException(this,e);
  }
}
