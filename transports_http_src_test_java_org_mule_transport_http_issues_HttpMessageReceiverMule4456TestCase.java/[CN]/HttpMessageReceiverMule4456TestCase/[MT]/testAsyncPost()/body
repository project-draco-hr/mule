{
  FunctionalTestComponent component=getFunctionalTestComponent("AsyncService");
  component.setEventCallback(new EventCallback(){
    @Override public void eventReceived(    MuleEventContext context,    Object comp) throws Exception {
      Thread.sleep(200);
      context.getMessageAsString();
    }
  }
);
  PostMethod request=new PostMethod("http://localhost:" + dynamicPort1.getNumber());
  RequestEntity entity=new StringRequestEntity(MESSAGE,"text/plain",muleContext.getConfiguration().getDefaultEncoding());
  request.setRequestEntity(entity);
  httpClient.executeMethod(request);
  MuleMessage message=muleClient.request("vm://out",1000);
  assertNotNull(message);
  assertEquals(MESSAGE,message.getPayloadAsString());
}
