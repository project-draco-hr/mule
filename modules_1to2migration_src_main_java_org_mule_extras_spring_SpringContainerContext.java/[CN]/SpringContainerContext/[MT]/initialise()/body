{
  if (configXml != null) {
    final String encoding=managementContext.getRegistry().getConfiguration().getDefaultEncoding();
    Resource[] resources;
    try {
      resources=new Resource[]{new CachedResource(configXml,encoding)};
    }
 catch (    UnsupportedEncodingException e) {
      throw new InitialisationException(CoreMessages.failedToConvertStringUsingEncoding(encoding),e,this);
    }
    setExternalBeanFactory(new MuleApplicationContext(resources));
  }
 else   if (configResources != null) {
    String[] resources=StringUtils.splitAndTrim(configResources,",");
    if (logger.isDebugEnabled()) {
      logger.debug("There is/are " + resources.length + " configuration resource(s): "+ ArrayUtils.toString(resources));
    }
    setExternalBeanFactory(new MuleApplicationContext(resources));
  }
}
