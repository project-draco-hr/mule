{
  StringBuffer buffer=null;
  int ch=-1;
  while ((ch=read()) >= 0) {
    if (buffer == null) {
      buffer=new StringBuffer();
    }
    if (ch == '\r') {
      ch=read();
      if (ch > 0 && ch != '\n') {
        unread(ch);
      }
      break;
    }
 else     if (ch == '\n') {
      break;
    }
    buffer.append((char)ch);
  }
  return buffer;
}
