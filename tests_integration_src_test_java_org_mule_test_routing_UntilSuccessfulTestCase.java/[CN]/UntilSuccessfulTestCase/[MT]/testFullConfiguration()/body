{
  final String payload=RandomStringUtils.randomAlphanumeric(20);
  final MuleMessage response=client.send("vm://input-2",payload,null);
  assertEquals("ACK",response.getPayloadAsString());
  List<Object> receivedPayloads=ponderUntilMessageCountReceivedByTargetMessageProcessor(3);
  assertEquals(3,receivedPayloads.size());
  for (int i=0; i <= 2; i++) {
    assertEquals(payload,receivedPayloads.get(i));
  }
  receivedPayloads=ponderUntilMessageCountReceivedByDlqProcessor(1);
  assertEquals(1,receivedPayloads.size());
  assertEquals(payload,receivedPayloads.get(0));
}
