{
  String wsdlUrl=endpoint.getEndpointURI().getAddress();
  Parser parser=new Parser();
  if (endpoint.getEndpointURI().getUserInfo() != null) {
    parser.setUsername(endpoint.getEndpointURI().getUser());
    parser.setPassword(endpoint.getEndpointURI().getPassword());
  }
  parser.run(wsdlUrl);
  Map<?,?> map=parser.getSymbolTable().getHashMap();
  List<Object> entries=new ArrayList<Object>();
  for (Iterator<?> it=map.entrySet().iterator(); it.hasNext(); ) {
    Map.Entry<?,?> entry=(Map.Entry<?,?>)it.next();
    Vector<?> v=(Vector<?>)entry.getValue();
    for (Iterator<?> it2=v.iterator(); it2.hasNext(); ) {
      SymTabEntry e=(SymTabEntry)it2.next();
      if (ServiceEntry.class.isInstance(e)) {
        entries.add(entry.getKey());
      }
    }
  }
  if (entries.size() != 1) {
    throw new Exception("Need one and only one service entry, found " + entries.size());
  }
  Service axisService=new Service(parser,(QName)entries.get(0));
  axisService.setEngineConfiguration(clientConfig);
  axisService.setEngine(new AxisClient(clientConfig));
  event.getMessage().setOutboundProperty(SoapConstants.METHOD_NAMESPACE_PROPERTY,parser.getCurrentDefinition().getTargetNamespace());
  return axisService;
}
