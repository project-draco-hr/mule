{
  if (endpoint == null) {
    return;
  }
  if (endpoint.getType().equals(UMOImmutableEndpoint.ENDPOINT_TYPE_RECEIVER)) {
    endpoint=configure(endpoint,readOnly,false);
    addReceiveProvider(endpoint,readOnly);
  }
 else   if (endpoint.getType().equals(UMOImmutableEndpoint.ENDPOINT_TYPE_SENDER) || endpoint.getType().equals(UMOImmutableEndpoint.ENDPOINT_TYPE_SENDER_AND_RECEIVER)) {
    endpoint=configure(endpoint,readOnly,true);
    addSendProvider(endpoint,readOnly);
  }
 else {
    throw new IllegalArgumentException("Provider type not recognised: " + endpoint.getType());
  }
}
