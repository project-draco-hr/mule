{
  UMOFilter filter;
  if (wildcardMatch) {
    filter=new WildcardFilter(endpointUri);
  }
 else {
    filter=new EqualsFilter(endpointUri);
  }
  Map.Entry entry=null;
  ArrayList list=new ArrayList();
  UMOEndpoint endpoint;
  for (Iterator i=endpoints.entrySet().iterator(); i.hasNext(); ) {
    entry=(Map.Entry)i.next();
    endpoint=(UMOEndpoint)entry.getValue();
    if (filter.accept(endpoint.getEndpointURI())) {
      list.add(entry.getValue());
    }
  }
  return (MuleEndpoint[])list.toArray(new MuleEndpoint[list.size()]);
}
