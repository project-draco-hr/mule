{
  AbstractConnector connector=(AbstractConnector)endpoint.getConnector();
  if (connector.isEnableMessageEvents()) {
    String component=null;
    if (event.getFlowConstruct() != null) {
      component=event.getFlowConstruct().getName();
    }
    int notificationAction;
    if (endpoint.getExchangePattern().hasResponse()) {
      notificationAction=EndpointMessageNotification.MESSAGE_SENT;
    }
 else {
      notificationAction=EndpointMessageNotification.MESSAGE_DISPATCHED;
    }
    connector.fireNotification(new EndpointMessageNotification(event.getMessage(),endpoint,component,notificationAction));
  }
  return event;
}
