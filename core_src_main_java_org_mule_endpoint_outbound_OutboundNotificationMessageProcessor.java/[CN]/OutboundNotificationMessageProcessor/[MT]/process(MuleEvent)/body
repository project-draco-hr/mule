{
  AbstractConnector connector=(AbstractConnector)endpoint.getConnector();
  if (connector.isEnableMessageEvents()) {
    int notificationAction;
    if (endpoint.getExchangePattern().hasResponse()) {
      notificationAction=EndpointMessageNotification.MESSAGE_SENT;
    }
 else {
      notificationAction=EndpointMessageNotification.MESSAGE_DISPATCHED;
    }
    connector.fireNotification(new EndpointMessageNotification(event.getMessage(),endpoint,event.getFlowConstruct(),notificationAction));
  }
  return event;
}
