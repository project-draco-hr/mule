{
  final ApplicationDescriptor appDescriptor=mock(ApplicationDescriptor.class);
  when(appDescriptor.getLogConfigFile()).thenReturn(customLogConfig);
  final MuleLoggerContextFactory loggerCtxFactory=spy(new MuleLoggerContextFactory());
  doReturn(appDescriptor).when(loggerCtxFactory).fetchApplicationDescriptor(any(ArtifactClassLoader.class));
  return loggerCtxFactory;
}
