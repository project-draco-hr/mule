{
  String headerValue;
  String headerName;
  UMOMessage msg=context.getMessage();
  for (Iterator iterator=msg.getPropertyNames().iterator(); iterator.hasNext(); ) {
    headerName=(String)iterator.next();
    headerValue=msg.getStringProperty(headerName,null);
    if (HttpConstants.REQUEST_HEADER_NAMES.get(headerName) == null) {
      if (headerName.startsWith(MuleProperties.PROPERTY_PREFIX)) {
        headerName=new StringBuffer(30).append("X-").append(headerName).toString();
      }
      if (headerName.startsWith(HttpConstants.HEADER_CONTENT_LENGTH)) {
        if (httpMethod.getResponseHeader(HttpConstants.HEADER_CONTENT_LENGTH) == null) {
          httpMethod.addRequestHeader(headerName,headerValue);
        }
      }
 else {
        httpMethod.addRequestHeader(headerName,headerValue);
      }
    }
  }
  if (context.getMessage().getPayload() instanceof InputStream) {
    httpMethod.addRequestHeader(HttpConstants.HEADER_CONTENT_TYPE,"multipart/related");
  }
}
