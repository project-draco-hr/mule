{
  boolean response=result != null && !NullPayload.getInstance().equals(result.getMessage().getPayload()) && !isOneway(m.getExchange());
  if (response) {
    InputStream is=(InputStream)result.getMuleContext().getTransformationService().transform(result.getMessage(),DataType.INPUT_STREAM).getPayload();
    PushbackInputStream pb=new PushbackInputStream(is);
    result.setMessage(new DefaultMuleMessage(pb,result.getMessage(),result.getMuleContext(),DataType.XML_STRING));
    int b=pb.read();
    if (b != -1) {
      pb.unread(b);
      return pb;
    }
  }
  return null;
}
