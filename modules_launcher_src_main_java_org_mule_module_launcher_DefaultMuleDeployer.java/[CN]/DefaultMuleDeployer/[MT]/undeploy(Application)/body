{
  final ReentrantLock lock=deploymentService.getLock();
  try {
    if (!lock.tryLock(0,TimeUnit.SECONDS)) {
      return;
    }
    app.stop();
    app.dispose();
    final File appDir=new File(MuleContainerBootstrapUtils.getMuleAppsDir(),app.getAppName());
    FileUtils.deleteDirectory(appDir);
    File marker=new File(MuleContainerBootstrapUtils.getMuleAppsDir(),String.format("%s-anchor.txt",app.getAppName()));
    marker.delete();
    Introspector.flushCaches();
  }
 catch (  InterruptedException e) {
    Thread.currentThread().interrupt();
    return;
  }
catch (  Throwable t) {
    logger.error(t);
  }
 finally {
    if (lock.isHeldByCurrentThread()) {
      lock.unlock();
    }
  }
}
