{
  final Map<String,Object> options=StartupContext.get().getStartupOptions();
  String appString=(String)options.get("app");
  final File appsDir=MuleContainerBootstrapUtils.getMuleAppsFile();
  String[] apps;
  if (appString == null) {
    apps=appsDir.list(DirectoryFileFilter.DIRECTORY);
  }
 else {
    apps=appString.split(":");
  }
  for (  String app : apps) {
    final ApplicationWrapper<Map<String,Object>> a=new ApplicationWrapper<Map<String,Object>>(new DefaultMuleApplication(app));
    a.setMetaData(options);
    applications.add(a);
  }
  for (  Application application : applications) {
    try {
      application.install();
      application.init();
      application.start();
    }
 catch (    Throwable t) {
      t.printStackTrace();
    }
  }
  scheduleAppMonitor(new AppDirFileWatcher(appsDir));
}
