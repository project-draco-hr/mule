{
  OutputStream out=connector.getOutputStream();
  if (out == null) {
    throw new DispatchException(new Message("stream",1,event.getEndpoint().getEndpointURI().getAddress()),event.getMessage(),event.getEndpoint());
  }
  if (connector instanceof SystemStreamConnector) {
    SystemStreamConnector ssc=(SystemStreamConnector)connector;
    if (StringUtils.isNotBlank(ssc.getOutputMessage())) {
      out.write(ssc.getOutputMessage().getBytes());
    }
  }
  Object data=event.getTransformedMessage();
  if (data instanceof byte[]) {
    out.write((byte[])data);
  }
 else {
    out.write(data.toString().getBytes());
  }
  out.flush();
}
