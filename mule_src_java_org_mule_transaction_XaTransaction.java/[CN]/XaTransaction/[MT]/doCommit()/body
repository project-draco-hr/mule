{
  try {
    transaction.commit();
  }
 catch (  RollbackException e) {
    throw new TransactionRollbackException(new Message(Messages.TX_MARKED_FOR_ROLLBACK),e);
  }
catch (  HeuristicRollbackException e) {
    throw new TransactionRollbackException(new Message(Messages.TX_MARKED_FOR_ROLLBACK),e);
  }
catch (  Exception e) {
    throw new IllegalTransactionStateException(new Message(Messages.TX_COMMIT_FAILED),e);
  }
}
