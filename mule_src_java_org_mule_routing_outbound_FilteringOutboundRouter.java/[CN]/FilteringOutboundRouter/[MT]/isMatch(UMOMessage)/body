{
  if (getFilter() == null)   return true;
  if (getFilter() instanceof MessageFilter) {
    return getFilter().accept(message);
  }
  try {
    Object payload=message.getPayload();
    if (transformer != null) {
      payload=transformer.transform(message);
    }
    return getFilter().accept(payload);
  }
 catch (  Exception e) {
    throw new RoutingException("Failed to transform event payload: " + e,e);
  }
}
