{
  if (endpoint == null || component == null)   throw new IllegalArgumentException("The endpoint and component cannot be null when registering a listener");
  if (endpoint.getEndpointURI() == null) {
    throw new InitialisationException(new Message(Messages.ENDPOINT_NULL_FOR_LISTENER),this);
  }
  UMOMessageReceiver receiver=null;
  logger.info("registering listener: " + component.getDescriptor().getName() + " on endpointUri: "+ endpoint.getEndpointURI().getAddress());
  if (shouldCreateServer(endpoint.getEndpointURI().getAddress())) {
    receiver=new GlueMessageReceiver(this,component,endpoint,true);
    receivers.put(endpoint.getEndpointURI().getAddress(),receiver);
    serverEndpoints.add(endpoint.getEndpointURI().getAddress());
  }
 else {
    receiver=new GlueMessageReceiver(this,component,endpoint,false);
    receivers.put(endpoint.getEndpointURI().getAddress() + "/" + component.getDescriptor().getName(),receiver);
  }
  return receiver;
}
