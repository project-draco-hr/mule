{
  final Integer port=(portId == 1) ? port1.getNumber() : port2.getNumber();
  final String wsdl=new String(FileCopyUtils.copyToByteArray((InputStream)muleClient.request("http://localhost:" + port + "/weather-forecast?wsdl",getTestTimeoutSecs() * 1000L).getPayload()));
  assertTrue(wsdl.contains("GetWeatherByZipCode"));
  final String weatherForecast=muleClient.send("wsdl-cxf:http://localhost:" + port + "/weather-forecast?wsdl&method=GetWeatherByZipCode","95050",null,getTestTimeoutSecs() * 1000).getPayloadAsString();
  assertEquals(new WeatherForecaster().getByZipCode("95050"),weatherForecast);
}
