{
  MuleEvent muleEvent=getTestEvent(SOME_VALUE);
  XaTxQueueTransactionJournal transactionJournal=new XaTxQueueTransactionJournal(temporaryFolder.getRoot().getAbsolutePath(),muleContext);
  int numberOfOffers=1000;
  for (int i=0; i < numberOfOffers; i++) {
    transactionJournal.logAdd(TX_ID,mockQueueInfo,muleEvent);
  }
  transactionJournal.logCommit(TX_ID);
  transactionJournal.close();
  transactionJournal=new XaTxQueueTransactionJournal(temporaryFolder.getRoot().getAbsolutePath(),muleContext);
  Multimap<Xid,XaQueueTxJournalEntry> allEntries=transactionJournal.allLogEntries();
  assertThat(allEntries.size(),is(1001));
}
