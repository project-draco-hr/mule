{
  MuleEvent muleEvent=getTestEvent(SOME_VALUE);
  XaTxQueueTransactionJournal transactionJournal=new XaTxQueueTransactionJournal(temporaryFolder.getRoot().getAbsolutePath(),muleContext);
  transactionJournal.logRemove(TX_ID,mockQueueInfo,muleEvent);
  transactionJournal.close();
  transactionJournal=new XaTxQueueTransactionJournal(temporaryFolder.getRoot().getAbsolutePath(),muleContext);
  Multimap<Xid,XaQueueTxJournalEntry> allEntries=transactionJournal.allLogEntries();
  assertThat(allEntries.size(),is(1));
  assertThat(allEntries.get(TX_ID).size(),is(1));
  XaQueueTxJournalEntry journalEntry=allEntries.get(TX_ID).iterator().next();
  assertThat(journalEntry.getQueueName(),is(QUEUE_NAME));
  assertThat(((MuleEvent)journalEntry.getValue()).getMessage().getPayloadAsString(),is(SOME_VALUE));
  assertThat(journalEntry.isRemove(),is(true));
}
