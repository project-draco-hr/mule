{
  TransactionalQueueManager mgr=createQueueManager();
  try {
    mgr.start();
    QueueSession s=mgr.getQueueSession();
    Queue q=s.getQueue("queue1");
    Random rnd=new Random();
    long t0=System.currentTimeMillis();
    for (int i=0; i < 1; i++) {
      for (int j=0; j < 500; j++) {
        byte[] o=new byte[2048];
        rnd.nextBytes(o);
        q.put(o);
      }
      while (q.size() > 0) {
        q.take();
      }
    }
    long t1=System.currentTimeMillis();
    logger.info("Time: " + (t1 - t0) + " ms");
  }
  finally {
    mgr.stop(AbstractResourceManager.SHUTDOWN_MODE_NORMAL);
  }
}
