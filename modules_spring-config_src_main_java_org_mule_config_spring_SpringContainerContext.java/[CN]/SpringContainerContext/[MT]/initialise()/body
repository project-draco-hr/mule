{
  if (configFile == null) {
    if (configuration != null) {
      try {
        configure(configuration);
        return LifecycleTransitionResult.OK;
      }
 catch (      ContainerException e) {
        throw new InitialisationException(e,this);
      }
    }
 else {
      return LifecycleTransitionResult.OK;
    }
  }
  try {
    if (ClassUtils.getResource(configFile,getClass()) == null) {
      logger.warn("Spring config resource: " + configFile + " not found on class path, attempting to load it from local file");
      setExternalBeanFactory(new FileSystemXmlApplicationContext(configFile));
    }
 else {
      logger.info("Loading Spring config from classpath, resource is: " + configFile);
      setExternalBeanFactory(new ClassPathXmlApplicationContext(configFile));
    }
  }
 catch (  BeansException e) {
    throw new InitialisationException(new ConfigurationException(CoreMessages.failedToLoad("Application Context: " + configFile),e),this);
  }
  return LifecycleTransitionResult.OK;
}
