{
  if (src instanceof MuleMessage) {
    return ((MuleMessage)src).getDataType().getMediaType().getCharset().orElse(getDefaultEncoding(muleContext));
  }
 else {
    return getDefaultEncoding(muleContext);
  }
}
