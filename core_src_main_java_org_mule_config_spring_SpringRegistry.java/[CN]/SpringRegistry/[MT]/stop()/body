{
  started.set(false);
  stopping.set(true);
  fireSystemEvent(new ManagerNotification(id,null,null,ManagerNotification.MANAGER_STOPPING));
  stopConnectors();
  stopAgents();
  logger.debug("Stopping model...");
  fireSystemEvent(new ManagerNotification(id,null,null,ManagerNotification.MANAGER_STOPPING_MODELS));
  for (Iterator i=getModels().values().iterator(); i.hasNext(); ) {
    UMOModel model=(UMOModel)i.next();
    model.stop();
  }
  fireSystemEvent(new ManagerNotification(id,null,null,ManagerNotification.MANAGER_STOPPED_MODELS));
  stopping.set(false);
  fireSystemEvent(new ManagerNotification(id,null,null,ManagerNotification.MANAGER_STOPPED));
}
