{
  if (!initialised.get()) {
    initialising.set(true);
    containerContext=new MultiContainerContext();
    fireSystemEvent(new ManagerNotification(id,null,null,ManagerNotification.MANAGER_INITIALISNG));
    if (id == null) {
      logger.warn("No unique id has been set on this manager");
    }
    try {
      try {
        TransactionalQueueManager queueMgr=new TransactionalQueueManager();
        QueuePersistenceStrategy ps=new CachingPersistenceStrategy(new MemoryPersistenceStrategy());
        queueMgr.setPersistenceStrategy(ps);
      }
 catch (      Exception e) {
        throw new InitialisationException(new Message(Messages.INITIALISATION_FAILURE_X,"QueueManager"),e);
      }
    }
 catch (    InitialisationException e) {
      throw e;
    }
catch (    Exception e) {
      throw new InitialisationException(e,this);
    }
 finally {
      initialised.set(true);
      initialising.set(false);
      fireSystemEvent(new ManagerNotification(id,null,null,ManagerNotification.MANAGER_INITIALISED));
    }
  }
}
