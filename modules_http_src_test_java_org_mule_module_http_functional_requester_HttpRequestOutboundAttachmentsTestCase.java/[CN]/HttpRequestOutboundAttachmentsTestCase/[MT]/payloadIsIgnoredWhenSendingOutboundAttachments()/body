{
  Flow flow=(Flow)getFlowConstruct("requestFlow");
  MuleEvent event=getTestEvent(TEST_MESSAGE);
  event.getMessage().addOutboundAttachment("attachment1","Contents 1",TEXT);
  event.getMessage().addOutboundAttachment("attachment2","Contents 2",HTML);
  flow.process(event);
  assertThat(requestContentType,startsWith("multipart/form-data; boundary="));
  assertThat(parts.size(),equalTo(2));
  assertPart("attachment1",TEXT,"Contents 1");
  assertPart("attachment2",HTML,"Contents 2");
}
