{
  Object flow=muleContext.getRegistry().lookupObject("TestComponent4");
  assertNotNull(flow);
  assertNotNull(((Flow)flow).getMessageSource());
  assertEquals(1,((DefaultInboundEndpoint)((Flow)flow).getMessageSource()).getMessageProcessors().size());
  ImmutableEndpoint endpoint=((DefaultInboundEndpoint)((Flow)flow).getMessageSource());
  assertNotNull(endpoint);
  assertEquals(VMConnector.VM,endpoint.getConnector().getProtocol().toLowerCase());
  assertEquals("queue4",endpoint.getEndpointURI().getAddress());
  assertFalse(endpoint.getMessageProcessors().isEmpty());
  assertTrue(endpoint.getMessageProcessors().get(0) instanceof ObjectToXml);
  assertTrue(endpoint instanceof InboundEndpoint);
}
