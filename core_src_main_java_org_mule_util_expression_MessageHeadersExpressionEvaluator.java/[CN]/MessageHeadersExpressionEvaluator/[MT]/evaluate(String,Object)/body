{
  if (message instanceof MessageAdapter) {
    StringTokenizer tokenizer=new StringTokenizer(expression,DELIM);
    Map result=new HashMap(tokenizer.countTokens());
    while (tokenizer.hasMoreTokens()) {
      String s=tokenizer.nextToken();
      s=s.trim();
      Object val=((MessageAdapter)message).getProperty(s);
      if (val != null) {
        result.put(s,val);
      }
    }
    if (result.size() == 0) {
      return null;
    }
 else {
      return result;
    }
  }
  return null;
}
