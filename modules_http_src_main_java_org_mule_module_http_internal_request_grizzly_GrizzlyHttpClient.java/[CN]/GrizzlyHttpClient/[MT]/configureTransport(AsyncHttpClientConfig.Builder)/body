{
  GrizzlyAsyncHttpProviderConfig providerConfig=new GrizzlyAsyncHttpProviderConfig();
  CompositeTransportCustomizer compositeTransportCustomizer=new CompositeTransportCustomizer();
  compositeTransportCustomizer.addTransportCustomizer(new SameThreadIOStrategyTransportCustomizer());
  if (clientSocketProperties != null) {
    compositeTransportCustomizer.addTransportCustomizer(new SocketConfigTransportCustomizer(clientSocketProperties));
  }
  providerConfig.addProperty(GrizzlyAsyncHttpProviderConfig.Property.TRANSPORT_CUSTOMIZER,compositeTransportCustomizer);
  builder.setAsyncHttpClientProviderConfig(providerConfig);
}
