{
  if (doNotCopy.matcher(directory.getName()).matches())   return;
  File files[]=directory.listFiles();
  for (int i=0; i < files.length; i++) {
    if (files[i].isDirectory())     traverse(jar,rootlength,files[i],doNotCopy);
 else {
      String path=files[i].getAbsolutePath().substring(rootlength + 1);
      if (File.separatorChar != '/')       path=path.replace(File.separatorChar,'/');
      jar.putResource(path,new FileResource(files[i]),true);
    }
  }
}
