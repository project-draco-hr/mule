{
  DefaultMuleApplication delegate;
  if (StringUtils.isEmpty(descriptor.getDomain())) {
    delegate=new DefaultMuleApplication(descriptor,applicationClassLoaderFactory,domainFactory.createDefaultDomain());
  }
 else {
    delegate=new DefaultMuleApplication(descriptor,applicationClassLoaderFactory,domainFactory.createArtifact(descriptor.getDomain()));
  }
  if (deploymentListener != null) {
    delegate.setDeploymentListener(deploymentListener);
  }
  return new ApplicationWrapper(delegate);
}
