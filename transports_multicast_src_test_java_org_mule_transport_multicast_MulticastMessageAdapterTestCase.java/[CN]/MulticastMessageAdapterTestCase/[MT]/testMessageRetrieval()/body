{
  Object message=getValidMessage();
  MessageAdapter adapter=createAdapter(message);
  DefaultMuleMessage muleMessage=new DefaultMuleMessage(adapter);
  assertEquals(new String(((DatagramPacket)message).getData()),muleMessage.getPayloadAsString());
  byte[] bytes=muleMessage.getPayloadAsBytes();
  assertNotNull(bytes);
  String stringMessage=muleMessage.getPayloadAsString();
  assertNotNull(stringMessage);
  assertNotNull(adapter.getPayload());
  try {
    adapter=createAdapter(getInvalidMessage());
    fail("Message adapter should throw exception if an invalid messgae is set");
  }
 catch (  Exception e) {
  }
}
