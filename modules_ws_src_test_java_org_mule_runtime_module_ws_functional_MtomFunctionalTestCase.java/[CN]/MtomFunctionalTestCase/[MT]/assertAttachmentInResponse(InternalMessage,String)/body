{
  final MultiPartContent multiPartPayload=(MultiPartContent)message.getPayload().getValue();
  assertThat(multiPartPayload.getParts(),hasSize(1));
  String attachmentId=extractAttachmentId(getPayloadAsString(message));
  final org.mule.runtime.api.message.Message part=multiPartPayload.getPart(attachmentId);
  assertNotNull(part.getPayload().getValue());
  InputStream expected=IOUtils.getResourceAsStream(fileName,getClass());
  assertTrue(IOUtils.contentEquals(expected,(InputStream)part.getPayload().getValue()));
}
