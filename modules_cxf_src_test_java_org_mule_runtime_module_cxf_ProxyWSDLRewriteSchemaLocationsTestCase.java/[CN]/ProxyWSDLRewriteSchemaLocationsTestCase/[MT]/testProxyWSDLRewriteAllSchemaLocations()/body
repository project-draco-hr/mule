{
  String proxyAddress="http://localhost:" + httpPortProxy.getNumber() + "/localServicePath";
  MuleMessage response=muleContext.getClient().send(proxyAddress + "?wsdl",getTestMuleMessage(NullPayload.getInstance()),HTTP_REQUEST_OPTIONS);
  Set<String> expectedParametersValues=new HashSet<String>();
  expectedParametersValues.addAll(Arrays.asList("xsd=xsd0"));
  List<Element> schemaImports=getSchemaImports(getWsdl(response));
  for (  Element schemaImport : schemaImports) {
    String schemaLocation=getLocation(schemaImport);
    int parametersStart=schemaLocation.indexOf("?");
    String locationPath=schemaLocation.substring(0,parametersStart);
    assertEquals(proxyAddress,locationPath);
    String queryString=schemaLocation.substring(parametersStart + 1);
    expectedParametersValues.remove(queryString);
  }
  assertTrue(expectedParametersValues.isEmpty());
}
