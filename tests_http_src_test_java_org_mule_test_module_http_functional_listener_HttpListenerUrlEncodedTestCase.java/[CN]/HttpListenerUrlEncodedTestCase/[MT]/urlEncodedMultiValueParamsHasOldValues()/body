{
  final Response response=Request.Post(getListenerUrl()).bodyForm(new BasicNameValuePair(PARAM_1_NAME,PARAM_1_VALUE),new BasicNameValuePair(PARAM_2_NAME,PARAM_2_VALUE_1),new BasicNameValuePair(PARAM_2_NAME,PARAM_2_VALUE_2)).execute();
  final InternalMessage receivedMessage=muleContext.getClient().request(OUT_QUEUE_URL,1000).getRight().get();
  assertThat(receivedMessage.getPayload().getValue(),instanceOf(ParameterMap.class));
  ParameterMap payloadAsMap=(ParameterMap)receivedMessage.getPayload().getValue();
  assertThat(payloadAsMap.size(),is(2));
  assertThat(payloadAsMap.get(PARAM_1_NAME),is(PARAM_1_VALUE));
  assertThat(payloadAsMap.getAll(PARAM_2_NAME).size(),is(2));
  assertThat(payloadAsMap.getAll(PARAM_2_NAME).get(0),is(PARAM_2_VALUE_1));
  assertThat(payloadAsMap.getAll(PARAM_2_NAME).get(1),is(PARAM_2_VALUE_2));
  compareParameterMaps(response,payloadAsMap);
}
