{
  Flow flow=(Flow)getFlowConstruct("nestedTransactionalWithBeginOrJoinFailWithCatchAndRollback");
  Event event=getTestEvent("message",flow);
  flow.process(event);
  assertThat(muleContext.getClient().request("out1",1000).getRight().isPresent(),is(false));
  assertThat(muleContext.getClient().request("out2",1000).getRight().isPresent(),is(false));
}
