{
  Flow flow=(Flow)getFlowConstruct("nestedTransactionalWithBeginOrJoinFailWithCatchAndRollback");
  MuleEvent event=getTestEvent("message",flow);
  flow.process(event);
  MuleMessage message1=muleContext.getClient().request("out1",1000);
  MuleMessage message2=muleContext.getClient().request("out2",1000);
  assertThat(message1,nullValue());
  assertThat(message2,nullValue());
}
