{
  InternalMessage message=event.getMessage();
  if (message.getPayload().getValue() instanceof Map<?,?>) {
    List<Event> list=new LinkedList<>();
    Set<Map.Entry<?,?>> set=((Map)message.getPayload().getValue()).entrySet();
    for (    Entry<?,?> entry : set) {
      list.add(Event.builder(event).message(InternalMessage.builder().payload(entry.getValue()).build()).build());
    }
    return list;
  }
 else {
    throw new IllegalArgumentException(objectNotOfCorrectType(message.getPayload().getDataType().getType(),Map.class).getMessage());
  }
}
