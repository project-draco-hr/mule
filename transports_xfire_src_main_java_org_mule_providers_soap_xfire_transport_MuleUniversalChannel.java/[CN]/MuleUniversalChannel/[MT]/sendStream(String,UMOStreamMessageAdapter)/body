{
  UMOEndpoint ep=(UMOEndpoint)RegistryContext.getRegistry().lookupEndpointFactory().getOutboundEndpoint(uri,MuleServer.getManagementContext());
  ep.setStreaming(true);
  UMOMessage message=new MuleMessage(sa);
  UMOEvent event=new MuleEvent(message,ep,RequestContext.getEventContext().getSession(),true);
  UMOMessage result=ep.send(event);
  if (result != null) {
    if (result.getAdapter() instanceof UMOStreamMessageAdapter) {
      return (UMOStreamMessageAdapter)result.getAdapter();
    }
 else {
      throw new IllegalStateException("Mismatch of stream states. A stream was used for outbound channel, but a stream was not used for the response");
    }
  }
  return null;
}
