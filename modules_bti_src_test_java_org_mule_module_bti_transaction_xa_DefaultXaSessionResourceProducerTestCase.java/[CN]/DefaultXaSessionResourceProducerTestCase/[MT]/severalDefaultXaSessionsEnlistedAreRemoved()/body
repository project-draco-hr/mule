{
  Transaction transaction=transactionManagerWrapper.getTransaction();
  transactionManagerWrapper.begin();
  transaction.enlistResource(firstXaResource);
  transaction.enlistResource(secondXaResource);
  assertThat(xaSessionProducer.findXAResourceHolder(firstXaResource).getXAResource(),is(xaSessionProducer.findXAResourceHolder(firstXaResource).getXAResource()));
  assertThat(xaSessionProducer.findXAResourceHolder(firstXaResource).getXAResource(),not(is(xaSessionProducer.findXAResourceHolder(secondXaResource).getXAResource())));
  transactionManagerWrapper.rollback();
  assertThat(xaSessionProducer.findXAResourceHolder(firstXaResource),IsNull.nullValue());
  assertThat(xaSessionProducer.findXAResourceHolder(secondXaResource),IsNull.nullValue());
}
