{
  final File pluginFolder=createPluginFolder();
  final String exportedClassPackages="org.foo, org.bar";
  new PluginPropertiesBuilder(pluginFolder).exportingClassesFrom(exportedClassPackages).build();
  final ArtifactClassLoaderFilter classLoaderFilter=mock(DefaultArtifactClassLoaderFilter.class);
  Set<String> parsedExportedPackages=new HashSet<>();
  parsedExportedPackages.add("org.foo");
  parsedExportedPackages.add("org.bar");
  when(classLoaderFilter.getExportedClassPackages()).thenReturn(parsedExportedPackages);
  when(classLoaderFilterFactory.create(exportedClassPackages,null)).thenReturn(classLoaderFilter);
  final ArtifactPluginDescriptor pluginDescriptor=descriptorFactory.create(pluginFolder);
  new PluginDescriptorChecker(pluginFolder).exportingPackages(parsedExportedPackages).assertPluginDescriptor(pluginDescriptor);
}
