{
  assertQueueIsEmpty("test://error.queue");
  flowRunner("mycomponent").withPayload(getTestMuleMessage("test")).asynchronously().run();
  assertQueueIsEmpty("test://component.out");
  MuleMessage message=client.request("test://error.queue",2000);
  assertNotNull(message);
  Object payload=message.getPayload();
  assertTrue(payload instanceof ExceptionMessage);
  assertNotificationsArrived();
  assertNotificationsHaveMatchingResourceIds();
}
