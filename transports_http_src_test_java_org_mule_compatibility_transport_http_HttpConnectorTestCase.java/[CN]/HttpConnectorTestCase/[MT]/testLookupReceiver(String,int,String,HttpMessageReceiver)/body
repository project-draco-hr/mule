{
  HttpConnector httpConnector=(HttpConnector)getConnector();
  httpConnector.getReceivers().putAll(createTestReceivers());
  when(mockHttpRequest.getRequestLine()).thenReturn(mockRequestLine);
  when(mockRequestLine.getUrlWithoutParams()).thenReturn(path);
  when(mockSocket.getLocalSocketAddress()).thenReturn(new InetSocketAddress(host,port));
  assertThat(httpConnector.lookupReceiver(mockSocket,mockHttpRequest),is(expectedMessageReceiver));
}
