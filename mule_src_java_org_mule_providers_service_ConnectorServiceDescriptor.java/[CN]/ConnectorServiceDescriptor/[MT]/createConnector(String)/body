{
  UMOConnector connector;
  if (getServiceError() != null) {
    throw new ConnectorServiceException(Message.createStaticMessage(getServiceError()));
  }
  try {
    if (getConnectorFactory() != null) {
      ObjectFactory factory=(ObjectFactory)ClassHelper.loadClass(getConnectorFactory(),ConnectorFactory.class).newInstance();
      connector=(UMOConnector)factory.create();
    }
 else {
      if (getConnector() != null) {
        connector=(UMOConnector)ClassHelper.loadClass(getConnector(),ConnectorFactory.class).newInstance();
      }
 else {
        throw new ConnectorServiceException(new Message(Messages.X_NOT_SET_IN_SERVICE_X,"Connector",getProtocol()));
      }
    }
  }
 catch (  ConnectorServiceException e) {
    throw e;
  }
catch (  Exception e) {
    throw new ConnectorServiceException(new Message(Messages.FAILED_TO_CREATE_X_WITH_X,"Connector",getConnector()),e);
  }
  if (connector.getName() == null) {
    connector.setName("_" + protocol + "Connector#"+ connector.hashCode());
  }
  return connector;
}
