{
  final ClassLoader originalCl=Thread.currentThread().getContextClassLoader();
  try {
    ClassLoader appCl=getDeploymentClassLoader();
    if (appCl != null) {
      Thread.currentThread().setContextClassLoader(appCl);
    }
    delegate.dispose();
    if (appCl != null) {
      if (appCl instanceof GoodCitizenClassLoader) {
        GoodCitizenClassLoader classLoader=(GoodCitizenClassLoader)appCl;
        classLoader.close();
      }
    }
  }
  finally {
    Thread.currentThread().setContextClassLoader(originalCl);
  }
}
