{
  DefaultMessageProcessorChainBuilder builder=new DefaultMessageProcessorChainBuilder();
  builder.chain(new AppendingMP("1"),new DefaultMessageProcessorChainBuilder().chain(new AppendingInterceptingMP("a"),new AppendingMP("b")).build(),new AppendingInterceptingMP("2"));
  assertEquals("01beforeabafterabefore2after2",builder.build().process(getTestEvent("0")).getMessageAsString());
}
