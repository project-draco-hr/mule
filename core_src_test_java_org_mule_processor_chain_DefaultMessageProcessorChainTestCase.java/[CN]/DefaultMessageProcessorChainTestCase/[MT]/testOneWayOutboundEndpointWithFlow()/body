{
  MuleEvent event=getTestEventUsingFlow("");
  MessageProcessor mp=mock(MessageProcessor.class,withSettings().extraInterfaces(OutboundEndpoint.class));
  OutboundEndpoint outboundEndpoint=(OutboundEndpoint)mp;
  when(outboundEndpoint.getExchangePattern()).thenReturn(MessageExchangePattern.ONE_WAY);
  when(mp.process(any(MuleEvent.class))).thenReturn(VoidMuleEvent.getInstance());
  MessageProcessorChain chain=new DefaultMessageProcessorChainBuilder().chain(mp).build();
  MuleEvent response=chain.process(event);
  assertSame(event,response);
  assertEquals(1,threads);
}
