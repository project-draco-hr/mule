{
  int i=0;
  try {
    MuleClient client=new MuleClient(muleContext);
    MuleMessage result=null;
    for (i=0; i < numberOfRequests; i++) {
      try {
        result=client.request("CustomerResponses",getDelay());
      }
 catch (      MuleException e) {
        exListener.exceptionThrown(e);
        break;
      }
      assertNotNull("Result is null",result);
      assertFalse("Result is null",result.getPayload() instanceof NullPayload);
      assertTrue("Result should be LoanQuote but is " + result.getPayload().getClass().getName(),result.getPayload() instanceof LoanQuote);
      LoanQuote quote=(LoanQuote)result.getPayload();
      assertTrue(quote.getInterestRate() > 0);
    }
  }
 catch (  Throwable e) {
    System.out.println(StringMessageUtils.getBoilerPlate("Processed Messages=" + i));
    if (e instanceof Error) {
      exListener.exceptionThrown(new Exception(e));
    }
 else {
      exListener.exceptionThrown((Exception)e);
    }
  }
 finally {
    latch.countDown();
  }
}
