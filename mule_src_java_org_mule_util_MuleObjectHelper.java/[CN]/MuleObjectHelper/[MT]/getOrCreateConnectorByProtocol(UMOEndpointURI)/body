{
  UMOConnector connector=getConnectorByProtocol(url.getSchemeMetaInfo());
  if (connector == null) {
    connector=ConnectorFactory.createConnector(url);
    try {
      BeanUtils.populate(connector,url.getParams());
      MuleManager.getInstance().registerConnector(connector);
    }
 catch (    Exception e) {
      throw new ConnectorFactoryException(new Message(Messages.FAILED_TO_SET_PROPERTIES_ON_X,"Connector"),e);
    }
  }
  return connector;
}
