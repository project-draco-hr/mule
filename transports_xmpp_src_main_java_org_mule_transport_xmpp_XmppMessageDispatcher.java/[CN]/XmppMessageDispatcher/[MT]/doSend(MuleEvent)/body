{
  sendMessage(event);
  if (returnResponse(event)) {
    Message response;
    if (groupChat != null) {
      response=groupChat.nextMessage(event.getTimeout());
    }
 else {
      response=chat.nextMessage(event.getTimeout());
    }
    if (response != null) {
      if (logger.isDebugEnabled()) {
        logger.debug("Got a response from chat: " + chat);
      }
      return new DefaultMuleMessage(connector.getMessageAdapter(response));
    }
  }
  return null;
}
