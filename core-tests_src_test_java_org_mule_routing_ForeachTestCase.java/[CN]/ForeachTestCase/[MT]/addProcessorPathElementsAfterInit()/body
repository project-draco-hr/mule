{
  Foreach foreachMp=new Foreach();
  foreachMp.setMuleContext(muleContext);
  List<MessageProcessor> processors=getSimpleMessageProcessors();
  foreachMp.setMessageProcessors(processors);
  foreachMp.initialise();
  MessageProcessorPathElement mpPathElement=mock(MessageProcessorPathElement.class);
  foreachMp.addMessageProcessorPathElements(mpPathElement);
  assertAddedPathElements(processors,mpPathElement);
}
