{
  Object m=errorMappings.get(protocol);
  if (m != null) {
    if (m instanceof Properties) {
      return (Properties)m;
    }
 else {
      return null;
    }
  }
 else {
    TransportServiceDescriptor sd=(TransportServiceDescriptor)MuleManager.getInstance().lookupServiceDescriptor(ServiceDescriptorFactory.PROVIDER_SERVICE_TYPE,protocol,null);
    if (sd != null) {
      Properties p=sd.getExceptionMappings();
      errorMappings.put(protocol,p);
      String applyTo=p.getProperty(APPLY_TO_PROPERTY,null);
      if (applyTo != null) {
        String[] protocols=StringUtils.splitAndTrim(applyTo,",");
        for (int i=0; i < protocols.length; i++) {
          errorMappings.put(protocols[i],p);
        }
      }
      return p;
    }
 else {
      return null;
    }
  }
}
