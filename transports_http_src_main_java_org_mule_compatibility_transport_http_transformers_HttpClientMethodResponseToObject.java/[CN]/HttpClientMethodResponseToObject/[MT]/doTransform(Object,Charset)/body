{
  Object msg;
  HttpMethod httpMethod=(HttpMethod)src;
  InputStream is;
  try {
    is=httpMethod.getResponseBodyAsStream();
  }
 catch (  IOException e) {
    throw new TransformerException(this,e);
  }
  if (is == null) {
    msg=NullPayload.getInstance();
  }
 else {
    msg=new ReleasingInputStream(is,httpMethod);
  }
  Map headerProps=new HashMap();
  Header[] headers=httpMethod.getResponseHeaders();
  String name;
  for (  Header header : headers) {
    name=header.getName();
    if (name.startsWith(HttpConstants.X_PROPERTY_PREFIX)) {
      name=name.substring(2);
    }
    headerProps.put(name,header.getValue());
  }
  return new DefaultMuleMessage(msg,headerProps);
}
