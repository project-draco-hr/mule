{
  ((FileConnector)connector).setAutoDelete(false);
  MuleEvent event=getTestEvent("TestData");
  event=RequestContext.setEvent(event);
  MuleMessage message=RequestContext.getEventContext().receiveEvent(getTestEndpointURI() + "/" + tempDirName+ "?connector=FileConnector",50000);
  assertNotNull(message.getPayloadAsString());
  File[] files=tempDir.listFiles();
  assertTrue(files.length > 0);
  for (int i=0; i < files.length; i++) {
    assertTrue(files[i].getName().equals(message.getProperty(FileConnector.PROPERTY_ORIGINAL_FILENAME)));
    files[i].delete();
  }
}
