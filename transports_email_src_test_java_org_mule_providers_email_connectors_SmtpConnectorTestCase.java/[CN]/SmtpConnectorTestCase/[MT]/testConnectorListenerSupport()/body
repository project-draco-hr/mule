{
  UMOConnector connector=getConnector();
  assertNotNull(connector);
  UMOModel model=getModel();
  MuleDescriptor d=getTestDescriptor("anApple",Apple.class.getName());
  d.setModelName(model.getName());
  managementContext.getRegistry().registerService(d);
  UMOComponent component=model.getComponent(d.getName());
  UMOEndpointBuilder builder=new EndpointURIEndpointBuilder(new MuleEndpointURI(getTestEndpointURI()),managementContext);
  builder.setName("test");
  UMOImmutableEndpoint endpoint=builder.buildOutboundEndpoint();
  try {
    connector.registerListener(component,endpoint);
    fail("SMTP connector does not accept listeners");
  }
 catch (  Exception e) {
    assertNotNull("expected",e);
  }
}
