{
  UMOConnector connector=getConnector();
  assertNotNull(connector);
  UMOModel model=getModel();
  MuleDescriptor d=getTestDescriptor("anApple",Apple.class.getName());
  d.setModelName(model.getName());
  managementContext.getRegistry().registerService(d);
  UMOComponent component=model.getComponent(d.getName());
  UMOEndpoint endpoint=new MuleEndpoint("test",new MuleEndpointURI(getTestEndpointURI()),connector,TransformerUtils.UNDEFINED,UMOEndpoint.ENDPOINT_TYPE_SENDER,0,null,new HashMap());
  try {
    connector.registerListener(component,endpoint);
    fail("SMTP connector does not accept listeners");
  }
 catch (  Exception e) {
    assertNotNull("expected",e);
  }
}
