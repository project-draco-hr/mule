{
  if (queue == null) {
    throw new InitialisationException("Queue cannot be null");
  }
  if (store == null) {
    store=new File(getQueueStore());
  }
  File componentStore=new File(store,componentName);
  try {
    if (componentStore.exists()) {
      String[] events=componentStore.list(new EventFilenameFilter());
      for (int i=0; i < events.length; i++) {
        String event=events[i];
        File eventFile=new File(componentStore,event);
        ObjectInputStream ois=new ObjectInputStream(new FileInputStream(eventFile));
        EventHolder eventHolder=(EventHolder)ois.readObject();
        UMOEvent umoEvent=eventHolder.getEvent();
        queue.put(umoEvent);
        ois.close();
      }
    }
 else {
      if (!componentStore.mkdirs()) {
        throw new InitialisationException("Could not create queue store: " + store.getAbsolutePath());
      }
    }
  }
 catch (  InitialisationException e) {
    throw e;
  }
catch (  Exception e) {
    throw new InitialisationException("Failed to initialise queue persistent store: " + e.getMessage(),e);
  }
}
