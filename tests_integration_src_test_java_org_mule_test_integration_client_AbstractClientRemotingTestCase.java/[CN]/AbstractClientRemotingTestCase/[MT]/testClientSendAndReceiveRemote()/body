{
  String remoteEndpoint="vm://remote.queue?connector=vmRemoteQueueConnector";
  MuleClient client=new MuleClient();
  muleContext.getConfiguration().setDefaultSynchronousEndpoints(true);
  RemoteDispatcher dispatcher=client.getRemoteDispatcher(getRemoteEndpointUri());
  MuleMessage message=dispatcher.receiveRemote(remoteEndpoint,RECEIVE_TIMEOUT * 2);
  assertNull(message);
  dispatcher.sendRemote(remoteEndpoint,"Test Remote Message 2",null);
  message=dispatcher.receiveRemote(remoteEndpoint,RECEIVE_TIMEOUT * 2);
  assertNotNull(message);
  assertEquals("Test Remote Message 2",message.getPayload());
}
