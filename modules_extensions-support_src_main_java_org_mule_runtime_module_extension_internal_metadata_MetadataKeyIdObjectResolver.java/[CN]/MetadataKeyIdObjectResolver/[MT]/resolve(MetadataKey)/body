{
  if (isKeyLess()) {
    return NullMetadataKey.ID;
  }
  final MetadataKeyIdModelProperty keyIdModelProperty=findMetadataKeyIdModelProperty(component);
  MetadataType type=keyIdModelProperty.getType();
  KeyMetadataTypeVisitor visitor=new KeyMetadataTypeVisitor(key.getId(),getType(type)){
    @Override protected Map<Field,String> getFieldValuesMap() throws MetadataResolvingException {
      return keyToFieldValueMap(key);
    }
  }
;
  type.accept(visitor);
  return visitor.getResultId();
}
