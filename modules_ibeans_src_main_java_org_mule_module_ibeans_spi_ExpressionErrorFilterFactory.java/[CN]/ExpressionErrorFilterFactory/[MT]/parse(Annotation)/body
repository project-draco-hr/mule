{
  ErrorFilter errorFilter;
  try {
    String expr=(String)anno.annotationType().getMethod("expr").invoke(anno);
    String errorCode=(String)anno.annotationType().getMethod("errorCode").invoke(anno);
    String tempMime=(String)anno.annotationType().getMethod("mimeType").invoke(anno);
    MimeType mimeType=new MimeType(tempMime);
    Field f;
    String evaluator;
    try {
      f=anno.annotationType().getDeclaredField("eval");
      evaluator=(String)f.get(anno);
    }
 catch (    NoSuchFieldException nsfe) {
      evaluator=(String)anno.annotationType().getMethod("eval").invoke(anno);
    }
    if (evaluator.equals("xpath2") && !expr.startsWith("[boolean]")) {
      expr="[boolean]" + expr;
    }
    errorFilter=new ErrorExpressionFilter(evaluator,expr,errorCode);
    ((ExpressionFilter)errorFilter).setMuleContext(muleContext);
    return new ErrorFilterHolder(mimeType,errorFilter);
  }
 catch (  Exception e) {
    throw new IBeansException("Failed to parse error filter from annotation: " + anno,e);
  }
}
