{
  props.remove("bar");
  MuleClient client=muleContext.getClient();
  MuleMessage message=client.send("vm://headersListOptional",null,props);
  assertNotNull(message);
  assertNotNull(message.getExceptionPayload());
  assertEquals(RequiredValueException.class,ExceptionUtils.getRootCause(message.getExceptionPayload().getException()).getClass());
}
