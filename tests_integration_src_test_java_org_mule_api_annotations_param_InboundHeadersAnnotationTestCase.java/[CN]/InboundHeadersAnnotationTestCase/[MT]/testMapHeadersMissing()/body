{
  props.remove("foo");
  MuleClient client=muleContext.getClient();
  MuleMessage message=client.send("vm://headers",null,null);
  assertNotNull(message);
  assertNotNull(message.getExceptionPayload());
  assertEquals(RequiredValueException.class,ExceptionUtils.getRootCause(message.getExceptionPayload().getException()).getClass());
}
