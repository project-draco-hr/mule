{
  Event result=process(messageProcessor,testEvent());
  assertThat(latch.await(10000,TimeUnit.MILLISECONDS),is(true));
  assertThat(target.sensedEvent,notNullValue());
  assertThat(testEvent(),not(sameInstance(target.sensedEvent)));
  assertThat(testEvent().getMessageAsString(muleContext),equalTo(target.sensedEvent.getMessageAsString(muleContext)));
  assertThat(testEvent(),sameInstance(result));
  assertThat(exceptionThrown,nullValue());
  assertThat(target.thread,not(sameInstance(Thread.currentThread())));
  messageProcessor.stop();
  messageProcessor.dispose();
}
