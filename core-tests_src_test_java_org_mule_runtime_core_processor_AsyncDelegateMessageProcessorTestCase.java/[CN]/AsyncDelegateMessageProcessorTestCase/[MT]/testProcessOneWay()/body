{
  MuleEvent event=getTestEvent(TEST_MESSAGE);
  MuleEvent result=messageProcessor.process(event);
  assertThat(latch.await(10000,TimeUnit.MILLISECONDS),is(true));
  assertThat(target.sensedEvent,notNullValue());
  assertNotSame(event,target.sensedEvent);
  assertEquals(event.getMessageAsString(muleContext),target.sensedEvent.getMessageAsString(muleContext));
  assertSame(VoidMuleEvent.getInstance(),result);
  assertNull(exceptionThrown);
  assertNotSame(Thread.currentThread(),target.thread);
  messageProcessor.stop();
  messageProcessor.dispose();
}
