{
  Event result=process(messageProcessor,testEvent());
  latch.await(10000,TimeUnit.MILLISECONDS);
  assertNotNull(target.sensedEvent);
  assertNotSame(testEvent(),target.sensedEvent);
  assertEquals(testEvent().getMessageAsString(muleContext),target.sensedEvent.getMessageAsString(muleContext));
  assertSame(testEvent(),result);
  assertNull(exceptionThrown);
  assertNotSame(Thread.currentThread(),target.thread);
  messageProcessor.stop();
  messageProcessor.dispose();
}
