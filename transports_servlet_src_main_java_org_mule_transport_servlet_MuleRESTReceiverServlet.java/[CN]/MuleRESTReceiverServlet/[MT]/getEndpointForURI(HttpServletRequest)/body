{
  String endpointName=httpServletRequest.getParameter("endpoint");
  if (endpointName == null) {
    String uri=httpServletRequest.getPathInfo();
    int i=uri.lastIndexOf("/");
    if (i > -1) {
      endpointName=uri.substring(i + 1);
    }
  }
  InboundEndpoint endpoint=muleContext.getRegistry().lookupEndpointFactory().getInboundEndpoint(endpointName);
  if (endpoint == null) {
    MessageReceiver receiver=getReceivers().get(endpointName);
    if (receiver != null) {
      endpoint=receiver.getEndpoint();
    }
  }
  return endpoint;
}
