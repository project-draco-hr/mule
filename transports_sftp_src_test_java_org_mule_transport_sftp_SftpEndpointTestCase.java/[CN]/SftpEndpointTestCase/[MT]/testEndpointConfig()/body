{
  ImmutableEndpoint endpoint1=muleContext.getRegistry().lookupObject("inboundEndpoint1");
  EndpointURI url1=endpoint1.getEndpointURI();
  assertEquals("sftp",url1.getScheme());
  assertEquals("foobar-host",url1.getHost());
  assertEquals(4243,url1.getPort());
  assertEquals("passw0rd",url1.getPassword());
  assertEquals("user42",url1.getUser());
  assertEquals("sftp://user42:passw0rd@foobar-host:4243/data",url1.getUri().toString());
  ImmutableEndpoint endpoint2=muleContext.getRegistry().lookupObject("inboundEndpoint2");
  EndpointURI url2=endpoint2.getEndpointURI();
  assertEquals("sftp",url2.getScheme());
  assertEquals("foobar-host",url2.getHost());
  assertEquals(4243,url2.getPort());
  assertEquals("passw0rd",url2.getPassword());
  assertEquals("user42",url2.getUser());
  ImmutableEndpoint outboundEndpoint1=muleContext.getRegistry().lookupObject("outboundEndpoint1");
  ImmutableEndpoint outboundEndpoint2=muleContext.getRegistry().lookupObject("outboundEndpoint2");
  SftpUtil oUtil1=new SftpUtil(outboundEndpoint1);
  SftpUtil oUtil2=new SftpUtil(outboundEndpoint2);
  assertTrue("'keepFileOnError' should be on by default",oUtil1.isKeepFileOnError());
  assertFalse("'keepFileOnError' should be false",oUtil2.isKeepFileOnError());
}
