{
  if (!getCurrentState().equals(UNKNOWN) && !getCurrentState().equals(SHUTDOWN)) {
    throw new JBIException("Illegal status: " + getCurrentState());
  }
  ClassLoader cl=Thread.currentThread().getContextClassLoader();
  try {
    Thread.currentThread().setContextClassLoader(this.component.getClass().getClassLoader());
    this.objectName=container.createMBeanName(getName(),"lifecycle",null);
    this.channel=new DeliveryChannelImpl(container,getName());
    org.mule.jbi.management.ComponentLifeCycle lf=new org.mule.jbi.management.ComponentLifeCycle(container.getManagementContext(),this);
    lf.init();
    if (container.getMBeanServer().isRegistered(this.objectName)) {
      container.getMBeanServer().unregisterMBean(this.objectName);
    }
    container.getMBeanServer().registerMBean(new StandardMBean(lf,ComponentLifeCycleMBean.class),objectName);
    setCurrentState(INITIALIZED);
    return objectName;
  }
 catch (  Exception e) {
    throw new JBIException(e);
  }
 finally {
    Thread.currentThread().setContextClassLoader(cl);
  }
}
