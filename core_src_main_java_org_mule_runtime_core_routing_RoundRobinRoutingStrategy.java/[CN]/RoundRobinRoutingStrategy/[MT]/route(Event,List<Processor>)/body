{
  if (messageProcessors == null || messageProcessors.isEmpty()) {
    throw new RoutePathNotFoundException(CoreMessages.noEndpointsForRouter(),null);
  }
  String id=identifiableDynamicRouteResolver.getRouteIdentifier(event);
  Short nextMessageProcessor=0;
synchronized (this) {
    if (roundRobinState.containsKey(id)) {
      Short lastMessageProcessor=roundRobinState.get(id);
      nextMessageProcessor=(short)(lastMessageProcessor + 1 >= messageProcessors.size() ? 0 : lastMessageProcessor + 1);
      roundRobinState.put(id,nextMessageProcessor);
    }
 else {
      roundRobinState.put(id,(short)0);
    }
  }
  Processor mp=messageProcessors.get(nextMessageProcessor);
  Event eventCopy=cloneEventForRouting(event,mp);
  try {
    return mp.process(eventCopy);
  }
 catch (  MuleException me) {
    throw new RoutingFailedException(CoreMessages.createStaticMessage("Error processing event"),me);
  }
}
