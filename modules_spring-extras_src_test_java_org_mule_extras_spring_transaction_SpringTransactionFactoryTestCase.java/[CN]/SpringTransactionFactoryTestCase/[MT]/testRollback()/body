{
  Mock mockPTM=new Mock(PlatformTransactionManager.class);
  Mock mockTS=new Mock(TransactionStatus.class);
  mockPTM.expectAndReturn("getTransaction",C.same(null),mockTS.proxy());
  mockPTM.expect("rollback",C.same(mockTS.proxy()));
  mockTS.expect("setRollbackOnly");
  SpringTransactionFactory factory=new SpringTransactionFactory();
  factory.setManager((PlatformTransactionManager)mockPTM.proxy());
  UMOTransaction tx=factory.beginTransaction(muleContext);
  tx.rollback();
}
