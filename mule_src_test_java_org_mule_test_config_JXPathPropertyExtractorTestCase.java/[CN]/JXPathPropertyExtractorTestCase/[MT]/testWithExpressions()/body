{
  Apple apple=new Apple();
  apple.wash();
  FruitBowl payload=new FruitBowl(apple,new Banana());
  Map props=new HashMap();
  props.put("Message-Property","foo");
  MuleMessage msg=new MuleMessage(payload,props);
  JXPathPropertyExtractor e=new JXPathPropertyExtractor();
  Object value=e.getProperty("apple/washed",msg);
  assertNotNull(value);
  assertTrue(value instanceof Boolean);
  assertTrue(((Boolean)value).booleanValue());
  value=e.getProperty("Message-Property",msg);
  assertNotNull(value);
  assertEquals("foo",value.toString());
  value=e.getProperty("bar",msg);
  assertNull(value);
  List exp=new ArrayList();
  exp.add("apple/washed");
  exp.add("apple/bitten");
  exp.add("Message-Property");
  exp.add("bar");
  Map values=e.getProperties(exp,msg);
  assertNotNull(values);
  assertEquals(new Boolean(true),values.get("apple/washed"));
  assertEquals(new Boolean(false),values.get("apple/bitten"));
  assertEquals("foo",values.get("Message-Property"));
  assertNull(values.get("bar"));
  assertEquals(4,values.size());
}
