{
  MuleEvent resultEvent=(MuleEvent)super.doProcess(event,operationContext);
  PagingProvider pagingProvider=resultEvent.getMessage().getPayload();
  if (pagingProvider == null) {
    throw new IllegalStateException("Obtained paging delegate cannot be null");
  }
  Producer<?> producer=new PagingProviderProducer(pagingProvider,operationContext.getConfiguration().get(),connectionManager);
  Consumer<?> consumer=new ListConsumer(producer);
  return returnDelegate.asReturnValue(new ConsumerIterator<>(consumer),operationContext);
}
