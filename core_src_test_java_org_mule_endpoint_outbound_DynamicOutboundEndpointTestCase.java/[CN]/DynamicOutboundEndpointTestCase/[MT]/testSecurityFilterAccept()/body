{
  OutboundEndpoint endpoint=createOutboundEndpoint(null,new TestSecurityFilter(true),null,null,MessageExchangePattern.REQUEST_RESPONSE,null);
  assertTrue(endpoint instanceof DynamicOutboundEndpoint);
  testOutboundEvent=createTestOutboundEvent();
  endpoint.process(testOutboundEvent);
  setUpFakeDispatcher(endpoint);
  MuleEvent result=endpoint.process(testOutboundEvent);
  assertMessageSentEqual(true);
  assertNotSame(responseMessage,result.getMessage());
  assertMessageEqualEncodingPropertyAdded(responseMessage,result.getMessage());
}
