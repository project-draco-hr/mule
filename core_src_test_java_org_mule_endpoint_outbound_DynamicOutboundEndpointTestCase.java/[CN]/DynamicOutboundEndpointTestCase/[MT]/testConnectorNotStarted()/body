{
  OutboundEndpoint endpoint=createOutboundEndpoint(null,null,null,null,MessageExchangePattern.REQUEST_RESPONSE,null);
  testOutboundEvent=createTestOutboundEvent(endpoint);
  endpoint.process(testOutboundEvent);
  endpoint.getConnector().stop();
  MuleEvent resultEvent=endpoint.process(testOutboundEvent);
  assertNotNull(resultEvent);
  assertNotNull("exception expected",resultEvent.getMessage().getExceptionPayload());
  assertTrue(resultEvent.getMessage().getExceptionPayload().getException() instanceof LifecycleException);
}
