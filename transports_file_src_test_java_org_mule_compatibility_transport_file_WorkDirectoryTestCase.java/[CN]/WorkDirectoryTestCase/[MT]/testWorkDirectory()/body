{
  FunctionalTestComponent ftc=(FunctionalTestComponent)getComponent("relay");
  ftc.setEventCallback(new EventCallback(){
    @Override public void eventReceived(    MuleEventContext context,    Object component) throws Exception {
      File workDir=getFileInsideWorkingDirectory("work");
      String[] filenames=workDir.list();
      assertTrue(filenames.length > 0);
      for (      String filename : filenames) {
        if (filename.contains(TEST_FILENAME)) {
          return;
        }
      }
      fail("no work dir file matching filename " + TEST_FILENAME);
    }
  }
);
  writeTestMessageToInputDirectory();
  checkOutputDirectory();
}
