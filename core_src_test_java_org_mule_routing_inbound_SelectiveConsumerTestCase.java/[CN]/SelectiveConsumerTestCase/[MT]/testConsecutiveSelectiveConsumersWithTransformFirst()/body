{
  Service testService=getTestService("test",Apple.class);
  InboundRouterCollection messageRouter=createObject(DefaultInboundRouterCollection.class);
  SelectiveConsumer router=createObject(TestSelectiveConsumer.class,"test");
  router.setFilter(new PayloadTypeFilter(String.class));
  router.setTransformFirst(true);
  messageRouter.addRouter(router);
  SelectiveConsumer router2=createObject(TestSelectiveConsumer.class,"test TRANSFORMED");
  messageRouter.addRouter(router2);
  testService.setInboundRouter(messageRouter);
  List<Transformer> transformers=new ArrayList<Transformer>();
  transformers.add(new StringAppendTransformer(" TRANSFORMED"));
  messageRouter.route(getTestEvent("test",getTestInboundEndpoint("endpoint",transformers)));
}
