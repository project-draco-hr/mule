{
  BeanDefinitionBuilder builder=BeanDefinitionBuilder.rootBeanDefinition(OperationMessageProcessorFactoryBean.class);
  builder.setScope(BeanDefinition.SCOPE_PROTOTYPE);
  parseConfigRef(element,builder);
  builder.addConstructorArgValue(operation);
  builder.addConstructorArgValue(toElementDescriptorBeanDefinition(element));
  builder.addConstructorArgValue(parseNestedOperations(element,parserContext));
  builder.addConstructorArgReference(MuleProperties.OBJECT_MULE_CONTEXT);
  BeanDefinition definition=builder.getBeanDefinition();
  setNoRecurseOnDefinition(definition);
  attachProcessorDefinition(parserContext,definition);
  return definition;
}
