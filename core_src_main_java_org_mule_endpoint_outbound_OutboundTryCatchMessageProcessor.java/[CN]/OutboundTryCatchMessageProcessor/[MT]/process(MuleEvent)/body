{
  boolean hasResponse=endpoint.getExchangePattern().hasResponse();
  boolean isTransacted=endpoint.getTransactionConfig().isTransacted();
  boolean singleThread=hasResponse || isTransacted;
  try {
    return processNext(event);
  }
 catch (  DispatchException e) {
    connector.handleException(e);
    if (singleThread) {
      throw e;
    }
 else {
      return null;
    }
  }
catch (  Exception e) {
    connector.handleException(e);
    if (singleThread) {
      throw new DispatchException(event.getMessage(),event.getEndpoint(),e);
    }
 else {
      return null;
    }
  }
}
