{
  boolean singleThread=endpoint.isSynchronous() || endpoint.getTransactionConfig().isTransacted();
  try {
    return processNext(event);
  }
 catch (  DispatchException e) {
    connector.handleException(e);
    if (singleThread) {
      throw e;
    }
 else {
      return null;
    }
  }
catch (  Exception e) {
    connector.handleException(e);
    if (singleThread) {
      throw new DispatchException(event.getMessage(),event.getEndpoint(),e);
    }
 else {
      return null;
    }
  }
}
