{
  final Response response=Request.Post(getListenerUrl()).bodyForm(new BasicNameValuePair(PARAM_1_NAME,PARAM_1_VALUE),new BasicNameValuePair(PARAM_2_NAME,PARAM_2_VALUE)).execute();
  final MuleMessage receivedMessage=muleContext.getClient().request(VM_OUTPUT_ENDPOINT,1000);
  assertThat(receivedMessage.getPayload(),IsInstanceOf.instanceOf(ParameterMap.class));
  ParameterMap payloadAsMap=(ParameterMap)receivedMessage.getPayload();
  assertThat(payloadAsMap.size(),is(2));
  assertThat(payloadAsMap.get(PARAM_1_NAME),Is.is(PARAM_1_VALUE));
  assertThat(payloadAsMap.get(PARAM_2_NAME),Is.is(PARAM_2_VALUE));
  compareParameterMaps(response,payloadAsMap);
}
