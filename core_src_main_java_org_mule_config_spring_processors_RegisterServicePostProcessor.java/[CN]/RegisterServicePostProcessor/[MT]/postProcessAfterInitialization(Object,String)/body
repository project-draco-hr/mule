{
  if (bean instanceof UMODescriptor) {
    UMODescriptor descriptor=(UMODescriptor)bean;
    if (descriptor.getModelName() == null) {
      logger.warn("No model name set on the service descriptor. Attempting to use default: " + ModelFactory.DEFAULT_MODEL_NAME);
      descriptor.setModelName(ModelFactory.DEFAULT_MODEL_NAME);
    }
    UMOModel model=RegistryContext.getRegistry().lookupModel(descriptor.getModelName());
    if (model == null) {
      throw new IllegalArgumentException("No model named '" + descriptor.getModelName() + "' registered. Offending service is: "+ descriptor);
    }
    try {
      model.registerComponent(descriptor);
    }
 catch (    UMOException e) {
      throw new BeanInitializationException("failed to register service with model: " + descriptor,e);
    }
  }
  return bean;
}
