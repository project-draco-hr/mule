{
  String encodedData=null;
  Base64.InputStream bis=null;
  try {
    File file=new File(filename);
    byte[] buffer=new byte[(int)(file.length() * 1.4)];
    int length=0;
    int numBytes=0;
    bis=new Base64.InputStream(new BufferedInputStream(new FileInputStream(file)),Base64.ENCODE);
    while ((numBytes=bis.read(buffer,length,4096)) >= 0) {
      length+=numBytes;
    }
    encodedData=new String(buffer,0,length,Base64.PREFERRED_ENCODING);
  }
 catch (  IOException e) {
    throw e;
  }
 finally {
    IOUtils.closeQuietly(bis);
  }
  return encodedData;
}
