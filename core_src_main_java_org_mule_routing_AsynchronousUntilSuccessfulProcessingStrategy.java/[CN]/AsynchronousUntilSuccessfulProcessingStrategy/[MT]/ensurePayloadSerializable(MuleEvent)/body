{
  final MuleMessage message=event.getMessage();
  if (message instanceof DefaultMuleMessage) {
    if (((DefaultMuleMessage)message).isConsumable()) {
      message.getPayloadAsBytes();
    }
 else {
      if (!(message.getPayload() instanceof Serializable)) {
        throw new NotSerializableException(message.getPayload().getClass().getCanonicalName());
      }
    }
  }
 else {
    message.getPayloadAsBytes();
  }
}
