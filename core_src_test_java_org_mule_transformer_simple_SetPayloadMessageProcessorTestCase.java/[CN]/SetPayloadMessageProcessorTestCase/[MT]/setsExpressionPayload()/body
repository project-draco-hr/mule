{
  setPayloadMessageProcessor.setValue(EXPRESSION);
  when(expressionManager.isExpression(EXPRESSION)).thenReturn(true);
  setPayloadMessageProcessor.initialise();
  TypedValue typedValue=new TypedValue(PLAIN_TEXT,DataType.STRING_DATA_TYPE);
  when(expressionManager.evaluateTyped(EXPRESSION,muleMessage)).thenReturn(typedValue);
  setPayloadMessageProcessor.process(muleEvent);
  verify(muleMessage).setPayload(actualValue.capture(),Matchers.<DataType<?>>any());
  assertThat((String)actualValue.getValue(),equalTo(PLAIN_TEXT));
}
