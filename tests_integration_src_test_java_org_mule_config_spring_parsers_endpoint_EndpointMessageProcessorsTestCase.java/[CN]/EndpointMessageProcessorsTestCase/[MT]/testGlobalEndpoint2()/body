{
  ImmutableEndpoint endpoint=muleContext.getEndpointFactory().getInboundEndpoint("ep2");
  List<MessageProcessor> processors=endpoint.getMessageProcessors();
  assertNotNull(processors);
  assertEquals(2,processors.size());
  assertEquals("1",((TestMessageProcessor)processors.get(0)).getLabel());
  assertEquals("2",((TestMessageProcessor)processors.get(1)).getLabel());
  processors=endpoint.getResponseMessageProcessors();
  assertNotNull(processors);
  assertEquals(1,processors.size());
  assertTrue(processors.get(0) instanceof MessageProcessorChain);
  MessageProcessorChain chain=(MessageProcessorChain)processors.get(0);
  assertEquals("3",((TestMessageProcessor)chain.getMessageProcessors().get(0)).getLabel());
  assertEquals("4",((TestMessageProcessor)chain.getMessageProcessors().get(1)).getLabel());
}
