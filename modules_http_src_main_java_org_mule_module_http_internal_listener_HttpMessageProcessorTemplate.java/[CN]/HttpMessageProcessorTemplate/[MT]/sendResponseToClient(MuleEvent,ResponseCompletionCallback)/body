{
  try {
    final org.mule.module.http.internal.domain.response.HttpResponseBuilder responseBuilder=new org.mule.module.http.internal.domain.response.HttpResponseBuilder();
    addThrottlingHeaders(responseBuilder);
    final HttpResponse httpResponse;
    if (muleEvent == null) {
      httpResponse=responseBuilder.setStatusCode(OK_STATUS_CODE).build();
    }
 else {
      httpResponse=this.responseBuilder.build(responseBuilder,muleEvent);
    }
    responseReadyCallback.responseReady(httpResponse,getResponseFailureCallback(responseCompletationCallback,muleEvent));
  }
 catch (  Exception e) {
    responseCompletationCallback.responseSentWithFailure(e,muleEvent);
  }
}
