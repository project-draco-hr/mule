{
  CopyPropertiesTransformer copyPropertiesTransformer=new CopyPropertiesTransformer();
  copyPropertiesTransformer.setMuleContext(mockMuleContext);
  copyPropertiesTransformer.setKey("MULE_(.*)");
  copyPropertiesTransformer.initialise();
  when(mockMuleMessage.getInboundPropertyNames()).thenReturn(new HashSet<String>(Arrays.asList("MULE_ID","MULE_CORRELATION_ID","SomeVar","MULE_GROUP_ID")));
  when(mockMuleMessage.getInboundProperty("MULE_ID")).thenReturn(PROPERTY_VALUE);
  when(mockMuleMessage.getInboundProperty("MULE_CORRELATION_ID")).thenReturn(PROPERTY_VALUE);
  when(mockMuleMessage.getInboundProperty("MULE_GROUP_ID")).thenReturn(PROPERTY_VALUE);
  when(mockMuleMessage.getInboundProperty("SomeVar")).thenReturn(PROPERTY_VALUE);
  copyPropertiesTransformer.transform(mockMuleMessage,ENCODING);
  verify(mockMuleMessage,times(0)).setOutboundProperty("SomeVar",PROPERTY_VALUE);
  verify(mockMuleMessage).setOutboundProperty("MULE_ID",PROPERTY_VALUE);
  verify(mockMuleMessage).setOutboundProperty("MULE_CORRELATION_ID",PROPERTY_VALUE);
  verify(mockMuleMessage).setOutboundProperty("MULE_GROUP_ID",PROPERTY_VALUE);
}
