{
  for (Enumeration<?> e=mailMessage.getAllHeaders(); e.hasMoreElements(); ) {
    Header header=(Header)e.nextElement();
    String name=header.getName();
    String listName=MailUtils.toListHeader(name);
    String value=header.getValue();
    if (null == muleMessage.getOutboundProperty(name)) {
      muleMessage.setInboundProperty(name,value);
    }
    Object listPropertyValue=muleMessage.getOutboundProperty(listName);
    if (null == listPropertyValue) {
      listPropertyValue=new LinkedList<Object>();
      muleMessage.setInboundProperty(listName,listPropertyValue);
    }
    if (listPropertyValue instanceof List<?>) {
      ((List)listPropertyValue).add(header.getValue());
    }
  }
}
