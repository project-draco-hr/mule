{
  ImmutableEndpoint endpoint=muleContext.getEndpointFactory().getInboundEndpoint("waterMelonEndpoint");
  assertNotNull(endpoint);
  assertEquals("test.queue",endpoint.getEndpointURI().getAddress());
  Flow flow=(Flow)muleContext.getRegistry().lookupFlowConstruct("orangeComponent");
  ImmutableEndpoint ep=(ImmutableEndpoint)((CompositeMessageSource)flow.getMessageSource()).getSources().get(0);
  assertNotNull(ep);
  final List responseTransformers=ep.getResponseMessageProcessors();
  assertNotNull(responseTransformers);
  assertFalse(responseTransformers.isEmpty());
  final Object responseTransformer=responseTransformers.get(0);
  assertTrue(responseTransformer instanceof InterceptingChainLifecycleWrapper);
  assertTrue(((InterceptingChainLifecycleWrapper)responseTransformer).getMessageProcessors().get(0) instanceof TestCompressionTransformer);
}
