{
  Model model=muleContext.getRegistry().lookupModel("main");
  assertNotNull(model);
  assertEquals("main",model.getName());
  if (legacy) {
    assertTrue(model.getEntryPointResolverSet() instanceof LegacyEntryPointResolverSet);
  }
 else {
    assertTrue(model.getEntryPointResolverSet() instanceof TestEntryPointResolverSet);
  }
  assertTrue(model.getExceptionListener() instanceof TestExceptionStrategy);
  assertTrue(((AbstractExceptionListener)model.getExceptionListener()).getEndpoints().size() > 0);
  Endpoint ep=(Endpoint)((AbstractExceptionListener)model.getExceptionListener()).getEndpoints().get(0);
  assertEquals("test://component.exceptions",ep.getEndpointURI().toString());
}
