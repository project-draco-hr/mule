{
  Model model=muleContext.getRegistry().lookupModel("main");
  assertNotNull(model);
  assertEquals("main",model.getName());
  if (legacy) {
    assertTrue(model.getEntryPointResolverSet() instanceof LegacyEntryPointResolverSet);
  }
 else {
    assertTrue(model.getEntryPointResolverSet() instanceof TestEntryPointResolverSet);
  }
  assertTrue(model.getExceptionListener() instanceof TestExceptionStrategy);
  assertTrue(((AbstractExceptionStrategy)model.getExceptionListener()).getMessageProcessors().size() > 0);
  OutboundEndpoint ep=(OutboundEndpoint)((AbstractExceptionStrategy)model.getExceptionListener()).getMessageProcessors().get(0);
  assertEquals("test://component.exceptions",ep.getEndpointURI().toString());
}
