{
  Service service=muleContext.getRegistry().lookupService("orangeComponent");
  assertEquals(1,service.getOutboundRouter().getRouters().size());
  OutboundRouter router=(OutboundRouter)service.getOutboundRouter().getRouters().get(0);
  assertEquals(1,router.getRoutes().size());
  MessageProcessor mp=router.getRoutes().get(0);
  assertNotNull(mp);
  assertTrue(mp instanceof ImmutableEndpoint);
  ImmutableEndpoint endpoint=(ImmutableEndpoint)mp;
  assertNotNull(endpoint);
  assertEquals("appleInEndpoint",endpoint.getName());
  assertNotNull(endpoint.getTransformers());
  assertTrue(TransformerUtils.firstOrNull(endpoint.getTransformers()) instanceof TestCompressionTransformer);
  assertEquals(2,service.getMessageSource().getEndpoints().size());
  assertNotNull(service.getMessageSource().getCatchAllStrategy());
  assertTrue(service.getMessageSource().getCatchAllStrategy() instanceof ForwardingCatchAllStrategy);
  ForwardingCatchAllStrategy fcas=(ForwardingCatchAllStrategy)service.getMessageSource().getCatchAllStrategy();
  assertNotNull(fcas.getEndpoint());
  assertEquals("test://catch.all",fcas.getEndpoint().getEndpointURI().toString());
  endpoint=service.getMessageSource().getEndpoint("orangeEndpoint");
  assertNotNull(endpoint);
  assertEquals("orangeEndpoint",endpoint.getName());
  assertEquals("orangeQ",endpoint.getEndpointURI().getAddress());
  assertNotNull(endpoint.getTransformers());
  assertTrue(TransformerUtils.firstOrNull(endpoint.getTransformers()) instanceof TestCompressionTransformer);
}
