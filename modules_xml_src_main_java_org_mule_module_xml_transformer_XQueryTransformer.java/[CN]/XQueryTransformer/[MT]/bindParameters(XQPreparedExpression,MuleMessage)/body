{
  if (contextProperties != null) {
    for (Iterator i=contextProperties.entrySet().iterator(); i.hasNext(); ) {
      Map.Entry parameter=(Map.Entry)i.next();
      String key=(String)parameter.getKey();
      Object o=evaluateTransformParameter(key,parameter.getValue(),message);
      if (o instanceof String) {
        transformer.bindAtomicValue(new QName(key),o.toString(),connection.createAtomicItemType(XQItemType.XQBASETYPE_STRING));
      }
 else       if (o instanceof Boolean) {
        transformer.bindBoolean(new QName(key),((Boolean)o).booleanValue(),connection.createAtomicItemType(XQItemType.XQBASETYPE_BOOLEAN));
      }
 else       if (o instanceof Byte) {
        transformer.bindByte(new QName(key),((Byte)o).byteValue(),connection.createAtomicItemType(XQItemType.XQBASETYPE_BYTE));
      }
 else       if (o instanceof Short) {
        transformer.bindShort(new QName(key),((Short)o).shortValue(),connection.createAtomicItemType(XQItemType.XQBASETYPE_SHORT));
      }
 else       if (o instanceof Integer) {
        transformer.bindInt(new QName(key),((Integer)o).intValue(),connection.createAtomicItemType(XQItemType.XQBASETYPE_INT));
      }
 else       if (o instanceof Long) {
        transformer.bindLong(new QName(key),((Long)o).longValue(),connection.createAtomicItemType(XQItemType.XQBASETYPE_LONG));
      }
 else       if (o instanceof Float) {
        transformer.bindFloat(new QName(key),((Float)o).floatValue(),connection.createAtomicItemType(XQItemType.XQBASETYPE_FLOAT));
      }
 else       if (o instanceof Double) {
        transformer.bindDouble(new QName(key),((Double)o).doubleValue(),connection.createAtomicItemType(XQItemType.XQBASETYPE_DOUBLE));
      }
 else {
        logger.error("Cannot bind value: " + o + " cannot be bound to the Xquery context. Not of supported type");
      }
    }
  }
}
