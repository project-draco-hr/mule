{
  Authentication auth=null;
  if (authentication instanceof AcegiAuthenticationAdapter) {
    auth=((AcegiAuthenticationAdapter)authentication).getDelegate();
  }
 else {
    auth=new UsernamePasswordAuthenticationToken(authentication.getPrincipal(),authentication.getCredentials());
  }
  auth=delegate.authenticate(auth);
  return new AcegiAuthenticationAdapter(auth);
}
