{
  Mock mockMessage=new Mock(BytesMessage.class);
  mockMessage.expect("reset");
  mockMessage.expectAndReturn("readBytes",new IsInstanceOf(byte[].class),-1);
  BytesMessage mockBytesMessage=(BytesMessage)mockMessage.proxy();
  byte[] result=JmsMessageUtils.toByteArray(mockBytesMessage,JmsConstants.JMS_SPECIFICATION_102B);
  assertNotNull(result);
  assertEquals("Should return an empty byte array.",0,result.length);
  mockMessage.verify();
  mockMessage=new Mock(BytesMessage.class);
  mockMessage.expect("reset");
  mockMessage.expectAndReturn("getBodyLength",new Long(0));
  mockBytesMessage=(BytesMessage)mockMessage.proxy();
  result=JmsMessageUtils.toByteArray(mockBytesMessage,JmsConstants.JMS_SPECIFICATION_11);
  assertNotNull(result);
  assertEquals("Should return an empty byte array.",0,result.length);
  mockMessage.verify();
}
