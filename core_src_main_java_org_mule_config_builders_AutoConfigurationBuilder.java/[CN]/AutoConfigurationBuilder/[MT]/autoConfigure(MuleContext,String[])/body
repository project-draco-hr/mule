{
  ConfigurationBuilder configurationBuilder=null;
  if (ClassUtils.isClassOnPath("org.mule.config.spring.SpringXmlConfigurationBuilder",this.getClass())) {
    try {
      configurationBuilder=(ConfigurationBuilder)ClassUtils.instanciateClass("org.mule.config.spring.SpringXmlConfigurationBuilder",new Object[]{configResources});
    }
 catch (    Exception e) {
      throw new ConfigurationException(e);
    }
  }
 else   if (ClassUtils.isClassOnPath("org.mule.config.scripting.ScriptingConfigurationBuilder",this.getClass())) {
    try {
      configurationBuilder=(ConfigurationBuilder)ClassUtils.instanciateClass("org.mule.config.spring.SpringXmlConfigurationBuilder",new Object[]{configResources});
    }
 catch (    Exception e) {
      throw new ConfigurationException(e);
    }
  }
 else {
    throw new ConfigurationException(CoreMessages.configurationBuilderNoMatching(createConfigResourcesString()));
  }
  configurationBuilder.configure(muleContext);
}
