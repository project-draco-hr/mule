{
  Object payload="hello world!";
  Serializable newAttributes=mock(Serializable.class);
  MuleEvent event=delegate.asReturnValue(new DefaultMuleMessage(payload,newAttributes),operationContext);
  ArgumentCaptor<DefaultMuleMessage> captor=ArgumentCaptor.forClass(DefaultMuleMessage.class);
  verify(event).setMessage(captor.capture());
  MuleMessage message=captor.getValue();
  assertThat(message,is(notNullValue()));
  assertThat(message.getPayload(),is(sameInstance(payload)));
  assertThat(message.getAttributes(),is(sameInstance(newAttributes)));
  assertThat(message.getDataType().getType().equals(String.class),is(true));
}
