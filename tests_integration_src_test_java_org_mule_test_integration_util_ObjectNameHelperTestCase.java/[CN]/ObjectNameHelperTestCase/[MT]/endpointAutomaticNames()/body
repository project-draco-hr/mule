{
  ImmutableEndpoint ep=muleContext.getEndpointFactory().getInboundEndpoint("test://cn=foo,name=queue");
  muleContext.getRegistry().registerEndpoint(ep);
  assertEquals("endpoint.test.cn.foo.name.queue",ep.getName());
  ep=muleContext.getEndpointFactory().getInboundEndpoint("test://cn=foo,name=queue");
  assertEquals("endpoint.test.cn.foo.name.queue.1",ep.getName());
  ep=muleContext.getEndpointFactory().getInboundEndpoint("vm://my.queue");
  assertEquals("endpoint.vm.my.queue",ep.getName());
}
