{
  ImmutableEndpoint ep=muleContext.getRegistry().lookupEndpointFactory().getInboundEndpoint("test://cn=foo,name=queue?endpointName=foo");
  muleContext.getRegistry().registerEndpoint(ep);
  assertEquals("endpoint.test.cn.foo.name.queue",ep.getName());
  ep=muleContext.getRegistry().lookupEndpointFactory().getInboundEndpoint("test://cn=foo,name=queue?endpointName=this_is@aWierd-Name:x");
  assertEquals("this.is.aWierd.Name.x",ep.getName());
  muleContext.getRegistry().registerEndpoint(ep);
  ep=muleContext.getRegistry().lookupEndpointFactory().getInboundEndpoint("test://cn=foo,name=queue?endpointName=this_is@aWierd-Name:x");
  assertEquals("this.is.aWierd.Name.x",ep.getName());
  ep=muleContext.getRegistry().lookupEndpointFactory().getInboundEndpoint("test://cn=foo,name=queue?endpointName=this____is+another=@Wierd----Name:x:::");
  assertEquals("this.is.another.Wierd.Name.x",ep.getName());
}
