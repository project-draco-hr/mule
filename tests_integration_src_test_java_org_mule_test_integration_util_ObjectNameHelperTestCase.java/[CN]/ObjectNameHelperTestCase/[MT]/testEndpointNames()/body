{
  UMOImmutableEndpoint ep=managementContext.getRegistry().lookupEndpointFactory().getInboundEndpoint("test://cn=foo,name=queue?endpointName=foo");
  managementContext.getRegistry().registerEndpoint(ep);
  assertEquals("foo",ep.getName());
  ep=managementContext.getRegistry().lookupEndpointFactory().getInboundEndpoint("test://cn=foo,name=queue?endpointName=this_is@aWierd-Name:x");
  assertEquals("this.is.aWierd.Name.x",ep.getName());
  managementContext.getRegistry().registerEndpoint(ep);
  ep=managementContext.getRegistry().lookupEndpointFactory().getInboundEndpoint("test://cn=foo,name=queue?endpointName=this_is@aWierd-Name:x");
  assertEquals("this.is.aWierd.Name.x",ep.getName());
  ep=managementContext.getRegistry().lookupEndpointFactory().getInboundEndpoint("test://cn=foo,name=queue?endpointName=this____is+another=@Wierd----Name:x:::");
  assertEquals("this.is.another.Wierd.Name.x",ep.getName());
}
