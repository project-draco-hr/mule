{
  UMOImmutableEndpoint ep=managementContext.getRegistry().lookupEndpointFactory().getInboundEndpoint("test://cn=foo,name=queue",managementContext);
  managementContext.getRegistry().registerEndpoint(ep);
  assertEquals("endpoint.test.cn.foo.name.queue",ep.getName());
  ep=managementContext.getRegistry().lookupEndpointFactory().getInboundEndpoint("test://cn=foo,name=queue",managementContext);
  assertEquals("endpoint.test.cn.foo.name.queue.1",ep.getName());
  ep=managementContext.getRegistry().lookupEndpointFactory().getInboundEndpoint("vm://my.queue",managementContext);
  assertEquals("endpoint.vm.my.queue",ep.getName());
  ep=managementContext.getRegistry().lookupEndpointFactory().getInboundEndpoint("pop3://ross:secret@mail.mycompany.com?subject=foo",managementContext);
  assertEquals("endpoint.pop3.ross.mycompany.com",ep.getName());
}
