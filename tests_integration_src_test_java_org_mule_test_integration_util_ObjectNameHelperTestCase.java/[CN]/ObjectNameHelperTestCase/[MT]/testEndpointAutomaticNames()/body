{
  UMOImmutableEndpoint ep=muleContext.getRegistry().lookupEndpointFactory().getInboundEndpoint("test://cn=foo,name=queue");
  muleContext.getRegistry().registerEndpoint(ep);
  assertEquals("endpoint.test.cn.foo.name.queue",ep.getName());
  ep=muleContext.getRegistry().lookupEndpointFactory().getInboundEndpoint("test://cn=foo,name=queue");
  assertEquals("endpoint.test.cn.foo.name.queue.1",ep.getName());
  ep=muleContext.getRegistry().lookupEndpointFactory().getInboundEndpoint("vm://my.queue");
  assertEquals("endpoint.vm.my.queue",ep.getName());
  ep=muleContext.getRegistry().lookupEndpointFactory().getInboundEndpoint("pop3://ross:secret@mail.mycompany.com?subject=foo");
  assertEquals("endpoint.pop3.ross.mycompany.com",ep.getName());
}
