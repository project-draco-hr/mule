{
  Enumeration enumeration=(Enumeration)AccessController.doPrivileged(new PrivilegedAction(){
    public Object run(){
      try {
        final ClassLoader cl=Thread.currentThread().getContextClassLoader();
        return cl != null ? cl.getResources(resourceName) : null;
      }
 catch (      IOException e) {
        return null;
      }
    }
  }
);
  if (enumeration == null) {
    enumeration=(Enumeration)AccessController.doPrivileged(new PrivilegedAction(){
      public Object run(){
        try {
          return ClassUtils.class.getClassLoader().getResources(resourceName);
        }
 catch (        IOException e) {
          return null;
        }
      }
    }
);
  }
  if (enumeration == null) {
    enumeration=(Enumeration)AccessController.doPrivileged(new PrivilegedAction(){
      public Object run(){
        try {
          return callingClass.getClassLoader().getResources(resourceName);
        }
 catch (        IOException e) {
          return null;
        }
      }
    }
);
  }
  return enumeration;
}
