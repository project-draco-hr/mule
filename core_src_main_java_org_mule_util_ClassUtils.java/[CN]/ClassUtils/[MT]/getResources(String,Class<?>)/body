{
  Enumeration<URL> enumeration=AccessController.doPrivileged(new PrivilegedAction<Enumeration<URL>>(){
    public Enumeration<URL> run(){
      try {
        final ClassLoader cl=Thread.currentThread().getContextClassLoader();
        return cl != null ? cl.getResources(resourceName) : null;
      }
 catch (      IOException e) {
        return null;
      }
    }
  }
);
  if (enumeration == null) {
    enumeration=AccessController.doPrivileged(new PrivilegedAction<Enumeration<URL>>(){
      public Enumeration<URL> run(){
        try {
          return ClassUtils.class.getClassLoader().getResources(resourceName);
        }
 catch (        IOException e) {
          return null;
        }
      }
    }
);
  }
  if (enumeration == null) {
    enumeration=AccessController.doPrivileged(new PrivilegedAction<Enumeration<URL>>(){
      public Enumeration<URL> run(){
        try {
          return callingClass.getClassLoader().getResources(resourceName);
        }
 catch (        IOException e) {
          return null;
        }
      }
    }
);
  }
  return enumeration;
}
