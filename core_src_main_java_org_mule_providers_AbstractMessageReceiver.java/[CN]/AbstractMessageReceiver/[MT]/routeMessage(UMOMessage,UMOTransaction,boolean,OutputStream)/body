{
  if (connector.isEnableMessageEvents()) {
    connector.fireNotification(new MessageNotification(message,endpoint,component.getDescriptor().getName(),MessageNotification.MESSAGE_RECEIVED));
  }
  if (endpoint.isRemoteSync()) {
    message.setBooleanProperty(MuleProperties.MULE_REMOTE_SYNC_PROPERTY,true);
  }
  if (logger.isDebugEnabled()) {
    logger.debug("Message Received from: " + endpoint.getEndpointURI());
  }
  if (logger.isTraceEnabled()) {
    try {
      logger.trace("Message Payload: \n" + StringMessageUtils.truncate(StringMessageUtils.toString(message.getPayload()),200,false));
    }
 catch (    Exception e) {
    }
  }
  if (endpoint.getFilter() != null) {
    if (!endpoint.getFilter().accept(message)) {
      RequestContext.setEvent(new MuleEvent(message,endpoint,new MuleSession(message,new NullSessionHandler()),synchronous));
      return handleUnacceptedFilter(message);
    }
  }
  return listener.onMessage(message,trans,synchronous,outputStream);
}
