{
  MuleServer mule=new MuleServer("polling-receivers-restart-test.xml");
  mule.start(true,false);
  Thread.sleep(WAIT_TIME);
  UMOModel model=(UMOModel)managementContext.getRegistry().getModels().get("main");
  FunctionalTestComponent ftc=(FunctionalTestComponent)model.getComponent("Test").getInstance();
  assertNotNull("Functional Test Component not found in the model.",ftc);
  AtomicInteger pollCounter=new AtomicInteger(0);
  ftc.setEventCallback(new CounterCallback(pollCounter));
  managementContext.start();
  Thread.sleep(WAIT_TIME);
  managementContext.stop();
  assertTrue("No polls performed",pollCounter.get() > 0);
  managementContext.start();
  pollCounter.set(0);
  ftc.setEventCallback(new CounterCallback(pollCounter));
  Thread.sleep(WAIT_TIME);
  managementContext.dispose();
  assertTrue("No polls performed",pollCounter.get() > 0);
}
