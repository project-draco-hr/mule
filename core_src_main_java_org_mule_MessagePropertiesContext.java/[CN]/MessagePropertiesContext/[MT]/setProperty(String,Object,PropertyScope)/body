{
  if (scope == null) {
    setProperty(key,value);
    return;
  }
  checkScopeForWriteAccess(scope);
  if (PropertyScope.SESSION.equals(scope)) {
    if (RequestContext.getEvent() != null) {
      RequestContext.getEvent().getSession().setProperty(key,value);
    }
  }
 else {
    getScopedProperties(scope).put(key,value);
    keySet.add(key);
  }
}
