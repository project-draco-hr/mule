{
  Map<String,Serializable> props=new HashMap<>();
  props.put("username","ross");
  props.put("pass","ross");
  MuleEvent event=flowRunner("test").withPayload("hi").withInboundProperties(props).run();
  assertNull(event.getError());
  props.put("pass","badpass");
  MessagingException e=flowRunner("test").withPayload("hi").withInboundProperties(props).runExpectingException();
  assertThat(ExceptionHelper.getRootException(e),instanceOf(BadCredentialsException.class));
}
