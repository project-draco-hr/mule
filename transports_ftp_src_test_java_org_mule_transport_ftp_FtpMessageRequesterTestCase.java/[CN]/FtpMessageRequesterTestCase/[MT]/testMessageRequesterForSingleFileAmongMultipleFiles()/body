{
  createFileOnFtpServer(TEST_FILE_NAME);
  createFileOnFtpServer(TEST_FILE_NAME_2);
  MuleClient client=muleContext.getClient();
  MuleMessage message=client.request(getMuleFtpEndpoint() + separator + TEST_FILE_NAME,getTimeout());
  assertNotNull(message);
  assertEquals(TEST_MESSAGE,message.getPayloadAsString());
  assertEquals(TEST_FILE_NAME,message.getInboundProperty("originalFilename"));
  MuleMessage message2=client.request(getMuleFtpEndpoint() + separator + TEST_FILE_NAME_2,getTimeout());
  assertNotNull(message2);
  assertEquals(TEST_MESSAGE,message2.getPayloadAsString());
  assertEquals(TEST_FILE_NAME_2,message2.getInboundProperty("originalFilename"));
  MuleMessage message3=client.request(getMuleFtpEndpoint(),getTimeout());
  assertNull(message3);
}
