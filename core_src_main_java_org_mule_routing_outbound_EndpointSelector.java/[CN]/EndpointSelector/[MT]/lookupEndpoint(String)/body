{
  for (  MessageProcessor target : targets) {
    if (target instanceof ImmutableEndpoint) {
      ImmutableEndpoint ep=(ImmutableEndpoint)target;
      if (endpointName.equals(ep.getName())) {
        return target;
      }
 else       if (endpointName.equals(ep.getName())) {
        return target;
      }
 else       if (endpointName.equals(ep.getEndpointURI().getUri().toString())) {
        return target;
      }
    }
  }
  try {
    return getMuleContext().getRegistry().lookupEndpointFactory().getOutboundEndpoint(endpointName);
  }
 catch (  MalformedEndpointException e) {
    throw new EndpointNotFoundException(CoreMessages.endpointNotFound(endpointName),e);
  }
}
