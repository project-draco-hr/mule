{
  if (securityManager == null) {
    securityManager=muleContext.getSecurityManager();
  }
  if (securityManager == null) {
    throw new InitialisationException(CoreMessages.authSecurityManagerNotSet(),this);
  }
  if (securityProviders != null) {
    SecurityManager localManager=new MuleSecurityManager();
    String[] securityProviders=StringUtils.splitAndTrim(this.securityProviders,",");
    for (    String sp : securityProviders) {
      SecurityProvider provider=securityManager.getProvider(sp);
      if (provider != null) {
        localManager.addProvider(provider);
      }
 else {
        throw new InitialisationException(CoreMessages.objectNotRegistered("Security Provider",sp),this);
      }
    }
    securityManager=localManager;
  }
  doInitialise();
}
