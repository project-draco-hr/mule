{
  ApplicationContext context=(ApplicationContext)muleContext.getRegistry().lookupObject(SpringRegistry.SPRING_APPLICATION_CONTEXT);
  if (configurationLocation != null) {
    bus=new SpringBusFactory(context).createBus(configurationLocation,true);
  }
 else {
    bus=new SpringBusFactory(context).createBus((String)null,true);
  }
  if (!initializeStaticBusInstance) {
    BusFactory.setDefaultBus(null);
  }
  MuleUniversalTransport transport=new MuleUniversalTransport(this);
  DestinationFactoryManager dfm=bus.getExtension(DestinationFactoryManager.class);
  dfm.registerDestinationFactory("http://schemas.xmlsoap.org/soap/http",transport);
  dfm.registerDestinationFactory("http://schemas.xmlsoap.org/wsdl/soap/http",transport);
  dfm.registerDestinationFactory("http://cxf.apache.org/transports/http/configuration",transport);
  dfm.registerDestinationFactory("http://schemas.xmlsoap.org/wsdl/http/",transport);
  dfm.registerDestinationFactory("http://www.w3.org/2003/05/soap/bindings/HTTP/",transport);
  dfm.registerDestinationFactory(MuleUniversalTransport.TRANSPORT_ID,transport);
  ConduitInitiatorManager extension=bus.getExtension(ConduitInitiatorManager.class);
  try {
    extension.getConduitInitiator("http://schemas.xmlsoap.org/soap/http");
  }
 catch (  BusException e1) {
  }
  extension.registerConduitInitiator("http://schemas.xmlsoap.org/wsdl/soap/",transport);
  extension.registerConduitInitiator("http://schemas.xmlsoap.org/soap/http",transport);
  extension.registerConduitInitiator("http://schemas.xmlsoap.org/soap/http/",transport);
  extension.registerConduitInitiator("http://schemas.xmlsoap.org/wsdl/soap/http",transport);
  extension.registerConduitInitiator("http://schemas.xmlsoap.org/wsdl/http/",transport);
  extension.registerConduitInitiator("http://www.w3.org/2003/05/soap/bindings/HTTP/",transport);
  extension.registerConduitInitiator("http://cxf.apache.org/transports/http/configuration",transport);
  extension.registerConduitInitiator("http://cxf.apache.org/bindings/xformat",transport);
  extension.registerConduitInitiator(MuleUniversalTransport.TRANSPORT_ID,transport);
  try {
    muleContext.registerListener(this);
  }
 catch (  Exception e) {
    throw new InitialisationException(e,this);
  }
}
