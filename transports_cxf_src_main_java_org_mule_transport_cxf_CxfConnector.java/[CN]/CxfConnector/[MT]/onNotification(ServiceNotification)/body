{
  if (event.getAction() == ServiceNotification.SERVICE_STARTED && serviceToProtocolServices.get(event.getSource()) != null) {
    try {
      for (      Service outerService : serviceToProtocolServices.get(event.getSource())) {
        muleContext.getRegistry().registerService(outerService);
      }
    }
 catch (    MuleException e) {
      handleException(e);
    }
  }
 else   if (event.getAction() == ServiceNotification.SERVICE_STOPPED && serviceToProtocolServices.get(event.getSource()) != null) {
    try {
      for (      Service outerService : serviceToProtocolServices.get(event.getSource())) {
        muleContext.getRegistry().unregisterService(outerService.getName());
        serviceToProtocolServices.remove(event.getSource());
      }
    }
 catch (    MuleException e) {
      handleException(e);
    }
  }
}
