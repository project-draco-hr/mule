{
  super();
  if (requestLine == null) {
    throw new IllegalArgumentException("Request line may not be null");
  }
  this.requestLine=requestLine;
  if (headers != null) {
    this.headers.setHeaders(headers);
  }
  if (content != null) {
    String methodname=requestLine.getMethod();
    if ("POST".equalsIgnoreCase(methodname) || "PUT".equalsIgnoreCase(methodname)) {
      Header contentLength=this.headers.getFirstHeader("Content-Length");
      Header transferEncoding=this.headers.getFirstHeader("Transfer-Encoding");
      InputStream in=content;
      if (transferEncoding != null) {
        if (transferEncoding.getValue().indexOf("chunked") != -1) {
          in=new ChunkedInputStream(in);
        }
      }
 else       if (contentLength != null) {
        long len=getContentLength();
        if (len >= 0) {
          in=new ContentLengthInputStream(in,len);
        }
      }
      this.entity=in;
    }
  }
}
