{
  FunctionalTestComponent ftc=getFunctionalTestComponent("testReceive" + method);
  ftc.setEventCallback(new EventCallback(){
    public void eventReceived(    MuleEventContext context,    Object serviceComponent) throws Exception {
      MuleMessage message=context.getMessage();
      Assert.assertEquals(expectedContentType,message.getInboundProperty(HttpConstants.HEADER_CONTENT_TYPE,null));
      Assert.assertEquals("ISO-2022-JP",message.getEncoding());
      Object payload=message.getPayload();
      if (payload instanceof String) {
        assertEquals(getTestMessage(Locale.JAPAN),payload);
      }
 else       if (payload instanceof byte[]) {
        String payloadString=new String((byte[])payload,message.getEncoding());
        assertEquals(getTestMessage(Locale.JAPAN),payloadString);
      }
 else {
        fail();
      }
      latch.countDown();
    }
  }
);
}
