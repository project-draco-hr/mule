{
  String mimeType=getMime(message);
  if (getProtocol().startsWith("http") && !isMimeSupported(mimeType)) {
    if (mimeType == null) {
      throw new MessagingException(CoreMessages.createStaticMessage("Mime type not set on message, cannot validate that message is an AtomInboundEndpointFactoryBean feed"),message);
    }
 else {
      throw new MessagingException(CoreMessages.createStaticMessage("Mime type not supported '" + mimeType + "', supported types are: "+ getAcceptedMimeTypes()),message);
    }
  }
 else   if (mimeType == null) {
    logger.warn("Mime type not set on message, but connector protocol '" + getProtocol() + "' does not explicitly support mimeTypes. Message type will not be validated");
  }
  message.applyTransformers(inTransform);
  return true;
}
