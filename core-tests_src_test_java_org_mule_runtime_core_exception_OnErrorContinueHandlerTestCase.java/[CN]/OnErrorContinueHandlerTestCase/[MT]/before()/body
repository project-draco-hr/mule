{
  Transaction currentTransaction=TransactionCoordination.getInstance().getTransaction();
  if (currentTransaction != null) {
    TransactionCoordination.getInstance().unbindTransaction(currentTransaction);
  }
  flow=getTestFlow();
  onErrorContinueHandler=new OnErrorContinueHandler();
  onErrorContinueHandler.setMuleContext(mockMuleContext);
  onErrorContinueHandler.setFlowConstruct(flow);
  when(mockMuleContext.getStreamCloserService()).thenReturn(mockStreamCloserService);
  context=DefaultMessageContext.create(flow,TEST_CONNECTOR);
  mockMuleEvent=new DefaultMuleEvent(context,muleMessage,flow);
}
