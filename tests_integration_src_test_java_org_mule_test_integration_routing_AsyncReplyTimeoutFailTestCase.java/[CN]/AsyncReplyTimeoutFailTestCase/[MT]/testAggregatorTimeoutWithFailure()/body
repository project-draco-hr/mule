{
  latch=new CountDownLatch(1);
  muleContext.registerListener(new RoutingNotificationListener<RoutingNotification>(){
    public void onNotification(    RoutingNotification notification){
      if (notification.getAction() == RoutingNotification.CORRELATION_TIMEOUT) {
        latch.countDown();
      }
    }
  }
);
  String message="test";
  MuleClient client=new MuleClient(muleContext);
  MuleMessage result=client.send("vm://distributor.queue",message,null);
  assertNotNull(result);
  assertNotNull(result.getExceptionPayload());
  assertTrue(result.getExceptionPayload().getException() instanceof CorrelationTimeoutException);
  assertTrue(latch.await(3000,TimeUnit.MILLISECONDS));
}
