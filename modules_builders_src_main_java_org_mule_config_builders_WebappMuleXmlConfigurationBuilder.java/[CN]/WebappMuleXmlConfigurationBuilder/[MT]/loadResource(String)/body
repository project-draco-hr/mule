{
  String resourcePath=FileUtils.newFile(webappClasspath,resource).getPath();
  logger.debug("Searching for resource " + resourcePath + " in Servlet Context.");
  InputStream is=context.getResourceAsStream(resourcePath);
  if (is == null) {
    try {
      logger.debug("Resource " + resourcePath + " not found in Servlet Context, loading from classpath");
      is=IOUtils.getResourceAsStream(resource,getClass());
    }
 catch (    IOException ioex) {
      throw new ConfigurationException(CoreMessages.cannotLoadFromClasspath(resource),ioex);
    }
  }
  return is;
}
