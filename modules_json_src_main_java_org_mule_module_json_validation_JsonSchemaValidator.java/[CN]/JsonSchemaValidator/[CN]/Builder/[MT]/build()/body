{
  final URITranslatorConfigurationBuilder translatorConfigurationBuilder=URITranslatorConfiguration.newBuilder();
  for (  Map.Entry<String,String> redirect : schemaRedirects.entrySet()) {
    translatorConfigurationBuilder.addSchemaRedirect(redirect.getKey(),redirect.getValue());
  }
  final LoadingConfigurationBuilder loadingConfigurationBuilder=LoadingConfiguration.newBuilder().dereferencing(dereferencing == JsonSchemaDereferencing.CANONICAL ? Dereferencing.CANONICAL : Dereferencing.INLINE).setURITranslatorConfiguration(translatorConfigurationBuilder.freeze());
  LoadingConfiguration loadingConfiguration=loadingConfigurationBuilder.freeze();
  JsonSchemaFactory factory=JsonSchemaFactory.newBuilder().setLoadingConfiguration(loadingConfiguration).freeze();
  try {
    return new JsonSchemaValidator(loadSchema(factory,loadingConfiguration));
  }
 catch (  Exception e) {
    throw new MuleRuntimeException(MessageFactory.createStaticMessage("Could not initialise JsonSchemaValidator"),e);
  }
}
