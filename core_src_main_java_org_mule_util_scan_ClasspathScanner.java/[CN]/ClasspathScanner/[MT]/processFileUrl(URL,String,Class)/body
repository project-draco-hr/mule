{
  Set<Class> set=new HashSet<Class>();
  String urlBase=url.getFile();
  urlBase=urlBase.replaceAll("%20"," ");
  File dir=new File(urlBase);
  if (!dir.isDirectory()) {
    logger.warn("Cannot process File URL: " + url + ". Path is not a directory");
    return set;
  }
  Collection<File> files=FileUtils.listFiles(new File(urlBase),new String[]{"class"},true);
  for (  File file : files) {
    try {
      InputStream classStream=new FileInputStream(file);
      ClassReader reader=new ClosableClassReader(classStream);
      ClassScanner visitor=getScanner(clazz);
      reader.accept(visitor,0);
      if (visitor.isMatch()) {
        Class c=loadClass(visitor.getClassName());
        if (c != null) {
          set.add(c);
        }
      }
    }
 catch (    IOException e) {
      if (logger.isDebugEnabled()) {
        Throwable t=ExceptionHelper.getRootException(e);
        logger.debug(String.format("%s: caused by: %s",e.toString(),t.toString()));
      }
    }
  }
  return set;
}
