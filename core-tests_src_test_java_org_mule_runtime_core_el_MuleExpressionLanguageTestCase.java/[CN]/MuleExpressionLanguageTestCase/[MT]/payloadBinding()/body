{
  ExpressionLanguage expressionLanguage=spy(MuleExpressionLanguage.class);
  MuleEvent event=getEventWithError(empty());
  Message message=mock(Message.class,RETURNS_DEEP_STUBS);
  when(event.getMessage()).thenReturn(message);
  TypedValue payload=mock(TypedValue.class);
  when(message.getPayload()).thenReturn(payload);
  BindingContext context=getBindingContextFromEvaluation(expressionLanguage,event);
  assertThat(context.lookup(PAYLOAD).get(),is(sameInstance(payload)));
}
