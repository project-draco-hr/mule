{
  MessageProcessor mp=new OutboundEndpointPropertyMessageProcessor();
  OutboundEndpoint endpoint=createTestOutboundEndpoint(null,null);
  MuleEvent event=mp.process(createTestOutboundEvent(endpoint,true));
  assertEquals(endpoint.getEndpointURI().getUri().toString(),event.getMessage().getStringProperty(MuleProperties.MULE_ENDPOINT_PROPERTY,null));
  assertSame(event,RequestContext.getEvent());
}
