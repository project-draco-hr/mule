{
  if (!c.canWrite()) {
    final FutureImpl<Boolean> future=Futures.createSafeFuture();
    c.notifyCanWrite(new WriteHandler(){
      @Override public void onWritePossible() throws Exception {
        future.result(TRUE);
      }
      @Override public void onError(      Throwable t){
        future.failure(makeIOException(t));
      }
    }
);
    block(c,future);
  }
}
