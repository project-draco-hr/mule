{
  try {
    final long writeTimeout=c.getTransport().getWriteTimeout(MILLISECONDS);
    if (writeTimeout != -1) {
      future.get(writeTimeout,MILLISECONDS);
    }
 else {
      future.get();
    }
  }
 catch (  ExecutionException e) {
    c.closeWithReason(Exceptions.makeIOException(e.getCause()));
  }
catch (  Exception e) {
    c.closeWithReason(Exceptions.makeIOException(e));
  }
}
