{
  final FilterChain filterChain=context.getFilterChain();
  final int idx=filterChain.indexOfType(SSLFilter.class);
  assert(idx != -1);
  final SSLFilter filter=(SSLFilter)filterChain.get(idx);
  final Connection c=context.getConnection();
  filter.addHandshakeListener(new SSLBaseFilter.HandshakeListener(){
    public void onStart(    Connection connection){
    }
    @Override public void onFailure(    final Connection connection,    final Throwable t){
      connection.closeWithReason(Exceptions.makeIOException(t));
    }
    public void onComplete(    Connection connection){
      if (c.equals(connection)) {
        filter.removeHandshakeListener(this);
        feederFlush(c);
      }
    }
  }
);
  filter.handshake(context.getConnection(),null);
}
