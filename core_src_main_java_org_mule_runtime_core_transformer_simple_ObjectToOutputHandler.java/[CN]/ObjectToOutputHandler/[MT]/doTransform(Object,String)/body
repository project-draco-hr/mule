{
  if (src instanceof String) {
    return new OutputHandler(){
      public void write(      MuleEvent event,      OutputStream out) throws IOException {
        out.write(((String)src).getBytes(encoding));
      }
    }
;
  }
 else   if (src instanceof byte[]) {
    return new OutputHandler(){
      public void write(      MuleEvent event,      OutputStream out) throws IOException {
        out.write((byte[])src);
      }
    }
;
  }
 else   if (src instanceof InputStream) {
    return new OutputHandler(){
      public void write(      MuleEvent event,      OutputStream out) throws IOException {
        InputStream is=(InputStream)src;
        try {
          IOUtils.copyLarge(is,out);
        }
  finally {
          is.close();
        }
      }
    }
;
  }
 else   if (src instanceof Serializable) {
    return new OutputHandler(){
      public void write(      MuleEvent event,      OutputStream out) throws IOException {
        muleContext.getObjectSerializer().serialize(src,out);
      }
    }
;
  }
 else {
    throw new TransformerException(MessageFactory.createStaticMessage("Unable to convert " + src.getClass() + " to OutputHandler."));
  }
}
