{
  MuleServer server=new MuleServer();
  String config=SystemUtils.getCommandLineOption("-config",args);
  if (config == null) {
    logger.warn("A configuration file was not set, using default: " + DEFAULT_CONFIGURATION);
    URL configUrl=IOUtils.getResourceAsUrl(DEFAULT_CONFIGURATION,MuleServer.class,true);
    if (configUrl != null) {
      config=configUrl.toExternalForm();
    }
  }
  if (config != null) {
    server.setConfigurationResources(config);
  }
 else {
    Message message=new Message(Messages.CONFIG_NOT_FOUND_USAGE);
    System.err.println(message.toString());
    System.exit(1);
  }
  String cfgBuilderClassName=SystemUtils.getCommandLineOption("-builder",args);
  if (cfgBuilderClassName != null) {
    try {
      if (cfgBuilderClassName.equalsIgnoreCase("spring")) {
        cfgBuilderClassName=CLASSNAME_SPRING_CONFIG_BUILDER;
      }
      setConfigBuilderClassName(cfgBuilderClassName);
    }
 catch (    Exception e) {
      logger.fatal(e);
      final Message message=new Message(Messages.FAILED_LOAD_X,"Builder: " + cfgBuilderClassName);
      System.err.println(StringMessageUtils.getBoilerPlate("FATAL: " + message.toString()));
      System.exit(1);
    }
  }
  String propertiesFile=SystemUtils.getCommandLineOption("-props",args);
  if (propertiesFile != null) {
    setStartupPropertiesFile(propertiesFile);
  }
  server.start(false);
}
