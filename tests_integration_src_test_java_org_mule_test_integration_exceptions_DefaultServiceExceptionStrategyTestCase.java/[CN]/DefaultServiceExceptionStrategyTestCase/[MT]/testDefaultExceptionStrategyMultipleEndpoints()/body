{
  Service service=muleContext.getRegistry().lookupService("testService2");
  assertNotNull(service);
  assertNotNull(service.getExceptionListener());
  assertTrue(service.getExceptionListener() instanceof DefaultServiceExceptionStrategy);
  DefaultServiceExceptionStrategy exceptionListener=(DefaultServiceExceptionStrategy)service.getExceptionListener();
  MessageProcessor mp=exceptionListener.getMessageProcessors().iterator().next();
  assertTrue(mp.getClass().getName(),mp instanceof MulticastingRouter);
  assertEquals(2,((MulticastingRouter)mp).getRoutes().size());
  MuleClient mc=new MuleClient(muleContext);
  mc.dispatch("vm://in2","test",null);
  MuleMessage out2=mc.request("vm://out2",FunctionalTestCase.RECEIVE_TIMEOUT);
  MuleMessage out3=mc.request("vm://out3",FunctionalTestCase.RECEIVE_TIMEOUT);
  assertExceptionMessage(out2);
  assertExceptionMessage(out3);
  assertNotSame(out2,out3);
  assertEquals(out2.getPayload(),out3.getPayload());
}
