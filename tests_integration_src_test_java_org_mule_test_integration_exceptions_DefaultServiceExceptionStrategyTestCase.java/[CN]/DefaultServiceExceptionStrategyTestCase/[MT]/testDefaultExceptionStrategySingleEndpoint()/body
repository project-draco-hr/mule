{
  FlowConstruct flowConstruct=muleContext.getRegistry().lookupFlowConstruct("testService1");
  assertNotNull(flowConstruct);
  assertNotNull(flowConstruct.getExceptionListener());
  assertTrue(flowConstruct.getExceptionListener() instanceof DefaultMessagingExceptionStrategy);
  assertEquals(1,((DefaultMessagingExceptionStrategy)flowConstruct.getExceptionListener()).getMessageProcessors().size());
  MuleClient client=muleContext.getClient();
  client.dispatch("vm://in1","test",null);
  assertExceptionMessage(client.request("vm://out1",RECEIVE_TIMEOUT));
  assertNull(client.request("vm://out1",RECEIVE_TIMEOUT));
}
