{
  if (isInitialised() || isInitialising()) {
    value=applyProcessors(value);
  }
  Map objectMap=getObjectTypeMap(metadata);
  if (objectMap != null) {
    if (objectMap.containsKey(key)) {
      throw new RegistrationException("TransientRegistry already contains an object named '" + key + "'.  The previous object would be overwritten.");
    }
    objectMap.put(key,value);
    if (managementContext != null) {
      try {
        managementContext.applyLifecycle(value);
      }
 catch (      UMOException e) {
        throw new RegistrationException(e);
      }
    }
  }
 else {
    throw new RegistrationException("No object map exists for type " + metadata);
  }
}
