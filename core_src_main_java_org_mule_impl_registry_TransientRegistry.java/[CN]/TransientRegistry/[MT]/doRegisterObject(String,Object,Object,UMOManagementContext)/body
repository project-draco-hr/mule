{
  if (isInitialised() || isInitialising()) {
    value=applyProcessors(value);
  }
  Map objectMap=getObjectTypeMap(metadata);
  if (objectMap != null) {
    objectMap.put(key,value);
    if (managementContext != null) {
      applyLifecycle(value,managementContext);
    }
  }
 else {
    throw new RegistrationException("No object map exists for type " + metadata);
  }
}
