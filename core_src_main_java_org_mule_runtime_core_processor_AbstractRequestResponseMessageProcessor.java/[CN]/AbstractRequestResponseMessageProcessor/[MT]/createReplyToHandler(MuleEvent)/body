{
  final ReplyToHandler originalReplyToHandler=request.getReplyToHandler();
  return new NonBlockingReplyToHandler(){
    @Override public void processReplyTo(    MuleEvent event,    MuleMessage returnMessage,    Object replyTo) throws MuleException {
      try {
        MuleEvent response=processResponse(recreateEventWithOriginalReplyToHandler(event,originalReplyToHandler),request);
        if (!NonBlockingVoidMuleEvent.getInstance().equals(response)) {
          originalReplyToHandler.processReplyTo(response,null,null);
        }
      }
 catch (      Exception e) {
        processExceptionReplyTo(new MessagingException(event,e),null);
      }
 finally {
        processFinally(event,null);
      }
    }
    @Override public void processExceptionReplyTo(    MessagingException exception,    Object replyTo){
      try {
        MuleEvent handledEvent=processCatch(exception.getEvent(),exception);
        originalReplyToHandler.processReplyTo(handledEvent,null,null);
      }
 catch (      Exception e) {
        originalReplyToHandler.processExceptionReplyTo(exception,replyTo);
      }
 finally {
        processFinally(exception.getEvent(),exception);
      }
    }
  }
;
}
