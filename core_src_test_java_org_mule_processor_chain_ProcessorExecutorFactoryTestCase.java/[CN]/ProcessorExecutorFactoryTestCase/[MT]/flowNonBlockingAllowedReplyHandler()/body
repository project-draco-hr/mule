{
  when(muleEvent.getFlowConstruct()).thenReturn(mock(Flow.class));
  when(muleEvent.isAllowNonBlocking()).thenReturn(true);
  when(muleEvent.getReplyToHandler()).thenReturn(mock(CompletionHandlerReplyToHandlerAdaptor.class));
  assertThat(createProcessorExecutor().getClass(),CoreMatchers.<Class>equalTo((NonBlockingProcessorExecutor.class)));
}
