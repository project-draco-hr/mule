{
  InboundEndpoint endpoint=getTestInboundEndpoint("Test",null,null,new PayloadTypeFilter(Object.class),null,null);
  MuleEvent event=getTestEvent("payload",endpoint);
  setCurrentEvent(event);
  Transformer transformer=createSerializableToByteArrayTransformer();
  transformer.setMuleContext(muleContext);
  Serializable serialized=(Serializable)createSerializableToByteArrayTransformer().transform(event);
  assertNotNull(serialized);
  ByteArrayToObject trans=new ByteArrayToObject();
  trans.setMuleContext(muleContext);
  MuleEvent deserialized=(MuleEvent)trans.transform(serialized);
  assertNotNull(deserialized);
  assertNotNull(deserialized.getMuleContext());
  assertNotNull(deserialized.getSession());
  assertNotNull(deserialized.getFlowConstruct());
  assertEquals(event.getFlowConstruct(),deserialized.getFlowConstruct());
  assertSame(event.getFlowConstruct(),deserialized.getFlowConstruct());
}
