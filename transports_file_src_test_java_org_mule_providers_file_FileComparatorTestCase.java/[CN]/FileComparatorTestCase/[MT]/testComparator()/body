{
  managementContext.getRegistry().lookupConnector(FILE_CONNECTOR_NAME).stop();
  File f1=FileUtils.newFile(PATH + FILE1_NAME);
  f1.createNewFile();
  Thread.sleep(1);
  File f2=FileUtils.newFile(PATH + FILE2_NAME);
  f2.createNewFile();
  Thread.sleep(10);
  managementContext.getRegistry().lookupConnector(FILE_CONNECTOR_NAME).start();
  MuleClient client=new MuleClient();
  UMOMessage message=client.receive(OUT_QUEUE,TIMEOUT);
  assertNotNull(message);
  assertEquals(message.getProperty(FileConnector.PROPERTY_ORIGINAL_FILENAME),FILE2_NAME);
  message=client.receive(OUT_QUEUE,TIMEOUT);
  assertNotNull(message);
  assertEquals(message.getProperty(FileConnector.PROPERTY_ORIGINAL_FILENAME),FILE1_NAME);
  client.dispose();
}
