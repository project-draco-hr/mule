{
  FlowConfiguringMessageProcessor processor=muleContext.getRegistry().lookupObjects(FlowConfiguringMessageProcessor.class).iterator().next();
  List<Interceptor<? extends Message>> inInterceptors=((ProxyServiceFactoryBean)processor.getMessageProcessorBuilder()).getInInterceptors();
  assertEquals(muleContext.getRegistry().get("foo1"),inInterceptors.get(0));
  assertEquals(muleContext.getRegistry().get("foo3"),inInterceptors.get(1));
}
