{
  MuleClient client=new MuleClient(muleContext);
  Set polos=new HashSet(Arrays.asList(new String[]{"Marco","Niccolo","Maffeo"}));
  Iterator people=polos.iterator();
  while (people.hasNext()) {
    client.dispatch("vm://entry",people.next(),null);
  }
  for (int i=0; i < 3; ++i) {
    MuleMessage response=client.request("queue",WAIT);
    assertNotNull("Response is null",response);
    String person=(String)response.getPayload();
    String name=new StringTokenizer(person).nextToken();
    assertTrue(name,polos.contains(name));
    polos.remove(name);
  }
}
