{
  try {
    ConnectionFactory connectionFactory=(ConnectionFactory)ClassUtils.instanciateClass(ACTIVEMQ_XA_CONNECTION_FACTORY_CLASS,getBrokerURL());
    applyVendorSpecificConnectionFactoryProperties(connectionFactory);
    return connectionFactory;
  }
 catch (  InvocationTargetException itex) {
    Throwable target=itex.getCause();
    handleException(target instanceof Exception ? (Exception)target : new Exception(target));
  }
catch (  Exception e) {
    handleException(e);
  }
  return null;
}
