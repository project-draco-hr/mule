{
  try {
    if (src instanceof String) {
      return src.toString().getBytes(encoding);
    }
 else     if (src instanceof InputStream) {
      InputStream is=(InputStream)src;
      ByteArrayOutputStream byteOut=new ByteArrayOutputStream();
      try {
        IOUtils.copy(is,byteOut);
      }
  finally {
        is.close();
      }
      return byteOut.toByteArray();
    }
  }
 catch (  Exception e) {
    throw new TransformerException(this,e);
  }
  return super.doTransform(src,encoding);
}
