{
  MessageProcessorChainBuilder builder=new DefaultMessageProcessorChainBuilder();
  for (  Object processor : messageProcessors) {
    if (processor instanceof Processor) {
      builder.chain((Processor)processor);
    }
 else     if (processor instanceof MessageProcessorBuilder) {
      builder.chain((MessageProcessorBuilder)processor);
    }
 else {
      throw new IllegalArgumentException("MessageProcessorBuilder should only have MessageProcessors or MessageProcessorBuilders configured");
    }
  }
  return createFilterPair(builder);
}
