{
  spec=drop(spec,"(");
  while (!spec.startsWith(")")) {
    Assert.assertTrue("spec finished early (missing ')'?)",spec.length() > 1);
    if (spec.startsWith("[")) {
      Map value=new HashMap();
      spec=fillMap(value,spec);
      list.add(value);
    }
 else     if (spec.startsWith("(")) {
      List value=new LinkedList();
      spec=fillList(value,spec);
      list.add(value);
    }
 else {
      String value=spec.substring(0,1);
      spec=drop(spec,value);
      list.add(value);
    }
    if (spec.startsWith(",")) {
      spec=drop(spec,",");
    }
  }
  return drop(spec,")");
}
