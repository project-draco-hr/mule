{
  Map<String,Object> commandlineOptions;
  try {
    commandlineOptions=SystemUtils.getCommandLineOptions(args,CLI_OPTIONS);
  }
 catch (  DefaultMuleException me) {
    throw new IllegalArgumentException(me.toString());
  }
  MuleUrlStreamHandlerFactory.installUrlStreamHandlerFactory();
  String propertiesFile=(String)commandlineOptions.get("props");
  if (propertiesFile != null) {
    setStartupPropertiesFile(propertiesFile);
  }
  StartupContext.get().setStartupOptions(commandlineOptions);
  String application=(String)commandlineOptions.get("app");
  String[] apps;
  if (application == null) {
    apps=MuleContainerBootstrapUtils.getMuleAppsFile().list();
  }
 else {
    apps=application.split(":");
  }
  for (  String app : apps) {
    final DeployerWrapper<Map<String,Object>> d=new DeployerWrapper<Map<String,Object>>(new MuleAppDeployer(app));
    d.setMetaData(commandlineOptions);
    ((MultiDeployer)deployer).getDeployers().add(d);
  }
  deployer.install();
}
