{
  final CountDownLatch exceptionStrategyListener=new CountDownLatch(4);
  muleContext.registerListener(new ExceptionNotificationListener<ExceptionNotification>(){
    @Override public void onNotification(    ExceptionNotification notification){
      exceptionStrategyListener.countDown();
    }
  }
);
  putMessageOnQueue("rollbackOnException");
  if (!exceptionStrategyListener.await(RECEIVE_TIMEOUT,TimeUnit.MILLISECONDS)) {
    fail("Message should have been redelivered");
  }
  assertThat(muleContext.getClient().request("jms://rollbackOnException?connector=jmsConnectorNoRedelivery",RECEIVE_TIMEOUT / 10),IsNull.<Object>nullValue());
}
