{
  Bindings bindings=script.getScriptEngine().createBindings();
  script.populateBindings(bindings,event);
  Object result=script.runScript(bindings);
  if (result != null) {
    if (result instanceof MuleMessage) {
      return (MuleMessage)result;
    }
 else {
      event.getMessage().applyTransformers(Collections.singletonList(new TransformerTemplate(new TransformerTemplate.OverwitePayloadCallback(result))));
      return event.getMessage();
    }
  }
 else {
    return new DefaultMuleMessage(NullPayload.getInstance());
  }
}
