{
  proxies=new HashMap();
  if (nestedRouter != null && nestedRouter.getRouters().size() > 0) {
    for (Iterator it=nestedRouter.getRouters().iterator(); it.hasNext(); ) {
      NestedRouter nestedRouter=(NestedRouter)it.next();
      String bindingName=ClassUtils.getSimpleName(nestedRouter.getInterface());
      if (proxies.containsKey(bindingName)) {
        Object proxy=proxies.get(bindingName);
        NestedInvocationHandler handler=(NestedInvocationHandler)Proxy.getInvocationHandler(proxy);
        handler.addRouterForInterface(nestedRouter);
      }
 else {
        Object proxy=Proxy.newProxyInstance(getClass().getClassLoader(),new Class[]{nestedRouter.getInterface()},new NestedInvocationHandler(nestedRouter));
        proxies.put(bindingName,proxy);
      }
    }
  }
}
