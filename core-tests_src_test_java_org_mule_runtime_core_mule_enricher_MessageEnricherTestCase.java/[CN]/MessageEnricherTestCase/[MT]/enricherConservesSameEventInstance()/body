{
  MessageEnricher enricher=new MessageEnricher();
  enricher.setMuleContext(muleContext);
  enricher.addEnrichExpressionPair(new EnrichExpressionPair("#[sessionVars['foo']]"));
  SensingNullMessageProcessor sensingNullMessageProcessor=new SensingNullMessageProcessor();
  enricher.setEnrichmentMessageProcessor(sensingNullMessageProcessor);
  Flow flow=mock(Flow.class);
  when(flow.getMuleContext()).thenReturn(muleContext);
  MuleEvent in=new DefaultMuleEvent(create(flow),MuleMessage.builder().payload(TEST_MESSAGE).build(),MessageExchangePattern.REQUEST_RESPONSE,flow);
  MuleEvent out=enricher.process(in);
  assertThat(out,is(sameInstance(in)));
  assertThat(sensingNullMessageProcessor.event,not(sameInstance(in)));
}
