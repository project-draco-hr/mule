{
  MessageEnricher enricher=new MessageEnricher();
  enricher.setMuleContext(muleContext);
  enricher.addEnrichExpressionPair(new EnrichExpressionPair("#[sessionVars['foo']]"));
  SensingNullMessageProcessor sensingNullMessageProcessor=new SensingNullMessageProcessor();
  enricher.setEnrichmentMessageProcessor(sensingNullMessageProcessor);
  Flow flow=mock(Flow.class);
  when(flow.getMuleContext()).thenReturn(muleContext);
  MuleEvent in=MuleEvent.builder(DefaultMessageContext.create(flow,TEST_CONNECTOR)).message(MuleMessage.builder().payload(TEST_MESSAGE).build()).exchangePattern(REQUEST_RESPONSE).flow(flow).build();
  MuleEvent out=enricher.process(in);
  assertThat(out,is(sameInstance(in)));
  assertThat(sensingNullMessageProcessor.event,not(sameInstance(in)));
}
