{
  boolean remoteSync=false;
  if (event.getEndpoint().getConnector().isResponseEnabled()) {
    boolean hasResponse=event.getEndpoint().getExchangePattern().hasResponse();
    remoteSync=hasResponse || doSend;
    if (remoteSync) {
      if (event.getFlowConstruct() != null && event.getFlowConstruct() instanceof Service) {
        ServiceAsyncReplyCompositeMessageSource responseRouters=((Service)event.getFlowConstruct()).getAsyncReplyMessageSource();
        if (responseRouters != null && responseRouters.getEndpoints().size() > 0) {
          remoteSync=false;
        }
 else {
          remoteSync=true;
        }
      }
    }
  }
  if (!remoteSync) {
    event.getMessage().removeProperty(MuleProperties.MULE_REMOTE_SYNC_PROPERTY);
  }
  return remoteSync;
}
