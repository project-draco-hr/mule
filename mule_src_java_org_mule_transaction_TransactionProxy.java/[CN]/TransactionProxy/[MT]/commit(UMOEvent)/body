{
  if (transaction.isRollbackOnly()) {
    throw new IllegalTransactionStateException("Cannot commit transaction as it is marked for rollback only");
  }
 else   if (canCommit(event)) {
    transaction.commit();
    TransactionCoordination.getInstance().unbindTransaction();
  }
 else   if (TransactionCoordination.getInstance().getTransaction() == null) {
    throw new IllegalTransactionStateException("Atransaction is in progress but no Transaction is bound in the TransactionCoordination");
  }
}
