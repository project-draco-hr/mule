{
  LocalMuleClient client=muleContext.getClient();
  muleContext.registerListener(new ExceptionNotificationListener(){
    @Override public void onNotification(    ServerNotification notification){
      messageConsumed.release();
    }
  }
);
  client.dispatch("jms://in1?connector=activeMq",MESSAGE,null);
  messageConsumed.await(TIMEOUT,TimeUnit.MILLISECONDS);
  stopFlowConstruct("singleTransactionBehavior");
  MuleMessage request=client.request("jms://in?connector=activeMq",TIMEOUT);
  assertThat(request,IsNull.<Object>nullValue());
}
