{
  if (filter == null) {
    return true;
  }
  UMOMessage message;
  if (transformFirst) {
    try {
      Object payload=event.getTransformedMessage();
      message=new MuleMessage(payload,event.getMessage());
    }
 catch (    TransformerException e) {
      throw new RoutingException(new Message(Messages.TRANSFORM_FAILED_BEFORE_FILTER),event.getMessage(),event.getEndpoint(),e);
    }
  }
 else {
    message=event.getMessage();
  }
  return filter.accept(message);
}
