{
  URLName url=new URLName(getProtocol(),getHostname(),getPort(),getMailBox(),getUsername(),getPassword());
  Properties props=System.getProperties();
  props.put("mail.smtp.host",getHostname());
  props.put("mail.smtp.port",String.valueOf(getPort()));
  props.put("mail.debug",Boolean.toString(logger.isDebugEnabled()));
  session=Session.getDefaultInstance(props,null);
  session.setDebug(logger.isDebugEnabled());
  PasswordAuthentication pw=new PasswordAuthentication(getUsername(),getPassword());
  session.setPasswordAuthentication(url,pw);
  try {
    Store store=session.getStore(url);
    store.connect();
    inbox=store.getFolder(getMailBox());
  }
 catch (  MessagingException e) {
    throw new InitialisationException(e,this);
  }
}
