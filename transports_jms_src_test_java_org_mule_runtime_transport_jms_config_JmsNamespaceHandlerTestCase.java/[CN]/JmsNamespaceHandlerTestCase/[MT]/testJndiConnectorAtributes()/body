{
  JmsConnector connector=(JmsConnector)muleContext.getRegistry().lookupObject("jmsJndiConnector");
  assertThat("connection factory must be created only after connect so reconnection works when JNDI context is not yet available during start",connector.getConnectionFactory(),nullValue());
  connector.connect();
  assertNotNull(connector);
  assertEquals("org.mule.runtime.transport.jms.test.JmsTestContextFactory",connector.getJndiInitialFactory());
  assertEquals("jndi://test",connector.getJndiProviderUrl());
  assertEquals("jms/connectionFactory",connector.getConnectionFactoryJndiName());
  assertEquals("org.mule.runtime.transport.jms.test.TestConnectionFactory",connector.getConnectionFactory().getClass().getName());
  assertTrue(connector.isJndiDestinations());
  assertTrue(connector.isForceJndiDestinations());
  assertEquals("value",connector.getJndiProviderProperties().get("key"));
  assertEquals("customValue",connector.getConnectionFactoryProperties().get("customProperty"));
  assertEquals("customValue",((TestConnectionFactory)connector.getConnectionFactory()).getCustomProperty());
}
