{
  try {
    context.registerListener(new MuleContextNotificationListener<MuleContextNotification>(){
      @Override public boolean isBlocking(){
        return false;
      }
      @Override public void onNotification(      MuleContextNotification notification){
        MuleContextNotification mn=notification;
        if (MuleContextNotification.CONTEXT_DISPOSED == mn.getAction()) {
          resolvedDomain=null;
          contexts.set(null);
        }
      }
    }
);
  }
 catch (  NotificationException e) {
    logger.warn("Did not cleanup properly.",e);
  }
}
