{
  MuleMessage message=new DefaultMuleMessage("",muleContext);
  MuleEvent event=new DefaultMuleEvent(message,MessageExchangePattern.ONE_WAY,Mockito.mock(FlowConstruct.class));
  event.setFlowVariable("foo","bar");
  event.getSession().setProperty("foo","NOTbar");
  assertEquals(event.getFlowVariable("foo"),evaluate("foo",message));
}
