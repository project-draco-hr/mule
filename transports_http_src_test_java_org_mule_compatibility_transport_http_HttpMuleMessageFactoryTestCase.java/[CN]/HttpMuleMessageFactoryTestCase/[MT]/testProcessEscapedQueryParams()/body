{
  HttpMuleMessageFactory messageFactory=new HttpMuleMessageFactory();
  String queryParams="key1=value%201&key2=value2&key%203=value3&key%203=value4";
  Map<String,Serializable> processedParams=messageFactory.processQueryParams("http://localhost:8080/resources?" + queryParams,UTF_8);
  Object value1=processedParams.get("key1");
  assertNotNull(value1);
  assertEquals("value 1",value1);
  Object value2=processedParams.get("key2");
  assertNotNull(value2);
  assertEquals("value2",value2);
  Object value3=processedParams.get("key 3");
  assertNotNull(value3);
  assertTrue(value3 instanceof List);
  assertTrue(((List)value3).contains("value3"));
  assertTrue(((List)value3).contains("value4"));
}
