{
  try {
    writer.initialize(out);
    boolean finishWriting=false;
    while (!finishWriting) {
      finishWriting=writer.write(out,bytesRequested);
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
 finally {
    IOUtils.closeQuietly(out);
    while (!this.isInterrupted()) {
      try {
        sleep(1000 * 60);
      }
 catch (      InterruptedException e) {
      }
    }
  }
}
