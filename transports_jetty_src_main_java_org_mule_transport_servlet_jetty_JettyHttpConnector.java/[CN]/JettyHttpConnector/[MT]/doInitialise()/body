{
  httpServer=new Server();
  if (configFile != null) {
    try {
      InputStream is=IOUtils.getResourceAsStream(configFile,getClass());
      XmlConfiguration config=new XmlConfiguration(is);
      config.configure(httpServer);
    }
 catch (    Exception e) {
      throw new InitialisationException(e,this);
    }
  }
  try {
    muleContext.registerListener(new MuleContextNotificationListener<MuleContextNotification>(){
      public void onNotification(      MuleContextNotification notification){
        if (notification.getAction() == MuleContextNotification.CONTEXT_STARTED) {
          setInitialStateStopped(false);
          try {
            start();
          }
 catch (          MuleException e) {
            throw new MuleRuntimeException(CoreMessages.failedToStart(getName()),e);
          }
        }
      }
    }
);
  }
 catch (  NotificationException e) {
    throw new InitialisationException(e,this);
  }
}
