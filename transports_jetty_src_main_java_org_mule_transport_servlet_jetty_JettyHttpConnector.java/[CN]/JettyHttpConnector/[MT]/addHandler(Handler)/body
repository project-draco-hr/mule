{
  final Connector c=httpServer.getConnectors()[0];
  if (handler instanceof WebAppContext) {
    final WebAppContext webapp=(WebAppContext)handler;
    final File workDir=new File(muleContext.getConfiguration().getWorkingDirectory(),"_exploded_wars" + webapp.getContextPath());
    workDir.mkdirs();
    webapp.setTempDirectory(workDir);
    webapp.setAttribute(MULE_CONTEXT_ATTRIBUTE,muleContext);
    if (logger.isInfoEnabled()) {
      final String msg=String.format("Will deploy a web app at %s:/%s%s%s","http",c.getHost(),c.getPort() == 80 ? StringUtils.EMPTY : ":" + c.getPort(),webapp.getContextPath());
      logger.info(StringMessageUtils.getBoilerPlate(msg,'*',70));
    }
  }
  ContextHandlerCollection contextHandlers=(ContextHandlerCollection)httpServer.getHandler();
  if (contextHandlers == null) {
    contextHandlers=new ContextHandlerCollection();
  }
  contextHandlers.addHandler(handler);
  httpServer.setHandler(contextHandlers);
}
