{
  List<ZipResource> resources=new ArrayList<>();
  try {
    walkFileTree(path,new SimpleFileVisitor<Path>(){
      public FileVisitResult visitFile(      Path file,      BasicFileAttributes attrs) throws IOException {
        resources.add(new ZipResource(file.toString(),removeStart(file.toString(),path.toString() + separator)));
        return CONTINUE;
      }
    }
);
  }
 catch (  IOException e) {
    throw new UncheckedIOException(e);
  }
  compress(targetFile,resources.toArray(new ZipResource[resources.size()]));
}
