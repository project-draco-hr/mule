{
  if (!failureSendingResponse) {
    String temp=ExceptionHelper.getErrorMapping(getConnector().getProtocol(),exception.getClass(),getMuleContext());
    int httpStatus=Integer.valueOf(temp);
    try {
      httpServerConnection.writeFailureResponse(httpStatus,exception.getMessage());
    }
 catch (    IOException e) {
      throw new DefaultMuleException(e);
    }
  }
}
