{
  if (container == null) {
    throw new IllegalStateException("Pico container has not been set");
  }
  if (key == null) {
    throw new ObjectNotFoundException("Component not found for null key");
  }
  if (key instanceof ContainerKeyPair) {
    key=((ContainerKeyPair)key).getKey();
  }
  Object component=null;
  if (key instanceof String) {
    try {
      Class keyClass=ClassHelper.loadClass((String)key,getClass());
      component=container.getComponentInstance(keyClass);
    }
 catch (    ClassNotFoundException e) {
      component=container.getComponentInstance(key);
    }
  }
 else {
    component=container.getComponentInstance(key);
  }
  if (component == null) {
    throw new ObjectNotFoundException("Component not found for key: " + key.toString());
  }
  return component;
}
