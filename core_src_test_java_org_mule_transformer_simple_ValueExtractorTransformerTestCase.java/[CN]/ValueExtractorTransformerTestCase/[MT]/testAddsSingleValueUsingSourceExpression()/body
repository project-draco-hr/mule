{
  List<ValueExtractorTransformer.ValueExtractorTemplate> enrichExpressionPairs=new ArrayList<ValueExtractorTransformer.ValueExtractorTemplate>();
  enrichExpressionPairs.add(new ValueExtractorTransformer.ValueExtractorTemplate("TEST(\\w+)TEST","#[header:INVOCATION:propName]",false,null));
  ValueExtractorTransformer transformer=createPropertyGeneratorTransformer("#[payload:]",enrichExpressionPairs);
  DefaultMuleMessage testMessage=new DefaultMuleMessage("TESTfooTEST",muleContext);
  Object response=transformer.transform(testMessage);
  DefaultMuleMessage responseMessage=(DefaultMuleMessage)response;
  assertPropertyAddedToMessage(responseMessage,"propName","foo",PropertyScope.INVOCATION);
}
