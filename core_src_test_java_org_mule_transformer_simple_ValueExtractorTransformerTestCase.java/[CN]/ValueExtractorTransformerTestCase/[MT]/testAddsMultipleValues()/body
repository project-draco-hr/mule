{
  List<ValueExtractorTransformer.ValueExtractorTemplate> enrichExpressionPairs=new ArrayList<ValueExtractorTransformer.ValueExtractorTemplate>();
  enrichExpressionPairs.add(new ValueExtractorTransformer.ValueExtractorTemplate("TEST(\\w+)TEST\\w+TEST","#[header:INVOCATION:propName1]",false,null));
  enrichExpressionPairs.add(new ValueExtractorTransformer.ValueExtractorTemplate("TEST\\w+TEST(\\w+)TEST","#[header:INVOCATION:propName2]",false,null));
  ValueExtractorTransformer transformer=createPropertyGeneratorTransformer("TESTfooTESTbarTEST",enrichExpressionPairs);
  DefaultMuleMessage testMessage=new DefaultMuleMessage("TEST",muleContext);
  Object response=transformer.transform(testMessage);
  DefaultMuleMessage responseMessage=(DefaultMuleMessage)response;
  assertPropertyAddedToMessage(responseMessage,"propName1","foo",PropertyScope.INVOCATION);
  assertPropertyAddedToMessage(responseMessage,"propName2","bar",PropertyScope.INVOCATION);
}
