{
  Flow flow=(Flow)muleContext.getRegistry().lookupFlowConstruct("customMessageSource");
  TestMessageSource source=(TestMessageSource)flow.getMessageSource();
  Event result=source.fireEvent(Event.builder(DefaultEventContext.create(flow,TEST_CONNECTOR)).message(InternalMessage.of("a")).build());
  assertEquals("abcd",result.getMessageAsString(muleContext));
}
