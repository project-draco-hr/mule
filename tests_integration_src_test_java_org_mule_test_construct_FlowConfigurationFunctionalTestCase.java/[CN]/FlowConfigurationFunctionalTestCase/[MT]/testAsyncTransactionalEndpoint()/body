{
  Exception e=flowRunner("async-tx").withPayload("0").transactionally(TransactionConfigEnum.ACTION_NONE,new TestTransactionFactory()).asynchronously().runExpectingException();
  assertThat(e,instanceOf(MessagingException.class));
  assertThat(e.getMessage(),containsString("The <async> element cannot be used with transactions"));
  final LocalMuleClient client=muleContext.getClient();
  final MuleMessage result=client.request("test://async-requestresponse-out",RECEIVE_TIMEOUT);
  final MuleMessage asyncResult=client.request("test://async-async-oneway-out",RECEIVE_TIMEOUT);
  assertNull(result);
  assertNull(asyncResult);
}
