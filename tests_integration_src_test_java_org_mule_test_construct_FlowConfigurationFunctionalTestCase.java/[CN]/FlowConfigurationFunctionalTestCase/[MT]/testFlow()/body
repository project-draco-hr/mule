{
  final Flow flow=muleContext.getRegistry().lookupObject("flow");
  assertEquals(DefaultInboundEndpoint.class,flow.getMessageSource().getClass());
  assertEquals("vm://in",((InboundEndpoint)flow.getMessageSource()).getEndpointURI().getUri().toString());
  assertEquals(5,flow.getMessageProcessors().size());
  assertNotNull(flow.getExceptionListener());
  assertEquals("012xyzabc3",getPayloadAsString(muleContext.getClient().send("vm://in",new DefaultMuleMessage("0",muleContext))));
}
