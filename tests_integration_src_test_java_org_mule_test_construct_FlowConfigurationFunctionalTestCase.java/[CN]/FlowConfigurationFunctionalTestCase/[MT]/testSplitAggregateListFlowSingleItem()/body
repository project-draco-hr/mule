{
  final Apple apple=new Apple();
  final FruitBowl fruitBowl=new FruitBowl();
  fruitBowl.addFruit(apple);
  muleContext.getClient().send("vm://split-aggregate-singleton-list-in",new DefaultMuleMessage(fruitBowl.getFruit(),muleContext));
  final MuleMessage result=muleContext.getClient().request("vm://split-aggregate-singleton-list-out",RECEIVE_TIMEOUT);
  assertNotNull(result);
  assertTrue(result instanceof MuleMessageCollection);
  final MuleMessageCollection coll=(MuleMessageCollection)result;
  assertEquals(1,coll.size());
  final List<?> results=(List<?>)coll.getPayload();
  assertTrue(apple.isBitten());
  assertTrue(results.contains(apple));
}
