{
  if (message instanceof Packet) {
    this.message=(Packet)message;
    for (Iterator iter=this.message.getPropertyNames(); iter.hasNext(); ) {
      String name=(String)iter.next();
      setProperty(name,this.message.getProperty(name));
    }
    if (this.message instanceof Message) {
      setProperty("subject",((Message)this.message).getSubject());
      setProperty("thread",((Message)this.message).getThread());
    }
  }
 else {
    throw new MessageTypeNotSupportedException(message,getClass());
  }
}
