{
  Flow flow=mock(Flow.class);
  when(flow.isSynchronous()).thenReturn(false);
  when(flow.getMuleContext()).thenReturn(muleContext);
  MuleEvent event=MuleEvent.builder(DefaultMessageContext.create(flow,TEST_CONNECTOR)).message(muleMessage).flow(flow).build();
  populateFieldsFromInboundEndpoint(event,createMockTransactionalInboundEndpoint());
  assertThat(event.isSynchronous(),equalTo(true));
  assertThat(event.isTransacted(),equalTo(true));
}
