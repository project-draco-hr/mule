{
  super.doInitialise();
  initialiseProcessingStrategy();
  pipeline=createPipeline();
  if (messageSource != null) {
    messageSource.setListener(new AbstractInterceptingMessageProcessor(){
      @Override public MuleEvent process(      MuleEvent event) throws MuleException {
        return pipeline.process(event);
      }
    }
);
  }
  injectFlowConstructMuleContext(messageSource);
  injectExceptionHandler(messageSource);
  injectFlowConstructMuleContext(pipeline);
  injectExceptionHandler(pipeline);
  initialiseIfInitialisable(messageSource);
  initialiseIfInitialisable(pipeline);
  createFlowMap();
}
