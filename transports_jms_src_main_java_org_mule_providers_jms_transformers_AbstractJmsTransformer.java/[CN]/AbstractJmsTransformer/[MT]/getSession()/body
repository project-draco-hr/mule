{
  UMOImmutableEndpoint endpoint=this.getEndpoint();
  if (endpoint != null) {
    UMOMessageDispatcher dispatcher=endpoint.getConnector().getDispatcher(endpoint);
    return (Session)dispatcher.getDelegateSession();
  }
 else {
    throw new TransformerException(this,new IllegalStateException("This transformer needs a valid endpoint"));
  }
}
