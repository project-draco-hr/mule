{
  try {
    if (logger.isDebugEnabled()) {
      logger.debug("Message type received is: " + source.getClass().getName());
    }
    String jmsSpec=JmsConstants.JMS_SPECIFICATION_102B;
    UMOImmutableEndpoint endpoint=this.getEndpoint();
    if (endpoint != null) {
      UMOConnector connector=endpoint.getConnector();
      if (connector instanceof JmsConnector) {
        jmsSpec=((JmsConnector)connector).getSpecification();
      }
    }
    return JmsMessageUtils.toObject(source,jmsSpec);
  }
 catch (  Exception e) {
    throw new TransformerException(this,e);
  }
}
