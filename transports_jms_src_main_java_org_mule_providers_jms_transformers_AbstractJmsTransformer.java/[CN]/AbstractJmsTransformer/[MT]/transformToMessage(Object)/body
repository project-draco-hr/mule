{
  try {
    Message result;
    if (src instanceof Message) {
      result=(Message)src;
      result.clearProperties();
    }
 else {
      result=JmsMessageUtils.getMessageForObject(src,this.getSession());
    }
    UMOEventContext ctx=RequestContext.getEventContext();
    if (ctx == null) {
      logger.warn("There is no current event context");
      return result;
    }
    this.setJmsProperties(ctx.getMessage(),result);
    return result;
  }
 catch (  Exception e) {
    throw new TransformerException(this,e);
  }
}
