{
  if (object == null || object instanceof NullPayload && isAllowNullReturn()) {
    return object;
  }
  if (returnType != null) {
    DataType<?> dt=DataType.fromType(object.getClass());
    if (!returnType.isCompatibleWith(dt)) {
      throw new TransformerMessagingException(CoreMessages.transformUnexpectedType(dt,returnType),event,this);
    }
  }
  if (logger.isDebugEnabled()) {
    logger.debug("The transformed object is of expected type. Type is: " + ClassUtils.getSimpleName(object.getClass()));
  }
  return object;
}
