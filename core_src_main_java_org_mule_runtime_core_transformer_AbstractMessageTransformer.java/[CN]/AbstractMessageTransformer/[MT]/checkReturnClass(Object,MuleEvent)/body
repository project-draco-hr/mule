{
  if (object == null || object instanceof NullPayload && isAllowNullReturn()) {
    return object;
  }
  if (getReturnDataType() != null) {
    DataType dt=DataType.fromType(object.getClass());
    if (!getReturnDataType().isCompatibleWith(dt)) {
      throw new TransformerMessagingException(CoreMessages.transformUnexpectedType(dt,getReturnDataType()),event,this);
    }
  }
  if (logger.isDebugEnabled()) {
    logger.debug("The transformed object is of expected type. Type is: " + ClassUtils.getSimpleName(object.getClass()));
  }
  return object;
}
