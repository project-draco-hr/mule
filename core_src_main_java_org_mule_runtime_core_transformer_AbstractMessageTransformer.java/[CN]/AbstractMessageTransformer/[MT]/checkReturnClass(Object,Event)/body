{
  if (object == null && isAllowNullReturn()) {
    return object;
  }
  if (getReturnDataType() != null) {
    DataType dt=DataType.fromObject(object);
    if (!getReturnDataType().isCompatibleWith(dt)) {
      throw new MessageTransformerException(CoreMessages.transformUnexpectedType(dt,getReturnDataType()),this);
    }
  }
  if (logger.isDebugEnabled()) {
    logger.debug("The transformed object is of expected type. Type is: " + ClassUtils.getSimpleName(object.getClass()));
  }
  return object;
}
