{
  assertThat(extensionDeclaration.getOperations(),hasSize(22));
  WithOperationsDeclaration withOperationsDeclaration=extensionDeclaration.getConfigurations().get(0);
  assertThat(withOperationsDeclaration.getOperations().size(),is(8));
  assertOperation(withOperationsDeclaration,SAY_MY_NAME_OPERATION,"");
  assertOperation(withOperationsDeclaration,GET_ENEMY_OPERATION,"");
  assertOperation(extensionDeclaration,KILL_OPERATION,"");
  assertOperation(extensionDeclaration,KILL_CUSTOM_OPERATION,"");
  assertOperation(extensionDeclaration,KILL_WITH_WEAPON,"");
  assertOperation(extensionDeclaration,KILL_WITH_RICINS,"");
  assertOperation(extensionDeclaration,KILL_WITH_MULTIPLES_WEAPONS,"");
  assertOperation(extensionDeclaration,KILL_WITH_MULTIPLE_WILDCARD_WEAPONS,"");
  assertOperation(withOperationsDeclaration,GET_PAYMENT_FROM_EVENT_OPERATION,"");
  assertOperation(withOperationsDeclaration,GET_PAYMENT_FROM_MESSAGE_OPERATION,"");
  assertOperation(withOperationsDeclaration,DIE,"");
  assertOperation(extensionDeclaration,KILL_MANY,"");
  assertOperation(extensionDeclaration,KILL_ONE,"");
  assertOperation(withOperationsDeclaration,LAUNDER_MONEY,"");
  assertOperation(extensionDeclaration,INJECTED_EXTENSION_MANAGER,"");
  assertOperation(extensionDeclaration,ALIAS,"");
  assertOperation(withOperationsDeclaration,CALL_SAUL,"");
  assertOperation(extensionDeclaration,CALL_GUS_FRING,"");
  assertOperation(withOperationsDeclaration,GET_SAUL_PHONE,"");
  assertOperation(extensionDeclaration,GET_MEDICAL_HISTORY,"");
  assertOperation(extensionDeclaration,GET_GRAMS_IN_STORAGE,"");
  assertOperation(extensionDeclaration,APPROVE_INVESTMENT,"");
  assertOperation(extensionDeclaration,GET_PAGED_PERSONAL_INFO_OPERATION,"");
  assertOperation(extensionDeclaration,EMPTY_PAGED_OPERATION,"");
  assertOperation(extensionDeclaration,FAILING_PAGED_OPERATION,"");
  assertOperation(extensionDeclaration,CONNECTION_PAGED_OPERATION,"");
  OperationDeclaration operation=getOperation(withOperationsDeclaration,SAY_MY_NAME_OPERATION);
  assertThat(operation,is(notNullValue()));
  assertThat(operation.getParameters().isEmpty(),is(true));
  operation=getOperation(withOperationsDeclaration,GET_ENEMY_OPERATION);
  assertThat(operation,is(notNullValue()));
  assertThat(operation.getParameters(),hasSize(1));
  assertThat(operation.getOutput().getType(),equalTo(toMetadataType(String.class)));
  assertThat(operation.getOutputAttributes().getType(),equalTo(toMetadataType(IntegerAttributes.class)));
  assertParameter(operation.getParameters(),"index","",toMetadataType(int.class),false,SUPPORTED,"0");
  operation=getOperation(extensionDeclaration,KILL_OPERATION);
  assertThat(operation,is(notNullValue()));
  assertThat(operation.getParameters(),hasSize(2));
  assertThat(operation.getOutput().getType(),equalTo(toMetadataType(String.class)));
  assertThat(operation.getOutputAttributes().getType(),is(instanceOf(NullType.class)));
  assertParameter(operation.getParameters(),"victim","",toMetadataType(String.class),false,SUPPORTED,"#[payload]");
  assertParameter(operation.getParameters(),"goodbyeMessage","",toMetadataType(String.class),true,SUPPORTED,null);
  operation=getOperation(extensionDeclaration,KILL_WITH_WEAPON);
  assertThat(operation,is(notNullValue()));
  assertThat(operation.getParameters(),hasSize(3));
  assertParameter(operation.getParameters(),"weapon","",toMetadataType(Weapon.class),true,SUPPORTED,null);
  assertParameter(operation.getParameters(),"type","",toMetadataType(WeaponType.class),true,SUPPORTED,null);
  assertParameter(operation.getParameters(),"attributesOfWeapon","",toMetadataType(Weapon.WeaponAttributes.class),true,SUPPORTED,null);
  operation=getOperation(extensionDeclaration,KILL_WITH_RICINS);
  assertThat(operation,is(notNullValue()));
  assertThat(operation.getParameters(),hasSize(1));
  assertParameter(operation.getParameters(),"ricinList","",arrayOf(List.class,objectTypeBuilder(Ricin.class)),false,SUPPORTED,"#[payload]");
  operation=getOperation(extensionDeclaration,KILL_WITH_MULTIPLES_WEAPONS);
  assertThat(operation,is(notNullValue()));
  assertThat(operation.getParameters(),hasSize(1));
  assertParameter(operation.getParameters(),"weaponList","",arrayOf(List.class,objectTypeBuilder(Weapon.class)),false,SUPPORTED,"#[payload]");
  operation=getOperation(extensionDeclaration,KILL_WITH_MULTIPLE_WILDCARD_WEAPONS);
  assertThat(operation,is(notNullValue()));
  assertThat(operation.getParameters(),hasSize(1));
  assertParameter(operation.getParameters(),"wildCardWeapons","",arrayOf(List.class,objectTypeBuilder(Weapon.class)),true,SUPPORTED,null);
  operation=getOperation(extensionDeclaration,KILL_CUSTOM_OPERATION);
  assertThat(operation,is(notNullValue()));
  assertThat(operation.getParameters(),hasSize(2));
  assertParameter(operation.getParameters(),"victim","",toMetadataType(String.class),false,SUPPORTED,"#[payload]");
  assertParameter(operation.getParameters(),"goodbyeMessage","",toMetadataType(String.class),true,SUPPORTED,null);
  operation=getOperation(withOperationsDeclaration,GET_PAYMENT_FROM_EVENT_OPERATION);
  assertThat(operation,is(notNullValue()));
  assertThat(operation.getParameters().isEmpty(),is(true));
  operation=getOperation(withOperationsDeclaration,GET_PAYMENT_FROM_MESSAGE_OPERATION);
  assertThat(operation,is(notNullValue()));
  assertThat(operation.getOutput().getType(),is(instanceOf(NullType.class)));
  assertThat(operation.getOutputAttributes().getType(),is(instanceOf(NullType.class)));
  assertThat(operation.getParameters().isEmpty(),is(true));
  operation=getOperation(withOperationsDeclaration,LAUNDER_MONEY);
  assertParameter(operation.getParameters(),"amount","",toMetadataType(long.class),true,SUPPORTED,null);
  operation=getOperation(extensionDeclaration,INJECTED_EXTENSION_MANAGER);
  assertThat(operation,is(notNullValue()));
  assertThat(operation.getParameters().isEmpty(),is(true));
  operation=getOperation(extensionDeclaration,ALIAS);
  assertParameter(operation.getParameters(),"greeting","",toMetadataType(String.class),true,SUPPORTED,null);
  assertParameter(operation.getParameters(),"myName","",toMetadataType(String.class),false,SUPPORTED,HEISENBERG);
  assertParameter(operation.getParameters(),"age","",toMetadataType(Integer.class),false,SUPPORTED,AGE);
  operation=getOperation(extensionDeclaration,KNOCK);
  assertParameter(operation.getParameters(),"knockedDoor","",toMetadataType(KnockeableDoor.class),true,SUPPORTED,null);
  operation=getOperation(extensionDeclaration,KNOCK_MANY);
  assertParameter(operation.getParameters(),"doors","",arrayOf(List.class,objectTypeBuilder(KnockeableDoor.class)),true,SUPPORTED,null);
  operation=getOperation(withOperationsDeclaration,CALL_SAUL);
  assertThat(operation.getParameters(),is(empty()));
  operation=getOperation(extensionDeclaration,CURE_CANCER);
  assertThat(operation.getParameters(),is(empty()));
  java.util.Optional<ExceptionEnricherFactory> exceptionEnricherFactory=operation.getExceptionEnricherFactory();
  assertThat(exceptionEnricherFactory.isPresent(),is(true));
  assertThat(exceptionEnricherFactory.get().createEnricher(),instanceOf(CureCancerExceptionEnricher.class));
  operation=getOperation(extensionDeclaration,GET_MEDICAL_HISTORY);
  assertParameter(operation.getParameters(),"healthByYear","",TYPE_BUILDER.dictionaryType().id(Map.class.getName()).ofKey(TYPE_BUILDER.numberType().id(Integer.class.getName())).ofValue(TYPE_LOADER.load(HealthStatus.class)).build(),true,SUPPORTED,null);
  operation=getOperation(extensionDeclaration,GET_GRAMS_IN_STORAGE);
  assertThat(operation,is(notNullValue()));
  assertParameter(operation.getParameters(),"grams","",TYPE_LOADER.load(int[][].class),false,SUPPORTED,"#[payload]");
  assertThat(operation.getOutput().getType(),is(TYPE_LOADER.load(int[][].class)));
  operation=getOperation(extensionDeclaration,APPROVE_INVESTMENT);
  assertThat(operation,is(notNullValue()));
  assertParameter(operation.getParameters(),"investment","",TYPE_LOADER.load(Investment.class),true,SUPPORTED,null);
  assertThat(getType(operation.getOutput().getType()),equalTo(getType(TYPE_LOADER.load(Investment.class))));
  operation=getOperation(extensionDeclaration,IGNORED_OPERATION);
  assertThat(operation,is(nullValue()));
  operation=getOperation(extensionDeclaration,GET_PAGED_PERSONAL_INFO_OPERATION);
  assertThat(operation.getModelProperty(PagedOperationModelProperty.class).isPresent(),is(true));
  assertThat(operation.getOutput().getType(),is(TYPE_LOADER.load(PersonalInfo.class)));
}
