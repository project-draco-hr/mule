{
  if (filter == null)   return true;
  Object payload=null;
  if (transformFirst) {
    try {
      payload=event.getTransformedMessage();
    }
 catch (    TransformerException e) {
      throw new RoutingException("Failed to transform message before applying the filter: " + e.getMessage(),e);
    }
  }
 else {
    payload=event.getMessage().getPayload();
  }
  return filter.accept(payload);
}
