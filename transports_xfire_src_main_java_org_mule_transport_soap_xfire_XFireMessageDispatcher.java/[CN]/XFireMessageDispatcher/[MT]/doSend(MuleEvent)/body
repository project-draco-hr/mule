{
  if (event.getEndpoint().getProperty("complexTypes") != null) {
    configureClientForComplexTypes(this.client,event);
  }
  this.client.setTimeout(event.getTimeout());
  this.client.setProperty(MuleProperties.MULE_EVENT_PROPERTY,event);
  String method=getMethod(event);
  String soapAction=(String)event.getMessage().getProperty(SoapConstants.SOAP_ACTION_PROPERTY);
  if (soapAction != null) {
    soapAction=parseSoapAction(soapAction,new QName(method),event);
    this.client.setProperty(org.codehaus.xfire.soap.SoapConstants.SOAP_ACTION,soapAction);
  }
  Object[] arr=event.getMessage().getPropertyNames().toArray();
  String head;
  for (int i=0; i < arr.length; i++) {
    head=(String)arr[i];
    if ((head != null) && (!head.startsWith("MULE"))) {
      this.client.setProperty((String)arr[i],event.getMessage().getProperty((String)arr[i]));
    }
  }
  Object[] response=client.invoke(method,getArgs(event));
  MuleMessage result=null;
  if (response != null && response.length <= 1) {
    if (response.length == 1) {
      result=new DefaultMuleMessage(response[0],event.getMessage());
    }
  }
 else {
    result=new DefaultMuleMessage(response,event.getMessage());
  }
  return result;
}
