{
  MuleClient client=muleContext.getClient();
  MuleMessage message=client.send("vm://complexRequest",new ComplexData("Foo",new Integer(84)),null);
  assertNotNull(message);
  assertTrue(message.getPayload() instanceof ComplexData);
  ComplexData result=(ComplexData)message.getPayload();
  assertEquals(new Integer(84),result.getSomeInteger());
  assertEquals("Foo",result.getSomeString());
}
