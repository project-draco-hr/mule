{
  if (!initialised.get() || socket.isClosed()) {
    URI uri=new URI(endpoint);
    port=uri.getPort();
    inetAddress=InetAddress.getByName(uri.getHost());
    socket=createSocket(port,inetAddress);
    socket.setReuseAddress(true);
    socket.setReceiveBufferSize(connector.getBufferSize());
    socket.setSendBufferSize(connector.getBufferSize());
    socket.setSoTimeout(connector.getTimeout());
    printWriter=new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())));
    dataOut=new DataOutputStream(new BufferedOutputStream(socket.getOutputStream()));
    initialised.set(true);
  }
}
