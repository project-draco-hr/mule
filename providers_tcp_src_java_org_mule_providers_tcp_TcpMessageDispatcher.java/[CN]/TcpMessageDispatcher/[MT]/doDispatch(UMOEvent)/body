{
  try {
    Object payload=event.getTransformedMessage();
    if (!connector.isKeepSendSocketOpen()) {
      connectedSocket=initSocket(event.getEndpoint().getEndpointURI().getAddress());
    }
 else {
      reconnect(event,connector.getMaxRetryCount());
    }
    try {
      write(connectedSocket,payload);
    }
 catch (    IOException e) {
      if (connector.isKeepSendSocketOpen()) {
        logger.warn("Write raised exception: '" + e.getMessage() + "' attempting to reconnect.");
        doDispose();
        if (reconnect(event,connector.getMaxRetryCount()))         write(connectedSocket,payload);
      }
 else {
        throw e;
      }
    }
  }
  finally {
    if (!connector.isKeepSendSocketOpen()) {
      doDispose();
    }
  }
}
