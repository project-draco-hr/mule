{
  if (message == null) {
    return null;
  }
  InputStream in;
  if (message instanceof byte[]) {
    in=new ByteArrayInputStream((byte[])message);
  }
 else {
    in=(InputStream)message;
  }
  try {
    return wireFormat.read(in);
  }
 catch (  MuleException e) {
    throw new IOException(e.getDetailedMessage());
  }
}
