{
  try {
    if (value != null && value.getRawValue() != null) {
      return accept(value.resolveValue(event));
    }
 else {
      final MuleMessage transformedMessage=muleContext.getTransformationService().transform(event.getMessage(),DataTypeFactory.STRING);
      if (isConsumable(event.getMessage().getDataType().getType())) {
        event.setMessage(transformedMessage);
      }
      return accept(transformedMessage.getPayload());
    }
  }
 catch (  Exception e) {
    throw new IllegalArgumentException(e);
  }
}
