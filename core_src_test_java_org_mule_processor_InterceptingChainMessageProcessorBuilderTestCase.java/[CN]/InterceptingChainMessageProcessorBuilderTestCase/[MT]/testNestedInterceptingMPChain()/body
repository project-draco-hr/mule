{
  InterceptingChainMessageProcessorBuilder builder=new InterceptingChainMessageProcessorBuilder();
  builder.chain(new AppendingInterceptingMP("1"),new InterceptingChainMessageProcessorBuilder().chain(new AppendingInterceptingMP("a"),new AppendingInterceptingMP("b")).build(),new AppendingInterceptingMP("2"));
  assertEquals("0before1beforeabeforebafterbafterabefore2after2after1",builder.build().process(getTestEvent("0")).getMessageAsString());
}
