{
  InterceptingChainMessageProcessorBuilder builder=new InterceptingChainMessageProcessorBuilder();
  builder.chain(new AppendingMP("1"));
  builder.chain(new MessageProcessorBuilder(){
    public MessageProcessor build(){
      return new AppendingMP("2");
    }
  }
);
  builder.chain(new AppendingMP("3"));
  assertEquals("0123",builder.build().process(getTestEvent("0")).getMessageAsString());
}
