{
  if (ClassUtils.getMethod(bean.getClass(),SET_PROPERTIES_METHOD,new Class[]{Map.class}) != null) {
    BeanUtils.setProperty(bean,"properties",props);
  }
 else {
    Map master=describe(bean);
    for (Iterator iterator=props.keySet().iterator(); iterator.hasNext(); ) {
      Object o=iterator.next();
      if (!master.containsKey(o)) {
        throw new IllegalArgumentException(CoreMessages.propertyDoesNotExistOnObject(o.toString(),bean).getMessage());
      }
    }
    org.apache.commons.beanutils.BeanUtils.populate(bean,props);
  }
}
