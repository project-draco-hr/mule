{
  MuleMessage message=event.getMessage();
  if (replyTo != null) {
    event.setMessage(MuleMessage.builder(message).replyTo(replyTo).addOutboundProperty(MULE_REPLY_TO_REQUESTOR_PROPERTY,service.getName()).build());
  }
  if (enableCorrelation != CorrelationMode.NEVER) {
    String correlation=service.getMessageInfoMapping().getCorrelationId(event);
    if (logger.isDebugEnabled()) {
      logger.debug("Correlation is " + message.getCorrelation().toString());
      logger.debug("Extracted correlation Id as: " + correlation);
      StringBuilder buf=new StringBuilder();
      buf.append("Setting Correlation info on Outbound router");
      buf.append(SystemUtils.LINE_SEPARATOR).append("Id=").append(correlation);
      logger.debug(buf.toString());
    }
    event.setMessage(MuleMessage.builder(message).correlationId(correlation).build());
  }
}
